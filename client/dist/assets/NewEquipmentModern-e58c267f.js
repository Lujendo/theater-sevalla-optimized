import{u as te,a as ae,b as ne,r as h,c as N,d as K,e as oe,j as e,L as ie,B as _,E as se,g as le,f as ce,h as re,i as de}from"./index-58871510.js";import"./pdf-excel-b0340315.js";const he=()=>{var M,$,F,O,B,W,z,Q,V;const q=te(),k=ae(),{user:S}=ne(),[l,b]=h.useState({type_id:"",category_id:"",category:"",brand:"",model:"",serial_number:"",status:"available",location:"",location_id:"",description:"",reference_image_id:"",quantity:1,installation_type:"portable",installation_location:"",installation_location_id:"",installation_quantity:0,installation_date:"",installation_notes:"",maintenance_schedule:"",last_maintenance_date:"",next_maintenance_date:""}),[v,C]=h.useState([]),[T,y]=h.useState(""),[P,ue]=h.useState(0),[U,H]=h.useState(!1),[m,R]=h.useState(!1),[t,p]=h.useState({allocationType:"storage",showId:"",locationId:"",quantity:1,installationType:"portable",installationLocationId:"",installationLocation:"",installationDate:"",installationNotes:"",maintenanceSchedule:""}),{data:I}=N({queryKey:["equipment-types"],queryFn:le,staleTime:3e5}),{data:f}=N({queryKey:["categories"],queryFn:ce,staleTime:3e5}),{data:s}=N({queryKey:["locations"],queryFn:re,staleTime:3e5}),{data:g}=N({queryKey:["default-storage-locations"],queryFn:async()=>(await K.get("/api/default-storage-locations")).data,staleTime:3e5}),{data:x}=N({queryKey:["shows"],queryFn:async()=>(await K.get("/api/shows")).data,staleTime:3e5,enabled:m&&t.allocationType==="show"}),G=["available","in-use","maintenance","unavailable","broken"];h.useEffect(()=>{var a;if(((a=g==null?void 0:g.defaultStorageLocations)==null?void 0:a.length)>0&&!l.location_id){const o=g.defaultStorageLocations[0];console.log("ðŸª Setting default storage location:",o),b(i=>{var n;return{...i,location_id:o.location_id.toString(),location:((n=o.location)==null?void 0:n.name)||o.name||"Default Storage",status:"available"}})}},[g,l.location_id]),h.useEffect(()=>{var a,o;if(((a=s==null?void 0:s.locations)==null?void 0:a.length)>0&&!l.location_id&&!((o=g==null?void 0:g.defaultStorageLocations)!=null&&o.length)){const i=s.locations.find(n=>{var c,r,u,d;return((c=n.name)==null?void 0:c.toLowerCase().includes("storage"))||((r=n.name)==null?void 0:r.toLowerCase().includes("lager"))||((u=n.name)==null?void 0:u.toLowerCase().includes("warehouse"))||((d=n.name)==null?void 0:d.toLowerCase().includes("depot"))})||s.locations[0];console.log("ðŸª Setting fallback default location:",i),b(n=>({...n,location_id:i.id.toString(),location:i.name,status:"available"}))}},[s,l.location_id,g]),h.useEffect(()=>{var r,u;if(!m)return;let a=!1,o="",i="",n=l.status;switch(t.allocationType){case"storage":break;case"show":t.showId&&(n="in-use",console.log("ðŸ“º Equipment allocated to show - status set to in-use"));break;case"location":if(t.locationId){const d=(r=s==null?void 0:s.locations)==null?void 0:r.find(w=>w.id.toString()===t.locationId);d&&(a=!0,o=t.locationId,i=d.name,n="in-use",console.log("ðŸ“ Overriding location to allocated location:",d.name))}break;case"installation":if(t.installationLocationId){const d=(u=s==null?void 0:s.locations)==null?void 0:u.find(w=>w.id.toString()===t.installationLocationId);d&&(a=!0,o=t.installationLocationId,i=d.name,n="in-use",console.log("ðŸ”§ Overriding location to installation location:",d.name))}else t.installationLocation&&(a=!0,o="",i=t.installationLocation,n="in-use",console.log("ðŸ”§ Overriding location to custom installation location:",t.installationLocation));break}let c=!1;l.quantity,(t.allocationType==="location"||t.allocationType==="installation")&&t.quantity>0&&t.quantity<(l.quantity||1)?console.log(`ðŸ“Š Partial allocation: ${t.quantity} of ${l.quantity} items`):(t.allocationType==="location"||t.allocationType==="installation")&&t.quantity===(l.quantity||1)&&console.log(`ðŸ“Š Full allocation: all ${t.quantity} items allocated`),(a||n!==l.status||c)&&b(d=>({...d,...a&&{location_id:o,location:i},...c,status:n}))},[t,s,m,l.status,l.quantity]);const j=oe({mutationFn:async a=>de(a.equipment,a.files),onSuccess:a=>{k.invalidateQueries({queryKey:["equipment"]}),k.invalidateQueries({queryKey:["equipment-list"]}),k.invalidateQueries({queryKey:["equipment-summary"]}),H(!0),y(""),setTimeout(()=>{var o;(o=a==null?void 0:a.equipment)!=null&&o.id?q(`/equipment/${a.equipment.id}`):q("/equipment")},1500)},onError:a=>{var o,i;console.error("Error creating equipment:",a),y(((i=(o=a.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to create equipment")}}),J=a=>{const{name:o,value:i}=a.target;let n={...l,[o]:i};if(o==="category_id"&&i&&(f!=null&&f.categories)){const c=f.categories.find(r=>r.id.toString()===i);c&&(console.log("Selected category:",c),n={...n,category_id:i,category:c.name})}else if(o==="location_id"&&i){const c=s==null?void 0:s.locations.find(r=>r.id.toString()===i);if(c){console.log("ðŸª Selected location:",c),n={...n,location_id:i,location:c.name};const r=c.name.toLowerCase().includes("lager")||c.name.toLowerCase().includes("storage")||c.name.toLowerCase().includes("warehouse")||c.name.toLowerCase().includes("depot");l.installation_type==="fixed"||l.installation_type==="semi-permanent"?(n.status="in-use",console.log('ðŸ”§ Setting status to "in-use" because equipment is installed')):r?(n.status="available",console.log('ðŸ“¦ Setting status to "available" because location is storage')):n.status==="available"&&(n.status="in-use",console.log(`ðŸŽ¯ Setting status to "in-use" because location is not storage (${c.name})`))}}else if(o==="location"&&i){n={...n,location:i,location_id:""};const c=i.toLowerCase().includes("lager")||i.toLowerCase().includes("storage")||i.toLowerCase().includes("warehouse")||i.toLowerCase().includes("depot");l.installation_type==="fixed"||l.installation_type==="semi-permanent"?(n.status="in-use",console.log('ðŸ”§ Setting status to "in-use" because equipment is installed')):c?(n.status="available",console.log('ðŸ“¦ Setting status to "available" because custom location is storage')):n.status==="available"&&(n.status="in-use",console.log(`ðŸŽ¯ Setting status to "in-use" because custom location is not storage (${i})`))}else if(o==="installation_location_id"&&i){const c=s==null?void 0:s.locations.find(r=>r.id.toString()===i);c&&(console.log("Selected installation location:",c),n={...n,installation_location_id:i,installation_location:c.name})}else if(o==="installation_location"&&i)n={...n,installation_location:i,installation_location_id:""};else if(o==="installation_type"){if(n={...n,installation_type:i},i==="fixed"||i==="semi-permanent")n.status="in-use",console.log(`Setting status to "in-use" because installation type is ${i}`);else if(i==="portable"){const r=(l.location||"").toLowerCase()==="lager";n.status=r?"available":"in-use",console.log(`Setting status to "${n.status}" because installation type is portable`)}}else if(o==="quantity"){const c=parseInt(i)||1;n.quantity=Math.max(1,c),console.log(`Setting quantity to: ${n.quantity}`)}else if(o==="installation_quantity"){const c=parseInt(i)||0;n.installation_quantity=Math.max(0,c),console.log(`Setting installation quantity to: ${n.installation_quantity}`)}else if(o==="status"){console.log(`User manually changed status to: ${i}`);const r=(l.location||"").toLowerCase()==="lager";(l.installation_type==="fixed"||l.installation_type==="semi-permanent")&&i!=="in-use"?(console.log('Forcing status back to "in-use" because installation type is fixed/semi-permanent'),n.status="in-use"):r&&i!=="available"&&(console.log('Forcing status back to "available" because location is Lager'),n.status="available")}b(n)},X=a=>{C(a)},Y=a=>{b({...l,reference_image_id:a.toString()})},Z=a=>{const o=[...v];l.reference_image_id===a.toString()&&b({...l,reference_image_id:""}),o.splice(a,1),C(o)},A=a=>{var c,r;if(a&&a.preventDefault(),!l.type_id||!l.brand||!l.model){y("Type, brand, and model are required");return}if(m&&t.allocationType!=="storage"){if(t.allocationType==="show"&&!t.showId){y("Please select a show for allocation");return}if(t.allocationType==="location"&&!t.locationId){y("Please select a location for allocation");return}if(t.allocationType==="installation"&&!t.installationLocationId&&!t.installationLocation){y("Please select or enter an installation location");return}if(t.quantity>(l.quantity||1)){y("Allocation quantity cannot exceed total equipment quantity");return}}const o=l.reference_image_id==="new"&&v.length>0?v.find((u,d)=>d===0):null,i=o?v.filter(u=>u!==o):v,n={...l};if(m&&t.allocationType!=="storage"){switch(console.log("ðŸ”„ ALLOCATION OVERRIDE: Form values will be overridden by allocation settings"),console.log("ðŸ“‹ Original form data:",{location:l.location,location_id:l.location_id,status:l.status,quantity:l.quantity}),t.allocationType){case"show":n.status="in-use",console.log("ðŸ“º Show allocation: status set to in-use");break;case"location":if(t.locationId){const u=(c=s==null?void 0:s.locations)==null?void 0:c.find(d=>d.id.toString()===t.locationId);u&&(n.location_id=t.locationId,n.location=u.name,n.status="in-use",console.log("ðŸ“ Location allocation override:",u.name))}break;case"installation":if(t.installationLocationId){const u=(r=s==null?void 0:s.locations)==null?void 0:r.find(d=>d.id.toString()===t.installationLocationId);u&&(n.location_id=t.installationLocationId,n.location=u.name,n.status="in-use",console.log("ðŸ”§ Installation location override:",u.name))}else t.installationLocation&&(n.location_id="",n.location=t.installationLocation,n.status="in-use",console.log("ðŸ”§ Custom installation location override:",t.installationLocation));n.installation_type=t.installationType,n.installation_location=t.installationLocation||"",n.installation_location_id=t.installationLocationId||"",n.installation_quantity=t.quantity||0,n.installation_date=t.installationDate||"",n.installation_notes=t.installationNotes||"",n.maintenance_schedule=t.maintenanceSchedule||"";break}console.log("âœ… FINAL DATABASE VALUES:",{location:n.location,location_id:n.location_id,status:n.status,quantity:n.quantity,allocation_type:t.allocationType})}j.mutate({equipment:{...n,reference_image_id:l.reference_image_id==="new"?"new":l.reference_image_id},files:i,referenceImageFile:o,allocation:m?t:null})},E=()=>{q("/equipment")},D=()=>{var a,o,i,n,c,r;if(!m||t.allocationType==="storage")return null;switch(t.allocationType){case"show":const u=t.showId&&((o=(a=x==null?void 0:x.shows)==null?void 0:a.find(L=>L.id.toString()===t.showId))==null?void 0:o.name);return u?`Allocated to show "${u}"`:"Allocated to show";case"location":const d=t.locationId&&((n=(i=s==null?void 0:s.locations)==null?void 0:i.find(L=>L.id.toString()===t.locationId))==null?void 0:n.name);return d?`Allocated to ${d}`:"Allocated to location";case"installation":const w=t.installationLocationId&&((r=(c=s==null?void 0:s.locations)==null?void 0:c.find(L=>L.id.toString()===t.installationLocationId))==null?void 0:r.name),ee=t.installationLocation;return`Installed at ${w||ee||"installation location"} (${t.installationType})`;default:return null}};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-slate-600 mb-1",children:[e.jsx(ie,{to:"/equipment",className:"hover:text-slate-800 transition-colors",children:"Equipment"}),e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),e.jsx("span",{className:"text-slate-800 font-medium",children:"Add New Equipment"})]}),e.jsx("h1",{className:"text-xl font-bold text-slate-800",children:"Add New Equipment"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>R(!m),className:"flex items-center",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),m?"Hide":"Allocate"]}),e.jsx(_,{variant:"primary",size:"sm",onClick:A,disabled:j.isLoading,className:"flex items-center min-w-[120px]",children:j.isLoading?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-1 h-3 w-3",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create Equipment"]})}),e.jsxs(_,{variant:"secondary",size:"sm",onClick:E,disabled:j.isLoading,className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]})]})]})}),m&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4",children:[e.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-3",children:"Allocation Options"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Allocation Type"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"allocationType",value:"storage",checked:t.allocationType==="storage",onChange:a=>p(o=>({...o,allocationType:a.target.value})),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Default Storage"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"allocationType",value:"show",checked:t.allocationType==="show",onChange:a=>p(o=>({...o,allocationType:a.target.value})),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Allocate to Show"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"allocationType",value:"location",checked:t.allocationType==="location",onChange:a=>p(o=>({...o,allocationType:a.target.value})),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Allocate to Location"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"allocationType",value:"installation",checked:t.allocationType==="installation",onChange:a=>p(o=>({...o,allocationType:a.target.value})),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Install Equipment"})]})]})]}),t.allocationType==="show"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Select Show"}),e.jsxs("select",{value:t.showId,onChange:a=>p(o=>({...o,showId:a.target.value})),className:"w-full rounded-md border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm",children:[e.jsx("option",{value:"",children:"Select a show..."}),(M=x==null?void 0:x.shows)==null?void 0:M.map(a=>e.jsxs("option",{value:a.id,children:[a.name,a.venue&&` - ${a.venue}`,a.start_date&&` (${new Date(a.start_date).toLocaleDateString()})`]},a.id))]})]}),t.allocationType==="location"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Select Location"}),e.jsxs("select",{value:t.locationId,onChange:a=>p(o=>({...o,locationId:a.target.value})),className:"w-full rounded-md border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm",children:[e.jsx("option",{value:"",children:"Select a location..."}),($=s==null?void 0:s.locations)==null?void 0:$.map(a=>e.jsxs("option",{value:a.id,children:[a.name,a.city&&` (${a.city})`]},a.id))]})]}),t.allocationType==="installation"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Installation Type"}),e.jsxs("select",{value:t.installationType,onChange:a=>p(o=>({...o,installationType:a.target.value})),className:"w-full rounded-md border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm",children:[e.jsx("option",{value:"portable",children:"Portable (can be moved freely)"}),e.jsx("option",{value:"semi-permanent",children:"Semi-permanent (can be moved with approval)"}),e.jsx("option",{value:"fixed",children:"Fixed (permanently installed)"})]})]}),t.allocationType==="installation"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Installation Location"}),e.jsxs("select",{value:t.installationLocationId,onChange:a=>p(o=>({...o,installationLocationId:a.target.value})),className:"w-full rounded-md border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm",children:[e.jsx("option",{value:"",children:"Select installation location..."}),(F=s==null?void 0:s.locations)==null?void 0:F.map(a=>e.jsxs("option",{value:a.id,children:[a.name,a.city&&` (${a.city})`]},a.id))]})]}),t.allocationType!=="storage"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t.allocationType==="installation"?"Installation Quantity":"Allocation Quantity"}),e.jsx("input",{type:"number",min:t.allocationType==="installation"?"0":"1",max:l.quantity||1,value:t.quantity,onChange:a=>p(o=>({...o,quantity:parseInt(a.target.value)||(t.allocationType==="installation"?0:1)})),className:"w-full rounded-md border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:t.allocationType==="installation"?`Items to install (0-${l.quantity||1})`:`Max: ${l.quantity||1} (total equipment quantity)`})]})]}),t.allocationType==="installation"&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-semibold text-slate-800 mb-3 flex items-center",children:[e.jsx("div",{className:"p-1 bg-orange-100 rounded mr-2",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),"Installation Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Installation Date"}),e.jsx("input",{type:"date",value:t.installationDate,onChange:a=>p(o=>({...o,installationDate:a.target.value})),className:"w-full rounded-md border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Maintenance Schedule"}),e.jsxs("select",{value:t.maintenanceSchedule,onChange:a=>p(o=>({...o,maintenanceSchedule:a.target.value})),className:"w-full rounded-md border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm",children:[e.jsx("option",{value:"",children:"No schedule set"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"semi-annually",children:"Semi-annually"}),e.jsx("option",{value:"annually",children:"Annually"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Custom Location (if not in list)"}),e.jsx("input",{type:"text",value:t.installationLocation,onChange:a=>p(o=>({...o,installationLocation:a.target.value})),placeholder:"Enter custom installation location",className:"w-full rounded-md border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Installation Notes"}),e.jsx("textarea",{value:t.installationNotes,onChange:a=>p(o=>({...o,installationNotes:a.target.value})),rows:"2",placeholder:"Enter installation notes, special requirements, or instructions",className:"w-full rounded-md border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm"})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-slate-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-slate-600",children:[t.allocationType==="storage"&&e.jsx("span",{children:"Equipment will be stored in default storage location"}),t.allocationType==="show"&&e.jsxs("span",{children:[t.quantity," item(s) will be allocated to show",t.showId&&((B=(O=x==null?void 0:x.shows)==null?void 0:O.find(a=>a.id.toString()===t.showId))==null?void 0:B.name)&&` "${x.shows.find(a=>a.id.toString()===t.showId).name}"`]}),t.allocationType==="location"&&e.jsxs("span",{children:[t.quantity," item(s) will be allocated to location",t.locationId&&((z=(W=s==null?void 0:s.locations)==null?void 0:W.find(a=>a.id.toString()===t.locationId))==null?void 0:z.name)&&` (${s.locations.find(a=>a.id.toString()===t.locationId).name})`]}),t.allocationType==="installation"&&e.jsxs("span",{children:[t.quantity," item(s) will be installed as ",t.installationType,t.installationLocationId&&((V=(Q=s==null?void 0:s.locations)==null?void 0:Q.find(a=>a.id.toString()===t.installationLocationId))==null?void 0:V.name)&&` at ${s.locations.find(a=>a.id.toString()===t.installationLocationId).name}`,t.installationLocation&&!t.installationLocationId&&` at ${t.installationLocation}`,t.installationDate&&` on ${new Date(t.installationDate).toLocaleDateString()}`]})]})})]}),T&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 text-red-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm text-red-700 flex-1",children:T}),e.jsx("button",{onClick:()=>y(""),className:"text-red-400 hover:text-red-600 ml-2",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),U&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 text-green-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm text-green-700",children:"Equipment created successfully! Redirecting..."})]})}),e.jsx(se,{formData:l,equipmentTypes:(I==null?void 0:I.types)||[],categoriesData:(f==null?void 0:f.categories)||[],statusOptions:G,locationsData:s,handleInputChange:J,handleFileChange:X,handleSubmit:A,handleCancel:E,isLoading:j.isLoading,error:T,files:v,uploadProgress:P,handleSetReferenceImage:Y,handleFileDelete:Z,allocationOverride:{isLocationOverridden:m&&t.allocationType!=="storage",isStatusOverridden:m&&t.allocationType!=="storage",isQuantityOverridden:m&&t.allocationType!=="storage",allocationSummary:m?D():null}}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(S==null?void 0:S.role)==="admin"&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:e.jsxs("svg",{className:"h-4 w-4 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-800",children:"Manage Types & Categories"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Configure equipment types and locations"})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>q("/settings"),className:"text-blue-700 border-blue-300 hover:bg-blue-100 text-xs px-2 py-1",children:"Settings"})]})}),e.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-1.5 bg-slate-100 rounded-lg",children:e.jsx("svg",{className:"h-4 w-4 text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-800",children:"Quick Tips"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Use barcode scanner â€¢ Set installation type â€¢ Upload reference image"})]})]})})]})]})};export{he as default};
//# sourceMappingURL=NewEquipmentModern-e58c267f.js.map
