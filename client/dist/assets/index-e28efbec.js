var Wk=Object.defineProperty;var Hk=(e,n,t)=>n in e?Wk(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var tt=(e,n,t)=>(Hk(e,typeof n!="symbol"?n+"":n,t),t);import{g as Rf,c as Da,_ as $l}from"./pdf-excel-b0340315.js";function P3(e,n){for(var t=0;t<n.length;t++){const r=n[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(r,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var F3={exports:{}},Of={},B3={exports:{}},zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _u=Symbol.for("react.element"),Vk=Symbol.for("react.portal"),$k=Symbol.for("react.fragment"),Yk=Symbol.for("react.strict_mode"),Qk=Symbol.for("react.profiler"),Gk=Symbol.for("react.provider"),Xk=Symbol.for("react.context"),Kk=Symbol.for("react.forward_ref"),Zk=Symbol.for("react.suspense"),Jk=Symbol.for("react.memo"),eA=Symbol.for("react.lazy"),Ty=Symbol.iterator;function tA(e){return e===null||typeof e!="object"?null:(e=Ty&&e[Ty]||e["@@iterator"],typeof e=="function"?e:null)}var U3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z3=Object.assign,q3={};function Rc(e,n,t){this.props=e,this.context=n,this.refs=q3,this.updater=t||U3}Rc.prototype.isReactComponent={};Rc.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};Rc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function W3(){}W3.prototype=Rc.prototype;function tg(e,n,t){this.props=e,this.context=n,this.refs=q3,this.updater=t||U3}var ng=tg.prototype=new W3;ng.constructor=tg;z3(ng,Rc.prototype);ng.isPureReactComponent=!0;var Dy=Array.isArray,H3=Object.prototype.hasOwnProperty,rg={current:null},V3={key:!0,ref:!0,__self:!0,__source:!0};function $3(e,n,t){var r,a={},o=null,d=null;if(n!=null)for(r in n.ref!==void 0&&(d=n.ref),n.key!==void 0&&(o=""+n.key),n)H3.call(n,r)&&!V3.hasOwnProperty(r)&&(a[r]=n[r]);var m=arguments.length-2;if(m===1)a.children=t;else if(1<m){for(var v=Array(m),g=0;g<m;g++)v[g]=arguments[g+2];a.children=v}if(e&&e.defaultProps)for(r in m=e.defaultProps,m)a[r]===void 0&&(a[r]=m[r]);return{$$typeof:_u,type:e,key:o,ref:d,props:a,_owner:rg.current}}function nA(e,n){return{$$typeof:_u,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function sg(e){return typeof e=="object"&&e!==null&&e.$$typeof===_u}function rA(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(t){return n[t]})}var Iy=/\/+/g;function Am(e,n){return typeof e=="object"&&e!==null&&e.key!=null?rA(""+e.key):n.toString(36)}function dh(e,n,t,r,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(o){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case _u:case Vk:d=!0}}if(d)return d=e,a=a(d),e=r===""?"."+Am(d,0):r,Dy(a)?(t="",e!=null&&(t=e.replace(Iy,"$&/")+"/"),dh(a,n,t,"",function(g){return g})):a!=null&&(sg(a)&&(a=nA(a,t+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(Iy,"$&/")+"/")+e)),n.push(a)),1;if(d=0,r=r===""?".":r+":",Dy(e))for(var m=0;m<e.length;m++){o=e[m];var v=r+Am(o,m);d+=dh(o,n,t,v,a)}else if(v=tA(e),typeof v=="function")for(e=v.call(e),m=0;!(o=e.next()).done;)o=o.value,v=r+Am(o,m++),d+=dh(o,n,t,v,a);else if(o==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return d}function L0(e,n,t){if(e==null)return e;var r=[],a=0;return dh(e,r,"","",function(o){return n.call(t,o,a++)}),r}function sA(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var Kr={current:null},uh={transition:null},aA={ReactCurrentDispatcher:Kr,ReactCurrentBatchConfig:uh,ReactCurrentOwner:rg};function Y3(){throw Error("act(...) is not supported in production builds of React.")}zt.Children={map:L0,forEach:function(e,n,t){L0(e,function(){n.apply(this,arguments)},t)},count:function(e){var n=0;return L0(e,function(){n++}),n},toArray:function(e){return L0(e,function(n){return n})||[]},only:function(e){if(!sg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};zt.Component=Rc;zt.Fragment=$k;zt.Profiler=Qk;zt.PureComponent=tg;zt.StrictMode=Yk;zt.Suspense=Zk;zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aA;zt.act=Y3;zt.cloneElement=function(e,n,t){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=z3({},e.props),a=e.key,o=e.ref,d=e._owner;if(n!=null){if(n.ref!==void 0&&(o=n.ref,d=rg.current),n.key!==void 0&&(a=""+n.key),e.type&&e.type.defaultProps)var m=e.type.defaultProps;for(v in n)H3.call(n,v)&&!V3.hasOwnProperty(v)&&(r[v]=n[v]===void 0&&m!==void 0?m[v]:n[v])}var v=arguments.length-2;if(v===1)r.children=t;else if(1<v){m=Array(v);for(var g=0;g<v;g++)m[g]=arguments[g+2];r.children=m}return{$$typeof:_u,type:e.type,key:a,ref:o,props:r,_owner:d}};zt.createContext=function(e){return e={$$typeof:Xk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Gk,_context:e},e.Consumer=e};zt.createElement=$3;zt.createFactory=function(e){var n=$3.bind(null,e);return n.type=e,n};zt.createRef=function(){return{current:null}};zt.forwardRef=function(e){return{$$typeof:Kk,render:e}};zt.isValidElement=sg;zt.lazy=function(e){return{$$typeof:eA,_payload:{_status:-1,_result:e},_init:sA}};zt.memo=function(e,n){return{$$typeof:Jk,type:e,compare:n===void 0?null:n}};zt.startTransition=function(e){var n=uh.transition;uh.transition={};try{e()}finally{uh.transition=n}};zt.unstable_act=Y3;zt.useCallback=function(e,n){return Kr.current.useCallback(e,n)};zt.useContext=function(e){return Kr.current.useContext(e)};zt.useDebugValue=function(){};zt.useDeferredValue=function(e){return Kr.current.useDeferredValue(e)};zt.useEffect=function(e,n){return Kr.current.useEffect(e,n)};zt.useId=function(){return Kr.current.useId()};zt.useImperativeHandle=function(e,n,t){return Kr.current.useImperativeHandle(e,n,t)};zt.useInsertionEffect=function(e,n){return Kr.current.useInsertionEffect(e,n)};zt.useLayoutEffect=function(e,n){return Kr.current.useLayoutEffect(e,n)};zt.useMemo=function(e,n){return Kr.current.useMemo(e,n)};zt.useReducer=function(e,n,t){return Kr.current.useReducer(e,n,t)};zt.useRef=function(e){return Kr.current.useRef(e)};zt.useState=function(e){return Kr.current.useState(e)};zt.useSyncExternalStore=function(e,n,t){return Kr.current.useSyncExternalStore(e,n,t)};zt.useTransition=function(){return Kr.current.useTransition()};zt.version="18.3.1";B3.exports=zt;var M=B3.exports;const ge=Rf(M),ag=P3({__proto__:null,default:ge},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iA=M,oA=Symbol.for("react.element"),lA=Symbol.for("react.fragment"),cA=Object.prototype.hasOwnProperty,dA=iA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uA={key:!0,ref:!0,__self:!0,__source:!0};function Q3(e,n,t){var r,a={},o=null,d=null;t!==void 0&&(o=""+t),n.key!==void 0&&(o=""+n.key),n.ref!==void 0&&(d=n.ref);for(r in n)cA.call(n,r)&&!uA.hasOwnProperty(r)&&(a[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps,n)a[r]===void 0&&(a[r]=n[r]);return{$$typeof:oA,type:e,key:o,ref:d,props:a,_owner:dA.current}}Of.Fragment=lA;Of.jsx=Q3;Of.jsxs=Q3;F3.exports=Of;var s=F3.exports,b1={},G3={exports:{}},ks={},X3={exports:{}},K3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(fe,Ie){var ue=fe.length;fe.push(Ie);e:for(;0<ue;){var Ye=ue-1>>>1,we=fe[Ye];if(0<a(we,Ie))fe[Ye]=Ie,fe[ue]=we,ue=Ye;else break e}}function t(fe){return fe.length===0?null:fe[0]}function r(fe){if(fe.length===0)return null;var Ie=fe[0],ue=fe.pop();if(ue!==Ie){fe[0]=ue;e:for(var Ye=0,we=fe.length,Ve=we>>>1;Ye<Ve;){var Be=2*(Ye+1)-1,ct=fe[Be],Ae=Be+1,Se=fe[Ae];if(0>a(ct,ue))Ae<we&&0>a(Se,ct)?(fe[Ye]=Se,fe[Ae]=ue,Ye=Ae):(fe[Ye]=ct,fe[Be]=ue,Ye=Be);else if(Ae<we&&0>a(Se,ue))fe[Ye]=Se,fe[Ae]=ue,Ye=Ae;else break e}}return Ie}function a(fe,Ie){var ue=fe.sortIndex-Ie.sortIndex;return ue!==0?ue:fe.id-Ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var d=Date,m=d.now();e.unstable_now=function(){return d.now()-m}}var v=[],g=[],w=1,b=null,_=3,E=!1,T=!1,I=!1,k=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(fe){for(var Ie=t(g);Ie!==null;){if(Ie.callback===null)r(g);else if(Ie.startTime<=fe)r(g),Ie.sortIndex=Ie.expirationTime,n(v,Ie);else break;Ie=t(g)}}function P(fe){if(I=!1,O(fe),!T)if(t(v)!==null)T=!0,Q($);else{var Ie=t(g);Ie!==null&&me(P,Ie.startTime-fe)}}function $(fe,Ie){T=!1,I&&(I=!1,S(W),W=-1),E=!0;var ue=_;try{for(O(Ie),b=t(v);b!==null&&(!(b.expirationTime>Ie)||fe&&!oe());){var Ye=b.callback;if(typeof Ye=="function"){b.callback=null,_=b.priorityLevel;var we=Ye(b.expirationTime<=Ie);Ie=e.unstable_now(),typeof we=="function"?b.callback=we:b===t(v)&&r(v),O(Ie)}else r(v);b=t(v)}if(b!==null)var Ve=!0;else{var Be=t(g);Be!==null&&me(P,Be.startTime-Ie),Ve=!1}return Ve}finally{b=null,_=ue,E=!1}}var L=!1,F=null,W=-1,V=5,re=-1;function oe(){return!(e.unstable_now()-re<V)}function ee(){if(F!==null){var fe=e.unstable_now();re=fe;var Ie=!0;try{Ie=F(!0,fe)}finally{Ie?he():(L=!1,F=null)}}else L=!1}var he;if(typeof A=="function")he=function(){A(ee)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,ne=ve.port2;ve.port1.onmessage=ee,he=function(){ne.postMessage(null)}}else he=function(){k(ee,0)};function Q(fe){F=fe,L||(L=!0,he())}function me(fe,Ie){W=k(function(){fe(e.unstable_now())},Ie)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(fe){fe.callback=null},e.unstable_continueExecution=function(){T||E||(T=!0,Q($))},e.unstable_forceFrameRate=function(fe){0>fe||125<fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<fe?Math.floor(1e3/fe):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_getFirstCallbackNode=function(){return t(v)},e.unstable_next=function(fe){switch(_){case 1:case 2:case 3:var Ie=3;break;default:Ie=_}var ue=_;_=Ie;try{return fe()}finally{_=ue}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(fe,Ie){switch(fe){case 1:case 2:case 3:case 4:case 5:break;default:fe=3}var ue=_;_=fe;try{return Ie()}finally{_=ue}},e.unstable_scheduleCallback=function(fe,Ie,ue){var Ye=e.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Ye+ue:Ye):ue=Ye,fe){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=ue+we,fe={id:w++,callback:Ie,priorityLevel:fe,startTime:ue,expirationTime:we,sortIndex:-1},ue>Ye?(fe.sortIndex=ue,n(g,fe),t(v)===null&&fe===t(g)&&(I?(S(W),W=-1):I=!0,me(P,ue-Ye))):(fe.sortIndex=we,n(v,fe),T||E||(T=!0,Q($))),fe},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(fe){var Ie=_;return function(){var ue=_;_=Ie;try{return fe.apply(this,arguments)}finally{_=ue}}}})(K3);X3.exports=K3;var hA=X3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fA=M,Ss=hA;function We(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Z3=new Set,Zd={};function vl(e,n){xc(e,n),xc(e+"Capture",n)}function xc(e,n){for(Zd[e]=n,e=0;e<n.length;e++)Z3.add(n[e])}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),N1=Object.prototype.hasOwnProperty,pA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,My={},Ry={};function mA(e){return N1.call(Ry,e)?!0:N1.call(My,e)?!1:pA.test(e)?Ry[e]=!0:(My[e]=!0,!1)}function xA(e,n,t,r){if(t!==null&&t.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function gA(e,n,t,r){if(n===null||typeof n>"u"||xA(e,n,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function Zr(e,n,t,r,a,o,d){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=o,this.removeEmptyString=d}var jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jr[e]=new Zr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];jr[n]=new Zr(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jr[e]=new Zr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jr[e]=new Zr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jr[e]=new Zr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jr[e]=new Zr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jr[e]=new Zr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jr[e]=new Zr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jr[e]=new Zr(e,5,!1,e.toLowerCase(),null,!1,!1)});var ig=/[\-:]([a-z])/g;function og(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(ig,og);jr[n]=new Zr(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(ig,og);jr[n]=new Zr(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(ig,og);jr[n]=new Zr(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jr[e]=new Zr(e,1,!1,e.toLowerCase(),null,!1,!1)});jr.xlinkHref=new Zr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jr[e]=new Zr(e,1,!1,e.toLowerCase(),null,!0,!0)});function lg(e,n,t,r){var a=jr.hasOwnProperty(n)?jr[n]:null;(a!==null?a.type!==0:r||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(gA(n,t,a,r)&&(t=null),r||a===null?mA(n)&&(t===null?e.removeAttribute(n):e.setAttribute(n,""+t)):a.mustUseProperty?e[a.propertyName]=t===null?a.type===3?!1:"":t:(n=a.attributeName,r=a.attributeNamespace,t===null?e.removeAttribute(n):(a=a.type,t=a===3||a===4&&t===!0?"":""+t,r?e.setAttributeNS(r,n,t):e.setAttribute(n,t))))}var Ei=fA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P0=Symbol.for("react.element"),Yl=Symbol.for("react.portal"),Ql=Symbol.for("react.fragment"),cg=Symbol.for("react.strict_mode"),j1=Symbol.for("react.profiler"),J3=Symbol.for("react.provider"),e4=Symbol.for("react.context"),dg=Symbol.for("react.forward_ref"),C1=Symbol.for("react.suspense"),_1=Symbol.for("react.suspense_list"),ug=Symbol.for("react.memo"),Vi=Symbol.for("react.lazy"),t4=Symbol.for("react.offscreen"),Oy=Symbol.iterator;function jd(e){return e===null||typeof e!="object"?null:(e=Oy&&e[Oy]||e["@@iterator"],typeof e=="function"?e:null)}var On=Object.assign,Tm;function Ld(e){if(Tm===void 0)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);Tm=n&&n[1]||""}return`
`+Tm+e}var Dm=!1;function Im(e,n){if(!e||Dm)return"";Dm=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(g){var r=g}Reflect.construct(e,[],n)}else{try{n.call()}catch(g){r=g}e.call(n.prototype)}else{try{throw Error()}catch(g){r=g}e()}}catch(g){if(g&&r&&typeof g.stack=="string"){for(var a=g.stack.split(`
`),o=r.stack.split(`
`),d=a.length-1,m=o.length-1;1<=d&&0<=m&&a[d]!==o[m];)m--;for(;1<=d&&0<=m;d--,m--)if(a[d]!==o[m]){if(d!==1||m!==1)do if(d--,m--,0>m||a[d]!==o[m]){var v=`
`+a[d].replace(" at new "," at ");return e.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",e.displayName)),v}while(1<=d&&0<=m);break}}}finally{Dm=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?Ld(e):""}function vA(e){switch(e.tag){case 5:return Ld(e.type);case 16:return Ld("Lazy");case 13:return Ld("Suspense");case 19:return Ld("SuspenseList");case 0:case 2:case 15:return e=Im(e.type,!1),e;case 11:return e=Im(e.type.render,!1),e;case 1:return e=Im(e.type,!0),e;default:return""}}function E1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ql:return"Fragment";case Yl:return"Portal";case j1:return"Profiler";case cg:return"StrictMode";case C1:return"Suspense";case _1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case e4:return(e.displayName||"Context")+".Consumer";case J3:return(e._context.displayName||"Context")+".Provider";case dg:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ug:return n=e.displayName||null,n!==null?n:E1(e.type)||"Memo";case Vi:n=e._payload,e=e._init;try{return E1(e(n))}catch{}}return null}function yA(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E1(n);case 8:return n===cg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function po(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function n4(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function wA(e){var n=n4(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),r=""+e[n];if(!e.hasOwnProperty(n)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var a=t.get,o=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return a.call(this)},set:function(d){r=""+d,o.call(this,d)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(d){r=""+d},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function F0(e){e._valueTracker||(e._valueTracker=wA(e))}function r4(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),r="";return e&&(r=n4(e)?e.checked?"true":"false":e.value),e=r,e!==t?(n.setValue(e),!0):!1}function Rh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function S1(e,n){var t=n.checked;return On({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??e._wrapperState.initialChecked})}function Ly(e,n){var t=n.defaultValue==null?"":n.defaultValue,r=n.checked!=null?n.checked:n.defaultChecked;t=po(n.value!=null?n.value:t),e._wrapperState={initialChecked:r,initialValue:t,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function s4(e,n){n=n.checked,n!=null&&lg(e,"checked",n,!1)}function k1(e,n){s4(e,n);var t=po(n.value),r=n.type;if(t!=null)r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?A1(e,n.type,t):n.hasOwnProperty("defaultValue")&&A1(e,n.type,po(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Py(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!(r!=="submit"&&r!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}t=e.name,t!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,t!==""&&(e.name=t)}function A1(e,n,t){(n!=="number"||Rh(e.ownerDocument)!==e)&&(t==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var Pd=Array.isArray;function lc(e,n,t,r){if(e=e.options,n){n={};for(var a=0;a<t.length;a++)n["$"+t[a]]=!0;for(t=0;t<e.length;t++)a=n.hasOwnProperty("$"+e[t].value),e[t].selected!==a&&(e[t].selected=a),a&&r&&(e[t].defaultSelected=!0)}else{for(t=""+po(t),n=null,a=0;a<e.length;a++){if(e[a].value===t){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}n!==null||e[a].disabled||(n=e[a])}n!==null&&(n.selected=!0)}}function T1(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(We(91));return On({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Fy(e,n){var t=n.value;if(t==null){if(t=n.children,n=n.defaultValue,t!=null){if(n!=null)throw Error(We(92));if(Pd(t)){if(1<t.length)throw Error(We(93));t=t[0]}n=t}n==null&&(n=""),t=n}e._wrapperState={initialValue:po(t)}}function a4(e,n){var t=po(n.value),r=po(n.defaultValue);t!=null&&(t=""+t,t!==e.value&&(e.value=t),n.defaultValue==null&&e.defaultValue!==t&&(e.defaultValue=t)),r!=null&&(e.defaultValue=""+r)}function By(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function i4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function D1(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?i4(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var B0,o4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,t,r,a){MSApp.execUnsafeLocalFunction(function(){return e(n,t,r,a)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(B0=B0||document.createElement("div"),B0.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=B0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Jd(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&t.nodeType===3){t.nodeValue=n;return}}e.textContent=n}var qd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bA=["Webkit","ms","Moz","O"];Object.keys(qd).forEach(function(e){bA.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),qd[n]=qd[e]})});function l4(e,n,t){return n==null||typeof n=="boolean"||n===""?"":t||typeof n!="number"||n===0||qd.hasOwnProperty(e)&&qd[e]?(""+n).trim():n+"px"}function c4(e,n){e=e.style;for(var t in n)if(n.hasOwnProperty(t)){var r=t.indexOf("--")===0,a=l4(t,n[t],r);t==="float"&&(t="cssFloat"),r?e.setProperty(t,a):e[t]=a}}var NA=On({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function I1(e,n){if(n){if(NA[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(We(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(We(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(We(61))}if(n.style!=null&&typeof n.style!="object")throw Error(We(62))}}function M1(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var R1=null;function hg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var O1=null,cc=null,dc=null;function Uy(e){if(e=ku(e)){if(typeof O1!="function")throw Error(We(280));var n=e.stateNode;n&&(n=Uf(n),O1(e.stateNode,e.type,n))}}function d4(e){cc?dc?dc.push(e):dc=[e]:cc=e}function u4(){if(cc){var e=cc,n=dc;if(dc=cc=null,Uy(e),n)for(e=0;e<n.length;e++)Uy(n[e])}}function h4(e,n){return e(n)}function f4(){}var Mm=!1;function p4(e,n,t){if(Mm)return e(n,t);Mm=!0;try{return h4(e,n,t)}finally{Mm=!1,(cc!==null||dc!==null)&&(f4(),u4())}}function eu(e,n){var t=e.stateNode;if(t===null)return null;var r=Uf(t);if(r===null)return null;t=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(t&&typeof t!="function")throw Error(We(231,n,typeof t));return t}var L1=!1;if(vi)try{var Cd={};Object.defineProperty(Cd,"passive",{get:function(){L1=!0}}),window.addEventListener("test",Cd,Cd),window.removeEventListener("test",Cd,Cd)}catch{L1=!1}function jA(e,n,t,r,a,o,d,m,v){var g=Array.prototype.slice.call(arguments,3);try{n.apply(t,g)}catch(w){this.onError(w)}}var Wd=!1,Oh=null,Lh=!1,P1=null,CA={onError:function(e){Wd=!0,Oh=e}};function _A(e,n,t,r,a,o,d,m,v){Wd=!1,Oh=null,jA.apply(CA,arguments)}function EA(e,n,t,r,a,o,d,m,v){if(_A.apply(this,arguments),Wd){if(Wd){var g=Oh;Wd=!1,Oh=null}else throw Error(We(198));Lh||(Lh=!0,P1=g)}}function yl(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(t=n.return),e=n.return;while(e)}return n.tag===3?t:null}function m4(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function zy(e){if(yl(e)!==e)throw Error(We(188))}function SA(e){var n=e.alternate;if(!n){if(n=yl(e),n===null)throw Error(We(188));return n!==e?null:e}for(var t=e,r=n;;){var a=t.return;if(a===null)break;var o=a.alternate;if(o===null){if(r=a.return,r!==null){t=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===t)return zy(a),e;if(o===r)return zy(a),n;o=o.sibling}throw Error(We(188))}if(t.return!==r.return)t=a,r=o;else{for(var d=!1,m=a.child;m;){if(m===t){d=!0,t=a,r=o;break}if(m===r){d=!0,r=a,t=o;break}m=m.sibling}if(!d){for(m=o.child;m;){if(m===t){d=!0,t=o,r=a;break}if(m===r){d=!0,r=o,t=a;break}m=m.sibling}if(!d)throw Error(We(189))}}if(t.alternate!==r)throw Error(We(190))}if(t.tag!==3)throw Error(We(188));return t.stateNode.current===t?e:n}function x4(e){return e=SA(e),e!==null?g4(e):null}function g4(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=g4(e);if(n!==null)return n;e=e.sibling}return null}var v4=Ss.unstable_scheduleCallback,qy=Ss.unstable_cancelCallback,kA=Ss.unstable_shouldYield,AA=Ss.unstable_requestPaint,Qn=Ss.unstable_now,TA=Ss.unstable_getCurrentPriorityLevel,fg=Ss.unstable_ImmediatePriority,y4=Ss.unstable_UserBlockingPriority,Ph=Ss.unstable_NormalPriority,DA=Ss.unstable_LowPriority,w4=Ss.unstable_IdlePriority,Lf=null,Pa=null;function IA(e){if(Pa&&typeof Pa.onCommitFiberRoot=="function")try{Pa.onCommitFiberRoot(Lf,e,void 0,(e.current.flags&128)===128)}catch{}}var da=Math.clz32?Math.clz32:OA,MA=Math.log,RA=Math.LN2;function OA(e){return e>>>=0,e===0?32:31-(MA(e)/RA|0)|0}var U0=64,z0=4194304;function Fd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Fh(e,n){var t=e.pendingLanes;if(t===0)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,d=t&268435455;if(d!==0){var m=d&~a;m!==0?r=Fd(m):(o&=d,o!==0&&(r=Fd(o)))}else d=t&~a,d!==0?r=Fd(d):o!==0&&(r=Fd(o));if(r===0)return 0;if(n!==0&&n!==r&&!(n&a)&&(a=r&-r,o=n&-n,a>=o||a===16&&(o&4194240)!==0))return n;if(r&4&&(r|=t&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=r;0<n;)t=31-da(n),a=1<<t,r|=e[t],n&=~a;return r}function LA(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PA(e,n){for(var t=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var d=31-da(o),m=1<<d,v=a[d];v===-1?(!(m&t)||m&r)&&(a[d]=LA(m,n)):v<=n&&(e.expiredLanes|=m),o&=~m}}function F1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function b4(){var e=U0;return U0<<=1,!(U0&4194240)&&(U0=64),e}function Rm(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function Eu(e,n,t){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-da(n),e[n]=t}function FA(e,n){var t=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<t;){var a=31-da(t),o=1<<a;n[a]=0,r[a]=-1,e[a]=-1,t&=~o}}function pg(e,n){var t=e.entangledLanes|=n;for(e=e.entanglements;t;){var r=31-da(t),a=1<<r;a&n|e[r]&n&&(e[r]|=n),t&=~a}}var fn=0;function N4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var j4,mg,C4,_4,E4,B1=!1,q0=[],to=null,no=null,ro=null,tu=new Map,nu=new Map,Qi=[],BA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wy(e,n){switch(e){case"focusin":case"focusout":to=null;break;case"dragenter":case"dragleave":no=null;break;case"mouseover":case"mouseout":ro=null;break;case"pointerover":case"pointerout":tu.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":nu.delete(n.pointerId)}}function _d(e,n,t,r,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:n,domEventName:t,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},n!==null&&(n=ku(n),n!==null&&mg(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,a!==null&&n.indexOf(a)===-1&&n.push(a),e)}function UA(e,n,t,r,a){switch(n){case"focusin":return to=_d(to,e,n,t,r,a),!0;case"dragenter":return no=_d(no,e,n,t,r,a),!0;case"mouseover":return ro=_d(ro,e,n,t,r,a),!0;case"pointerover":var o=a.pointerId;return tu.set(o,_d(tu.get(o)||null,e,n,t,r,a)),!0;case"gotpointercapture":return o=a.pointerId,nu.set(o,_d(nu.get(o)||null,e,n,t,r,a)),!0}return!1}function S4(e){var n=Xo(e.target);if(n!==null){var t=yl(n);if(t!==null){if(n=t.tag,n===13){if(n=m4(t),n!==null){e.blockedOn=n,E4(e.priority,function(){C4(t)});return}}else if(n===3&&t.stateNode.current.memoizedState.isDehydrated){e.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hh(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var t=U1(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(t===null){t=e.nativeEvent;var r=new t.constructor(t.type,t);R1=r,t.target.dispatchEvent(r),R1=null}else return n=ku(t),n!==null&&mg(n),e.blockedOn=t,!1;n.shift()}return!0}function Hy(e,n,t){hh(e)&&t.delete(n)}function zA(){B1=!1,to!==null&&hh(to)&&(to=null),no!==null&&hh(no)&&(no=null),ro!==null&&hh(ro)&&(ro=null),tu.forEach(Hy),nu.forEach(Hy)}function Ed(e,n){e.blockedOn===n&&(e.blockedOn=null,B1||(B1=!0,Ss.unstable_scheduleCallback(Ss.unstable_NormalPriority,zA)))}function ru(e){function n(a){return Ed(a,e)}if(0<q0.length){Ed(q0[0],e);for(var t=1;t<q0.length;t++){var r=q0[t];r.blockedOn===e&&(r.blockedOn=null)}}for(to!==null&&Ed(to,e),no!==null&&Ed(no,e),ro!==null&&Ed(ro,e),tu.forEach(n),nu.forEach(n),t=0;t<Qi.length;t++)r=Qi[t],r.blockedOn===e&&(r.blockedOn=null);for(;0<Qi.length&&(t=Qi[0],t.blockedOn===null);)S4(t),t.blockedOn===null&&Qi.shift()}var uc=Ei.ReactCurrentBatchConfig,Bh=!0;function qA(e,n,t,r){var a=fn,o=uc.transition;uc.transition=null;try{fn=1,xg(e,n,t,r)}finally{fn=a,uc.transition=o}}function WA(e,n,t,r){var a=fn,o=uc.transition;uc.transition=null;try{fn=4,xg(e,n,t,r)}finally{fn=a,uc.transition=o}}function xg(e,n,t,r){if(Bh){var a=U1(e,n,t,r);if(a===null)Hm(e,n,r,Uh,t),Wy(e,r);else if(UA(a,e,n,t,r))r.stopPropagation();else if(Wy(e,r),n&4&&-1<BA.indexOf(e)){for(;a!==null;){var o=ku(a);if(o!==null&&j4(o),o=U1(e,n,t,r),o===null&&Hm(e,n,r,Uh,t),o===a)break;a=o}a!==null&&r.stopPropagation()}else Hm(e,n,r,null,t)}}var Uh=null;function U1(e,n,t,r){if(Uh=null,e=hg(r),e=Xo(e),e!==null)if(n=yl(e),n===null)e=null;else if(t=n.tag,t===13){if(e=m4(n),e!==null)return e;e=null}else if(t===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Uh=e,null}function k4(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TA()){case fg:return 1;case y4:return 4;case Ph:case DA:return 16;case w4:return 536870912;default:return 16}default:return 16}}var Ki=null,gg=null,fh=null;function A4(){if(fh)return fh;var e,n=gg,t=n.length,r,a="value"in Ki?Ki.value:Ki.textContent,o=a.length;for(e=0;e<t&&n[e]===a[e];e++);var d=t-e;for(r=1;r<=d&&n[t-r]===a[o-r];r++);return fh=a.slice(e,1<r?1-r:void 0)}function ph(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function W0(){return!0}function Vy(){return!1}function As(e){function n(t,r,a,o,d){this._reactName=t,this._targetInst=a,this.type=r,this.nativeEvent=o,this.target=d,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(t=e[m],this[m]=t?t(o):o[m]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?W0:Vy,this.isPropagationStopped=Vy,this}return On(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=W0)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=W0)},persist:function(){},isPersistent:W0}),n}var Oc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vg=As(Oc),Su=On({},Oc,{view:0,detail:0}),HA=As(Su),Om,Lm,Sd,Pf=On({},Su,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Sd&&(Sd&&e.type==="mousemove"?(Om=e.screenX-Sd.screenX,Lm=e.screenY-Sd.screenY):Lm=Om=0,Sd=e),Om)},movementY:function(e){return"movementY"in e?e.movementY:Lm}}),$y=As(Pf),VA=On({},Pf,{dataTransfer:0}),$A=As(VA),YA=On({},Su,{relatedTarget:0}),Pm=As(YA),QA=On({},Oc,{animationName:0,elapsedTime:0,pseudoElement:0}),GA=As(QA),XA=On({},Oc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),KA=As(XA),ZA=On({},Oc,{data:0}),Yy=As(ZA),JA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n7(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=t7[e])?!!n[e]:!1}function yg(){return n7}var r7=On({},Su,{key:function(e){if(e.key){var n=JA[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ph(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?e7[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yg,charCode:function(e){return e.type==="keypress"?ph(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ph(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),s7=As(r7),a7=On({},Pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qy=As(a7),i7=On({},Su,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yg}),o7=As(i7),l7=On({},Oc,{propertyName:0,elapsedTime:0,pseudoElement:0}),c7=As(l7),d7=On({},Pf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),u7=As(d7),h7=[9,13,27,32],wg=vi&&"CompositionEvent"in window,Hd=null;vi&&"documentMode"in document&&(Hd=document.documentMode);var f7=vi&&"TextEvent"in window&&!Hd,T4=vi&&(!wg||Hd&&8<Hd&&11>=Hd),Gy=String.fromCharCode(32),Xy=!1;function D4(e,n){switch(e){case"keyup":return h7.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gl=!1;function p7(e,n){switch(e){case"compositionend":return I4(n);case"keypress":return n.which!==32?null:(Xy=!0,Gy);case"textInput":return e=n.data,e===Gy&&Xy?null:e;default:return null}}function m7(e,n){if(Gl)return e==="compositionend"||!wg&&D4(e,n)?(e=A4(),fh=gg=Ki=null,Gl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return T4&&n.locale!=="ko"?null:n.data;default:return null}}var x7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ky(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!x7[e.type]:n==="textarea"}function M4(e,n,t,r){d4(r),n=zh(n,"onChange"),0<n.length&&(t=new vg("onChange","change",null,t,r),e.push({event:t,listeners:n}))}var Vd=null,su=null;function g7(e){H4(e,0)}function Ff(e){var n=Zl(e);if(r4(n))return e}function v7(e,n){if(e==="change")return n}var R4=!1;if(vi){var Fm;if(vi){var Bm="oninput"in document;if(!Bm){var Zy=document.createElement("div");Zy.setAttribute("oninput","return;"),Bm=typeof Zy.oninput=="function"}Fm=Bm}else Fm=!1;R4=Fm&&(!document.documentMode||9<document.documentMode)}function Jy(){Vd&&(Vd.detachEvent("onpropertychange",O4),su=Vd=null)}function O4(e){if(e.propertyName==="value"&&Ff(su)){var n=[];M4(n,su,e,hg(e)),p4(g7,n)}}function y7(e,n,t){e==="focusin"?(Jy(),Vd=n,su=t,Vd.attachEvent("onpropertychange",O4)):e==="focusout"&&Jy()}function w7(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ff(su)}function b7(e,n){if(e==="click")return Ff(n)}function N7(e,n){if(e==="input"||e==="change")return Ff(n)}function j7(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var ma=typeof Object.is=="function"?Object.is:j7;function au(e,n){if(ma(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var a=t[r];if(!N1.call(n,a)||!ma(e[a],n[a]))return!1}return!0}function ew(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tw(e,n){var t=ew(e);e=0;for(var r;t;){if(t.nodeType===3){if(r=e+t.textContent.length,e<=n&&r>=n)return{node:t,offset:n-e};e=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=ew(t)}}function L4(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?L4(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function P4(){for(var e=window,n=Rh();n instanceof e.HTMLIFrameElement;){try{var t=typeof n.contentWindow.location.href=="string"}catch{t=!1}if(t)e=n.contentWindow;else break;n=Rh(e.document)}return n}function bg(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function C7(e){var n=P4(),t=e.focusedElem,r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&L4(t.ownerDocument.documentElement,t)){if(r!==null&&bg(t)){if(n=r.start,e=r.end,e===void 0&&(e=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(e,t.value.length);else if(e=(n=t.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var a=t.textContent.length,o=Math.min(r.start,a);r=r.end===void 0?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=tw(t,o);var d=tw(t,r);a&&d&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(n=n.createRange(),n.setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(n),e.extend(d.node,d.offset)):(n.setEnd(d.node,d.offset),e.addRange(n)))}}for(n=[],e=t;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<n.length;t++)e=n[t],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _7=vi&&"documentMode"in document&&11>=document.documentMode,Xl=null,z1=null,$d=null,q1=!1;function nw(e,n,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;q1||Xl==null||Xl!==Rh(r)||(r=Xl,"selectionStart"in r&&bg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$d&&au($d,r)||($d=r,r=zh(z1,"onSelect"),0<r.length&&(n=new vg("onSelect","select",null,n,t),e.push({event:n,listeners:r}),n.target=Xl)))}function H0(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var Kl={animationend:H0("Animation","AnimationEnd"),animationiteration:H0("Animation","AnimationIteration"),animationstart:H0("Animation","AnimationStart"),transitionend:H0("Transition","TransitionEnd")},Um={},F4={};vi&&(F4=document.createElement("div").style,"AnimationEvent"in window||(delete Kl.animationend.animation,delete Kl.animationiteration.animation,delete Kl.animationstart.animation),"TransitionEvent"in window||delete Kl.transitionend.transition);function Bf(e){if(Um[e])return Um[e];if(!Kl[e])return e;var n=Kl[e],t;for(t in n)if(n.hasOwnProperty(t)&&t in F4)return Um[e]=n[t];return e}var B4=Bf("animationend"),U4=Bf("animationiteration"),z4=Bf("animationstart"),q4=Bf("transitionend"),W4=new Map,rw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vo(e,n){W4.set(e,n),vl(n,[e])}for(var zm=0;zm<rw.length;zm++){var qm=rw[zm],E7=qm.toLowerCase(),S7=qm[0].toUpperCase()+qm.slice(1);vo(E7,"on"+S7)}vo(B4,"onAnimationEnd");vo(U4,"onAnimationIteration");vo(z4,"onAnimationStart");vo("dblclick","onDoubleClick");vo("focusin","onFocus");vo("focusout","onBlur");vo(q4,"onTransitionEnd");xc("onMouseEnter",["mouseout","mouseover"]);xc("onMouseLeave",["mouseout","mouseover"]);xc("onPointerEnter",["pointerout","pointerover"]);xc("onPointerLeave",["pointerout","pointerover"]);vl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vl("onBeforeInput",["compositionend","keypress","textInput","paste"]);vl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k7=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bd));function sw(e,n,t){var r=e.type||"unknown-event";e.currentTarget=t,EA(r,n,void 0,e),e.currentTarget=null}function H4(e,n){n=(n&4)!==0;for(var t=0;t<e.length;t++){var r=e[t],a=r.event;r=r.listeners;e:{var o=void 0;if(n)for(var d=r.length-1;0<=d;d--){var m=r[d],v=m.instance,g=m.currentTarget;if(m=m.listener,v!==o&&a.isPropagationStopped())break e;sw(a,m,g),o=v}else for(d=0;d<r.length;d++){if(m=r[d],v=m.instance,g=m.currentTarget,m=m.listener,v!==o&&a.isPropagationStopped())break e;sw(a,m,g),o=v}}}if(Lh)throw e=P1,Lh=!1,P1=null,e}function wn(e,n){var t=n[Y1];t===void 0&&(t=n[Y1]=new Set);var r=e+"__bubble";t.has(r)||(V4(n,e,2,!1),t.add(r))}function Wm(e,n,t){var r=0;n&&(r|=4),V4(t,e,r,n)}var V0="_reactListening"+Math.random().toString(36).slice(2);function iu(e){if(!e[V0]){e[V0]=!0,Z3.forEach(function(t){t!=="selectionchange"&&(k7.has(t)||Wm(t,!1,e),Wm(t,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[V0]||(n[V0]=!0,Wm("selectionchange",!1,n))}}function V4(e,n,t,r){switch(k4(n)){case 1:var a=qA;break;case 4:a=WA;break;default:a=xg}t=a.bind(null,n,t,e),a=void 0,!L1||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(n,t,{capture:!0,passive:a}):e.addEventListener(n,t,!0):a!==void 0?e.addEventListener(n,t,{passive:a}):e.addEventListener(n,t,!1)}function Hm(e,n,t,r,a){var o=r;if(!(n&1)&&!(n&2)&&r!==null)e:for(;;){if(r===null)return;var d=r.tag;if(d===3||d===4){var m=r.stateNode.containerInfo;if(m===a||m.nodeType===8&&m.parentNode===a)break;if(d===4)for(d=r.return;d!==null;){var v=d.tag;if((v===3||v===4)&&(v=d.stateNode.containerInfo,v===a||v.nodeType===8&&v.parentNode===a))return;d=d.return}for(;m!==null;){if(d=Xo(m),d===null)return;if(v=d.tag,v===5||v===6){r=o=d;continue e}m=m.parentNode}}r=r.return}p4(function(){var g=o,w=hg(t),b=[];e:{var _=W4.get(e);if(_!==void 0){var E=vg,T=e;switch(e){case"keypress":if(ph(t)===0)break e;case"keydown":case"keyup":E=s7;break;case"focusin":T="focus",E=Pm;break;case"focusout":T="blur",E=Pm;break;case"beforeblur":case"afterblur":E=Pm;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=$y;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=$A;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=o7;break;case B4:case U4:case z4:E=GA;break;case q4:E=c7;break;case"scroll":E=HA;break;case"wheel":E=u7;break;case"copy":case"cut":case"paste":E=KA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Qy}var I=(n&4)!==0,k=!I&&e==="scroll",S=I?_!==null?_+"Capture":null:_;I=[];for(var A=g,O;A!==null;){O=A;var P=O.stateNode;if(O.tag===5&&P!==null&&(O=P,S!==null&&(P=eu(A,S),P!=null&&I.push(ou(A,P,O)))),k)break;A=A.return}0<I.length&&(_=new E(_,T,null,t,w),b.push({event:_,listeners:I}))}}if(!(n&7)){e:{if(_=e==="mouseover"||e==="pointerover",E=e==="mouseout"||e==="pointerout",_&&t!==R1&&(T=t.relatedTarget||t.fromElement)&&(Xo(T)||T[yi]))break e;if((E||_)&&(_=w.window===w?w:(_=w.ownerDocument)?_.defaultView||_.parentWindow:window,E?(T=t.relatedTarget||t.toElement,E=g,T=T?Xo(T):null,T!==null&&(k=yl(T),T!==k||T.tag!==5&&T.tag!==6)&&(T=null)):(E=null,T=g),E!==T)){if(I=$y,P="onMouseLeave",S="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(I=Qy,P="onPointerLeave",S="onPointerEnter",A="pointer"),k=E==null?_:Zl(E),O=T==null?_:Zl(T),_=new I(P,A+"leave",E,t,w),_.target=k,_.relatedTarget=O,P=null,Xo(w)===g&&(I=new I(S,A+"enter",T,t,w),I.target=O,I.relatedTarget=k,P=I),k=P,E&&T)t:{for(I=E,S=T,A=0,O=I;O;O=ql(O))A++;for(O=0,P=S;P;P=ql(P))O++;for(;0<A-O;)I=ql(I),A--;for(;0<O-A;)S=ql(S),O--;for(;A--;){if(I===S||S!==null&&I===S.alternate)break t;I=ql(I),S=ql(S)}I=null}else I=null;E!==null&&aw(b,_,E,I,!1),T!==null&&k!==null&&aw(b,k,T,I,!0)}}e:{if(_=g?Zl(g):window,E=_.nodeName&&_.nodeName.toLowerCase(),E==="select"||E==="input"&&_.type==="file")var $=v7;else if(Ky(_))if(R4)$=N7;else{$=w7;var L=y7}else(E=_.nodeName)&&E.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&($=b7);if($&&($=$(e,g))){M4(b,$,t,w);break e}L&&L(e,_,g),e==="focusout"&&(L=_._wrapperState)&&L.controlled&&_.type==="number"&&A1(_,"number",_.value)}switch(L=g?Zl(g):window,e){case"focusin":(Ky(L)||L.contentEditable==="true")&&(Xl=L,z1=g,$d=null);break;case"focusout":$d=z1=Xl=null;break;case"mousedown":q1=!0;break;case"contextmenu":case"mouseup":case"dragend":q1=!1,nw(b,t,w);break;case"selectionchange":if(_7)break;case"keydown":case"keyup":nw(b,t,w)}var F;if(wg)e:{switch(e){case"compositionstart":var W="onCompositionStart";break e;case"compositionend":W="onCompositionEnd";break e;case"compositionupdate":W="onCompositionUpdate";break e}W=void 0}else Gl?D4(e,t)&&(W="onCompositionEnd"):e==="keydown"&&t.keyCode===229&&(W="onCompositionStart");W&&(T4&&t.locale!=="ko"&&(Gl||W!=="onCompositionStart"?W==="onCompositionEnd"&&Gl&&(F=A4()):(Ki=w,gg="value"in Ki?Ki.value:Ki.textContent,Gl=!0)),L=zh(g,W),0<L.length&&(W=new Yy(W,e,null,t,w),b.push({event:W,listeners:L}),F?W.data=F:(F=I4(t),F!==null&&(W.data=F)))),(F=f7?p7(e,t):m7(e,t))&&(g=zh(g,"onBeforeInput"),0<g.length&&(w=new Yy("onBeforeInput","beforeinput",null,t,w),b.push({event:w,listeners:g}),w.data=F))}H4(b,n)})}function ou(e,n,t){return{instance:e,listener:n,currentTarget:t}}function zh(e,n){for(var t=n+"Capture",r=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=eu(e,t),o!=null&&r.unshift(ou(e,o,a)),o=eu(e,n),o!=null&&r.push(ou(e,o,a))),e=e.return}return r}function ql(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function aw(e,n,t,r,a){for(var o=n._reactName,d=[];t!==null&&t!==r;){var m=t,v=m.alternate,g=m.stateNode;if(v!==null&&v===r)break;m.tag===5&&g!==null&&(m=g,a?(v=eu(t,o),v!=null&&d.unshift(ou(t,v,m))):a||(v=eu(t,o),v!=null&&d.push(ou(t,v,m)))),t=t.return}d.length!==0&&e.push({event:n,listeners:d})}var A7=/\r\n?/g,T7=/\u0000|\uFFFD/g;function iw(e){return(typeof e=="string"?e:""+e).replace(A7,`
`).replace(T7,"")}function $0(e,n,t){if(n=iw(n),iw(e)!==n&&t)throw Error(We(425))}function qh(){}var W1=null,H1=null;function V1(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var $1=typeof setTimeout=="function"?setTimeout:void 0,D7=typeof clearTimeout=="function"?clearTimeout:void 0,ow=typeof Promise=="function"?Promise:void 0,I7=typeof queueMicrotask=="function"?queueMicrotask:typeof ow<"u"?function(e){return ow.resolve(null).then(e).catch(M7)}:$1;function M7(e){setTimeout(function(){throw e})}function Vm(e,n){var t=n,r=0;do{var a=t.nextSibling;if(e.removeChild(t),a&&a.nodeType===8)if(t=a.data,t==="/$"){if(r===0){e.removeChild(a),ru(n);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=a}while(t);ru(n)}function so(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function lw(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var t=e.data;if(t==="$"||t==="$!"||t==="$?"){if(n===0)return e;n--}else t==="/$"&&n++}e=e.previousSibling}return null}var Lc=Math.random().toString(36).slice(2),Ia="__reactFiber$"+Lc,lu="__reactProps$"+Lc,yi="__reactContainer$"+Lc,Y1="__reactEvents$"+Lc,R7="__reactListeners$"+Lc,O7="__reactHandles$"+Lc;function Xo(e){var n=e[Ia];if(n)return n;for(var t=e.parentNode;t;){if(n=t[yi]||t[Ia]){if(t=n.alternate,n.child!==null||t!==null&&t.child!==null)for(e=lw(e);e!==null;){if(t=e[Ia])return t;e=lw(e)}return n}e=t,t=e.parentNode}return null}function ku(e){return e=e[Ia]||e[yi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(We(33))}function Uf(e){return e[lu]||null}var Q1=[],Jl=-1;function yo(e){return{current:e}}function Nn(e){0>Jl||(e.current=Q1[Jl],Q1[Jl]=null,Jl--)}function vn(e,n){Jl++,Q1[Jl]=e.current,e.current=n}var mo={},Fr=yo(mo),os=yo(!1),ll=mo;function gc(e,n){var t=e.type.contextTypes;if(!t)return mo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in t)a[o]=n[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),a}function ls(e){return e=e.childContextTypes,e!=null}function Wh(){Nn(os),Nn(Fr)}function cw(e,n,t){if(Fr.current!==mo)throw Error(We(168));vn(Fr,n),vn(os,t)}function $4(e,n,t){var r=e.stateNode;if(n=n.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var a in r)if(!(a in n))throw Error(We(108,yA(e)||"Unknown",a));return On({},t,r)}function Hh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mo,ll=Fr.current,vn(Fr,e),vn(os,os.current),!0}function dw(e,n,t){var r=e.stateNode;if(!r)throw Error(We(169));t?(e=$4(e,n,ll),r.__reactInternalMemoizedMergedChildContext=e,Nn(os),Nn(Fr),vn(Fr,e)):Nn(os),vn(os,t)}var li=null,zf=!1,$m=!1;function Y4(e){li===null?li=[e]:li.push(e)}function L7(e){zf=!0,Y4(e)}function wo(){if(!$m&&li!==null){$m=!0;var e=0,n=fn;try{var t=li;for(fn=1;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}li=null,zf=!1}catch(a){throw li!==null&&(li=li.slice(e+1)),v4(fg,wo),a}finally{fn=n,$m=!1}}return null}var ec=[],tc=0,Vh=null,$h=0,Vs=[],$s=0,cl=null,ci=1,di="";function $o(e,n){ec[tc++]=$h,ec[tc++]=Vh,Vh=e,$h=n}function Q4(e,n,t){Vs[$s++]=ci,Vs[$s++]=di,Vs[$s++]=cl,cl=e;var r=ci;e=di;var a=32-da(r)-1;r&=~(1<<a),t+=1;var o=32-da(n)+a;if(30<o){var d=a-a%5;o=(r&(1<<d)-1).toString(32),r>>=d,a-=d,ci=1<<32-da(n)+a|t<<a|r,di=o+e}else ci=1<<o|t<<a|r,di=e}function Ng(e){e.return!==null&&($o(e,1),Q4(e,1,0))}function jg(e){for(;e===Vh;)Vh=ec[--tc],ec[tc]=null,$h=ec[--tc],ec[tc]=null;for(;e===cl;)cl=Vs[--$s],Vs[$s]=null,di=Vs[--$s],Vs[$s]=null,ci=Vs[--$s],Vs[$s]=null}var _s=null,Cs=null,Sn=!1,ca=null;function G4(e,n){var t=Qs(5,null,null,0);t.elementType="DELETED",t.stateNode=n,t.return=e,n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)}function uw(e,n){switch(e.tag){case 5:var t=e.type;return n=n.nodeType!==1||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,_s=e,Cs=so(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,_s=e,Cs=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(t=cl!==null?{id:ci,overflow:di}:null,e.memoizedState={dehydrated:n,treeContext:t,retryLane:1073741824},t=Qs(18,null,null,0),t.stateNode=n,t.return=e,e.child=t,_s=e,Cs=null,!0):!1;default:return!1}}function G1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function X1(e){if(Sn){var n=Cs;if(n){var t=n;if(!uw(e,n)){if(G1(e))throw Error(We(418));n=so(t.nextSibling);var r=_s;n&&uw(e,n)?G4(r,t):(e.flags=e.flags&-4097|2,Sn=!1,_s=e)}}else{if(G1(e))throw Error(We(418));e.flags=e.flags&-4097|2,Sn=!1,_s=e}}}function hw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_s=e}function Y0(e){if(e!==_s)return!1;if(!Sn)return hw(e),Sn=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!V1(e.type,e.memoizedProps)),n&&(n=Cs)){if(G1(e))throw X4(),Error(We(418));for(;n;)G4(e,n),n=so(n.nextSibling)}if(hw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(We(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var t=e.data;if(t==="/$"){if(n===0){Cs=so(e.nextSibling);break e}n--}else t!=="$"&&t!=="$!"&&t!=="$?"||n++}e=e.nextSibling}Cs=null}}else Cs=_s?so(e.stateNode.nextSibling):null;return!0}function X4(){for(var e=Cs;e;)e=so(e.nextSibling)}function vc(){Cs=_s=null,Sn=!1}function Cg(e){ca===null?ca=[e]:ca.push(e)}var P7=Ei.ReactCurrentBatchConfig;function kd(e,n,t){if(e=t.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(We(309));var r=t.stateNode}if(!r)throw Error(We(147,e));var a=r,o=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===o?n.ref:(n=function(d){var m=a.refs;d===null?delete m[o]:m[o]=d},n._stringRef=o,n)}if(typeof e!="string")throw Error(We(284));if(!t._owner)throw Error(We(290,e))}return e}function Q0(e,n){throw e=Object.prototype.toString.call(n),Error(We(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function fw(e){var n=e._init;return n(e._payload)}function K4(e){function n(S,A){if(e){var O=S.deletions;O===null?(S.deletions=[A],S.flags|=16):O.push(A)}}function t(S,A){if(!e)return null;for(;A!==null;)n(S,A),A=A.sibling;return null}function r(S,A){for(S=new Map;A!==null;)A.key!==null?S.set(A.key,A):S.set(A.index,A),A=A.sibling;return S}function a(S,A){return S=lo(S,A),S.index=0,S.sibling=null,S}function o(S,A,O){return S.index=O,e?(O=S.alternate,O!==null?(O=O.index,O<A?(S.flags|=2,A):O):(S.flags|=2,A)):(S.flags|=1048576,A)}function d(S){return e&&S.alternate===null&&(S.flags|=2),S}function m(S,A,O,P){return A===null||A.tag!==6?(A=Jm(O,S.mode,P),A.return=S,A):(A=a(A,O),A.return=S,A)}function v(S,A,O,P){var $=O.type;return $===Ql?w(S,A,O.props.children,P,O.key):A!==null&&(A.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Vi&&fw($)===A.type)?(P=a(A,O.props),P.ref=kd(S,A,O),P.return=S,P):(P=bh(O.type,O.key,O.props,null,S.mode,P),P.ref=kd(S,A,O),P.return=S,P)}function g(S,A,O,P){return A===null||A.tag!==4||A.stateNode.containerInfo!==O.containerInfo||A.stateNode.implementation!==O.implementation?(A=e1(O,S.mode,P),A.return=S,A):(A=a(A,O.children||[]),A.return=S,A)}function w(S,A,O,P,$){return A===null||A.tag!==7?(A=sl(O,S.mode,P,$),A.return=S,A):(A=a(A,O),A.return=S,A)}function b(S,A,O){if(typeof A=="string"&&A!==""||typeof A=="number")return A=Jm(""+A,S.mode,O),A.return=S,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case P0:return O=bh(A.type,A.key,A.props,null,S.mode,O),O.ref=kd(S,null,A),O.return=S,O;case Yl:return A=e1(A,S.mode,O),A.return=S,A;case Vi:var P=A._init;return b(S,P(A._payload),O)}if(Pd(A)||jd(A))return A=sl(A,S.mode,O,null),A.return=S,A;Q0(S,A)}return null}function _(S,A,O,P){var $=A!==null?A.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return $!==null?null:m(S,A,""+O,P);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case P0:return O.key===$?v(S,A,O,P):null;case Yl:return O.key===$?g(S,A,O,P):null;case Vi:return $=O._init,_(S,A,$(O._payload),P)}if(Pd(O)||jd(O))return $!==null?null:w(S,A,O,P,null);Q0(S,O)}return null}function E(S,A,O,P,$){if(typeof P=="string"&&P!==""||typeof P=="number")return S=S.get(O)||null,m(A,S,""+P,$);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case P0:return S=S.get(P.key===null?O:P.key)||null,v(A,S,P,$);case Yl:return S=S.get(P.key===null?O:P.key)||null,g(A,S,P,$);case Vi:var L=P._init;return E(S,A,O,L(P._payload),$)}if(Pd(P)||jd(P))return S=S.get(O)||null,w(A,S,P,$,null);Q0(A,P)}return null}function T(S,A,O,P){for(var $=null,L=null,F=A,W=A=0,V=null;F!==null&&W<O.length;W++){F.index>W?(V=F,F=null):V=F.sibling;var re=_(S,F,O[W],P);if(re===null){F===null&&(F=V);break}e&&F&&re.alternate===null&&n(S,F),A=o(re,A,W),L===null?$=re:L.sibling=re,L=re,F=V}if(W===O.length)return t(S,F),Sn&&$o(S,W),$;if(F===null){for(;W<O.length;W++)F=b(S,O[W],P),F!==null&&(A=o(F,A,W),L===null?$=F:L.sibling=F,L=F);return Sn&&$o(S,W),$}for(F=r(S,F);W<O.length;W++)V=E(F,S,W,O[W],P),V!==null&&(e&&V.alternate!==null&&F.delete(V.key===null?W:V.key),A=o(V,A,W),L===null?$=V:L.sibling=V,L=V);return e&&F.forEach(function(oe){return n(S,oe)}),Sn&&$o(S,W),$}function I(S,A,O,P){var $=jd(O);if(typeof $!="function")throw Error(We(150));if(O=$.call(O),O==null)throw Error(We(151));for(var L=$=null,F=A,W=A=0,V=null,re=O.next();F!==null&&!re.done;W++,re=O.next()){F.index>W?(V=F,F=null):V=F.sibling;var oe=_(S,F,re.value,P);if(oe===null){F===null&&(F=V);break}e&&F&&oe.alternate===null&&n(S,F),A=o(oe,A,W),L===null?$=oe:L.sibling=oe,L=oe,F=V}if(re.done)return t(S,F),Sn&&$o(S,W),$;if(F===null){for(;!re.done;W++,re=O.next())re=b(S,re.value,P),re!==null&&(A=o(re,A,W),L===null?$=re:L.sibling=re,L=re);return Sn&&$o(S,W),$}for(F=r(S,F);!re.done;W++,re=O.next())re=E(F,S,W,re.value,P),re!==null&&(e&&re.alternate!==null&&F.delete(re.key===null?W:re.key),A=o(re,A,W),L===null?$=re:L.sibling=re,L=re);return e&&F.forEach(function(ee){return n(S,ee)}),Sn&&$o(S,W),$}function k(S,A,O,P){if(typeof O=="object"&&O!==null&&O.type===Ql&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case P0:e:{for(var $=O.key,L=A;L!==null;){if(L.key===$){if($=O.type,$===Ql){if(L.tag===7){t(S,L.sibling),A=a(L,O.props.children),A.return=S,S=A;break e}}else if(L.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Vi&&fw($)===L.type){t(S,L.sibling),A=a(L,O.props),A.ref=kd(S,L,O),A.return=S,S=A;break e}t(S,L);break}else n(S,L);L=L.sibling}O.type===Ql?(A=sl(O.props.children,S.mode,P,O.key),A.return=S,S=A):(P=bh(O.type,O.key,O.props,null,S.mode,P),P.ref=kd(S,A,O),P.return=S,S=P)}return d(S);case Yl:e:{for(L=O.key;A!==null;){if(A.key===L)if(A.tag===4&&A.stateNode.containerInfo===O.containerInfo&&A.stateNode.implementation===O.implementation){t(S,A.sibling),A=a(A,O.children||[]),A.return=S,S=A;break e}else{t(S,A);break}else n(S,A);A=A.sibling}A=e1(O,S.mode,P),A.return=S,S=A}return d(S);case Vi:return L=O._init,k(S,A,L(O._payload),P)}if(Pd(O))return T(S,A,O,P);if(jd(O))return I(S,A,O,P);Q0(S,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,A!==null&&A.tag===6?(t(S,A.sibling),A=a(A,O),A.return=S,S=A):(t(S,A),A=Jm(O,S.mode,P),A.return=S,S=A),d(S)):t(S,A)}return k}var yc=K4(!0),Z4=K4(!1),Yh=yo(null),Qh=null,nc=null,_g=null;function Eg(){_g=nc=Qh=null}function Sg(e){var n=Yh.current;Nn(Yh),e._currentValue=n}function K1(e,n,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,r!==null&&(r.childLanes|=n)):r!==null&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===t)break;e=e.return}}function hc(e,n){Qh=e,_g=nc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(is=!0),e.firstContext=null)}function Xs(e){var n=e._currentValue;if(_g!==e)if(e={context:e,memoizedValue:n,next:null},nc===null){if(Qh===null)throw Error(We(308));nc=e,Qh.dependencies={lanes:0,firstContext:e}}else nc=nc.next=e;return n}var Ko=null;function kg(e){Ko===null?Ko=[e]:Ko.push(e)}function J4(e,n,t,r){var a=n.interleaved;return a===null?(t.next=t,kg(n)):(t.next=a.next,a.next=t),n.interleaved=t,wi(e,r)}function wi(e,n){e.lanes|=n;var t=e.alternate;for(t!==null&&(t.lanes|=n),t=e,e=e.return;e!==null;)e.childLanes|=n,t=e.alternate,t!==null&&(t.childLanes|=n),t=e,e=e.return;return t.tag===3?t.stateNode:null}var $i=!1;function Ag(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eN(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ui(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function ao(e,n,t){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Xt&2){var a=r.pending;return a===null?n.next=n:(n.next=a.next,a.next=n),r.pending=n,wi(e,t)}return a=r.interleaved,a===null?(n.next=n,kg(r)):(n.next=a.next,a.next=n),r.interleaved=n,wi(e,t)}function mh(e,n,t){if(n=n.updateQueue,n!==null&&(n=n.shared,(t&4194240)!==0)){var r=n.lanes;r&=e.pendingLanes,t|=r,n.lanes=t,pg(e,t)}}function pw(e,n){var t=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var a=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var d={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?a=o=d:o=o.next=d,t=t.next}while(t!==null);o===null?a=o=n:o=o.next=n}else a=o=n;t={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=t;return}e=t.lastBaseUpdate,e===null?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function Gh(e,n,t,r){var a=e.updateQueue;$i=!1;var o=a.firstBaseUpdate,d=a.lastBaseUpdate,m=a.shared.pending;if(m!==null){a.shared.pending=null;var v=m,g=v.next;v.next=null,d===null?o=g:d.next=g,d=v;var w=e.alternate;w!==null&&(w=w.updateQueue,m=w.lastBaseUpdate,m!==d&&(m===null?w.firstBaseUpdate=g:m.next=g,w.lastBaseUpdate=v))}if(o!==null){var b=a.baseState;d=0,w=g=v=null,m=o;do{var _=m.lane,E=m.eventTime;if((r&_)===_){w!==null&&(w=w.next={eventTime:E,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var T=e,I=m;switch(_=n,E=t,I.tag){case 1:if(T=I.payload,typeof T=="function"){b=T.call(E,b,_);break e}b=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=I.payload,_=typeof T=="function"?T.call(E,b,_):T,_==null)break e;b=On({},b,_);break e;case 2:$i=!0}}m.callback!==null&&m.lane!==0&&(e.flags|=64,_=a.effects,_===null?a.effects=[m]:_.push(m))}else E={eventTime:E,lane:_,tag:m.tag,payload:m.payload,callback:m.callback,next:null},w===null?(g=w=E,v=b):w=w.next=E,d|=_;if(m=m.next,m===null){if(m=a.shared.pending,m===null)break;_=m,m=_.next,_.next=null,a.lastBaseUpdate=_,a.shared.pending=null}}while(1);if(w===null&&(v=b),a.baseState=v,a.firstBaseUpdate=g,a.lastBaseUpdate=w,n=a.shared.interleaved,n!==null){a=n;do d|=a.lane,a=a.next;while(a!==n)}else o===null&&(a.shared.lanes=0);ul|=d,e.lanes=d,e.memoizedState=b}}function mw(e,n,t){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var r=e[n],a=r.callback;if(a!==null){if(r.callback=null,r=t,typeof a!="function")throw Error(We(191,a));a.call(r)}}}var Au={},Fa=yo(Au),cu=yo(Au),du=yo(Au);function Zo(e){if(e===Au)throw Error(We(174));return e}function Tg(e,n){switch(vn(du,n),vn(cu,e),vn(Fa,Au),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:D1(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=D1(n,e)}Nn(Fa),vn(Fa,n)}function wc(){Nn(Fa),Nn(cu),Nn(du)}function tN(e){Zo(du.current);var n=Zo(Fa.current),t=D1(n,e.type);n!==t&&(vn(cu,e),vn(Fa,t))}function Dg(e){cu.current===e&&(Nn(Fa),Nn(cu))}var In=yo(0);function Xh(e){for(var n=e;n!==null;){if(n.tag===13){var t=n.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ym=[];function Ig(){for(var e=0;e<Ym.length;e++)Ym[e]._workInProgressVersionPrimary=null;Ym.length=0}var xh=Ei.ReactCurrentDispatcher,Qm=Ei.ReactCurrentBatchConfig,dl=0,Rn=null,or=null,mr=null,Kh=!1,Yd=!1,uu=0,F7=0;function Ir(){throw Error(We(321))}function Mg(e,n){if(n===null)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!ma(e[t],n[t]))return!1;return!0}function Rg(e,n,t,r,a,o){if(dl=o,Rn=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,xh.current=e===null||e.memoizedState===null?q7:W7,e=t(r,a),Yd){o=0;do{if(Yd=!1,uu=0,25<=o)throw Error(We(301));o+=1,mr=or=null,n.updateQueue=null,xh.current=H7,e=t(r,a)}while(Yd)}if(xh.current=Zh,n=or!==null&&or.next!==null,dl=0,mr=or=Rn=null,Kh=!1,n)throw Error(We(300));return e}function Og(){var e=uu!==0;return uu=0,e}function ka(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mr===null?Rn.memoizedState=mr=e:mr=mr.next=e,mr}function Ks(){if(or===null){var e=Rn.alternate;e=e!==null?e.memoizedState:null}else e=or.next;var n=mr===null?Rn.memoizedState:mr.next;if(n!==null)mr=n,or=e;else{if(e===null)throw Error(We(310));or=e,e={memoizedState:or.memoizedState,baseState:or.baseState,baseQueue:or.baseQueue,queue:or.queue,next:null},mr===null?Rn.memoizedState=mr=e:mr=mr.next=e}return mr}function hu(e,n){return typeof n=="function"?n(e):n}function Gm(e){var n=Ks(),t=n.queue;if(t===null)throw Error(We(311));t.lastRenderedReducer=e;var r=or,a=r.baseQueue,o=t.pending;if(o!==null){if(a!==null){var d=a.next;a.next=o.next,o.next=d}r.baseQueue=a=o,t.pending=null}if(a!==null){o=a.next,r=r.baseState;var m=d=null,v=null,g=o;do{var w=g.lane;if((dl&w)===w)v!==null&&(v=v.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),r=g.hasEagerState?g.eagerState:e(r,g.action);else{var b={lane:w,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};v===null?(m=v=b,d=r):v=v.next=b,Rn.lanes|=w,ul|=w}g=g.next}while(g!==null&&g!==o);v===null?d=r:v.next=m,ma(r,n.memoizedState)||(is=!0),n.memoizedState=r,n.baseState=d,n.baseQueue=v,t.lastRenderedState=r}if(e=t.interleaved,e!==null){a=e;do o=a.lane,Rn.lanes|=o,ul|=o,a=a.next;while(a!==e)}else a===null&&(t.lanes=0);return[n.memoizedState,t.dispatch]}function Xm(e){var n=Ks(),t=n.queue;if(t===null)throw Error(We(311));t.lastRenderedReducer=e;var r=t.dispatch,a=t.pending,o=n.memoizedState;if(a!==null){t.pending=null;var d=a=a.next;do o=e(o,d.action),d=d.next;while(d!==a);ma(o,n.memoizedState)||(is=!0),n.memoizedState=o,n.baseQueue===null&&(n.baseState=o),t.lastRenderedState=o}return[o,r]}function nN(){}function rN(e,n){var t=Rn,r=Ks(),a=n(),o=!ma(r.memoizedState,a);if(o&&(r.memoizedState=a,is=!0),r=r.queue,Lg(iN.bind(null,t,r,e),[e]),r.getSnapshot!==n||o||mr!==null&&mr.memoizedState.tag&1){if(t.flags|=2048,fu(9,aN.bind(null,t,r,a,n),void 0,null),xr===null)throw Error(We(349));dl&30||sN(t,n,a)}return a}function sN(e,n,t){e.flags|=16384,e={getSnapshot:n,value:t},n=Rn.updateQueue,n===null?(n={lastEffect:null,stores:null},Rn.updateQueue=n,n.stores=[e]):(t=n.stores,t===null?n.stores=[e]:t.push(e))}function aN(e,n,t,r){n.value=t,n.getSnapshot=r,oN(n)&&lN(e)}function iN(e,n,t){return t(function(){oN(n)&&lN(e)})}function oN(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!ma(e,t)}catch{return!0}}function lN(e){var n=wi(e,1);n!==null&&ua(n,e,1,-1)}function xw(e){var n=ka();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hu,lastRenderedState:e},n.queue=e,e=e.dispatch=z7.bind(null,Rn,e),[n.memoizedState,e]}function fu(e,n,t,r){return e={tag:e,create:n,destroy:t,deps:r,next:null},n=Rn.updateQueue,n===null?(n={lastEffect:null,stores:null},Rn.updateQueue=n,n.lastEffect=e.next=e):(t=n.lastEffect,t===null?n.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,n.lastEffect=e)),e}function cN(){return Ks().memoizedState}function gh(e,n,t,r){var a=ka();Rn.flags|=e,a.memoizedState=fu(1|n,t,void 0,r===void 0?null:r)}function qf(e,n,t,r){var a=Ks();r=r===void 0?null:r;var o=void 0;if(or!==null){var d=or.memoizedState;if(o=d.destroy,r!==null&&Mg(r,d.deps)){a.memoizedState=fu(n,t,o,r);return}}Rn.flags|=e,a.memoizedState=fu(1|n,t,o,r)}function gw(e,n){return gh(8390656,8,e,n)}function Lg(e,n){return qf(2048,8,e,n)}function dN(e,n){return qf(4,2,e,n)}function uN(e,n){return qf(4,4,e,n)}function hN(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function fN(e,n,t){return t=t!=null?t.concat([e]):null,qf(4,4,hN.bind(null,n,e),t)}function Pg(){}function pN(e,n){var t=Ks();n=n===void 0?null:n;var r=t.memoizedState;return r!==null&&n!==null&&Mg(n,r[1])?r[0]:(t.memoizedState=[e,n],e)}function mN(e,n){var t=Ks();n=n===void 0?null:n;var r=t.memoizedState;return r!==null&&n!==null&&Mg(n,r[1])?r[0]:(e=e(),t.memoizedState=[e,n],e)}function xN(e,n,t){return dl&21?(ma(t,n)||(t=b4(),Rn.lanes|=t,ul|=t,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,is=!0),e.memoizedState=t)}function B7(e,n){var t=fn;fn=t!==0&&4>t?t:4,e(!0);var r=Qm.transition;Qm.transition={};try{e(!1),n()}finally{fn=t,Qm.transition=r}}function gN(){return Ks().memoizedState}function U7(e,n,t){var r=oo(e);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},vN(e))yN(n,t);else if(t=J4(e,n,t,r),t!==null){var a=Xr();ua(t,e,r,a),wN(t,n,r)}}function z7(e,n,t){var r=oo(e),a={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(vN(e))yN(n,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=n.lastRenderedReducer,o!==null))try{var d=n.lastRenderedState,m=o(d,t);if(a.hasEagerState=!0,a.eagerState=m,ma(m,d)){var v=n.interleaved;v===null?(a.next=a,kg(n)):(a.next=v.next,v.next=a),n.interleaved=a;return}}catch{}finally{}t=J4(e,n,a,r),t!==null&&(a=Xr(),ua(t,e,r,a),wN(t,n,r))}}function vN(e){var n=e.alternate;return e===Rn||n!==null&&n===Rn}function yN(e,n){Yd=Kh=!0;var t=e.pending;t===null?n.next=n:(n.next=t.next,t.next=n),e.pending=n}function wN(e,n,t){if(t&4194240){var r=n.lanes;r&=e.pendingLanes,t|=r,n.lanes=t,pg(e,t)}}var Zh={readContext:Xs,useCallback:Ir,useContext:Ir,useEffect:Ir,useImperativeHandle:Ir,useInsertionEffect:Ir,useLayoutEffect:Ir,useMemo:Ir,useReducer:Ir,useRef:Ir,useState:Ir,useDebugValue:Ir,useDeferredValue:Ir,useTransition:Ir,useMutableSource:Ir,useSyncExternalStore:Ir,useId:Ir,unstable_isNewReconciler:!1},q7={readContext:Xs,useCallback:function(e,n){return ka().memoizedState=[e,n===void 0?null:n],e},useContext:Xs,useEffect:gw,useImperativeHandle:function(e,n,t){return t=t!=null?t.concat([e]):null,gh(4194308,4,hN.bind(null,n,e),t)},useLayoutEffect:function(e,n){return gh(4194308,4,e,n)},useInsertionEffect:function(e,n){return gh(4,2,e,n)},useMemo:function(e,n){var t=ka();return n=n===void 0?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var r=ka();return n=t!==void 0?t(n):n,r.memoizedState=r.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},r.queue=e,e=e.dispatch=U7.bind(null,Rn,e),[r.memoizedState,e]},useRef:function(e){var n=ka();return e={current:e},n.memoizedState=e},useState:xw,useDebugValue:Pg,useDeferredValue:function(e){return ka().memoizedState=e},useTransition:function(){var e=xw(!1),n=e[0];return e=B7.bind(null,e[1]),ka().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,t){var r=Rn,a=ka();if(Sn){if(t===void 0)throw Error(We(407));t=t()}else{if(t=n(),xr===null)throw Error(We(349));dl&30||sN(r,n,t)}a.memoizedState=t;var o={value:t,getSnapshot:n};return a.queue=o,gw(iN.bind(null,r,o,e),[e]),r.flags|=2048,fu(9,aN.bind(null,r,o,t,n),void 0,null),t},useId:function(){var e=ka(),n=xr.identifierPrefix;if(Sn){var t=di,r=ci;t=(r&~(1<<32-da(r)-1)).toString(32)+t,n=":"+n+"R"+t,t=uu++,0<t&&(n+="H"+t.toString(32)),n+=":"}else t=F7++,n=":"+n+"r"+t.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},W7={readContext:Xs,useCallback:pN,useContext:Xs,useEffect:Lg,useImperativeHandle:fN,useInsertionEffect:dN,useLayoutEffect:uN,useMemo:mN,useReducer:Gm,useRef:cN,useState:function(){return Gm(hu)},useDebugValue:Pg,useDeferredValue:function(e){var n=Ks();return xN(n,or.memoizedState,e)},useTransition:function(){var e=Gm(hu)[0],n=Ks().memoizedState;return[e,n]},useMutableSource:nN,useSyncExternalStore:rN,useId:gN,unstable_isNewReconciler:!1},H7={readContext:Xs,useCallback:pN,useContext:Xs,useEffect:Lg,useImperativeHandle:fN,useInsertionEffect:dN,useLayoutEffect:uN,useMemo:mN,useReducer:Xm,useRef:cN,useState:function(){return Xm(hu)},useDebugValue:Pg,useDeferredValue:function(e){var n=Ks();return or===null?n.memoizedState=e:xN(n,or.memoizedState,e)},useTransition:function(){var e=Xm(hu)[0],n=Ks().memoizedState;return[e,n]},useMutableSource:nN,useSyncExternalStore:rN,useId:gN,unstable_isNewReconciler:!1};function oa(e,n){if(e&&e.defaultProps){n=On({},n),e=e.defaultProps;for(var t in e)n[t]===void 0&&(n[t]=e[t]);return n}return n}function Z1(e,n,t,r){n=e.memoizedState,t=t(r,n),t=t==null?n:On({},n,t),e.memoizedState=t,e.lanes===0&&(e.updateQueue.baseState=t)}var Wf={isMounted:function(e){return(e=e._reactInternals)?yl(e)===e:!1},enqueueSetState:function(e,n,t){e=e._reactInternals;var r=Xr(),a=oo(e),o=ui(r,a);o.payload=n,t!=null&&(o.callback=t),n=ao(e,o,a),n!==null&&(ua(n,e,a,r),mh(n,e,a))},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var r=Xr(),a=oo(e),o=ui(r,a);o.tag=1,o.payload=n,t!=null&&(o.callback=t),n=ao(e,o,a),n!==null&&(ua(n,e,a,r),mh(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=Xr(),r=oo(e),a=ui(t,r);a.tag=2,n!=null&&(a.callback=n),n=ao(e,a,r),n!==null&&(ua(n,e,r,t),mh(n,e,r))}};function vw(e,n,t,r,a,o,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,d):n.prototype&&n.prototype.isPureReactComponent?!au(t,r)||!au(a,o):!0}function bN(e,n,t){var r=!1,a=mo,o=n.contextType;return typeof o=="object"&&o!==null?o=Xs(o):(a=ls(n)?ll:Fr.current,r=n.contextTypes,o=(r=r!=null)?gc(e,a):mo),n=new n(t,o),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Wf,e.stateNode=n,n._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),n}function yw(e,n,t,r){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(t,r),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(t,r),n.state!==e&&Wf.enqueueReplaceState(n,n.state,null)}function J1(e,n,t,r){var a=e.stateNode;a.props=t,a.state=e.memoizedState,a.refs={},Ag(e);var o=n.contextType;typeof o=="object"&&o!==null?a.context=Xs(o):(o=ls(n)?ll:Fr.current,a.context=gc(e,o)),a.state=e.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(Z1(e,n,o,t),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(n=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),n!==a.state&&Wf.enqueueReplaceState(a,a.state,null),Gh(e,t,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function bc(e,n){try{var t="",r=n;do t+=vA(r),r=r.return;while(r);var a=t}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:n,stack:a,digest:null}}function Km(e,n,t){return{value:e,source:null,stack:t??null,digest:n??null}}function ex(e,n){try{console.error(n.value)}catch(t){setTimeout(function(){throw t})}}var V7=typeof WeakMap=="function"?WeakMap:Map;function NN(e,n,t){t=ui(-1,t),t.tag=3,t.payload={element:null};var r=n.value;return t.callback=function(){ef||(ef=!0,dx=r),ex(e,n)},t}function jN(e,n,t){t=ui(-1,t),t.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=n.value;t.payload=function(){return r(a)},t.callback=function(){ex(e,n)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){ex(e,n),typeof r!="function"&&(io===null?io=new Set([this]):io.add(this));var d=n.stack;this.componentDidCatch(n.value,{componentStack:d!==null?d:""})}),t}function ww(e,n,t){var r=e.pingCache;if(r===null){r=e.pingCache=new V7;var a=new Set;r.set(n,a)}else a=r.get(n),a===void 0&&(a=new Set,r.set(n,a));a.has(t)||(a.add(t),e=aT.bind(null,e,n,t),n.then(e,e))}function bw(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Nw(e,n,t,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===n?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(n=ui(-1,1),n.tag=2,ao(t,n,1))),t.lanes|=1),e)}var $7=Ei.ReactCurrentOwner,is=!1;function $r(e,n,t,r){n.child=e===null?Z4(n,null,t,r):yc(n,e.child,t,r)}function jw(e,n,t,r,a){t=t.render;var o=n.ref;return hc(n,a),r=Rg(e,n,t,r,o,a),t=Og(),e!==null&&!is?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,bi(e,n,a)):(Sn&&t&&Ng(n),n.flags|=1,$r(e,n,r,a),n.child)}function Cw(e,n,t,r,a){if(e===null){var o=t.type;return typeof o=="function"&&!Vg(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(n.tag=15,n.type=o,CN(e,n,o,r,a)):(e=bh(t.type,null,r,n,n.mode,a),e.ref=n.ref,e.return=n,n.child=e)}if(o=e.child,!(e.lanes&a)){var d=o.memoizedProps;if(t=t.compare,t=t!==null?t:au,t(d,r)&&e.ref===n.ref)return bi(e,n,a)}return n.flags|=1,e=lo(o,r),e.ref=n.ref,e.return=n,n.child=e}function CN(e,n,t,r,a){if(e!==null){var o=e.memoizedProps;if(au(o,r)&&e.ref===n.ref)if(is=!1,n.pendingProps=r=o,(e.lanes&a)!==0)e.flags&131072&&(is=!0);else return n.lanes=e.lanes,bi(e,n,a)}return tx(e,n,t,r,a)}function _N(e,n,t){var r=n.pendingProps,a=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},vn(sc,Ns),Ns|=t;else{if(!(t&1073741824))return e=o!==null?o.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,vn(sc,Ns),Ns|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:t,vn(sc,Ns),Ns|=r}else o!==null?(r=o.baseLanes|t,n.memoizedState=null):r=t,vn(sc,Ns),Ns|=r;return $r(e,n,a,t),n.child}function EN(e,n){var t=n.ref;(e===null&&t!==null||e!==null&&e.ref!==t)&&(n.flags|=512,n.flags|=2097152)}function tx(e,n,t,r,a){var o=ls(t)?ll:Fr.current;return o=gc(n,o),hc(n,a),t=Rg(e,n,t,r,o,a),r=Og(),e!==null&&!is?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,bi(e,n,a)):(Sn&&r&&Ng(n),n.flags|=1,$r(e,n,t,a),n.child)}function _w(e,n,t,r,a){if(ls(t)){var o=!0;Hh(n)}else o=!1;if(hc(n,a),n.stateNode===null)vh(e,n),bN(n,t,r),J1(n,t,r,a),r=!0;else if(e===null){var d=n.stateNode,m=n.memoizedProps;d.props=m;var v=d.context,g=t.contextType;typeof g=="object"&&g!==null?g=Xs(g):(g=ls(t)?ll:Fr.current,g=gc(n,g));var w=t.getDerivedStateFromProps,b=typeof w=="function"||typeof d.getSnapshotBeforeUpdate=="function";b||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==r||v!==g)&&yw(n,d,r,g),$i=!1;var _=n.memoizedState;d.state=_,Gh(n,r,d,a),v=n.memoizedState,m!==r||_!==v||os.current||$i?(typeof w=="function"&&(Z1(n,t,w,r),v=n.memoizedState),(m=$i||vw(n,t,m,r,_,v,g))?(b||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=v),d.props=r,d.state=v,d.context=g,r=m):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),r=!1)}else{d=n.stateNode,eN(e,n),m=n.memoizedProps,g=n.type===n.elementType?m:oa(n.type,m),d.props=g,b=n.pendingProps,_=d.context,v=t.contextType,typeof v=="object"&&v!==null?v=Xs(v):(v=ls(t)?ll:Fr.current,v=gc(n,v));var E=t.getDerivedStateFromProps;(w=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==b||_!==v)&&yw(n,d,r,v),$i=!1,_=n.memoizedState,d.state=_,Gh(n,r,d,a);var T=n.memoizedState;m!==b||_!==T||os.current||$i?(typeof E=="function"&&(Z1(n,t,E,r),T=n.memoizedState),(g=$i||vw(n,t,g,r,_,T,v)||!1)?(w||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,T,v),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,T,v)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&_===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&_===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=T),d.props=r,d.state=T,d.context=v,r=g):(typeof d.componentDidUpdate!="function"||m===e.memoizedProps&&_===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&_===e.memoizedState||(n.flags|=1024),r=!1)}return nx(e,n,t,r,o,a)}function nx(e,n,t,r,a,o){EN(e,n);var d=(n.flags&128)!==0;if(!r&&!d)return a&&dw(n,t,!1),bi(e,n,o);r=n.stateNode,$7.current=n;var m=d&&typeof t.getDerivedStateFromError!="function"?null:r.render();return n.flags|=1,e!==null&&d?(n.child=yc(n,e.child,null,o),n.child=yc(n,null,m,o)):$r(e,n,m,o),n.memoizedState=r.state,a&&dw(n,t,!0),n.child}function SN(e){var n=e.stateNode;n.pendingContext?cw(e,n.pendingContext,n.pendingContext!==n.context):n.context&&cw(e,n.context,!1),Tg(e,n.containerInfo)}function Ew(e,n,t,r,a){return vc(),Cg(a),n.flags|=256,$r(e,n,t,r),n.child}var rx={dehydrated:null,treeContext:null,retryLane:0};function sx(e){return{baseLanes:e,cachePool:null,transitions:null}}function kN(e,n,t){var r=n.pendingProps,a=In.current,o=!1,d=(n.flags&128)!==0,m;if((m=d)||(m=e!==null&&e.memoizedState===null?!1:(a&2)!==0),m?(o=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),vn(In,a&1),e===null)return X1(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(d=r.children,e=r.fallback,o?(r=n.mode,o=n.child,d={mode:"hidden",children:d},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=d):o=$f(d,r,0,null),e=sl(e,r,t,null),o.return=n,e.return=n,o.sibling=e,n.child=o,n.child.memoizedState=sx(t),n.memoizedState=rx,e):Fg(n,d));if(a=e.memoizedState,a!==null&&(m=a.dehydrated,m!==null))return Y7(e,n,d,r,m,a,t);if(o){o=r.fallback,d=n.mode,a=e.child,m=a.sibling;var v={mode:"hidden",children:r.children};return!(d&1)&&n.child!==a?(r=n.child,r.childLanes=0,r.pendingProps=v,n.deletions=null):(r=lo(a,v),r.subtreeFlags=a.subtreeFlags&14680064),m!==null?o=lo(m,o):(o=sl(o,d,t,null),o.flags|=2),o.return=n,r.return=n,r.sibling=o,n.child=r,r=o,o=n.child,d=e.child.memoizedState,d=d===null?sx(t):{baseLanes:d.baseLanes|t,cachePool:null,transitions:d.transitions},o.memoizedState=d,o.childLanes=e.childLanes&~t,n.memoizedState=rx,r}return o=e.child,e=o.sibling,r=lo(o,{mode:"visible",children:r.children}),!(n.mode&1)&&(r.lanes=t),r.return=n,r.sibling=null,e!==null&&(t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)),n.child=r,n.memoizedState=null,r}function Fg(e,n){return n=$f({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function G0(e,n,t,r){return r!==null&&Cg(r),yc(n,e.child,null,t),e=Fg(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Y7(e,n,t,r,a,o,d){if(t)return n.flags&256?(n.flags&=-257,r=Km(Error(We(422))),G0(e,n,d,r)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(o=r.fallback,a=n.mode,r=$f({mode:"visible",children:r.children},a,0,null),o=sl(o,a,d,null),o.flags|=2,r.return=n,o.return=n,r.sibling=o,n.child=r,n.mode&1&&yc(n,e.child,null,d),n.child.memoizedState=sx(d),n.memoizedState=rx,o);if(!(n.mode&1))return G0(e,n,d,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var m=r.dgst;return r=m,o=Error(We(419)),r=Km(o,r,void 0),G0(e,n,d,r)}if(m=(d&e.childLanes)!==0,is||m){if(r=xr,r!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|d)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,wi(e,a),ua(r,e,a,-1))}return Hg(),r=Km(Error(We(421))),G0(e,n,d,r)}return a.data==="$?"?(n.flags|=128,n.child=e.child,n=iT.bind(null,e),a._reactRetry=n,null):(e=o.treeContext,Cs=so(a.nextSibling),_s=n,Sn=!0,ca=null,e!==null&&(Vs[$s++]=ci,Vs[$s++]=di,Vs[$s++]=cl,ci=e.id,di=e.overflow,cl=n),n=Fg(n,r.children),n.flags|=4096,n)}function Sw(e,n,t){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n),K1(e.return,n,t)}function Zm(e,n,t,r,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:a}:(o.isBackwards=n,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=t,o.tailMode=a)}function AN(e,n,t){var r=n.pendingProps,a=r.revealOrder,o=r.tail;if($r(e,n,r.children,t),r=In.current,r&2)r=r&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sw(e,t,n);else if(e.tag===19)Sw(e,t,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(vn(In,r),!(n.mode&1))n.memoizedState=null;else switch(a){case"forwards":for(t=n.child,a=null;t!==null;)e=t.alternate,e!==null&&Xh(e)===null&&(a=t),t=t.sibling;t=a,t===null?(a=n.child,n.child=null):(a=t.sibling,t.sibling=null),Zm(n,!1,a,t,o);break;case"backwards":for(t=null,a=n.child,n.child=null;a!==null;){if(e=a.alternate,e!==null&&Xh(e)===null){n.child=a;break}e=a.sibling,a.sibling=t,t=a,a=e}Zm(n,!0,t,null,o);break;case"together":Zm(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function vh(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function bi(e,n,t){if(e!==null&&(n.dependencies=e.dependencies),ul|=n.lanes,!(t&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(We(153));if(n.child!==null){for(e=n.child,t=lo(e,e.pendingProps),n.child=t,t.return=n;e.sibling!==null;)e=e.sibling,t=t.sibling=lo(e,e.pendingProps),t.return=n;t.sibling=null}return n.child}function Q7(e,n,t){switch(n.tag){case 3:SN(n),vc();break;case 5:tN(n);break;case 1:ls(n.type)&&Hh(n);break;case 4:Tg(n,n.stateNode.containerInfo);break;case 10:var r=n.type._context,a=n.memoizedProps.value;vn(Yh,r._currentValue),r._currentValue=a;break;case 13:if(r=n.memoizedState,r!==null)return r.dehydrated!==null?(vn(In,In.current&1),n.flags|=128,null):t&n.child.childLanes?kN(e,n,t):(vn(In,In.current&1),e=bi(e,n,t),e!==null?e.sibling:null);vn(In,In.current&1);break;case 19:if(r=(t&n.childLanes)!==0,e.flags&128){if(r)return AN(e,n,t);n.flags|=128}if(a=n.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),vn(In,In.current),r)break;return null;case 22:case 23:return n.lanes=0,_N(e,n,t)}return bi(e,n,t)}var TN,ax,DN,IN;TN=function(e,n){for(var t=n.child;t!==null;){if(t.tag===5||t.tag===6)e.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};ax=function(){};DN=function(e,n,t,r){var a=e.memoizedProps;if(a!==r){e=n.stateNode,Zo(Fa.current);var o=null;switch(t){case"input":a=S1(e,a),r=S1(e,r),o=[];break;case"select":a=On({},a,{value:void 0}),r=On({},r,{value:void 0}),o=[];break;case"textarea":a=T1(e,a),r=T1(e,r),o=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=qh)}I1(t,r);var d;t=null;for(g in a)if(!r.hasOwnProperty(g)&&a.hasOwnProperty(g)&&a[g]!=null)if(g==="style"){var m=a[g];for(d in m)m.hasOwnProperty(d)&&(t||(t={}),t[d]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Zd.hasOwnProperty(g)?o||(o=[]):(o=o||[]).push(g,null));for(g in r){var v=r[g];if(m=a!=null?a[g]:void 0,r.hasOwnProperty(g)&&v!==m&&(v!=null||m!=null))if(g==="style")if(m){for(d in m)!m.hasOwnProperty(d)||v&&v.hasOwnProperty(d)||(t||(t={}),t[d]="");for(d in v)v.hasOwnProperty(d)&&m[d]!==v[d]&&(t||(t={}),t[d]=v[d])}else t||(o||(o=[]),o.push(g,t)),t=v;else g==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,m=m?m.__html:void 0,v!=null&&m!==v&&(o=o||[]).push(g,v)):g==="children"?typeof v!="string"&&typeof v!="number"||(o=o||[]).push(g,""+v):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Zd.hasOwnProperty(g)?(v!=null&&g==="onScroll"&&wn("scroll",e),o||m===v||(o=[])):(o=o||[]).push(g,v))}t&&(o=o||[]).push("style",t);var g=o;(n.updateQueue=g)&&(n.flags|=4)}};IN=function(e,n,t,r){t!==r&&(n.flags|=4)};function Ad(e,n){if(!Sn)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;n!==null;)n.alternate!==null&&(t=n),n=n.sibling;t===null?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Mr(e){var n=e.alternate!==null&&e.alternate.child===e.child,t=0,r=0;if(n)for(var a=e.child;a!==null;)t|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)t|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=t,n}function G7(e,n,t){var r=n.pendingProps;switch(jg(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mr(n),null;case 1:return ls(n.type)&&Wh(),Mr(n),null;case 3:return r=n.stateNode,wc(),Nn(os),Nn(Fr),Ig(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Y0(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,ca!==null&&(fx(ca),ca=null))),ax(e,n),Mr(n),null;case 5:Dg(n);var a=Zo(du.current);if(t=n.type,e!==null&&n.stateNode!=null)DN(e,n,t,r,a),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!r){if(n.stateNode===null)throw Error(We(166));return Mr(n),null}if(e=Zo(Fa.current),Y0(n)){r=n.stateNode,t=n.type;var o=n.memoizedProps;switch(r[Ia]=n,r[lu]=o,e=(n.mode&1)!==0,t){case"dialog":wn("cancel",r),wn("close",r);break;case"iframe":case"object":case"embed":wn("load",r);break;case"video":case"audio":for(a=0;a<Bd.length;a++)wn(Bd[a],r);break;case"source":wn("error",r);break;case"img":case"image":case"link":wn("error",r),wn("load",r);break;case"details":wn("toggle",r);break;case"input":Ly(r,o),wn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},wn("invalid",r);break;case"textarea":Fy(r,o),wn("invalid",r)}I1(t,o),a=null;for(var d in o)if(o.hasOwnProperty(d)){var m=o[d];d==="children"?typeof m=="string"?r.textContent!==m&&(o.suppressHydrationWarning!==!0&&$0(r.textContent,m,e),a=["children",m]):typeof m=="number"&&r.textContent!==""+m&&(o.suppressHydrationWarning!==!0&&$0(r.textContent,m,e),a=["children",""+m]):Zd.hasOwnProperty(d)&&m!=null&&d==="onScroll"&&wn("scroll",r)}switch(t){case"input":F0(r),Py(r,o,!0);break;case"textarea":F0(r),By(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=qh)}r=a,n.updateQueue=r,r!==null&&(n.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=i4(t)),e==="http://www.w3.org/1999/xhtml"?t==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=d.createElement(t,{is:r.is}):(e=d.createElement(t),t==="select"&&(d=e,r.multiple?d.multiple=!0:r.size&&(d.size=r.size))):e=d.createElementNS(e,t),e[Ia]=n,e[lu]=r,TN(e,n,!1,!1),n.stateNode=e;e:{switch(d=M1(t,r),t){case"dialog":wn("cancel",e),wn("close",e),a=r;break;case"iframe":case"object":case"embed":wn("load",e),a=r;break;case"video":case"audio":for(a=0;a<Bd.length;a++)wn(Bd[a],e);a=r;break;case"source":wn("error",e),a=r;break;case"img":case"image":case"link":wn("error",e),wn("load",e),a=r;break;case"details":wn("toggle",e),a=r;break;case"input":Ly(e,r),a=S1(e,r),wn("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=On({},r,{value:void 0}),wn("invalid",e);break;case"textarea":Fy(e,r),a=T1(e,r),wn("invalid",e);break;default:a=r}I1(t,a),m=a;for(o in m)if(m.hasOwnProperty(o)){var v=m[o];o==="style"?c4(e,v):o==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&o4(e,v)):o==="children"?typeof v=="string"?(t!=="textarea"||v!=="")&&Jd(e,v):typeof v=="number"&&Jd(e,""+v):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Zd.hasOwnProperty(o)?v!=null&&o==="onScroll"&&wn("scroll",e):v!=null&&lg(e,o,v,d))}switch(t){case"input":F0(e),Py(e,r,!1);break;case"textarea":F0(e),By(e);break;case"option":r.value!=null&&e.setAttribute("value",""+po(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?lc(e,!!r.multiple,o,!1):r.defaultValue!=null&&lc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=qh)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Mr(n),null;case 6:if(e&&n.stateNode!=null)IN(e,n,e.memoizedProps,r);else{if(typeof r!="string"&&n.stateNode===null)throw Error(We(166));if(t=Zo(du.current),Zo(Fa.current),Y0(n)){if(r=n.stateNode,t=n.memoizedProps,r[Ia]=n,(o=r.nodeValue!==t)&&(e=_s,e!==null))switch(e.tag){case 3:$0(r.nodeValue,t,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$0(r.nodeValue,t,(e.mode&1)!==0)}o&&(n.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Ia]=n,n.stateNode=r}return Mr(n),null;case 13:if(Nn(In),r=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Sn&&Cs!==null&&n.mode&1&&!(n.flags&128))X4(),vc(),n.flags|=98560,o=!1;else if(o=Y0(n),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(We(318));if(o=n.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(We(317));o[Ia]=n}else vc(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Mr(n),o=!1}else ca!==null&&(fx(ca),ca=null),o=!0;if(!o)return n.flags&65536?n:null}return n.flags&128?(n.lanes=t,n):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(n.child.flags|=8192,n.mode&1&&(e===null||In.current&1?cr===0&&(cr=3):Hg())),n.updateQueue!==null&&(n.flags|=4),Mr(n),null);case 4:return wc(),ax(e,n),e===null&&iu(n.stateNode.containerInfo),Mr(n),null;case 10:return Sg(n.type._context),Mr(n),null;case 17:return ls(n.type)&&Wh(),Mr(n),null;case 19:if(Nn(In),o=n.memoizedState,o===null)return Mr(n),null;if(r=(n.flags&128)!==0,d=o.rendering,d===null)if(r)Ad(o,!1);else{if(cr!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(d=Xh(e),d!==null){for(n.flags|=128,Ad(o,!1),r=d.updateQueue,r!==null&&(n.updateQueue=r,n.flags|=4),n.subtreeFlags=0,r=t,t=n.child;t!==null;)o=t,e=r,o.flags&=14680066,d=o.alternate,d===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=d.childLanes,o.lanes=d.lanes,o.child=d.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=d.memoizedProps,o.memoizedState=d.memoizedState,o.updateQueue=d.updateQueue,o.type=d.type,e=d.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return vn(In,In.current&1|2),n.child}e=e.sibling}o.tail!==null&&Qn()>Nc&&(n.flags|=128,r=!0,Ad(o,!1),n.lanes=4194304)}else{if(!r)if(e=Xh(d),e!==null){if(n.flags|=128,r=!0,t=e.updateQueue,t!==null&&(n.updateQueue=t,n.flags|=4),Ad(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Sn)return Mr(n),null}else 2*Qn()-o.renderingStartTime>Nc&&t!==1073741824&&(n.flags|=128,r=!0,Ad(o,!1),n.lanes=4194304);o.isBackwards?(d.sibling=n.child,n.child=d):(t=o.last,t!==null?t.sibling=d:n.child=d,o.last=d)}return o.tail!==null?(n=o.tail,o.rendering=n,o.tail=n.sibling,o.renderingStartTime=Qn(),n.sibling=null,t=In.current,vn(In,r?t&1|2:t&1),n):(Mr(n),null);case 22:case 23:return Wg(),r=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(n.flags|=8192),r&&n.mode&1?Ns&1073741824&&(Mr(n),n.subtreeFlags&6&&(n.flags|=8192)):Mr(n),null;case 24:return null;case 25:return null}throw Error(We(156,n.tag))}function X7(e,n){switch(jg(n),n.tag){case 1:return ls(n.type)&&Wh(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return wc(),Nn(os),Nn(Fr),Ig(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return Dg(n),null;case 13:if(Nn(In),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(We(340));vc()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Nn(In),null;case 4:return wc(),null;case 10:return Sg(n.type._context),null;case 22:case 23:return Wg(),null;case 24:return null;default:return null}}var X0=!1,Or=!1,K7=typeof WeakSet=="function"?WeakSet:Set,st=null;function rc(e,n){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){zn(e,n,r)}else t.current=null}function ix(e,n,t){try{t()}catch(r){zn(e,n,r)}}var kw=!1;function Z7(e,n){if(W1=Bh,e=P4(),bg(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{t=(t=e.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var d=0,m=-1,v=-1,g=0,w=0,b=e,_=null;t:for(;;){for(var E;b!==t||a!==0&&b.nodeType!==3||(m=d+a),b!==o||r!==0&&b.nodeType!==3||(v=d+r),b.nodeType===3&&(d+=b.nodeValue.length),(E=b.firstChild)!==null;)_=b,b=E;for(;;){if(b===e)break t;if(_===t&&++g===a&&(m=d),_===o&&++w===r&&(v=d),(E=b.nextSibling)!==null)break;b=_,_=b.parentNode}b=E}t=m===-1||v===-1?null:{start:m,end:v}}else t=null}t=t||{start:0,end:0}}else t=null;for(H1={focusedElem:e,selectionRange:t},Bh=!1,st=n;st!==null;)if(n=st,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,st=e;else for(;st!==null;){n=st;try{var T=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var I=T.memoizedProps,k=T.memoizedState,S=n.stateNode,A=S.getSnapshotBeforeUpdate(n.elementType===n.type?I:oa(n.type,I),k);S.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var O=n.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(We(163))}}catch(P){zn(n,n.return,P)}if(e=n.sibling,e!==null){e.return=n.return,st=e;break}st=n.return}return T=kw,kw=!1,T}function Qd(e,n,t){var r=n.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&ix(n,t,o)}a=a.next}while(a!==r)}}function Hf(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var t=n=n.next;do{if((t.tag&e)===e){var r=t.create;t.destroy=r()}t=t.next}while(t!==n)}}function ox(e){var n=e.ref;if(n!==null){var t=e.stateNode;switch(e.tag){case 5:e=t;break;default:e=t}typeof n=="function"?n(e):n.current=e}}function MN(e){var n=e.alternate;n!==null&&(e.alternate=null,MN(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Ia],delete n[lu],delete n[Y1],delete n[R7],delete n[O7])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function RN(e){return e.tag===5||e.tag===3||e.tag===4}function Aw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||RN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lx(e,n,t){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?t.nodeType===8?t.parentNode.insertBefore(e,n):t.insertBefore(e,n):(t.nodeType===8?(n=t.parentNode,n.insertBefore(e,t)):(n=t,n.appendChild(e)),t=t._reactRootContainer,t!=null||n.onclick!==null||(n.onclick=qh));else if(r!==4&&(e=e.child,e!==null))for(lx(e,n,t),e=e.sibling;e!==null;)lx(e,n,t),e=e.sibling}function cx(e,n,t){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?t.insertBefore(e,n):t.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(cx(e,n,t),e=e.sibling;e!==null;)cx(e,n,t),e=e.sibling}var br=null,la=!1;function Wi(e,n,t){for(t=t.child;t!==null;)ON(e,n,t),t=t.sibling}function ON(e,n,t){if(Pa&&typeof Pa.onCommitFiberUnmount=="function")try{Pa.onCommitFiberUnmount(Lf,t)}catch{}switch(t.tag){case 5:Or||rc(t,n);case 6:var r=br,a=la;br=null,Wi(e,n,t),br=r,la=a,br!==null&&(la?(e=br,t=t.stateNode,e.nodeType===8?e.parentNode.removeChild(t):e.removeChild(t)):br.removeChild(t.stateNode));break;case 18:br!==null&&(la?(e=br,t=t.stateNode,e.nodeType===8?Vm(e.parentNode,t):e.nodeType===1&&Vm(e,t),ru(e)):Vm(br,t.stateNode));break;case 4:r=br,a=la,br=t.stateNode.containerInfo,la=!0,Wi(e,n,t),br=r,la=a;break;case 0:case 11:case 14:case 15:if(!Or&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var o=a,d=o.destroy;o=o.tag,d!==void 0&&(o&2||o&4)&&ix(t,n,d),a=a.next}while(a!==r)}Wi(e,n,t);break;case 1:if(!Or&&(rc(t,n),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(m){zn(t,n,m)}Wi(e,n,t);break;case 21:Wi(e,n,t);break;case 22:t.mode&1?(Or=(r=Or)||t.memoizedState!==null,Wi(e,n,t),Or=r):Wi(e,n,t);break;default:Wi(e,n,t)}}function Tw(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var t=e.stateNode;t===null&&(t=e.stateNode=new K7),n.forEach(function(r){var a=oT.bind(null,e,r);t.has(r)||(t.add(r),r.then(a,a))})}}function aa(e,n){var t=n.deletions;if(t!==null)for(var r=0;r<t.length;r++){var a=t[r];try{var o=e,d=n,m=d;e:for(;m!==null;){switch(m.tag){case 5:br=m.stateNode,la=!1;break e;case 3:br=m.stateNode.containerInfo,la=!0;break e;case 4:br=m.stateNode.containerInfo,la=!0;break e}m=m.return}if(br===null)throw Error(We(160));ON(o,d,a),br=null,la=!1;var v=a.alternate;v!==null&&(v.return=null),a.return=null}catch(g){zn(a,n,g)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)LN(n,e),n=n.sibling}function LN(e,n){var t=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(aa(n,e),Ca(e),r&4){try{Qd(3,e,e.return),Hf(3,e)}catch(I){zn(e,e.return,I)}try{Qd(5,e,e.return)}catch(I){zn(e,e.return,I)}}break;case 1:aa(n,e),Ca(e),r&512&&t!==null&&rc(t,t.return);break;case 5:if(aa(n,e),Ca(e),r&512&&t!==null&&rc(t,t.return),e.flags&32){var a=e.stateNode;try{Jd(a,"")}catch(I){zn(e,e.return,I)}}if(r&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,d=t!==null?t.memoizedProps:o,m=e.type,v=e.updateQueue;if(e.updateQueue=null,v!==null)try{m==="input"&&o.type==="radio"&&o.name!=null&&s4(a,o),M1(m,d);var g=M1(m,o);for(d=0;d<v.length;d+=2){var w=v[d],b=v[d+1];w==="style"?c4(a,b):w==="dangerouslySetInnerHTML"?o4(a,b):w==="children"?Jd(a,b):lg(a,w,b,g)}switch(m){case"input":k1(a,o);break;case"textarea":a4(a,o);break;case"select":var _=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var E=o.value;E!=null?lc(a,!!o.multiple,E,!1):_!==!!o.multiple&&(o.defaultValue!=null?lc(a,!!o.multiple,o.defaultValue,!0):lc(a,!!o.multiple,o.multiple?[]:"",!1))}a[lu]=o}catch(I){zn(e,e.return,I)}}break;case 6:if(aa(n,e),Ca(e),r&4){if(e.stateNode===null)throw Error(We(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(I){zn(e,e.return,I)}}break;case 3:if(aa(n,e),Ca(e),r&4&&t!==null&&t.memoizedState.isDehydrated)try{ru(n.containerInfo)}catch(I){zn(e,e.return,I)}break;case 4:aa(n,e),Ca(e);break;case 13:aa(n,e),Ca(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(zg=Qn())),r&4&&Tw(e);break;case 22:if(w=t!==null&&t.memoizedState!==null,e.mode&1?(Or=(g=Or)||w,aa(n,e),Or=g):aa(n,e),Ca(e),r&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!w&&e.mode&1)for(st=e,w=e.child;w!==null;){for(b=st=w;st!==null;){switch(_=st,E=_.child,_.tag){case 0:case 11:case 14:case 15:Qd(4,_,_.return);break;case 1:rc(_,_.return);var T=_.stateNode;if(typeof T.componentWillUnmount=="function"){r=_,t=_.return;try{n=r,T.props=n.memoizedProps,T.state=n.memoizedState,T.componentWillUnmount()}catch(I){zn(r,t,I)}}break;case 5:rc(_,_.return);break;case 22:if(_.memoizedState!==null){Iw(b);continue}}E!==null?(E.return=_,st=E):Iw(b)}w=w.sibling}e:for(w=null,b=e;;){if(b.tag===5){if(w===null){w=b;try{a=b.stateNode,g?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(m=b.stateNode,v=b.memoizedProps.style,d=v!=null&&v.hasOwnProperty("display")?v.display:null,m.style.display=l4("display",d))}catch(I){zn(e,e.return,I)}}}else if(b.tag===6){if(w===null)try{b.stateNode.nodeValue=g?"":b.memoizedProps}catch(I){zn(e,e.return,I)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;w===b&&(w=null),b=b.return}w===b&&(w=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:aa(n,e),Ca(e),r&4&&Tw(e);break;case 21:break;default:aa(n,e),Ca(e)}}function Ca(e){var n=e.flags;if(n&2){try{e:{for(var t=e.return;t!==null;){if(RN(t)){var r=t;break e}t=t.return}throw Error(We(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Jd(a,""),r.flags&=-33);var o=Aw(e);cx(e,o,a);break;case 3:case 4:var d=r.stateNode.containerInfo,m=Aw(e);lx(e,m,d);break;default:throw Error(We(161))}}catch(v){zn(e,e.return,v)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function J7(e,n,t){st=e,PN(e)}function PN(e,n,t){for(var r=(e.mode&1)!==0;st!==null;){var a=st,o=a.child;if(a.tag===22&&r){var d=a.memoizedState!==null||X0;if(!d){var m=a.alternate,v=m!==null&&m.memoizedState!==null||Or;m=X0;var g=Or;if(X0=d,(Or=v)&&!g)for(st=a;st!==null;)d=st,v=d.child,d.tag===22&&d.memoizedState!==null?Mw(a):v!==null?(v.return=d,st=v):Mw(a);for(;o!==null;)st=o,PN(o),o=o.sibling;st=a,X0=m,Or=g}Dw(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,st=o):Dw(e)}}function Dw(e){for(;st!==null;){var n=st;if(n.flags&8772){var t=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Or||Hf(5,n);break;case 1:var r=n.stateNode;if(n.flags&4&&!Or)if(t===null)r.componentDidMount();else{var a=n.elementType===n.type?t.memoizedProps:oa(n.type,t.memoizedProps);r.componentDidUpdate(a,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=n.updateQueue;o!==null&&mw(n,o,r);break;case 3:var d=n.updateQueue;if(d!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}mw(n,d,t)}break;case 5:var m=n.stateNode;if(t===null&&n.flags&4){t=m;var v=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&t.focus();break;case"img":v.src&&(t.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var g=n.alternate;if(g!==null){var w=g.memoizedState;if(w!==null){var b=w.dehydrated;b!==null&&ru(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(We(163))}Or||n.flags&512&&ox(n)}catch(_){zn(n,n.return,_)}}if(n===e){st=null;break}if(t=n.sibling,t!==null){t.return=n.return,st=t;break}st=n.return}}function Iw(e){for(;st!==null;){var n=st;if(n===e){st=null;break}var t=n.sibling;if(t!==null){t.return=n.return,st=t;break}st=n.return}}function Mw(e){for(;st!==null;){var n=st;try{switch(n.tag){case 0:case 11:case 15:var t=n.return;try{Hf(4,n)}catch(v){zn(n,t,v)}break;case 1:var r=n.stateNode;if(typeof r.componentDidMount=="function"){var a=n.return;try{r.componentDidMount()}catch(v){zn(n,a,v)}}var o=n.return;try{ox(n)}catch(v){zn(n,o,v)}break;case 5:var d=n.return;try{ox(n)}catch(v){zn(n,d,v)}}}catch(v){zn(n,n.return,v)}if(n===e){st=null;break}var m=n.sibling;if(m!==null){m.return=n.return,st=m;break}st=n.return}}var eT=Math.ceil,Jh=Ei.ReactCurrentDispatcher,Bg=Ei.ReactCurrentOwner,Gs=Ei.ReactCurrentBatchConfig,Xt=0,xr=null,er=null,Nr=0,Ns=0,sc=yo(0),cr=0,pu=null,ul=0,Vf=0,Ug=0,Gd=null,as=null,zg=0,Nc=1/0,oi=null,ef=!1,dx=null,io=null,K0=!1,Zi=null,tf=0,Xd=0,ux=null,yh=-1,wh=0;function Xr(){return Xt&6?Qn():yh!==-1?yh:yh=Qn()}function oo(e){return e.mode&1?Xt&2&&Nr!==0?Nr&-Nr:P7.transition!==null?(wh===0&&(wh=b4()),wh):(e=fn,e!==0||(e=window.event,e=e===void 0?16:k4(e.type)),e):1}function ua(e,n,t,r){if(50<Xd)throw Xd=0,ux=null,Error(We(185));Eu(e,t,r),(!(Xt&2)||e!==xr)&&(e===xr&&(!(Xt&2)&&(Vf|=t),cr===4&&Gi(e,Nr)),cs(e,r),t===1&&Xt===0&&!(n.mode&1)&&(Nc=Qn()+500,zf&&wo()))}function cs(e,n){var t=e.callbackNode;PA(e,n);var r=Fh(e,e===xr?Nr:0);if(r===0)t!==null&&qy(t),e.callbackNode=null,e.callbackPriority=0;else if(n=r&-r,e.callbackPriority!==n){if(t!=null&&qy(t),n===1)e.tag===0?L7(Rw.bind(null,e)):Y4(Rw.bind(null,e)),I7(function(){!(Xt&6)&&wo()}),t=null;else{switch(N4(r)){case 1:t=fg;break;case 4:t=y4;break;case 16:t=Ph;break;case 536870912:t=w4;break;default:t=Ph}t=VN(t,FN.bind(null,e))}e.callbackPriority=n,e.callbackNode=t}}function FN(e,n){if(yh=-1,wh=0,Xt&6)throw Error(We(327));var t=e.callbackNode;if(fc()&&e.callbackNode!==t)return null;var r=Fh(e,e===xr?Nr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||n)n=nf(e,r);else{n=r;var a=Xt;Xt|=2;var o=UN();(xr!==e||Nr!==n)&&(oi=null,Nc=Qn()+500,rl(e,n));do try{rT();break}catch(m){BN(e,m)}while(1);Eg(),Jh.current=o,Xt=a,er!==null?n=0:(xr=null,Nr=0,n=cr)}if(n!==0){if(n===2&&(a=F1(e),a!==0&&(r=a,n=hx(e,a))),n===1)throw t=pu,rl(e,0),Gi(e,r),cs(e,Qn()),t;if(n===6)Gi(e,r);else{if(a=e.current.alternate,!(r&30)&&!tT(a)&&(n=nf(e,r),n===2&&(o=F1(e),o!==0&&(r=o,n=hx(e,o))),n===1))throw t=pu,rl(e,0),Gi(e,r),cs(e,Qn()),t;switch(e.finishedWork=a,e.finishedLanes=r,n){case 0:case 1:throw Error(We(345));case 2:Yo(e,as,oi);break;case 3:if(Gi(e,r),(r&130023424)===r&&(n=zg+500-Qn(),10<n)){if(Fh(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Xr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=$1(Yo.bind(null,e,as,oi),n);break}Yo(e,as,oi);break;case 4:if(Gi(e,r),(r&4194240)===r)break;for(n=e.eventTimes,a=-1;0<r;){var d=31-da(r);o=1<<d,d=n[d],d>a&&(a=d),r&=~o}if(r=a,r=Qn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eT(r/1960))-r,10<r){e.timeoutHandle=$1(Yo.bind(null,e,as,oi),r);break}Yo(e,as,oi);break;case 5:Yo(e,as,oi);break;default:throw Error(We(329))}}}return cs(e,Qn()),e.callbackNode===t?FN.bind(null,e):null}function hx(e,n){var t=Gd;return e.current.memoizedState.isDehydrated&&(rl(e,n).flags|=256),e=nf(e,n),e!==2&&(n=as,as=t,n!==null&&fx(n)),e}function fx(e){as===null?as=e:as.push.apply(as,e)}function tT(e){for(var n=e;;){if(n.flags&16384){var t=n.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var a=t[r],o=a.getSnapshot;a=a.value;try{if(!ma(o(),a))return!1}catch{return!1}}}if(t=n.child,n.subtreeFlags&16384&&t!==null)t.return=n,n=t;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Gi(e,n){for(n&=~Ug,n&=~Vf,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-da(n),r=1<<t;e[t]=-1,n&=~r}}function Rw(e){if(Xt&6)throw Error(We(327));fc();var n=Fh(e,0);if(!(n&1))return cs(e,Qn()),null;var t=nf(e,n);if(e.tag!==0&&t===2){var r=F1(e);r!==0&&(n=r,t=hx(e,r))}if(t===1)throw t=pu,rl(e,0),Gi(e,n),cs(e,Qn()),t;if(t===6)throw Error(We(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Yo(e,as,oi),cs(e,Qn()),null}function qg(e,n){var t=Xt;Xt|=1;try{return e(n)}finally{Xt=t,Xt===0&&(Nc=Qn()+500,zf&&wo())}}function hl(e){Zi!==null&&Zi.tag===0&&!(Xt&6)&&fc();var n=Xt;Xt|=1;var t=Gs.transition,r=fn;try{if(Gs.transition=null,fn=1,e)return e()}finally{fn=r,Gs.transition=t,Xt=n,!(Xt&6)&&wo()}}function Wg(){Ns=sc.current,Nn(sc)}function rl(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(t!==-1&&(e.timeoutHandle=-1,D7(t)),er!==null)for(t=er.return;t!==null;){var r=t;switch(jg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wh();break;case 3:wc(),Nn(os),Nn(Fr),Ig();break;case 5:Dg(r);break;case 4:wc();break;case 13:Nn(In);break;case 19:Nn(In);break;case 10:Sg(r.type._context);break;case 22:case 23:Wg()}t=t.return}if(xr=e,er=e=lo(e.current,null),Nr=Ns=n,cr=0,pu=null,Ug=Vf=ul=0,as=Gd=null,Ko!==null){for(n=0;n<Ko.length;n++)if(t=Ko[n],r=t.interleaved,r!==null){t.interleaved=null;var a=r.next,o=t.pending;if(o!==null){var d=o.next;o.next=a,r.next=d}t.pending=r}Ko=null}return e}function BN(e,n){do{var t=er;try{if(Eg(),xh.current=Zh,Kh){for(var r=Rn.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Kh=!1}if(dl=0,mr=or=Rn=null,Yd=!1,uu=0,Bg.current=null,t===null||t.return===null){cr=1,pu=n,er=null;break}e:{var o=e,d=t.return,m=t,v=n;if(n=Nr,m.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var g=v,w=m,b=w.tag;if(!(w.mode&1)&&(b===0||b===11||b===15)){var _=w.alternate;_?(w.updateQueue=_.updateQueue,w.memoizedState=_.memoizedState,w.lanes=_.lanes):(w.updateQueue=null,w.memoizedState=null)}var E=bw(d);if(E!==null){E.flags&=-257,Nw(E,d,m,o,n),E.mode&1&&ww(o,g,n),n=E,v=g;var T=n.updateQueue;if(T===null){var I=new Set;I.add(v),n.updateQueue=I}else T.add(v);break e}else{if(!(n&1)){ww(o,g,n),Hg();break e}v=Error(We(426))}}else if(Sn&&m.mode&1){var k=bw(d);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Nw(k,d,m,o,n),Cg(bc(v,m));break e}}o=v=bc(v,m),cr!==4&&(cr=2),Gd===null?Gd=[o]:Gd.push(o),o=d;do{switch(o.tag){case 3:o.flags|=65536,n&=-n,o.lanes|=n;var S=NN(o,v,n);pw(o,S);break e;case 1:m=v;var A=o.type,O=o.stateNode;if(!(o.flags&128)&&(typeof A.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(io===null||!io.has(O)))){o.flags|=65536,n&=-n,o.lanes|=n;var P=jN(o,m,n);pw(o,P);break e}}o=o.return}while(o!==null)}qN(t)}catch($){n=$,er===t&&t!==null&&(er=t=t.return);continue}break}while(1)}function UN(){var e=Jh.current;return Jh.current=Zh,e===null?Zh:e}function Hg(){(cr===0||cr===3||cr===2)&&(cr=4),xr===null||!(ul&268435455)&&!(Vf&268435455)||Gi(xr,Nr)}function nf(e,n){var t=Xt;Xt|=2;var r=UN();(xr!==e||Nr!==n)&&(oi=null,rl(e,n));do try{nT();break}catch(a){BN(e,a)}while(1);if(Eg(),Xt=t,Jh.current=r,er!==null)throw Error(We(261));return xr=null,Nr=0,cr}function nT(){for(;er!==null;)zN(er)}function rT(){for(;er!==null&&!kA();)zN(er)}function zN(e){var n=HN(e.alternate,e,Ns);e.memoizedProps=e.pendingProps,n===null?qN(e):er=n,Bg.current=null}function qN(e){var n=e;do{var t=n.alternate;if(e=n.return,n.flags&32768){if(t=X7(t,n),t!==null){t.flags&=32767,er=t;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{cr=6,er=null;return}}else if(t=G7(t,n,Ns),t!==null){er=t;return}if(n=n.sibling,n!==null){er=n;return}er=n=e}while(n!==null);cr===0&&(cr=5)}function Yo(e,n,t){var r=fn,a=Gs.transition;try{Gs.transition=null,fn=1,sT(e,n,t,r)}finally{Gs.transition=a,fn=r}return null}function sT(e,n,t,r){do fc();while(Zi!==null);if(Xt&6)throw Error(We(327));t=e.finishedWork;var a=e.finishedLanes;if(t===null)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(We(177));e.callbackNode=null,e.callbackPriority=0;var o=t.lanes|t.childLanes;if(FA(e,o),e===xr&&(er=xr=null,Nr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||K0||(K0=!0,VN(Ph,function(){return fc(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=Gs.transition,Gs.transition=null;var d=fn;fn=1;var m=Xt;Xt|=4,Bg.current=null,Z7(e,t),LN(t,e),C7(H1),Bh=!!W1,H1=W1=null,e.current=t,J7(t),AA(),Xt=m,fn=d,Gs.transition=o}else e.current=t;if(K0&&(K0=!1,Zi=e,tf=a),o=e.pendingLanes,o===0&&(io=null),IA(t.stateNode),cs(e,Qn()),n!==null)for(r=e.onRecoverableError,t=0;t<n.length;t++)a=n[t],r(a.value,{componentStack:a.stack,digest:a.digest});if(ef)throw ef=!1,e=dx,dx=null,e;return tf&1&&e.tag!==0&&fc(),o=e.pendingLanes,o&1?e===ux?Xd++:(Xd=0,ux=e):Xd=0,wo(),null}function fc(){if(Zi!==null){var e=N4(tf),n=Gs.transition,t=fn;try{if(Gs.transition=null,fn=16>e?16:e,Zi===null)var r=!1;else{if(e=Zi,Zi=null,tf=0,Xt&6)throw Error(We(331));var a=Xt;for(Xt|=4,st=e.current;st!==null;){var o=st,d=o.child;if(st.flags&16){var m=o.deletions;if(m!==null){for(var v=0;v<m.length;v++){var g=m[v];for(st=g;st!==null;){var w=st;switch(w.tag){case 0:case 11:case 15:Qd(8,w,o)}var b=w.child;if(b!==null)b.return=w,st=b;else for(;st!==null;){w=st;var _=w.sibling,E=w.return;if(MN(w),w===g){st=null;break}if(_!==null){_.return=E,st=_;break}st=E}}}var T=o.alternate;if(T!==null){var I=T.child;if(I!==null){T.child=null;do{var k=I.sibling;I.sibling=null,I=k}while(I!==null)}}st=o}}if(o.subtreeFlags&2064&&d!==null)d.return=o,st=d;else e:for(;st!==null;){if(o=st,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Qd(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,st=S;break e}st=o.return}}var A=e.current;for(st=A;st!==null;){d=st;var O=d.child;if(d.subtreeFlags&2064&&O!==null)O.return=d,st=O;else e:for(d=A;st!==null;){if(m=st,m.flags&2048)try{switch(m.tag){case 0:case 11:case 15:Hf(9,m)}}catch($){zn(m,m.return,$)}if(m===d){st=null;break e}var P=m.sibling;if(P!==null){P.return=m.return,st=P;break e}st=m.return}}if(Xt=a,wo(),Pa&&typeof Pa.onPostCommitFiberRoot=="function")try{Pa.onPostCommitFiberRoot(Lf,e)}catch{}r=!0}return r}finally{fn=t,Gs.transition=n}}return!1}function Ow(e,n,t){n=bc(t,n),n=NN(e,n,1),e=ao(e,n,1),n=Xr(),e!==null&&(Eu(e,1,n),cs(e,n))}function zn(e,n,t){if(e.tag===3)Ow(e,e,t);else for(;n!==null;){if(n.tag===3){Ow(n,e,t);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(io===null||!io.has(r))){e=bc(t,e),e=jN(n,e,1),n=ao(n,e,1),e=Xr(),n!==null&&(Eu(n,1,e),cs(n,e));break}}n=n.return}}function aT(e,n,t){var r=e.pingCache;r!==null&&r.delete(n),n=Xr(),e.pingedLanes|=e.suspendedLanes&t,xr===e&&(Nr&t)===t&&(cr===4||cr===3&&(Nr&130023424)===Nr&&500>Qn()-zg?rl(e,0):Ug|=t),cs(e,n)}function WN(e,n){n===0&&(e.mode&1?(n=z0,z0<<=1,!(z0&130023424)&&(z0=4194304)):n=1);var t=Xr();e=wi(e,n),e!==null&&(Eu(e,n,t),cs(e,t))}function iT(e){var n=e.memoizedState,t=0;n!==null&&(t=n.retryLane),WN(e,t)}function oT(e,n){var t=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(t=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(We(314))}r!==null&&r.delete(n),WN(e,t)}var HN;HN=function(e,n,t){if(e!==null)if(e.memoizedProps!==n.pendingProps||os.current)is=!0;else{if(!(e.lanes&t)&&!(n.flags&128))return is=!1,Q7(e,n,t);is=!!(e.flags&131072)}else is=!1,Sn&&n.flags&1048576&&Q4(n,$h,n.index);switch(n.lanes=0,n.tag){case 2:var r=n.type;vh(e,n),e=n.pendingProps;var a=gc(n,Fr.current);hc(n,t),a=Rg(null,n,r,e,a,t);var o=Og();return n.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,ls(r)?(o=!0,Hh(n)):o=!1,n.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Ag(n),a.updater=Wf,n.stateNode=a,a._reactInternals=n,J1(n,r,e,t),n=nx(null,n,r,!0,o,t)):(n.tag=0,Sn&&o&&Ng(n),$r(null,n,a,t),n=n.child),n;case 16:r=n.elementType;e:{switch(vh(e,n),e=n.pendingProps,a=r._init,r=a(r._payload),n.type=r,a=n.tag=cT(r),e=oa(r,e),a){case 0:n=tx(null,n,r,e,t);break e;case 1:n=_w(null,n,r,e,t);break e;case 11:n=jw(null,n,r,e,t);break e;case 14:n=Cw(null,n,r,oa(r.type,e),t);break e}throw Error(We(306,r,""))}return n;case 0:return r=n.type,a=n.pendingProps,a=n.elementType===r?a:oa(r,a),tx(e,n,r,a,t);case 1:return r=n.type,a=n.pendingProps,a=n.elementType===r?a:oa(r,a),_w(e,n,r,a,t);case 3:e:{if(SN(n),e===null)throw Error(We(387));r=n.pendingProps,o=n.memoizedState,a=o.element,eN(e,n),Gh(n,r,null,t);var d=n.memoizedState;if(r=d.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},n.updateQueue.baseState=o,n.memoizedState=o,n.flags&256){a=bc(Error(We(423)),n),n=Ew(e,n,r,t,a);break e}else if(r!==a){a=bc(Error(We(424)),n),n=Ew(e,n,r,t,a);break e}else for(Cs=so(n.stateNode.containerInfo.firstChild),_s=n,Sn=!0,ca=null,t=Z4(n,null,r,t),n.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(vc(),r===a){n=bi(e,n,t);break e}$r(e,n,r,t)}n=n.child}return n;case 5:return tN(n),e===null&&X1(n),r=n.type,a=n.pendingProps,o=e!==null?e.memoizedProps:null,d=a.children,V1(r,a)?d=null:o!==null&&V1(r,o)&&(n.flags|=32),EN(e,n),$r(e,n,d,t),n.child;case 6:return e===null&&X1(n),null;case 13:return kN(e,n,t);case 4:return Tg(n,n.stateNode.containerInfo),r=n.pendingProps,e===null?n.child=yc(n,null,r,t):$r(e,n,r,t),n.child;case 11:return r=n.type,a=n.pendingProps,a=n.elementType===r?a:oa(r,a),jw(e,n,r,a,t);case 7:return $r(e,n,n.pendingProps,t),n.child;case 8:return $r(e,n,n.pendingProps.children,t),n.child;case 12:return $r(e,n,n.pendingProps.children,t),n.child;case 10:e:{if(r=n.type._context,a=n.pendingProps,o=n.memoizedProps,d=a.value,vn(Yh,r._currentValue),r._currentValue=d,o!==null)if(ma(o.value,d)){if(o.children===a.children&&!os.current){n=bi(e,n,t);break e}}else for(o=n.child,o!==null&&(o.return=n);o!==null;){var m=o.dependencies;if(m!==null){d=o.child;for(var v=m.firstContext;v!==null;){if(v.context===r){if(o.tag===1){v=ui(-1,t&-t),v.tag=2;var g=o.updateQueue;if(g!==null){g=g.shared;var w=g.pending;w===null?v.next=v:(v.next=w.next,w.next=v),g.pending=v}}o.lanes|=t,v=o.alternate,v!==null&&(v.lanes|=t),K1(o.return,t,n),m.lanes|=t;break}v=v.next}}else if(o.tag===10)d=o.type===n.type?null:o.child;else if(o.tag===18){if(d=o.return,d===null)throw Error(We(341));d.lanes|=t,m=d.alternate,m!==null&&(m.lanes|=t),K1(d,t,n),d=o.sibling}else d=o.child;if(d!==null)d.return=o;else for(d=o;d!==null;){if(d===n){d=null;break}if(o=d.sibling,o!==null){o.return=d.return,d=o;break}d=d.return}o=d}$r(e,n,a.children,t),n=n.child}return n;case 9:return a=n.type,r=n.pendingProps.children,hc(n,t),a=Xs(a),r=r(a),n.flags|=1,$r(e,n,r,t),n.child;case 14:return r=n.type,a=oa(r,n.pendingProps),a=oa(r.type,a),Cw(e,n,r,a,t);case 15:return CN(e,n,n.type,n.pendingProps,t);case 17:return r=n.type,a=n.pendingProps,a=n.elementType===r?a:oa(r,a),vh(e,n),n.tag=1,ls(r)?(e=!0,Hh(n)):e=!1,hc(n,t),bN(n,r,a),J1(n,r,a,t),nx(null,n,r,!0,e,t);case 19:return AN(e,n,t);case 22:return _N(e,n,t)}throw Error(We(156,n.tag))};function VN(e,n){return v4(e,n)}function lT(e,n,t,r){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qs(e,n,t,r){return new lT(e,n,t,r)}function Vg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cT(e){if(typeof e=="function")return Vg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===dg)return 11;if(e===ug)return 14}return 2}function lo(e,n){var t=e.alternate;return t===null?(t=Qs(e.tag,n,e.key,e.mode),t.elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=e.flags&14680064,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function bh(e,n,t,r,a,o){var d=2;if(r=e,typeof e=="function")Vg(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case Ql:return sl(t.children,a,o,n);case cg:d=8,a|=8;break;case j1:return e=Qs(12,t,n,a|2),e.elementType=j1,e.lanes=o,e;case C1:return e=Qs(13,t,n,a),e.elementType=C1,e.lanes=o,e;case _1:return e=Qs(19,t,n,a),e.elementType=_1,e.lanes=o,e;case t4:return $f(t,a,o,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case J3:d=10;break e;case e4:d=9;break e;case dg:d=11;break e;case ug:d=14;break e;case Vi:d=16,r=null;break e}throw Error(We(130,e==null?e:typeof e,""))}return n=Qs(d,t,n,a),n.elementType=e,n.type=r,n.lanes=o,n}function sl(e,n,t,r){return e=Qs(7,e,r,n),e.lanes=t,e}function $f(e,n,t,r){return e=Qs(22,e,r,n),e.elementType=t4,e.lanes=t,e.stateNode={isHidden:!1},e}function Jm(e,n,t){return e=Qs(6,e,null,n),e.lanes=t,e}function e1(e,n,t){return n=Qs(4,e.children!==null?e.children:[],e.key,n),n.lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function dT(e,n,t,r,a){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rm(0),this.expirationTimes=Rm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rm(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function $g(e,n,t,r,a,o,d,m,v){return e=new dT(e,n,t,m,v),n===1?(n=1,o===!0&&(n|=8)):n=0,o=Qs(3,null,null,n),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ag(o),e}function uT(e,n,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yl,key:r==null?null:""+r,children:e,containerInfo:n,implementation:t}}function $N(e){if(!e)return mo;e=e._reactInternals;e:{if(yl(e)!==e||e.tag!==1)throw Error(We(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(ls(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(We(171))}if(e.tag===1){var t=e.type;if(ls(t))return $4(e,t,n)}return n}function YN(e,n,t,r,a,o,d,m,v){return e=$g(t,r,!0,e,a,o,d,m,v),e.context=$N(null),t=e.current,r=Xr(),a=oo(t),o=ui(r,a),o.callback=n??null,ao(t,o,a),e.current.lanes=a,Eu(e,a,r),cs(e,r),e}function Yf(e,n,t,r){var a=n.current,o=Xr(),d=oo(a);return t=$N(t),n.context===null?n.context=t:n.pendingContext=t,n=ui(o,d),n.payload={element:e},r=r===void 0?null:r,r!==null&&(n.callback=r),e=ao(a,n,d),e!==null&&(ua(e,a,d,o),mh(e,a,d)),d}function rf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Lw(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var t=e.retryLane;e.retryLane=t!==0&&t<n?t:n}}function Yg(e,n){Lw(e,n),(e=e.alternate)&&Lw(e,n)}function hT(){return null}var QN=typeof reportError=="function"?reportError:function(e){console.error(e)};function Qg(e){this._internalRoot=e}Qf.prototype.render=Qg.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(We(409));Yf(e,n,null,null)};Qf.prototype.unmount=Qg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;hl(function(){Yf(null,e,null,null)}),n[yi]=null}};function Qf(e){this._internalRoot=e}Qf.prototype.unstable_scheduleHydration=function(e){if(e){var n=_4();e={blockedOn:null,target:e,priority:n};for(var t=0;t<Qi.length&&n!==0&&n<Qi[t].priority;t++);Qi.splice(t,0,e),t===0&&S4(e)}};function Gg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Pw(){}function fT(e,n,t,r,a){if(a){if(typeof r=="function"){var o=r;r=function(){var g=rf(d);o.call(g)}}var d=YN(n,r,e,0,null,!1,!1,"",Pw);return e._reactRootContainer=d,e[yi]=d.current,iu(e.nodeType===8?e.parentNode:e),hl(),d}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var m=r;r=function(){var g=rf(v);m.call(g)}}var v=$g(e,0,!1,null,null,!1,!1,"",Pw);return e._reactRootContainer=v,e[yi]=v.current,iu(e.nodeType===8?e.parentNode:e),hl(function(){Yf(n,v,t,r)}),v}function Xf(e,n,t,r,a){var o=t._reactRootContainer;if(o){var d=o;if(typeof a=="function"){var m=a;a=function(){var v=rf(d);m.call(v)}}Yf(n,d,e,a)}else d=fT(t,n,e,a,r);return rf(d)}j4=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var t=Fd(n.pendingLanes);t!==0&&(pg(n,t|1),cs(n,Qn()),!(Xt&6)&&(Nc=Qn()+500,wo()))}break;case 13:hl(function(){var r=wi(e,1);if(r!==null){var a=Xr();ua(r,e,1,a)}}),Yg(e,1)}};mg=function(e){if(e.tag===13){var n=wi(e,134217728);if(n!==null){var t=Xr();ua(n,e,134217728,t)}Yg(e,134217728)}};C4=function(e){if(e.tag===13){var n=oo(e),t=wi(e,n);if(t!==null){var r=Xr();ua(t,e,n,r)}Yg(e,n)}};_4=function(){return fn};E4=function(e,n){var t=fn;try{return fn=e,n()}finally{fn=t}};O1=function(e,n,t){switch(n){case"input":if(k1(e,t),n=t.name,t.type==="radio"&&n!=null){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<t.length;n++){var r=t[n];if(r!==e&&r.form===e.form){var a=Uf(r);if(!a)throw Error(We(90));r4(r),k1(r,a)}}}break;case"textarea":a4(e,t);break;case"select":n=t.value,n!=null&&lc(e,!!t.multiple,n,!1)}};h4=qg;f4=hl;var pT={usingClientEntryPoint:!1,Events:[ku,Zl,Uf,d4,u4,qg]},Td={findFiberByHostInstance:Xo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mT={bundleType:Td.bundleType,version:Td.version,rendererPackageName:Td.rendererPackageName,rendererConfig:Td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ei.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=x4(e),e===null?null:e.stateNode},findFiberByHostInstance:Td.findFiberByHostInstance||hT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Z0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Z0.isDisabled&&Z0.supportsFiber)try{Lf=Z0.inject(mT),Pa=Z0}catch{}}ks.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pT;ks.createPortal=function(e,n){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gg(n))throw Error(We(200));return uT(e,n,null,t)};ks.createRoot=function(e,n){if(!Gg(e))throw Error(We(299));var t=!1,r="",a=QN;return n!=null&&(n.unstable_strictMode===!0&&(t=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),n=$g(e,1,!1,null,null,t,!1,r,a),e[yi]=n.current,iu(e.nodeType===8?e.parentNode:e),new Qg(n)};ks.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(We(188)):(e=Object.keys(e).join(","),Error(We(268,e)));return e=x4(n),e=e===null?null:e.stateNode,e};ks.flushSync=function(e){return hl(e)};ks.hydrate=function(e,n,t){if(!Gf(n))throw Error(We(200));return Xf(null,e,n,!0,t)};ks.hydrateRoot=function(e,n,t){if(!Gg(e))throw Error(We(405));var r=t!=null&&t.hydratedSources||null,a=!1,o="",d=QN;if(t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),n=YN(n,null,e,1,t??null,a,!1,o,d),e[yi]=n.current,iu(e),r)for(e=0;e<r.length;e++)t=r[e],a=t._getVersion,a=a(t._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a);return new Qf(n)};ks.render=function(e,n,t){if(!Gf(n))throw Error(We(200));return Xf(null,e,n,!1,t)};ks.unmountComponentAtNode=function(e){if(!Gf(e))throw Error(We(40));return e._reactRootContainer?(hl(function(){Xf(null,null,e,!1,function(){e._reactRootContainer=null,e[yi]=null})}),!0):!1};ks.unstable_batchedUpdates=qg;ks.unstable_renderSubtreeIntoContainer=function(e,n,t,r){if(!Gf(t))throw Error(We(200));if(e==null||e._reactInternals===void 0)throw Error(We(38));return Xf(e,n,t,!1,r)};ks.version="18.3.1-next-f1338f8080-20240426";function GN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GN)}catch(e){console.error(e)}}GN(),G3.exports=ks;var Xg=G3.exports;const xT=Rf(Xg);var Fw=Xg;b1.createRoot=Fw.createRoot,b1.hydrateRoot=Fw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mu(){return mu=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},mu.apply(this,arguments)}var Ji;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ji||(Ji={}));const Bw="popstate";function gT(e){e===void 0&&(e={});function n(r,a){let{pathname:o,search:d,hash:m}=r.location;return px("",{pathname:o,search:d,hash:m},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:sf(a)}return yT(n,t,null,e)}function Kn(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function XN(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function vT(){return Math.random().toString(36).substr(2,8)}function Uw(e,n){return{usr:e.state,key:e.key,idx:n}}function px(e,n,t,r){return t===void 0&&(t=null),mu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof n=="string"?Pc(n):n,{state:t,key:n&&n.key||r||vT()})}function sf(e){let{pathname:n="/",search:t="",hash:r=""}=e;return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(n+=r.charAt(0)==="#"?r:"#"+r),n}function Pc(e){let n={};if(e){let t=e.indexOf("#");t>=0&&(n.hash=e.substr(t),e=e.substr(0,t));let r=e.indexOf("?");r>=0&&(n.search=e.substr(r),e=e.substr(0,r)),e&&(n.pathname=e)}return n}function yT(e,n,t,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:o=!1}=r,d=a.history,m=Ji.Pop,v=null,g=w();g==null&&(g=0,d.replaceState(mu({},d.state,{idx:g}),""));function w(){return(d.state||{idx:null}).idx}function b(){m=Ji.Pop;let k=w(),S=k==null?null:k-g;g=k,v&&v({action:m,location:I.location,delta:S})}function _(k,S){m=Ji.Push;let A=px(I.location,k,S);t&&t(A,k),g=w()+1;let O=Uw(A,g),P=I.createHref(A);try{d.pushState(O,"",P)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;a.location.assign(P)}o&&v&&v({action:m,location:I.location,delta:1})}function E(k,S){m=Ji.Replace;let A=px(I.location,k,S);t&&t(A,k),g=w();let O=Uw(A,g),P=I.createHref(A);d.replaceState(O,"",P),o&&v&&v({action:m,location:I.location,delta:0})}function T(k){let S=a.location.origin!=="null"?a.location.origin:a.location.href,A=typeof k=="string"?k:sf(k);return A=A.replace(/ $/,"%20"),Kn(S,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,S)}let I={get action(){return m},get location(){return e(a,d)},listen(k){if(v)throw new Error("A history only accepts one active listener");return a.addEventListener(Bw,b),v=k,()=>{a.removeEventListener(Bw,b),v=null}},createHref(k){return n(a,k)},createURL:T,encodeLocation(k){let S=T(k);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:_,replace:E,go(k){return d.go(k)}};return I}var zw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(zw||(zw={}));function wT(e,n,t){return t===void 0&&(t="/"),bT(e,n,t,!1)}function bT(e,n,t,r){let a=typeof n=="string"?Pc(n):n,o=Kg(a.pathname||"/",t);if(o==null)return null;let d=KN(e);NT(d);let m=null;for(let v=0;m==null&&v<d.length;++v){let g=MT(o);m=DT(d[v],g,r)}return m}function KN(e,n,t,r){n===void 0&&(n=[]),t===void 0&&(t=[]),r===void 0&&(r="");let a=(o,d,m)=>{let v={relativePath:m===void 0?o.path||"":m,caseSensitive:o.caseSensitive===!0,childrenIndex:d,route:o};v.relativePath.startsWith("/")&&(Kn(v.relativePath.startsWith(r),'Absolute route path "'+v.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),v.relativePath=v.relativePath.slice(r.length));let g=co([r,v.relativePath]),w=t.concat(v);o.children&&o.children.length>0&&(Kn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),KN(o.children,n,w,g)),!(o.path==null&&!o.index)&&n.push({path:g,score:AT(g,o.index),routesMeta:w})};return e.forEach((o,d)=>{var m;if(o.path===""||!((m=o.path)!=null&&m.includes("?")))a(o,d);else for(let v of ZN(o.path))a(o,d,v)}),n}function ZN(e){let n=e.split("/");if(n.length===0)return[];let[t,...r]=n,a=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let d=ZN(r.join("/")),m=[];return m.push(...d.map(v=>v===""?o:[o,v].join("/"))),a&&m.push(...d),m.map(v=>e.startsWith("/")&&v===""?"/":v)}function NT(e){e.sort((n,t)=>n.score!==t.score?t.score-n.score:TT(n.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const jT=/^:[\w-]+$/,CT=3,_T=2,ET=1,ST=10,kT=-2,qw=e=>e==="*";function AT(e,n){let t=e.split("/"),r=t.length;return t.some(qw)&&(r+=kT),n&&(r+=_T),t.filter(a=>!qw(a)).reduce((a,o)=>a+(jT.test(o)?CT:o===""?ET:ST),r)}function TT(e,n){return e.length===n.length&&e.slice(0,-1).every((r,a)=>r===n[a])?e[e.length-1]-n[n.length-1]:0}function DT(e,n,t){t===void 0&&(t=!1);let{routesMeta:r}=e,a={},o="/",d=[];for(let m=0;m<r.length;++m){let v=r[m],g=m===r.length-1,w=o==="/"?n:n.slice(o.length)||"/",b=Ww({path:v.relativePath,caseSensitive:v.caseSensitive,end:g},w),_=v.route;if(!b&&g&&t&&!r[r.length-1].route.index&&(b=Ww({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},w)),!b)return null;Object.assign(a,b.params),d.push({params:a,pathname:co([o,b.pathname]),pathnameBase:PT(co([o,b.pathnameBase])),route:_}),b.pathnameBase!=="/"&&(o=co([o,b.pathnameBase]))}return d}function Ww(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[t,r]=IT(e.path,e.caseSensitive,e.end),a=n.match(t);if(!a)return null;let o=a[0],d=o.replace(/(.)\/+$/,"$1"),m=a.slice(1);return{params:r.reduce((g,w,b)=>{let{paramName:_,isOptional:E}=w;if(_==="*"){let I=m[b]||"";d=o.slice(0,o.length-I.length).replace(/(.)\/+$/,"$1")}const T=m[b];return E&&!T?g[_]=void 0:g[_]=(T||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:d,pattern:e}}function IT(e,n,t){n===void 0&&(n=!1),t===void 0&&(t=!0),XN(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,v)=>(r.push({paramName:m,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,n?void 0:"i"),r]}function MT(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return XN(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),e}}function Kg(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let t=n.endsWith("/")?n.length-1:n.length,r=e.charAt(t);return r&&r!=="/"?null:e.slice(t)||"/"}function RT(e,n){n===void 0&&(n="/");let{pathname:t,search:r="",hash:a=""}=typeof e=="string"?Pc(e):e;return{pathname:t?t.startsWith("/")?t:OT(t,n):n,search:FT(r),hash:BT(a)}}function OT(e,n){let t=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function t1(e,n,t,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LT(e){return e.filter((n,t)=>t===0||n.route.path&&n.route.path.length>0)}function Zg(e,n){let t=LT(e);return n?t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Jg(e,n,t,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=Pc(e):(a=mu({},e),Kn(!a.pathname||!a.pathname.includes("?"),t1("?","pathname","search",a)),Kn(!a.pathname||!a.pathname.includes("#"),t1("#","pathname","hash",a)),Kn(!a.search||!a.search.includes("#"),t1("#","search","hash",a)));let o=e===""||a.pathname==="",d=o?"/":a.pathname,m;if(d==null)m=t;else{let b=n.length-1;if(!r&&d.startsWith("..")){let _=d.split("/");for(;_[0]==="..";)_.shift(),b-=1;a.pathname=_.join("/")}m=b>=0?n[b]:"/"}let v=RT(a,m),g=d&&d!=="/"&&d.endsWith("/"),w=(o||d===".")&&t.endsWith("/");return!v.pathname.endsWith("/")&&(g||w)&&(v.pathname+="/"),v}const co=e=>e.join("/").replace(/\/\/+/g,"/"),PT=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),FT=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,BT=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function UT(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const JN=["post","put","patch","delete"];new Set(JN);const zT=["get",...JN];new Set(zT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xu(){return xu=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},xu.apply(this,arguments)}const e2=M.createContext(null),qT=M.createContext(null),bo=M.createContext(null),Kf=M.createContext(null),Si=M.createContext({outlet:null,matches:[],isDataRoute:!1}),ej=M.createContext(null);function WT(e,n){let{relative:t}=n===void 0?{}:n;Fc()||Kn(!1);let{basename:r,navigator:a}=M.useContext(bo),{hash:o,pathname:d,search:m}=nj(e,{relative:t}),v=d;return r!=="/"&&(v=d==="/"?r:co([r,d])),a.createHref({pathname:v,search:m,hash:o})}function Fc(){return M.useContext(Kf)!=null}function Bc(){return Fc()||Kn(!1),M.useContext(Kf).location}function tj(e){M.useContext(bo).static||M.useLayoutEffect(e)}function us(){let{isDataRoute:e}=M.useContext(Si);return e?nD():HT()}function HT(){Fc()||Kn(!1);let e=M.useContext(e2),{basename:n,future:t,navigator:r}=M.useContext(bo),{matches:a}=M.useContext(Si),{pathname:o}=Bc(),d=JSON.stringify(Zg(a,t.v7_relativeSplatPath)),m=M.useRef(!1);return tj(()=>{m.current=!0}),M.useCallback(function(g,w){if(w===void 0&&(w={}),!m.current)return;if(typeof g=="number"){r.go(g);return}let b=Jg(g,JSON.parse(d),o,w.relative==="path");e==null&&n!=="/"&&(b.pathname=b.pathname==="/"?n:co([n,b.pathname])),(w.replace?r.replace:r.push)(b,w.state,w)},[n,r,d,o,e])}function Zf(){let{matches:e}=M.useContext(Si),n=e[e.length-1];return n?n.params:{}}function nj(e,n){let{relative:t}=n===void 0?{}:n,{future:r}=M.useContext(bo),{matches:a}=M.useContext(Si),{pathname:o}=Bc(),d=JSON.stringify(Zg(a,r.v7_relativeSplatPath));return M.useMemo(()=>Jg(e,JSON.parse(d),o,t==="path"),[e,d,o,t])}function VT(e,n){return $T(e,n)}function $T(e,n,t,r){Fc()||Kn(!1);let{navigator:a}=M.useContext(bo),{matches:o}=M.useContext(Si),d=o[o.length-1],m=d?d.params:{};d&&d.pathname;let v=d?d.pathnameBase:"/";d&&d.route;let g=Bc(),w;if(n){var b;let k=typeof n=="string"?Pc(n):n;v==="/"||(b=k.pathname)!=null&&b.startsWith(v)||Kn(!1),w=k}else w=g;let _=w.pathname||"/",E=_;if(v!=="/"){let k=v.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(k.length).join("/")}let T=wT(e,{pathname:E}),I=KT(T&&T.map(k=>Object.assign({},k,{params:Object.assign({},m,k.params),pathname:co([v,a.encodeLocation?a.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?v:co([v,a.encodeLocation?a.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),o,t,r);return n&&I?M.createElement(Kf.Provider,{value:{location:xu({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:Ji.Pop}},I):I}function YT(){let e=tD(),n=UT(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},n),t?M.createElement("pre",{style:a},t):null,o)}const QT=M.createElement(YT,null);class GT extends M.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){console.error("React Router caught the following error during render",n,t)}render(){return this.state.error!==void 0?M.createElement(Si.Provider,{value:this.props.routeContext},M.createElement(ej.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XT(e){let{routeContext:n,match:t,children:r}=e,a=M.useContext(e2);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(Si.Provider,{value:n},r)}function KT(e,n,t,r){var a;if(n===void 0&&(n=[]),t===void 0&&(t=null),r===void 0&&(r=null),e==null){var o;if(!t)return null;if(t.errors)e=t.matches;else if((o=r)!=null&&o.v7_partialHydration&&n.length===0&&!t.initialized&&t.matches.length>0)e=t.matches;else return null}let d=e,m=(a=t)==null?void 0:a.errors;if(m!=null){let w=d.findIndex(b=>b.route.id&&(m==null?void 0:m[b.route.id])!==void 0);w>=0||Kn(!1),d=d.slice(0,Math.min(d.length,w+1))}let v=!1,g=-1;if(t&&r&&r.v7_partialHydration)for(let w=0;w<d.length;w++){let b=d[w];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(g=w),b.route.id){let{loaderData:_,errors:E}=t,T=b.route.loader&&_[b.route.id]===void 0&&(!E||E[b.route.id]===void 0);if(b.route.lazy||T){v=!0,g>=0?d=d.slice(0,g+1):d=[d[0]];break}}}return d.reduceRight((w,b,_)=>{let E,T=!1,I=null,k=null;t&&(E=m&&b.route.id?m[b.route.id]:void 0,I=b.route.errorElement||QT,v&&(g<0&&_===0?(rD("route-fallback",!1),T=!0,k=null):g===_&&(T=!0,k=b.route.hydrateFallbackElement||null)));let S=n.concat(d.slice(0,_+1)),A=()=>{let O;return E?O=I:T?O=k:b.route.Component?O=M.createElement(b.route.Component,null):b.route.element?O=b.route.element:O=w,M.createElement(XT,{match:b,routeContext:{outlet:w,matches:S,isDataRoute:t!=null},children:O})};return t&&(b.route.ErrorBoundary||b.route.errorElement||_===0)?M.createElement(GT,{location:t.location,revalidation:t.revalidation,component:I,error:E,children:A(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):A()},null)}var rj=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(rj||{}),af=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(af||{});function ZT(e){let n=M.useContext(e2);return n||Kn(!1),n}function JT(e){let n=M.useContext(qT);return n||Kn(!1),n}function eD(e){let n=M.useContext(Si);return n||Kn(!1),n}function sj(e){let n=eD(),t=n.matches[n.matches.length-1];return t.route.id||Kn(!1),t.route.id}function tD(){var e;let n=M.useContext(ej),t=JT(af.UseRouteError),r=sj(af.UseRouteError);return n!==void 0?n:(e=t.errors)==null?void 0:e[r]}function nD(){let{router:e}=ZT(rj.UseNavigateStable),n=sj(af.UseNavigateStable),t=M.useRef(!1);return tj(()=>{t.current=!0}),M.useCallback(function(a,o){o===void 0&&(o={}),t.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,xu({fromRouteId:n},o)))},[e,n])}const Hw={};function rD(e,n,t){!n&&!Hw[e]&&(Hw[e]=!0)}function sD(e,n){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!n||n.v7_relativeSplatPath),n&&(n.v7_fetcherPersist,n.v7_normalizeFormMethod,n.v7_partialHydration,n.v7_skipActionErrorRevalidation)}function of(e){let{to:n,replace:t,state:r,relative:a}=e;Fc()||Kn(!1);let{future:o,static:d}=M.useContext(bo),{matches:m}=M.useContext(Si),{pathname:v}=Bc(),g=us(),w=Jg(n,Zg(m,o.v7_relativeSplatPath),v,a==="path"),b=JSON.stringify(w);return M.useEffect(()=>g(JSON.parse(b),{replace:t,state:r,relative:a}),[g,b,a,t,r]),null}function Rr(e){Kn(!1)}function aD(e){let{basename:n="/",children:t=null,location:r,navigationType:a=Ji.Pop,navigator:o,static:d=!1,future:m}=e;Fc()&&Kn(!1);let v=n.replace(/^\/*/,"/"),g=M.useMemo(()=>({basename:v,navigator:o,static:d,future:xu({v7_relativeSplatPath:!1},m)}),[v,m,o,d]);typeof r=="string"&&(r=Pc(r));let{pathname:w="/",search:b="",hash:_="",state:E=null,key:T="default"}=r,I=M.useMemo(()=>{let k=Kg(w,v);return k==null?null:{location:{pathname:k,search:b,hash:_,state:E,key:T},navigationType:a}},[v,w,b,_,E,T,a]);return I==null?null:M.createElement(bo.Provider,{value:g},M.createElement(Kf.Provider,{children:t,value:I}))}function iD(e){let{children:n,location:t}=e;return VT(mx(n),t)}new Promise(()=>{});function mx(e,n){n===void 0&&(n=[]);let t=[];return M.Children.forEach(e,(r,a)=>{if(!M.isValidElement(r))return;let o=[...n,a];if(r.type===M.Fragment){t.push.apply(t,mx(r.props.children,o));return}r.type!==Rr&&Kn(!1),!r.props.index||!r.props.children||Kn(!1);let d={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(d.children=mx(r.props.children,o)),t.push(d)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xx(){return xx=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},xx.apply(this,arguments)}function oD(e,n){if(e==null)return{};var t={},r=Object.keys(e),a,o;for(o=0;o<r.length;o++)a=r[o],!(n.indexOf(a)>=0)&&(t[a]=e[a]);return t}function lD(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function cD(e,n){return e.button===0&&(!n||n==="_self")&&!lD(e)}const dD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],uD="6";try{window.__reactRouterVersion=uD}catch{}const hD="startTransition",Vw=ag[hD];function fD(e){let{basename:n,children:t,future:r,window:a}=e,o=M.useRef();o.current==null&&(o.current=gT({window:a,v5Compat:!0}));let d=o.current,[m,v]=M.useState({action:d.action,location:d.location}),{v7_startTransition:g}=r||{},w=M.useCallback(b=>{g&&Vw?Vw(()=>v(b)):v(b)},[v,g]);return M.useLayoutEffect(()=>d.listen(w),[d,w]),M.useEffect(()=>sD(r),[r]),M.createElement(aD,{basename:n,children:t,location:m.location,navigationType:m.action,navigator:d,future:r})}const pD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qn=M.forwardRef(function(n,t){let{onClick:r,relative:a,reloadDocument:o,replace:d,state:m,target:v,to:g,preventScrollReset:w,viewTransition:b}=n,_=oD(n,dD),{basename:E}=M.useContext(bo),T,I=!1;if(typeof g=="string"&&mD.test(g)&&(T=g,pD))try{let O=new URL(window.location.href),P=g.startsWith("//")?new URL(O.protocol+g):new URL(g),$=Kg(P.pathname,E);P.origin===O.origin&&$!=null?g=$+P.search+P.hash:I=!0}catch{}let k=WT(g,{relative:a}),S=xD(g,{replace:d,state:m,target:v,preventScrollReset:w,relative:a,viewTransition:b});function A(O){r&&r(O),O.defaultPrevented||S(O)}return M.createElement("a",xx({},_,{href:T||k,onClick:I||o?r:A,ref:t,target:v}))});var $w;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})($w||($w={}));var Yw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Yw||(Yw={}));function xD(e,n){let{target:t,replace:r,state:a,preventScrollReset:o,relative:d,viewTransition:m}=n===void 0?{}:n,v=us(),g=Bc(),w=nj(e,{relative:d});return M.useCallback(b=>{if(cD(b,t)){b.preventDefault();let _=r!==void 0?r:sf(g)===sf(w);v(e,{replace:_,state:a,preventScrollReset:o,relative:d,viewTransition:m})}},[g,v,w,r,a,t,e,o,d,m])}class Uc{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){const t={listener:n};return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const gu=typeof window>"u"||"Deno"in window;function qs(){}function gD(e,n){return typeof e=="function"?e(n):e}function gx(e){return typeof e=="number"&&e>=0&&e!==1/0}function aj(e,n){return Math.max(e+(n||0)-Date.now(),0)}function ac(e,n,t){return Tu(e)?typeof n=="function"?{...t,queryKey:e,queryFn:n}:{...n,queryKey:e}:e}function vD(e,n,t){return Tu(e)?typeof n=="function"?{...t,mutationKey:e,mutationFn:n}:{...n,mutationKey:e}:typeof e=="function"?{...n,mutationFn:e}:{...e}}function Yi(e,n,t){return Tu(e)?[{...n,queryKey:e},t]:[e||{},n]}function Qw(e,n){const{type:t="all",exact:r,fetchStatus:a,predicate:o,queryKey:d,stale:m}=e;if(Tu(d)){if(r){if(n.queryHash!==t2(d,n.options))return!1}else if(!lf(n.queryKey,d))return!1}if(t!=="all"){const v=n.isActive();if(t==="active"&&!v||t==="inactive"&&v)return!1}return!(typeof m=="boolean"&&n.isStale()!==m||typeof a<"u"&&a!==n.state.fetchStatus||o&&!o(n))}function Gw(e,n){const{exact:t,fetching:r,predicate:a,mutationKey:o}=e;if(Tu(o)){if(!n.options.mutationKey)return!1;if(t){if(Jo(n.options.mutationKey)!==Jo(o))return!1}else if(!lf(n.options.mutationKey,o))return!1}return!(typeof r=="boolean"&&n.state.status==="loading"!==r||a&&!a(n))}function t2(e,n){return((n==null?void 0:n.queryKeyHashFn)||Jo)(e)}function Jo(e){return JSON.stringify(e,(n,t)=>vx(t)?Object.keys(t).sort().reduce((r,a)=>(r[a]=t[a],r),{}):t)}function lf(e,n){return ij(e,n)}function ij(e,n){return e===n?!0:typeof e!=typeof n?!1:e&&n&&typeof e=="object"&&typeof n=="object"?!Object.keys(n).some(t=>!ij(e[t],n[t])):!1}function oj(e,n){if(e===n)return e;const t=Xw(e)&&Xw(n);if(t||vx(e)&&vx(n)){const r=t?e.length:Object.keys(e).length,a=t?n:Object.keys(n),o=a.length,d=t?[]:{};let m=0;for(let v=0;v<o;v++){const g=t?v:a[v];d[g]=oj(e[g],n[g]),d[g]===e[g]&&m++}return r===o&&m===r?e:d}return n}function cf(e,n){if(e&&!n||n&&!e)return!1;for(const t in e)if(e[t]!==n[t])return!1;return!0}function Xw(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function vx(e){if(!Kw(e))return!1;const n=e.constructor;if(typeof n>"u")return!0;const t=n.prototype;return!(!Kw(t)||!t.hasOwnProperty("isPrototypeOf"))}function Kw(e){return Object.prototype.toString.call(e)==="[object Object]"}function Tu(e){return Array.isArray(e)}function lj(e){return new Promise(n=>{setTimeout(n,e)})}function Zw(e){lj(0).then(e)}function yD(){if(typeof AbortController=="function")return new AbortController}function yx(e,n,t){return t.isDataEqual!=null&&t.isDataEqual(e,n)?e:typeof t.structuralSharing=="function"?t.structuralSharing(e,n):t.structuralSharing!==!1?oj(e,n):n}class wD extends Uc{constructor(){super(),this.setup=n=>{if(!gu&&window.addEventListener){const t=()=>n();return window.addEventListener("visibilitychange",t,!1),window.addEventListener("focus",t,!1),()=>{window.removeEventListener("visibilitychange",t),window.removeEventListener("focus",t)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var n;(n=this.cleanup)==null||n.call(this),this.cleanup=void 0}}setEventListener(n){var t;this.setup=n,(t=this.cleanup)==null||t.call(this),this.cleanup=n(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(n){this.focused!==n&&(this.focused=n,this.onFocus())}onFocus(){this.listeners.forEach(({listener:n})=>{n()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const df=new wD,Jw=["online","offline"];class bD extends Uc{constructor(){super(),this.setup=n=>{if(!gu&&window.addEventListener){const t=()=>n();return Jw.forEach(r=>{window.addEventListener(r,t,!1)}),()=>{Jw.forEach(r=>{window.removeEventListener(r,t)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var n;(n=this.cleanup)==null||n.call(this),this.cleanup=void 0}}setEventListener(n){var t;this.setup=n,(t=this.cleanup)==null||t.call(this),this.cleanup=n(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(n){this.online!==n&&(this.online=n,this.onOnline())}onOnline(){this.listeners.forEach(({listener:n})=>{n()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const uf=new bD;function ND(e){return Math.min(1e3*2**e,3e4)}function Jf(e){return(e??"online")==="online"?uf.isOnline():!0}class cj{constructor(n){this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}}function Nh(e){return e instanceof cj}function dj(e){let n=!1,t=0,r=!1,a,o,d;const m=new Promise((k,S)=>{o=k,d=S}),v=k=>{r||(E(new cj(k)),e.abort==null||e.abort())},g=()=>{n=!0},w=()=>{n=!1},b=()=>!df.isFocused()||e.networkMode!=="always"&&!uf.isOnline(),_=k=>{r||(r=!0,e.onSuccess==null||e.onSuccess(k),a==null||a(),o(k))},E=k=>{r||(r=!0,e.onError==null||e.onError(k),a==null||a(),d(k))},T=()=>new Promise(k=>{a=S=>{const A=r||!b();return A&&k(S),A},e.onPause==null||e.onPause()}).then(()=>{a=void 0,r||e.onContinue==null||e.onContinue()}),I=()=>{if(r)return;let k;try{k=e.fn()}catch(S){k=Promise.reject(S)}Promise.resolve(k).then(_).catch(S=>{var A,O;if(r)return;const P=(A=e.retry)!=null?A:3,$=(O=e.retryDelay)!=null?O:ND,L=typeof $=="function"?$(t,S):$,F=P===!0||typeof P=="number"&&t<P||typeof P=="function"&&P(t,S);if(n||!F){E(S);return}t++,e.onFail==null||e.onFail(t,S),lj(L).then(()=>{if(b())return T()}).then(()=>{n?E(S):I()})})};return Jf(e.networkMode)?I():T().then(I),{promise:m,cancel:v,continue:()=>(a==null?void 0:a())?m:Promise.resolve(),cancelRetry:g,continueRetry:w}}const n2=console;function jD(){let e=[],n=0,t=w=>{w()},r=w=>{w()};const a=w=>{let b;n++;try{b=w()}finally{n--,n||m()}return b},o=w=>{n?e.push(w):Zw(()=>{t(w)})},d=w=>(...b)=>{o(()=>{w(...b)})},m=()=>{const w=e;e=[],w.length&&Zw(()=>{r(()=>{w.forEach(b=>{t(b)})})})};return{batch:a,batchCalls:d,schedule:o,setNotifyFunction:w=>{t=w},setBatchNotifyFunction:w=>{r=w}}}const Wn=jD();class uj{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),gx(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(n){this.cacheTime=Math.max(this.cacheTime||0,n??(gu?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class CD extends uj{constructor(n){super(),this.abortSignalConsumed=!1,this.defaultOptions=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.cache=n.cache,this.logger=n.logger||n2,this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.initialState=n.state||_D(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(n){this.options={...this.defaultOptions,...n},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(n,t){const r=yx(this.state.data,n,this.options);return this.dispatch({data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(n,t){this.dispatch({type:"setState",state:n,setStateOptions:t})}cancel(n){var t;const r=this.promise;return(t=this.retryer)==null||t.cancel(n),r?r.then(qs).catch(qs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(n=>n.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(n=>n.getCurrentResult().isStale)}isStaleByTime(n=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!aj(this.state.dataUpdatedAt,n)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t&&t.refetch({cancelRefetch:!1}),(n=this.retryer)==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t&&t.refetch({cancelRefetch:!1}),(n=this.retryer)==null||n.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(t=>t!==n),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(n,t){var r,a;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&t!=null&&t.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var o;return(o=this.retryer)==null||o.continueRetry(),this.promise}}if(n&&this.setOptions(n),!this.options.queryFn){const E=this.observers.find(T=>T.options.queryFn);E&&this.setOptions(E.options)}const d=yD(),m={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},v=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>{if(d)return this.abortSignalConsumed=!0,d.signal}})};v(m);const g=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(m)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),w={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:g};if(v(w),(r=this.options.behavior)==null||r.onFetch(w),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((a=w.fetchOptions)==null?void 0:a.meta)){var b;this.dispatch({type:"fetch",meta:(b=w.fetchOptions)==null?void 0:b.meta})}const _=E=>{if(Nh(E)&&E.silent||this.dispatch({type:"error",error:E}),!Nh(E)){var T,I,k,S;(T=(I=this.cache.config).onError)==null||T.call(I,E,this),(k=(S=this.cache.config).onSettled)==null||k.call(S,this.state.data,E,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=dj({fn:w.fetchFn,abort:d==null?void 0:d.abort.bind(d),onSuccess:E=>{var T,I,k,S;if(typeof E>"u"){_(new Error(this.queryHash+" data is undefined"));return}this.setData(E),(T=(I=this.cache.config).onSuccess)==null||T.call(I,E,this),(k=(S=this.cache.config).onSettled)==null||k.call(S,E,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:_,onFail:(E,T)=>{this.dispatch({type:"failed",failureCount:E,error:T})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:w.options.retry,retryDelay:w.options.retryDelay,networkMode:w.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(n){const t=r=>{var a,o;switch(n.type){case"failed":return{...r,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(a=n.meta)!=null?a:null,fetchStatus:Jf(this.options.networkMode)?"fetching":"paused",...!r.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...r,data:n.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(o=n.dataUpdatedAt)!=null?o:Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const d=n.error;return Nh(d)&&d.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...r,error:d,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:d,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...n.state}}};this.state=t(this.state),Wn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate(n)}),this.cache.notify({query:this,type:"updated",action:n})})}}function _D(e){const n=typeof e.initialData=="function"?e.initialData():e.initialData,t=typeof n<"u",r=t?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"loading",fetchStatus:"idle"}}class ED extends Uc{constructor(n){super(),this.config=n||{},this.queries=[],this.queriesMap={}}build(n,t,r){var a;const o=t.queryKey,d=(a=t.queryHash)!=null?a:t2(o,t);let m=this.get(d);return m||(m=new CD({cache:this,logger:n.getLogger(),queryKey:o,queryHash:d,options:n.defaultQueryOptions(t),state:r,defaultOptions:n.getQueryDefaults(o)}),this.add(m)),m}add(n){this.queriesMap[n.queryHash]||(this.queriesMap[n.queryHash]=n,this.queries.push(n),this.notify({type:"added",query:n}))}remove(n){const t=this.queriesMap[n.queryHash];t&&(n.destroy(),this.queries=this.queries.filter(r=>r!==n),t===n&&delete this.queriesMap[n.queryHash],this.notify({type:"removed",query:n}))}clear(){Wn.batch(()=>{this.queries.forEach(n=>{this.remove(n)})})}get(n){return this.queriesMap[n]}getAll(){return this.queries}find(n,t){const[r]=Yi(n,t);return typeof r.exact>"u"&&(r.exact=!0),this.queries.find(a=>Qw(r,a))}findAll(n,t){const[r]=Yi(n,t);return Object.keys(r).length>0?this.queries.filter(a=>Qw(r,a)):this.queries}notify(n){Wn.batch(()=>{this.listeners.forEach(({listener:t})=>{t(n)})})}onFocus(){Wn.batch(()=>{this.queries.forEach(n=>{n.onFocus()})})}onOnline(){Wn.batch(()=>{this.queries.forEach(n=>{n.onOnline()})})}}class SD extends uj{constructor(n){super(),this.defaultOptions=n.defaultOptions,this.mutationId=n.mutationId,this.mutationCache=n.mutationCache,this.logger=n.logger||n2,this.observers=[],this.state=n.state||hj(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options={...this.defaultOptions,...n},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(n){this.dispatch({type:"setState",state:n})}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){this.observers=this.observers.filter(t=>t!==n),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var n,t;return(n=(t=this.retryer)==null?void 0:t.continue())!=null?n:this.execute()}async execute(){const n=()=>{var F;return this.retryer=dj({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(W,V)=>{this.dispatch({type:"failed",failureCount:W,error:V})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(F=this.options.retry)!=null?F:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},t=this.state.status==="loading";try{var r,a,o,d,m,v,g,w;if(!t){var b,_,E,T;this.dispatch({type:"loading",variables:this.options.variables}),await((b=(_=this.mutationCache.config).onMutate)==null?void 0:b.call(_,this.state.variables,this));const W=await((E=(T=this.options).onMutate)==null?void 0:E.call(T,this.state.variables));W!==this.state.context&&this.dispatch({type:"loading",context:W,variables:this.state.variables})}const F=await n();return await((r=(a=this.mutationCache.config).onSuccess)==null?void 0:r.call(a,F,this.state.variables,this.state.context,this)),await((o=(d=this.options).onSuccess)==null?void 0:o.call(d,F,this.state.variables,this.state.context)),await((m=(v=this.mutationCache.config).onSettled)==null?void 0:m.call(v,F,null,this.state.variables,this.state.context,this)),await((g=(w=this.options).onSettled)==null?void 0:g.call(w,F,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:F}),F}catch(F){try{var I,k,S,A,O,P,$,L;throw await((I=(k=this.mutationCache.config).onError)==null?void 0:I.call(k,F,this.state.variables,this.state.context,this)),await((S=(A=this.options).onError)==null?void 0:S.call(A,F,this.state.variables,this.state.context)),await((O=(P=this.mutationCache.config).onSettled)==null?void 0:O.call(P,void 0,F,this.state.variables,this.state.context,this)),await(($=(L=this.options).onSettled)==null?void 0:$.call(L,void 0,F,this.state.variables,this.state.context)),F}finally{this.dispatch({type:"error",error:F})}}}dispatch(n){const t=r=>{switch(n.type){case"failed":return{...r,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"loading":return{...r,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Jf(this.options.networkMode),status:"loading",variables:n.variables};case"success":return{...r,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:n.error,failureCount:r.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"};case"setState":return{...r,...n.state}}};this.state=t(this.state),Wn.batch(()=>{this.observers.forEach(r=>{r.onMutationUpdate(n)}),this.mutationCache.notify({mutation:this,type:"updated",action:n})})}}function hj(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class kD extends Uc{constructor(n){super(),this.config=n||{},this.mutations=[],this.mutationId=0}build(n,t,r){const a=new SD({mutationCache:this,logger:n.getLogger(),mutationId:++this.mutationId,options:n.defaultMutationOptions(t),state:r,defaultOptions:t.mutationKey?n.getMutationDefaults(t.mutationKey):void 0});return this.add(a),a}add(n){this.mutations.push(n),this.notify({type:"added",mutation:n})}remove(n){this.mutations=this.mutations.filter(t=>t!==n),this.notify({type:"removed",mutation:n})}clear(){Wn.batch(()=>{this.mutations.forEach(n=>{this.remove(n)})})}getAll(){return this.mutations}find(n){return typeof n.exact>"u"&&(n.exact=!0),this.mutations.find(t=>Gw(n,t))}findAll(n){return this.mutations.filter(t=>Gw(n,t))}notify(n){Wn.batch(()=>{this.listeners.forEach(({listener:t})=>{t(n)})})}resumePausedMutations(){var n;return this.resuming=((n=this.resuming)!=null?n:Promise.resolve()).then(()=>{const t=this.mutations.filter(r=>r.state.isPaused);return Wn.batch(()=>t.reduce((r,a)=>r.then(()=>a.continue().catch(qs)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function wx(){return{onFetch:e=>{e.fetchFn=()=>{var n,t,r,a,o,d;const m=(n=e.fetchOptions)==null||(t=n.meta)==null?void 0:t.refetchPage,v=(r=e.fetchOptions)==null||(a=r.meta)==null?void 0:a.fetchMore,g=v==null?void 0:v.pageParam,w=(v==null?void 0:v.direction)==="forward",b=(v==null?void 0:v.direction)==="backward",_=((o=e.state.data)==null?void 0:o.pages)||[],E=((d=e.state.data)==null?void 0:d.pageParams)||[];let T=E,I=!1;const k=L=>{Object.defineProperty(L,"signal",{enumerable:!0,get:()=>{var F;if((F=e.signal)!=null&&F.aborted)I=!0;else{var W;(W=e.signal)==null||W.addEventListener("abort",()=>{I=!0})}return e.signal}})},S=e.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+e.options.queryHash+"'")),A=(L,F,W,V)=>(T=V?[F,...T]:[...T,F],V?[W,...L]:[...L,W]),O=(L,F,W,V)=>{if(I)return Promise.reject("Cancelled");if(typeof W>"u"&&!F&&L.length)return Promise.resolve(L);const re={queryKey:e.queryKey,pageParam:W,meta:e.options.meta};k(re);const oe=S(re);return Promise.resolve(oe).then(he=>A(L,W,he,V))};let P;if(!_.length)P=O([]);else if(w){const L=typeof g<"u",F=L?g:bx(e.options,_);P=O(_,L,F)}else if(b){const L=typeof g<"u",F=L?g:fj(e.options,_);P=O(_,L,F,!0)}else{T=[];const L=typeof e.options.getNextPageParam>"u";P=(m&&_[0]?m(_[0],0,_):!0)?O([],L,E[0]):Promise.resolve(A([],E[0],_[0]));for(let W=1;W<_.length;W++)P=P.then(V=>{if(m&&_[W]?m(_[W],W,_):!0){const oe=L?E[W]:bx(e.options,V);return O(V,L,oe)}return Promise.resolve(A(V,E[W],_[W]))})}return P.then(L=>({pages:L,pageParams:T}))}}}}function bx(e,n){return e.getNextPageParam==null?void 0:e.getNextPageParam(n[n.length-1],n)}function fj(e,n){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(n[0],n)}function AD(e,n){if(e.getNextPageParam&&Array.isArray(n)){const t=bx(e,n);return typeof t<"u"&&t!==null&&t!==!1}}function TD(e,n){if(e.getPreviousPageParam&&Array.isArray(n)){const t=fj(e,n);return typeof t<"u"&&t!==null&&t!==!1}}class DD{constructor(n={}){this.queryCache=n.queryCache||new ED,this.mutationCache=n.mutationCache||new kD,this.logger=n.logger||n2,this.defaultOptions=n.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=df.subscribe(()=>{df.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=uf.subscribe(()=>{uf.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var n,t;this.mountCount--,this.mountCount===0&&((n=this.unsubscribeFocus)==null||n.call(this),this.unsubscribeFocus=void 0,(t=this.unsubscribeOnline)==null||t.call(this),this.unsubscribeOnline=void 0)}isFetching(n,t){const[r]=Yi(n,t);return r.fetchStatus="fetching",this.queryCache.findAll(r).length}isMutating(n){return this.mutationCache.findAll({...n,fetching:!0}).length}getQueryData(n,t){var r;return(r=this.queryCache.find(n,t))==null?void 0:r.state.data}ensureQueryData(n,t,r){const a=ac(n,t,r),o=this.getQueryData(a.queryKey);return o?Promise.resolve(o):this.fetchQuery(a)}getQueriesData(n){return this.getQueryCache().findAll(n).map(({queryKey:t,state:r})=>{const a=r.data;return[t,a]})}setQueryData(n,t,r){const a=this.queryCache.find(n),o=a==null?void 0:a.state.data,d=gD(t,o);if(typeof d>"u")return;const m=ac(n),v=this.defaultQueryOptions(m);return this.queryCache.build(this,v).setData(d,{...r,manual:!0})}setQueriesData(n,t,r){return Wn.batch(()=>this.getQueryCache().findAll(n).map(({queryKey:a})=>[a,this.setQueryData(a,t,r)]))}getQueryState(n,t){var r;return(r=this.queryCache.find(n,t))==null?void 0:r.state}removeQueries(n,t){const[r]=Yi(n,t),a=this.queryCache;Wn.batch(()=>{a.findAll(r).forEach(o=>{a.remove(o)})})}resetQueries(n,t,r){const[a,o]=Yi(n,t,r),d=this.queryCache,m={type:"active",...a};return Wn.batch(()=>(d.findAll(a).forEach(v=>{v.reset()}),this.refetchQueries(m,o)))}cancelQueries(n,t,r){const[a,o={}]=Yi(n,t,r);typeof o.revert>"u"&&(o.revert=!0);const d=Wn.batch(()=>this.queryCache.findAll(a).map(m=>m.cancel(o)));return Promise.all(d).then(qs).catch(qs)}invalidateQueries(n,t,r){const[a,o]=Yi(n,t,r);return Wn.batch(()=>{var d,m;if(this.queryCache.findAll(a).forEach(g=>{g.invalidate()}),a.refetchType==="none")return Promise.resolve();const v={...a,type:(d=(m=a.refetchType)!=null?m:a.type)!=null?d:"active"};return this.refetchQueries(v,o)})}refetchQueries(n,t,r){const[a,o]=Yi(n,t,r),d=Wn.batch(()=>this.queryCache.findAll(a).filter(v=>!v.isDisabled()).map(v=>{var g;return v.fetch(void 0,{...o,cancelRefetch:(g=o==null?void 0:o.cancelRefetch)!=null?g:!0,meta:{refetchPage:a.refetchPage}})}));let m=Promise.all(d).then(qs);return o!=null&&o.throwOnError||(m=m.catch(qs)),m}fetchQuery(n,t,r){const a=ac(n,t,r),o=this.defaultQueryOptions(a);typeof o.retry>"u"&&(o.retry=!1);const d=this.queryCache.build(this,o);return d.isStaleByTime(o.staleTime)?d.fetch(o):Promise.resolve(d.state.data)}prefetchQuery(n,t,r){return this.fetchQuery(n,t,r).then(qs).catch(qs)}fetchInfiniteQuery(n,t,r){const a=ac(n,t,r);return a.behavior=wx(),this.fetchQuery(a)}prefetchInfiniteQuery(n,t,r){return this.fetchInfiniteQuery(n,t,r).then(qs).catch(qs)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(n){this.defaultOptions=n}setQueryDefaults(n,t){const r=this.queryDefaults.find(a=>Jo(n)===Jo(a.queryKey));r?r.defaultOptions=t:this.queryDefaults.push({queryKey:n,defaultOptions:t})}getQueryDefaults(n){if(!n)return;const t=this.queryDefaults.find(r=>lf(n,r.queryKey));return t==null?void 0:t.defaultOptions}setMutationDefaults(n,t){const r=this.mutationDefaults.find(a=>Jo(n)===Jo(a.mutationKey));r?r.defaultOptions=t:this.mutationDefaults.push({mutationKey:n,defaultOptions:t})}getMutationDefaults(n){if(!n)return;const t=this.mutationDefaults.find(r=>lf(n,r.mutationKey));return t==null?void 0:t.defaultOptions}defaultQueryOptions(n){if(n!=null&&n._defaulted)return n;const t={...this.defaultOptions.queries,...this.getQueryDefaults(n==null?void 0:n.queryKey),...n,_defaulted:!0};return!t.queryHash&&t.queryKey&&(t.queryHash=t2(t.queryKey,t)),typeof t.refetchOnReconnect>"u"&&(t.refetchOnReconnect=t.networkMode!=="always"),typeof t.useErrorBoundary>"u"&&(t.useErrorBoundary=!!t.suspense),t}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...this.defaultOptions.mutations,...this.getMutationDefaults(n==null?void 0:n.mutationKey),...n,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class pj extends Uc{constructor(n,t){super(),this.client=n,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),eb(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Nx(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Nx(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(n,t){const r=this.options,a=this.currentQuery;if(this.options=this.client.defaultQueryOptions(n),cf(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();const o=this.hasListeners();o&&tb(this.currentQuery,a,this.options,r)&&this.executeFetch(),this.updateResult(t),o&&(this.currentQuery!==a||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();const d=this.computeRefetchInterval();o&&(this.currentQuery!==a||this.options.enabled!==r.enabled||d!==this.currentRefetchInterval)&&this.updateRefetchInterval(d)}getOptimisticResult(n){const t=this.client.getQueryCache().build(this.client,n),r=this.createResult(t,n);return MD(this,r,n)&&(this.currentResult=r,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),r}getCurrentResult(){return this.currentResult}trackResult(n){const t={};return Object.keys(n).forEach(r=>{Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),n[r])})}),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:n,...t}={}){return this.fetch({...t,meta:{refetchPage:n}})}fetchOptimistic(n){const t=this.client.defaultQueryOptions(n),r=this.client.getQueryCache().build(this.client,t);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,t))}fetch(n){var t;return this.executeFetch({...n,cancelRefetch:(t=n.cancelRefetch)!=null?t:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(n){this.updateQuery();let t=this.currentQuery.fetch(this.options,n);return n!=null&&n.throwOnError||(t=t.catch(qs)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),gu||this.currentResult.isStale||!gx(this.options.staleTime))return;const t=aj(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},t)}computeRefetchInterval(){var n;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(n=this.options.refetchInterval)!=null?n:!1}updateRefetchInterval(n){this.clearRefetchInterval(),this.currentRefetchInterval=n,!(gu||this.options.enabled===!1||!gx(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||df.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(n,t){const r=this.currentQuery,a=this.options,o=this.currentResult,d=this.currentResultState,m=this.currentResultOptions,v=n!==r,g=v?n.state:this.currentQueryInitialState,w=v?this.currentResult:this.previousQueryResult,{state:b}=n;let{dataUpdatedAt:_,error:E,errorUpdatedAt:T,fetchStatus:I,status:k}=b,S=!1,A=!1,O;if(t._optimisticResults){const W=this.hasListeners(),V=!W&&eb(n,t),re=W&&tb(n,r,t,a);(V||re)&&(I=Jf(n.options.networkMode)?"fetching":"paused",_||(k="loading")),t._optimisticResults==="isRestoring"&&(I="idle")}if(t.keepPreviousData&&!b.dataUpdatedAt&&w!=null&&w.isSuccess&&k!=="error")O=w.data,_=w.dataUpdatedAt,k=w.status,S=!0;else if(t.select&&typeof b.data<"u")if(o&&b.data===(d==null?void 0:d.data)&&t.select===this.selectFn)O=this.selectResult;else try{this.selectFn=t.select,O=t.select(b.data),O=yx(o==null?void 0:o.data,O,t),this.selectResult=O,this.selectError=null}catch(W){this.selectError=W}else O=b.data;if(typeof t.placeholderData<"u"&&typeof O>"u"&&k==="loading"){let W;if(o!=null&&o.isPlaceholderData&&t.placeholderData===(m==null?void 0:m.placeholderData))W=o.data;else if(W=typeof t.placeholderData=="function"?t.placeholderData():t.placeholderData,t.select&&typeof W<"u")try{W=t.select(W),this.selectError=null}catch(V){this.selectError=V}typeof W<"u"&&(k="success",O=yx(o==null?void 0:o.data,W,t),A=!0)}this.selectError&&(E=this.selectError,O=this.selectResult,T=Date.now(),k="error");const P=I==="fetching",$=k==="loading",L=k==="error";return{status:k,fetchStatus:I,isLoading:$,isSuccess:k==="success",isError:L,isInitialLoading:$&&P,data:O,dataUpdatedAt:_,error:E,errorUpdatedAt:T,failureCount:b.fetchFailureCount,failureReason:b.fetchFailureReason,errorUpdateCount:b.errorUpdateCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>g.dataUpdateCount||b.errorUpdateCount>g.errorUpdateCount,isFetching:P,isRefetching:P&&!$,isLoadingError:L&&b.dataUpdatedAt===0,isPaused:I==="paused",isPlaceholderData:A,isPreviousData:S,isRefetchError:L&&b.dataUpdatedAt!==0,isStale:r2(n,t),refetch:this.refetch,remove:this.remove}}updateResult(n){const t=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,cf(r,t))return;this.currentResult=r;const a={cache:!0},o=()=>{if(!t)return!0;const{notifyOnChangeProps:d}=this.options,m=typeof d=="function"?d():d;if(m==="all"||!m&&!this.trackedProps.size)return!0;const v=new Set(m??this.trackedProps);return this.options.useErrorBoundary&&v.add("error"),Object.keys(this.currentResult).some(g=>{const w=g;return this.currentResult[w]!==t[w]&&v.has(w)})};(n==null?void 0:n.listeners)!==!1&&o()&&(a.listeners=!0),this.notify({...a,...n})}updateQuery(){const n=this.client.getQueryCache().build(this.client,this.options);if(n===this.currentQuery)return;const t=this.currentQuery;this.currentQuery=n,this.currentQueryInitialState=n.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(t==null||t.removeObserver(this),n.addObserver(this))}onQueryUpdate(n){const t={};n.type==="success"?t.onSuccess=!n.manual:n.type==="error"&&!Nh(n.error)&&(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(n){Wn.batch(()=>{if(n.onSuccess){var t,r,a,o;(t=(r=this.options).onSuccess)==null||t.call(r,this.currentResult.data),(a=(o=this.options).onSettled)==null||a.call(o,this.currentResult.data,null)}else if(n.onError){var d,m,v,g;(d=(m=this.options).onError)==null||d.call(m,this.currentResult.error),(v=(g=this.options).onSettled)==null||v.call(g,void 0,this.currentResult.error)}n.listeners&&this.listeners.forEach(({listener:w})=>{w(this.currentResult)}),n.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function ID(e,n){return n.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&n.retryOnMount===!1)}function eb(e,n){return ID(e,n)||e.state.dataUpdatedAt>0&&Nx(e,n,n.refetchOnMount)}function Nx(e,n,t){if(n.enabled!==!1){const r=typeof t=="function"?t(e):t;return r==="always"||r!==!1&&r2(e,n)}return!1}function tb(e,n,t,r){return t.enabled!==!1&&(e!==n||r.enabled===!1)&&(!t.suspense||e.state.status!=="error")&&r2(e,t)}function r2(e,n){return e.isStaleByTime(n.staleTime)}function MD(e,n,t){return t.keepPreviousData?!1:t.placeholderData!==void 0?n.isPlaceholderData:!cf(e.getCurrentResult(),n)}class RD extends pj{constructor(n,t){super(n,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(n,t){super.setOptions({...n,behavior:wx()},t)}getOptimisticResult(n){return n.behavior=wx(),super.getOptimisticResult(n)}fetchNextPage({pageParam:n,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:n}}})}fetchPreviousPage({pageParam:n,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:n}}})}createResult(n,t){var r,a,o,d,m,v;const{state:g}=n,w=super.createResult(n,t),{isFetching:b,isRefetching:_}=w,E=b&&((r=g.fetchMeta)==null||(a=r.fetchMore)==null?void 0:a.direction)==="forward",T=b&&((o=g.fetchMeta)==null||(d=o.fetchMore)==null?void 0:d.direction)==="backward";return{...w,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:AD(t,(m=g.data)==null?void 0:m.pages),hasPreviousPage:TD(t,(v=g.data)==null?void 0:v.pages),isFetchingNextPage:E,isFetchingPreviousPage:T,isRefetching:_&&!E&&!T}}}let OD=class extends Uc{constructor(n,t){super(),this.client=n,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var t;const r=this.options;this.options=this.client.defaultMutationOptions(n),cf(r,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(t=this.currentMutation)==null||t.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var n;(n=this.currentMutation)==null||n.removeObserver(this)}}onMutationUpdate(n){this.updateResult();const t={listeners:!0};n.type==="success"?t.onSuccess=!0:n.type==="error"&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(n,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof n<"u"?n:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const n=this.currentMutation?this.currentMutation.state:hj(),t=n.status==="loading",r={...n,isLoading:t,isPending:t,isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=r}notify(n){Wn.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(n.onSuccess){var t,r,a,o;(t=(r=this.mutateOptions).onSuccess)==null||t.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(a=(o=this.mutateOptions).onSettled)==null||a.call(o,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(n.onError){var d,m,v,g;(d=(m=this.mutateOptions).onError)==null||d.call(m,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(v=(g=this.mutateOptions).onSettled)==null||v.call(g,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}n.listeners&&this.listeners.forEach(({listener:w})=>{w(this.currentResult)})})}};var mj={exports:{}},xj={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jc=M;function LD(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var PD=typeof Object.is=="function"?Object.is:LD,FD=jc.useState,BD=jc.useEffect,UD=jc.useLayoutEffect,zD=jc.useDebugValue;function qD(e,n){var t=n(),r=FD({inst:{value:t,getSnapshot:n}}),a=r[0].inst,o=r[1];return UD(function(){a.value=t,a.getSnapshot=n,n1(a)&&o({inst:a})},[e,t,n]),BD(function(){return n1(a)&&o({inst:a}),e(function(){n1(a)&&o({inst:a})})},[e]),zD(t),t}function n1(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!PD(e,t)}catch{return!0}}function WD(e,n){return n()}var HD=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?WD:qD;xj.useSyncExternalStore=jc.useSyncExternalStore!==void 0?jc.useSyncExternalStore:HD;mj.exports=xj;var VD=mj.exports;const gj=VD.useSyncExternalStore,nb=M.createContext(void 0),vj=M.createContext(!1);function yj(e,n){return e||(n&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=nb),window.ReactQueryClientContext):nb)}const pn=({context:e}={})=>{const n=M.useContext(yj(e,M.useContext(vj)));if(!n)throw new Error("No QueryClient set, use QueryClientProvider to set one");return n},$D=({client:e,children:n,context:t,contextSharing:r=!1})=>{M.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]);const a=yj(t,r);return M.createElement(vj.Provider,{value:!t&&r},M.createElement(a.Provider,{value:e},n))},wj=M.createContext(!1),YD=()=>M.useContext(wj);wj.Provider;function QD(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}const GD=M.createContext(QD()),XD=()=>M.useContext(GD);function bj(e,n){return typeof e=="function"?e(...n):!!e}const KD=(e,n)=>{(e.suspense||e.useErrorBoundary)&&(n.isReset()||(e.retryOnMount=!1))},ZD=e=>{M.useEffect(()=>{e.clearReset()},[e])},JD=({result:e,errorResetBoundary:n,useErrorBoundary:t,query:r})=>e.isError&&!n.isReset()&&!e.isFetching&&bj(t,[e.error,r]),eI=e=>{e.suspense&&typeof e.staleTime!="number"&&(e.staleTime=1e3)},tI=(e,n)=>e.isLoading&&e.isFetching&&!n,nI=(e,n,t)=>(e==null?void 0:e.suspense)&&tI(n,t),rI=(e,n,t)=>n.fetchOptimistic(e).then(({data:r})=>{e.onSuccess==null||e.onSuccess(r),e.onSettled==null||e.onSettled(r,null)}).catch(r=>{t.clearReset(),e.onError==null||e.onError(r),e.onSettled==null||e.onSettled(void 0,r)});function Nj(e,n){const t=pn({context:e.context}),r=YD(),a=XD(),o=t.defaultQueryOptions(e);o._optimisticResults=r?"isRestoring":"optimistic",o.onError&&(o.onError=Wn.batchCalls(o.onError)),o.onSuccess&&(o.onSuccess=Wn.batchCalls(o.onSuccess)),o.onSettled&&(o.onSettled=Wn.batchCalls(o.onSettled)),eI(o),KD(o,a),ZD(a);const[d]=M.useState(()=>new n(t,o)),m=d.getOptimisticResult(o);if(gj(M.useCallback(v=>{const g=r?()=>{}:d.subscribe(Wn.batchCalls(v));return d.updateResult(),g},[d,r]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),M.useEffect(()=>{d.setOptions(o,{listeners:!1})},[o,d]),nI(o,m,r))throw rI(o,d,a);if(JD({result:m,errorResetBoundary:a,useErrorBoundary:o.useErrorBoundary,query:d.getCurrentQuery()}))throw m.error;return o.notifyOnChangeProps?m:d.trackResult(m)}function ut(e,n,t){const r=ac(e,n,t);return Nj(r,pj)}function _t(e,n,t){const r=vD(e,n,t),a=pn({context:r.context}),[o]=M.useState(()=>new OD(a,r));M.useEffect(()=>{o.setOptions(r)},[o,r]);const d=gj(M.useCallback(v=>o.subscribe(Wn.batchCalls(v)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),m=M.useCallback((v,g)=>{o.mutate(v,g).catch(sI)},[o]);if(d.error&&bj(o.options.useErrorBoundary,[d.error]))throw d.error;return{...d,mutate:m,mutateAsync:d.mutate}}function sI(){}function s2(e,n,t){const r=ac(e,n,t);return Nj(r,RD)}function jj(e,n){return function(){return e.apply(n,arguments)}}const{toString:aI}=Object.prototype,{getPrototypeOf:a2}=Object,{iterator:ep,toStringTag:Cj}=Symbol,tp=(e=>n=>{const t=aI.call(n);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ga=e=>(e=e.toLowerCase(),n=>tp(n)===e),np=e=>n=>typeof n===e,{isArray:zc}=Array,vu=np("undefined");function iI(e){return e!==null&&!vu(e)&&e.constructor!==null&&!vu(e.constructor)&&ds(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const _j=ga("ArrayBuffer");function oI(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&_j(e.buffer),n}const lI=np("string"),ds=np("function"),Ej=np("number"),rp=e=>e!==null&&typeof e=="object",cI=e=>e===!0||e===!1,jh=e=>{if(tp(e)!=="object")return!1;const n=a2(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Cj in e)&&!(ep in e)},dI=ga("Date"),uI=ga("File"),hI=ga("Blob"),fI=ga("FileList"),pI=e=>rp(e)&&ds(e.pipe),mI=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||ds(e.append)&&((n=tp(e))==="formdata"||n==="object"&&ds(e.toString)&&e.toString()==="[object FormData]"))},xI=ga("URLSearchParams"),[gI,vI,yI,wI]=["ReadableStream","Request","Response","Headers"].map(ga),bI=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Du(e,n,{allOwnKeys:t=!1}={}){if(e===null||typeof e>"u")return;let r,a;if(typeof e!="object"&&(e=[e]),zc(e))for(r=0,a=e.length;r<a;r++)n.call(null,e[r],r,e);else{const o=t?Object.getOwnPropertyNames(e):Object.keys(e),d=o.length;let m;for(r=0;r<d;r++)m=o[r],n.call(null,e[m],m,e)}}function Sj(e,n){n=n.toLowerCase();const t=Object.keys(e);let r=t.length,a;for(;r-- >0;)if(a=t[r],n===a.toLowerCase())return a;return null}const el=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),kj=e=>!vu(e)&&e!==el;function jx(){const{caseless:e}=kj(this)&&this||{},n={},t=(r,a)=>{const o=e&&Sj(n,a)||a;jh(n[o])&&jh(r)?n[o]=jx(n[o],r):jh(r)?n[o]=jx({},r):zc(r)?n[o]=r.slice():n[o]=r};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&Du(arguments[r],t);return n}const NI=(e,n,t,{allOwnKeys:r}={})=>(Du(n,(a,o)=>{t&&ds(a)?e[o]=jj(a,t):e[o]=a},{allOwnKeys:r}),e),jI=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),CI=(e,n,t,r)=>{e.prototype=Object.create(n.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),t&&Object.assign(e.prototype,t)},_I=(e,n,t,r)=>{let a,o,d;const m={};if(n=n||{},e==null)return n;do{for(a=Object.getOwnPropertyNames(e),o=a.length;o-- >0;)d=a[o],(!r||r(d,e,n))&&!m[d]&&(n[d]=e[d],m[d]=!0);e=t!==!1&&a2(e)}while(e&&(!t||t(e,n))&&e!==Object.prototype);return n},EI=(e,n,t)=>{e=String(e),(t===void 0||t>e.length)&&(t=e.length),t-=n.length;const r=e.indexOf(n,t);return r!==-1&&r===t},SI=e=>{if(!e)return null;if(zc(e))return e;let n=e.length;if(!Ej(n))return null;const t=new Array(n);for(;n-- >0;)t[n]=e[n];return t},kI=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&a2(Uint8Array)),AI=(e,n)=>{const r=(e&&e[ep]).call(e);let a;for(;(a=r.next())&&!a.done;){const o=a.value;n.call(e,o[0],o[1])}},TI=(e,n)=>{let t;const r=[];for(;(t=e.exec(n))!==null;)r.push(t);return r},DI=ga("HTMLFormElement"),II=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,a){return r.toUpperCase()+a}),rb=(({hasOwnProperty:e})=>(n,t)=>e.call(n,t))(Object.prototype),MI=ga("RegExp"),Aj=(e,n)=>{const t=Object.getOwnPropertyDescriptors(e),r={};Du(t,(a,o)=>{let d;(d=n(a,o,e))!==!1&&(r[o]=d||a)}),Object.defineProperties(e,r)},RI=e=>{Aj(e,(n,t)=>{if(ds(e)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=e[t];if(ds(r)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},OI=(e,n)=>{const t={},r=a=>{a.forEach(o=>{t[o]=!0})};return zc(e)?r(e):r(String(e).split(n)),t},LI=()=>{},PI=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function FI(e){return!!(e&&ds(e.append)&&e[Cj]==="FormData"&&e[ep])}const BI=e=>{const n=new Array(10),t=(r,a)=>{if(rp(r)){if(n.indexOf(r)>=0)return;if(!("toJSON"in r)){n[a]=r;const o=zc(r)?[]:{};return Du(r,(d,m)=>{const v=t(d,a+1);!vu(v)&&(o[m]=v)}),n[a]=void 0,o}}return r};return t(e,0)},UI=ga("AsyncFunction"),zI=e=>e&&(rp(e)||ds(e))&&ds(e.then)&&ds(e.catch),Tj=((e,n)=>e?setImmediate:n?((t,r)=>(el.addEventListener("message",({source:a,data:o})=>{a===el&&o===t&&r.length&&r.shift()()},!1),a=>{r.push(a),el.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ds(el.postMessage)),qI=typeof queueMicrotask<"u"?queueMicrotask.bind(el):typeof process<"u"&&process.nextTick||Tj,WI=e=>e!=null&&ds(e[ep]),_e={isArray:zc,isArrayBuffer:_j,isBuffer:iI,isFormData:mI,isArrayBufferView:oI,isString:lI,isNumber:Ej,isBoolean:cI,isObject:rp,isPlainObject:jh,isReadableStream:gI,isRequest:vI,isResponse:yI,isHeaders:wI,isUndefined:vu,isDate:dI,isFile:uI,isBlob:hI,isRegExp:MI,isFunction:ds,isStream:pI,isURLSearchParams:xI,isTypedArray:kI,isFileList:fI,forEach:Du,merge:jx,extend:NI,trim:bI,stripBOM:jI,inherits:CI,toFlatObject:_I,kindOf:tp,kindOfTest:ga,endsWith:EI,toArray:SI,forEachEntry:AI,matchAll:TI,isHTMLForm:DI,hasOwnProperty:rb,hasOwnProp:rb,reduceDescriptors:Aj,freezeMethods:RI,toObjectSet:OI,toCamelCase:II,noop:LI,toFiniteNumber:PI,findKey:Sj,global:el,isContextDefined:kj,isSpecCompliantForm:FI,toJSONObject:BI,isAsyncFn:UI,isThenable:zI,setImmediate:Tj,asap:qI,isIterable:WI};function At(e,n,t,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),t&&(this.config=t),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}_e.inherits(At,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_e.toJSONObject(this.config),code:this.code,status:this.status}}});const Dj=At.prototype,Ij={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ij[e]={value:e}});Object.defineProperties(At,Ij);Object.defineProperty(Dj,"isAxiosError",{value:!0});At.from=(e,n,t,r,a,o)=>{const d=Object.create(Dj);return _e.toFlatObject(e,d,function(v){return v!==Error.prototype},m=>m!=="isAxiosError"),At.call(d,e.message,n,t,r,a),d.cause=e,d.name=e.name,o&&Object.assign(d,o),d};const HI=null;function Cx(e){return _e.isPlainObject(e)||_e.isArray(e)}function Mj(e){return _e.endsWith(e,"[]")?e.slice(0,-2):e}function sb(e,n,t){return e?e.concat(n).map(function(a,o){return a=Mj(a),!t&&o?"["+a+"]":a}).join(t?".":""):n}function VI(e){return _e.isArray(e)&&!e.some(Cx)}const $I=_e.toFlatObject(_e,{},null,function(n){return/^is[A-Z]/.test(n)});function sp(e,n,t){if(!_e.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,t=_e.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(I,k){return!_e.isUndefined(k[I])});const r=t.metaTokens,a=t.visitor||w,o=t.dots,d=t.indexes,v=(t.Blob||typeof Blob<"u"&&Blob)&&_e.isSpecCompliantForm(n);if(!_e.isFunction(a))throw new TypeError("visitor must be a function");function g(T){if(T===null)return"";if(_e.isDate(T))return T.toISOString();if(!v&&_e.isBlob(T))throw new At("Blob is not supported. Use a Buffer instead.");return _e.isArrayBuffer(T)||_e.isTypedArray(T)?v&&typeof Blob=="function"?new Blob([T]):Buffer.from(T):T}function w(T,I,k){let S=T;if(T&&!k&&typeof T=="object"){if(_e.endsWith(I,"{}"))I=r?I:I.slice(0,-2),T=JSON.stringify(T);else if(_e.isArray(T)&&VI(T)||(_e.isFileList(T)||_e.endsWith(I,"[]"))&&(S=_e.toArray(T)))return I=Mj(I),S.forEach(function(O,P){!(_e.isUndefined(O)||O===null)&&n.append(d===!0?sb([I],P,o):d===null?I:I+"[]",g(O))}),!1}return Cx(T)?!0:(n.append(sb(k,I,o),g(T)),!1)}const b=[],_=Object.assign($I,{defaultVisitor:w,convertValue:g,isVisitable:Cx});function E(T,I){if(!_e.isUndefined(T)){if(b.indexOf(T)!==-1)throw Error("Circular reference detected in "+I.join("."));b.push(T),_e.forEach(T,function(S,A){(!(_e.isUndefined(S)||S===null)&&a.call(n,S,_e.isString(A)?A.trim():A,I,_))===!0&&E(S,I?I.concat(A):[A])}),b.pop()}}if(!_e.isObject(e))throw new TypeError("data must be an object");return E(e),n}function ab(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return n[r]})}function i2(e,n){this._pairs=[],e&&sp(e,this,n)}const Rj=i2.prototype;Rj.append=function(n,t){this._pairs.push([n,t])};Rj.toString=function(n){const t=n?function(r){return n.call(this,r,ab)}:ab;return this._pairs.map(function(a){return t(a[0])+"="+t(a[1])},"").join("&")};function YI(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Oj(e,n,t){if(!n)return e;const r=t&&t.encode||YI;_e.isFunction(t)&&(t={serialize:t});const a=t&&t.serialize;let o;if(a?o=a(n,t):o=_e.isURLSearchParams(n)?n.toString():new i2(n,t).toString(r),o){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class QI{constructor(){this.handlers=[]}use(n,t,r){return this.handlers.push({fulfilled:n,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){_e.forEach(this.handlers,function(r){r!==null&&n(r)})}}const ib=QI,Lj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},GI=typeof URLSearchParams<"u"?URLSearchParams:i2,XI=typeof FormData<"u"?FormData:null,KI=typeof Blob<"u"?Blob:null,ZI={isBrowser:!0,classes:{URLSearchParams:GI,FormData:XI,Blob:KI},protocols:["http","https","file","blob","url","data"]},o2=typeof window<"u"&&typeof document<"u",_x=typeof navigator=="object"&&navigator||void 0,JI=o2&&(!_x||["ReactNative","NativeScript","NS"].indexOf(_x.product)<0),eM=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),tM=o2&&window.location.href||"http://localhost",nM=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:o2,hasStandardBrowserEnv:JI,hasStandardBrowserWebWorkerEnv:eM,navigator:_x,origin:tM},Symbol.toStringTag,{value:"Module"})),Lr={...nM,...ZI};function rM(e,n){return sp(e,new Lr.classes.URLSearchParams,Object.assign({visitor:function(t,r,a,o){return Lr.isNode&&_e.isBuffer(t)?(this.append(r,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},n))}function sM(e){return _e.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function aM(e){const n={},t=Object.keys(e);let r;const a=t.length;let o;for(r=0;r<a;r++)o=t[r],n[o]=e[o];return n}function Pj(e){function n(t,r,a,o){let d=t[o++];if(d==="__proto__")return!0;const m=Number.isFinite(+d),v=o>=t.length;return d=!d&&_e.isArray(a)?a.length:d,v?(_e.hasOwnProp(a,d)?a[d]=[a[d],r]:a[d]=r,!m):((!a[d]||!_e.isObject(a[d]))&&(a[d]=[]),n(t,r,a[d],o)&&_e.isArray(a[d])&&(a[d]=aM(a[d])),!m)}if(_e.isFormData(e)&&_e.isFunction(e.entries)){const t={};return _e.forEachEntry(e,(r,a)=>{n(sM(r),a,t,0)}),t}return null}function iM(e,n,t){if(_e.isString(e))try{return(n||JSON.parse)(e),_e.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(e)}const l2={transitional:Lj,adapter:["xhr","http","fetch"],transformRequest:[function(n,t){const r=t.getContentType()||"",a=r.indexOf("application/json")>-1,o=_e.isObject(n);if(o&&_e.isHTMLForm(n)&&(n=new FormData(n)),_e.isFormData(n))return a?JSON.stringify(Pj(n)):n;if(_e.isArrayBuffer(n)||_e.isBuffer(n)||_e.isStream(n)||_e.isFile(n)||_e.isBlob(n)||_e.isReadableStream(n))return n;if(_e.isArrayBufferView(n))return n.buffer;if(_e.isURLSearchParams(n))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let m;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return rM(n,this.formSerializer).toString();if((m=_e.isFileList(n))||r.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return sp(m?{"files[]":n}:n,v&&new v,this.formSerializer)}}return o||a?(t.setContentType("application/json",!1),iM(n)):n}],transformResponse:[function(n){const t=this.transitional||l2.transitional,r=t&&t.forcedJSONParsing,a=this.responseType==="json";if(_e.isResponse(n)||_e.isReadableStream(n))return n;if(n&&_e.isString(n)&&(r&&!this.responseType||a)){const d=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(n)}catch(m){if(d)throw m.name==="SyntaxError"?At.from(m,At.ERR_BAD_RESPONSE,this,null,this.response):m}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Lr.classes.FormData,Blob:Lr.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_e.forEach(["delete","get","head","post","put","patch"],e=>{l2.headers[e]={}});const c2=l2,oM=_e.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lM=e=>{const n={};let t,r,a;return e&&e.split(`
`).forEach(function(d){a=d.indexOf(":"),t=d.substring(0,a).trim().toLowerCase(),r=d.substring(a+1).trim(),!(!t||n[t]&&oM[t])&&(t==="set-cookie"?n[t]?n[t].push(r):n[t]=[r]:n[t]=n[t]?n[t]+", "+r:r)}),n},ob=Symbol("internals");function Dd(e){return e&&String(e).trim().toLowerCase()}function Ch(e){return e===!1||e==null?e:_e.isArray(e)?e.map(Ch):String(e)}function cM(e){const n=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(e);)n[r[1]]=r[2];return n}const dM=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function r1(e,n,t,r,a){if(_e.isFunction(r))return r.call(this,n,t);if(a&&(n=t),!!_e.isString(n)){if(_e.isString(r))return n.indexOf(r)!==-1;if(_e.isRegExp(r))return r.test(n)}}function uM(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,t,r)=>t.toUpperCase()+r)}function hM(e,n){const t=_e.toCamelCase(" "+n);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+t,{value:function(a,o,d){return this[r].call(this,n,a,o,d)},configurable:!0})})}class ap{constructor(n){n&&this.set(n)}set(n,t,r){const a=this;function o(m,v,g){const w=Dd(v);if(!w)throw new Error("header name must be a non-empty string");const b=_e.findKey(a,w);(!b||a[b]===void 0||g===!0||g===void 0&&a[b]!==!1)&&(a[b||v]=Ch(m))}const d=(m,v)=>_e.forEach(m,(g,w)=>o(g,w,v));if(_e.isPlainObject(n)||n instanceof this.constructor)d(n,t);else if(_e.isString(n)&&(n=n.trim())&&!dM(n))d(lM(n),t);else if(_e.isObject(n)&&_e.isIterable(n)){let m={},v,g;for(const w of n){if(!_e.isArray(w))throw TypeError("Object iterator must return a key-value pair");m[g=w[0]]=(v=m[g])?_e.isArray(v)?[...v,w[1]]:[v,w[1]]:w[1]}d(m,t)}else n!=null&&o(t,n,r);return this}get(n,t){if(n=Dd(n),n){const r=_e.findKey(this,n);if(r){const a=this[r];if(!t)return a;if(t===!0)return cM(a);if(_e.isFunction(t))return t.call(this,a,r);if(_e.isRegExp(t))return t.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,t){if(n=Dd(n),n){const r=_e.findKey(this,n);return!!(r&&this[r]!==void 0&&(!t||r1(this,this[r],r,t)))}return!1}delete(n,t){const r=this;let a=!1;function o(d){if(d=Dd(d),d){const m=_e.findKey(r,d);m&&(!t||r1(r,r[m],m,t))&&(delete r[m],a=!0)}}return _e.isArray(n)?n.forEach(o):o(n),a}clear(n){const t=Object.keys(this);let r=t.length,a=!1;for(;r--;){const o=t[r];(!n||r1(this,this[o],o,n,!0))&&(delete this[o],a=!0)}return a}normalize(n){const t=this,r={};return _e.forEach(this,(a,o)=>{const d=_e.findKey(r,o);if(d){t[d]=Ch(a),delete t[o];return}const m=n?uM(o):String(o).trim();m!==o&&delete t[o],t[m]=Ch(a),r[m]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const t=Object.create(null);return _e.forEach(this,(r,a)=>{r!=null&&r!==!1&&(t[a]=n&&_e.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,t])=>n+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...t){const r=new this(n);return t.forEach(a=>r.set(a)),r}static accessor(n){const r=(this[ob]=this[ob]={accessors:{}}).accessors,a=this.prototype;function o(d){const m=Dd(d);r[m]||(hM(a,d),r[m]=!0)}return _e.isArray(n)?n.forEach(o):o(n),this}}ap.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_e.reduceDescriptors(ap.prototype,({value:e},n)=>{let t=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(r){this[t]=r}}});_e.freezeMethods(ap);const ha=ap;function s1(e,n){const t=this||c2,r=n||t,a=ha.from(r.headers);let o=r.data;return _e.forEach(e,function(m){o=m.call(t,o,a.normalize(),n?n.status:void 0)}),a.normalize(),o}function Fj(e){return!!(e&&e.__CANCEL__)}function qc(e,n,t){At.call(this,e??"canceled",At.ERR_CANCELED,n,t),this.name="CanceledError"}_e.inherits(qc,At,{__CANCEL__:!0});function Bj(e,n,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?e(t):n(new At("Request failed with status code "+t.status,[At.ERR_BAD_REQUEST,At.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function fM(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function pM(e,n){e=e||10;const t=new Array(e),r=new Array(e);let a=0,o=0,d;return n=n!==void 0?n:1e3,function(v){const g=Date.now(),w=r[o];d||(d=g),t[a]=v,r[a]=g;let b=o,_=0;for(;b!==a;)_+=t[b++],b=b%e;if(a=(a+1)%e,a===o&&(o=(o+1)%e),g-d<n)return;const E=w&&g-w;return E?Math.round(_*1e3/E):void 0}}function mM(e,n){let t=0,r=1e3/n,a,o;const d=(g,w=Date.now())=>{t=w,a=null,o&&(clearTimeout(o),o=null),e.apply(null,g)};return[(...g)=>{const w=Date.now(),b=w-t;b>=r?d(g,w):(a=g,o||(o=setTimeout(()=>{o=null,d(a)},r-b)))},()=>a&&d(a)]}const hf=(e,n,t=3)=>{let r=0;const a=pM(50,250);return mM(o=>{const d=o.loaded,m=o.lengthComputable?o.total:void 0,v=d-r,g=a(v),w=d<=m;r=d;const b={loaded:d,total:m,progress:m?d/m:void 0,bytes:v,rate:g||void 0,estimated:g&&m&&w?(m-d)/g:void 0,event:o,lengthComputable:m!=null,[n?"download":"upload"]:!0};e(b)},t)},lb=(e,n)=>{const t=e!=null;return[r=>n[0]({lengthComputable:t,total:e,loaded:r}),n[1]]},cb=e=>(...n)=>_e.asap(()=>e(...n)),xM=Lr.hasStandardBrowserEnv?((e,n)=>t=>(t=new URL(t,Lr.origin),e.protocol===t.protocol&&e.host===t.host&&(n||e.port===t.port)))(new URL(Lr.origin),Lr.navigator&&/(msie|trident)/i.test(Lr.navigator.userAgent)):()=>!0,gM=Lr.hasStandardBrowserEnv?{write(e,n,t,r,a,o){const d=[e+"="+encodeURIComponent(n)];_e.isNumber(t)&&d.push("expires="+new Date(t).toGMTString()),_e.isString(r)&&d.push("path="+r),_e.isString(a)&&d.push("domain="+a),o===!0&&d.push("secure"),document.cookie=d.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function vM(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function yM(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function Uj(e,n,t){let r=!vM(n);return e&&(r||t==!1)?yM(e,n):n}const db=e=>e instanceof ha?{...e}:e;function fl(e,n){n=n||{};const t={};function r(g,w,b,_){return _e.isPlainObject(g)&&_e.isPlainObject(w)?_e.merge.call({caseless:_},g,w):_e.isPlainObject(w)?_e.merge({},w):_e.isArray(w)?w.slice():w}function a(g,w,b,_){if(_e.isUndefined(w)){if(!_e.isUndefined(g))return r(void 0,g,b,_)}else return r(g,w,b,_)}function o(g,w){if(!_e.isUndefined(w))return r(void 0,w)}function d(g,w){if(_e.isUndefined(w)){if(!_e.isUndefined(g))return r(void 0,g)}else return r(void 0,w)}function m(g,w,b){if(b in n)return r(g,w);if(b in e)return r(void 0,g)}const v={url:o,method:o,data:o,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:m,headers:(g,w,b)=>a(db(g),db(w),b,!0)};return _e.forEach(Object.keys(Object.assign({},e,n)),function(w){const b=v[w]||a,_=b(e[w],n[w],w);_e.isUndefined(_)&&b!==m||(t[w]=_)}),t}const zj=e=>{const n=fl({},e);let{data:t,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:o,headers:d,auth:m}=n;n.headers=d=ha.from(d),n.url=Oj(Uj(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),m&&d.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):"")));let v;if(_e.isFormData(t)){if(Lr.hasStandardBrowserEnv||Lr.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if((v=d.getContentType())!==!1){const[g,...w]=v?v.split(";").map(b=>b.trim()).filter(Boolean):[];d.setContentType([g||"multipart/form-data",...w].join("; "))}}if(Lr.hasStandardBrowserEnv&&(r&&_e.isFunction(r)&&(r=r(n)),r||r!==!1&&xM(n.url))){const g=a&&o&&gM.read(o);g&&d.set(a,g)}return n},wM=typeof XMLHttpRequest<"u",bM=wM&&function(e){return new Promise(function(t,r){const a=zj(e);let o=a.data;const d=ha.from(a.headers).normalize();let{responseType:m,onUploadProgress:v,onDownloadProgress:g}=a,w,b,_,E,T;function I(){E&&E(),T&&T(),a.cancelToken&&a.cancelToken.unsubscribe(w),a.signal&&a.signal.removeEventListener("abort",w)}let k=new XMLHttpRequest;k.open(a.method.toUpperCase(),a.url,!0),k.timeout=a.timeout;function S(){if(!k)return;const O=ha.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),$={data:!m||m==="text"||m==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:O,config:e,request:k};Bj(function(F){t(F),I()},function(F){r(F),I()},$),k=null}"onloadend"in k?k.onloadend=S:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(S)},k.onabort=function(){k&&(r(new At("Request aborted",At.ECONNABORTED,e,k)),k=null)},k.onerror=function(){r(new At("Network Error",At.ERR_NETWORK,e,k)),k=null},k.ontimeout=function(){let P=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const $=a.transitional||Lj;a.timeoutErrorMessage&&(P=a.timeoutErrorMessage),r(new At(P,$.clarifyTimeoutError?At.ETIMEDOUT:At.ECONNABORTED,e,k)),k=null},o===void 0&&d.setContentType(null),"setRequestHeader"in k&&_e.forEach(d.toJSON(),function(P,$){k.setRequestHeader($,P)}),_e.isUndefined(a.withCredentials)||(k.withCredentials=!!a.withCredentials),m&&m!=="json"&&(k.responseType=a.responseType),g&&([_,T]=hf(g,!0),k.addEventListener("progress",_)),v&&k.upload&&([b,E]=hf(v),k.upload.addEventListener("progress",b),k.upload.addEventListener("loadend",E)),(a.cancelToken||a.signal)&&(w=O=>{k&&(r(!O||O.type?new qc(null,e,k):O),k.abort(),k=null)},a.cancelToken&&a.cancelToken.subscribe(w),a.signal&&(a.signal.aborted?w():a.signal.addEventListener("abort",w)));const A=fM(a.url);if(A&&Lr.protocols.indexOf(A)===-1){r(new At("Unsupported protocol "+A+":",At.ERR_BAD_REQUEST,e));return}k.send(o||null)})},NM=(e,n)=>{const{length:t}=e=e?e.filter(Boolean):[];if(n||t){let r=new AbortController,a;const o=function(g){if(!a){a=!0,m();const w=g instanceof Error?g:this.reason;r.abort(w instanceof At?w:new qc(w instanceof Error?w.message:w))}};let d=n&&setTimeout(()=>{d=null,o(new At(`timeout ${n} of ms exceeded`,At.ETIMEDOUT))},n);const m=()=>{e&&(d&&clearTimeout(d),d=null,e.forEach(g=>{g.unsubscribe?g.unsubscribe(o):g.removeEventListener("abort",o)}),e=null)};e.forEach(g=>g.addEventListener("abort",o));const{signal:v}=r;return v.unsubscribe=()=>_e.asap(m),v}},jM=NM,CM=function*(e,n){let t=e.byteLength;if(!n||t<n){yield e;return}let r=0,a;for(;r<t;)a=r+n,yield e.slice(r,a),r=a},_M=async function*(e,n){for await(const t of EM(e))yield*CM(t,n)},EM=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:t,value:r}=await n.read();if(t)break;yield r}}finally{await n.cancel()}},ub=(e,n,t,r)=>{const a=_M(e,n);let o=0,d,m=v=>{d||(d=!0,r&&r(v))};return new ReadableStream({async pull(v){try{const{done:g,value:w}=await a.next();if(g){m(),v.close();return}let b=w.byteLength;if(t){let _=o+=b;t(_)}v.enqueue(new Uint8Array(w))}catch(g){throw m(g),g}},cancel(v){return m(v),a.return()}},{highWaterMark:2})},ip=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",qj=ip&&typeof ReadableStream=="function",SM=ip&&(typeof TextEncoder=="function"?(e=>n=>e.encode(n))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Wj=(e,...n)=>{try{return!!e(...n)}catch{return!1}},kM=qj&&Wj(()=>{let e=!1;const n=new Request(Lr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!n}),hb=64*1024,Ex=qj&&Wj(()=>_e.isReadableStream(new Response("").body)),ff={stream:Ex&&(e=>e.body)};ip&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!ff[n]&&(ff[n]=_e.isFunction(e[n])?t=>t[n]():(t,r)=>{throw new At(`Response type '${n}' is not supported`,At.ERR_NOT_SUPPORT,r)})})})(new Response);const AM=async e=>{if(e==null)return 0;if(_e.isBlob(e))return e.size;if(_e.isSpecCompliantForm(e))return(await new Request(Lr.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(_e.isArrayBufferView(e)||_e.isArrayBuffer(e))return e.byteLength;if(_e.isURLSearchParams(e)&&(e=e+""),_e.isString(e))return(await SM(e)).byteLength},TM=async(e,n)=>{const t=_e.toFiniteNumber(e.getContentLength());return t??AM(n)},DM=ip&&(async e=>{let{url:n,method:t,data:r,signal:a,cancelToken:o,timeout:d,onDownloadProgress:m,onUploadProgress:v,responseType:g,headers:w,withCredentials:b="same-origin",fetchOptions:_}=zj(e);g=g?(g+"").toLowerCase():"text";let E=jM([a,o&&o.toAbortSignal()],d),T;const I=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let k;try{if(v&&kM&&t!=="get"&&t!=="head"&&(k=await TM(w,r))!==0){let $=new Request(n,{method:"POST",body:r,duplex:"half"}),L;if(_e.isFormData(r)&&(L=$.headers.get("content-type"))&&w.setContentType(L),$.body){const[F,W]=lb(k,hf(cb(v)));r=ub($.body,hb,F,W)}}_e.isString(b)||(b=b?"include":"omit");const S="credentials"in Request.prototype;T=new Request(n,{..._,signal:E,method:t.toUpperCase(),headers:w.normalize().toJSON(),body:r,duplex:"half",credentials:S?b:void 0});let A=await fetch(T);const O=Ex&&(g==="stream"||g==="response");if(Ex&&(m||O&&I)){const $={};["status","statusText","headers"].forEach(V=>{$[V]=A[V]});const L=_e.toFiniteNumber(A.headers.get("content-length")),[F,W]=m&&lb(L,hf(cb(m),!0))||[];A=new Response(ub(A.body,hb,F,()=>{W&&W(),I&&I()}),$)}g=g||"text";let P=await ff[_e.findKey(ff,g)||"text"](A,e);return!O&&I&&I(),await new Promise(($,L)=>{Bj($,L,{data:P,headers:ha.from(A.headers),status:A.status,statusText:A.statusText,config:e,request:T})})}catch(S){throw I&&I(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new At("Network Error",At.ERR_NETWORK,e,T),{cause:S.cause||S}):At.from(S,S&&S.code,e,T)}}),Sx={http:HI,xhr:bM,fetch:DM};_e.forEach(Sx,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const fb=e=>`- ${e}`,IM=e=>_e.isFunction(e)||e===null||e===!1,Hj={getAdapter:e=>{e=_e.isArray(e)?e:[e];const{length:n}=e;let t,r;const a={};for(let o=0;o<n;o++){t=e[o];let d;if(r=t,!IM(t)&&(r=Sx[(d=String(t)).toLowerCase()],r===void 0))throw new At(`Unknown adapter '${d}'`);if(r)break;a[d||"#"+o]=r}if(!r){const o=Object.entries(a).map(([m,v])=>`adapter ${m} `+(v===!1?"is not supported by the environment":"is not available in the build"));let d=n?o.length>1?`since :
`+o.map(fb).join(`
`):" "+fb(o[0]):"as no adapter specified";throw new At("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return r},adapters:Sx};function a1(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new qc(null,e)}function pb(e){return a1(e),e.headers=ha.from(e.headers),e.data=s1.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Hj.getAdapter(e.adapter||c2.adapter)(e).then(function(r){return a1(e),r.data=s1.call(e,e.transformResponse,r),r.headers=ha.from(r.headers),r},function(r){return Fj(r)||(a1(e),r&&r.response&&(r.response.data=s1.call(e,e.transformResponse,r.response),r.response.headers=ha.from(r.response.headers))),Promise.reject(r)})}const Vj="1.9.0",op={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{op[e]=function(r){return typeof r===e||"a"+(n<1?"n ":" ")+e}});const mb={};op.transitional=function(n,t,r){function a(o,d){return"[Axios v"+Vj+"] Transitional option '"+o+"'"+d+(r?". "+r:"")}return(o,d,m)=>{if(n===!1)throw new At(a(d," has been removed"+(t?" in "+t:"")),At.ERR_DEPRECATED);return t&&!mb[d]&&(mb[d]=!0,console.warn(a(d," has been deprecated since v"+t+" and will be removed in the near future"))),n?n(o,d,m):!0}};op.spelling=function(n){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${n}`),!0)};function MM(e,n,t){if(typeof e!="object")throw new At("options must be an object",At.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const o=r[a],d=n[o];if(d){const m=e[o],v=m===void 0||d(m,o,e);if(v!==!0)throw new At("option "+o+" must be "+v,At.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new At("Unknown option "+o,At.ERR_BAD_OPTION)}}const _h={assertOptions:MM,validators:op},_a=_h.validators;class pf{constructor(n){this.defaults=n||{},this.interceptors={request:new ib,response:new ib}}async request(n,t){try{return await this._request(n,t)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(n,t){typeof n=="string"?(t=t||{},t.url=n):t=n||{},t=fl(this.defaults,t);const{transitional:r,paramsSerializer:a,headers:o}=t;r!==void 0&&_h.assertOptions(r,{silentJSONParsing:_a.transitional(_a.boolean),forcedJSONParsing:_a.transitional(_a.boolean),clarifyTimeoutError:_a.transitional(_a.boolean)},!1),a!=null&&(_e.isFunction(a)?t.paramsSerializer={serialize:a}:_h.assertOptions(a,{encode:_a.function,serialize:_a.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),_h.assertOptions(t,{baseUrl:_a.spelling("baseURL"),withXsrfToken:_a.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let d=o&&_e.merge(o.common,o[t.method]);o&&_e.forEach(["delete","get","head","post","put","patch","common"],T=>{delete o[T]}),t.headers=ha.concat(d,o);const m=[];let v=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(t)===!1||(v=v&&I.synchronous,m.unshift(I.fulfilled,I.rejected))});const g=[];this.interceptors.response.forEach(function(I){g.push(I.fulfilled,I.rejected)});let w,b=0,_;if(!v){const T=[pb.bind(this),void 0];for(T.unshift.apply(T,m),T.push.apply(T,g),_=T.length,w=Promise.resolve(t);b<_;)w=w.then(T[b++],T[b++]);return w}_=m.length;let E=t;for(b=0;b<_;){const T=m[b++],I=m[b++];try{E=T(E)}catch(k){I.call(this,k);break}}try{w=pb.call(this,E)}catch(T){return Promise.reject(T)}for(b=0,_=g.length;b<_;)w=w.then(g[b++],g[b++]);return w}getUri(n){n=fl(this.defaults,n);const t=Uj(n.baseURL,n.url,n.allowAbsoluteUrls);return Oj(t,n.params,n.paramsSerializer)}}_e.forEach(["delete","get","head","options"],function(n){pf.prototype[n]=function(t,r){return this.request(fl(r||{},{method:n,url:t,data:(r||{}).data}))}});_e.forEach(["post","put","patch"],function(n){function t(r){return function(o,d,m){return this.request(fl(m||{},{method:n,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:d}))}}pf.prototype[n]=t(),pf.prototype[n+"Form"]=t(!0)});const Eh=pf;class d2{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const r=this;this.promise.then(a=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](a);r._listeners=null}),this.promise.then=a=>{let o;const d=new Promise(m=>{r.subscribe(m),o=m}).then(a);return d.cancel=function(){r.unsubscribe(o)},d},n(function(o,d,m){r.reason||(r.reason=new qc(o,d,m),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const t=this._listeners.indexOf(n);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const n=new AbortController,t=r=>{n.abort(r)};return this.subscribe(t),n.signal.unsubscribe=()=>this.unsubscribe(t),n.signal}static source(){let n;return{token:new d2(function(a){n=a}),cancel:n}}}const RM=d2;function OM(e){return function(t){return e.apply(null,t)}}function LM(e){return _e.isObject(e)&&e.isAxiosError===!0}const kx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kx).forEach(([e,n])=>{kx[n]=e});const PM=kx;function $j(e){const n=new Eh(e),t=jj(Eh.prototype.request,n);return _e.extend(t,Eh.prototype,n,{allOwnKeys:!0}),_e.extend(t,n,null,{allOwnKeys:!0}),t.create=function(a){return $j(fl(e,a))},t}const tr=$j(c2);tr.Axios=Eh;tr.CanceledError=qc;tr.CancelToken=RM;tr.isCancel=Fj;tr.VERSION=Vj;tr.toFormData=sp;tr.AxiosError=At;tr.Cancel=tr.CanceledError;tr.all=function(n){return Promise.all(n)};tr.spread=OM;tr.isAxiosError=LM;tr.mergeConfig=fl;tr.AxiosHeaders=ha;tr.formToJSON=e=>Pj(_e.isHTMLForm(e)?new FormData(e):e);tr.getAdapter=Hj.getAdapter;tr.HttpStatusCode=PM;tr.default=tr;const ze=tr,Yj=M.createContext(),dr=()=>M.useContext(Yj),FM=({children:e})=>{const[n,t]=M.useState(null),[r,a]=M.useState(localStorage.getItem("token")),[o,d]=M.useState(!0),[m,v]=M.useState(null);M.useEffect(()=>{r?ze.defaults.headers.common.Authorization=`Bearer ${r}`:delete ze.defaults.headers.common.Authorization},[r]),M.useEffect(()=>{const P=async()=>{if(!r){d(!1);return}try{const L=await ze.get("/api/auth/me");t(L.data.user),v(null)}catch(L){console.error("Token verification failed:",L),L.response&&L.response.status===401?(w(),v("Session expired. Please log in again.")):v("Error verifying session. Please try again.")}finally{d(!1)}};P();const $=setInterval(()=>{r&&P()},60*60*1e3);return()=>{clearInterval($)}},[r]);const g=async(P,$)=>{var L,F;try{d(!0);const W=await ze.post("/api/auth/login",{username:P,password:$}),{token:V,user:re}=W.data;return localStorage.setItem("token",V),ze.defaults.headers.common.Authorization=`Bearer ${V}`,a(V),t(re),v(null),re}catch(W){throw console.error("Login error:",W),v(((F=(L=W.response)==null?void 0:L.data)==null?void 0:F.message)||"Login failed"),W}finally{d(!1)}},w=()=>{localStorage.removeItem("token"),a(null),t(null),delete ze.defaults.headers.common.Authorization},O={user:n,token:r,loading:o,error:m,login:g,logout:w,register:async P=>{var $,L;try{return d(!0),(await ze.post("/api/auth/register",P)).data}catch(F){throw console.error("Register error:",F),v(((L=($=F.response)==null?void 0:$.data)==null?void 0:L.message)||"Registration failed"),F}finally{d(!1)}},isAdmin:()=>(n==null?void 0:n.role)==="admin",isAdvanced:()=>(n==null?void 0:n.role)==="advanced",isBasic:()=>(n==null?void 0:n.role)==="basic",canEditEquipment:()=>(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="advanced",isImpersonating:()=>!!(n!=null&&n.impersonated),impersonateUser:async P=>{var $,L;try{d(!0);const F=await ze.post(`/api/auth/impersonate/${P}`),{token:W,user:V}=F.data;return localStorage.setItem("token",W),a(W),t(V),v(null),V}catch(F){throw console.error("Impersonation error:",F),v(((L=($=F.response)==null?void 0:$.data)==null?void 0:L.message)||"Impersonation failed"),F}finally{d(!1)}},getUsers:async()=>{var P,$;try{return(await ze.get("/api/auth/users")).data.users}catch(L){throw console.error("Get users error:",L),v((($=(P=L.response)==null?void 0:P.data)==null?void 0:$.message)||"Failed to get users"),L}}};return s.jsx(Yj.Provider,{value:O,children:e})};function Qj(e){var n,t,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(n=0;n<a;n++)e[n]&&(t=Qj(e[n]))&&(r&&(r+=" "),r+=t)}else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function kn(){for(var e,n,t=0,r="",a=arguments.length;t<a;t++)(e=arguments[t])&&(n=Qj(e))&&(r&&(r+=" "),r+=n);return r}function BM(e){if(!e||typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",n.firstChild?n.insertBefore(t,n.firstChild):n.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}BM(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Iu=e=>typeof e=="number"&&!isNaN(e),pl=e=>typeof e=="string",Ni=e=>typeof e=="function",UM=e=>pl(e)||Iu(e),Ax=e=>pl(e)||Ni(e)?e:null,zM=(e,n)=>e===!1||Iu(e)&&e>0?e:n,Tx=e=>M.isValidElement(e)||pl(e)||Ni(e)||Iu(e);function qM(e,n,t=300){let{scrollHeight:r,style:a}=e;requestAnimationFrame(()=>{a.minHeight="initial",a.height=r+"px",a.transition=`all ${t}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(n,t)})})}function WM({enter:e,exit:n,appendPosition:t=!1,collapse:r=!0,collapseDuration:a=300}){return function({children:o,position:d,preventExitTransition:m,done:v,nodeRef:g,isIn:w,playToast:b}){let _=t?`${e}--${d}`:e,E=t?`${n}--${d}`:n,T=M.useRef(0);return M.useLayoutEffect(()=>{let I=g.current,k=_.split(" "),S=A=>{A.target===g.current&&(b(),I.removeEventListener("animationend",S),I.removeEventListener("animationcancel",S),T.current===0&&A.type!=="animationcancel"&&I.classList.remove(...k))};I.classList.add(...k),I.addEventListener("animationend",S),I.addEventListener("animationcancel",S)},[]),M.useEffect(()=>{let I=g.current,k=()=>{I.removeEventListener("animationend",k),r?qM(I,v,a):v()};w||(m?k():(T.current=1,I.className+=` ${E}`,I.addEventListener("animationend",k)))},[w]),ge.createElement(ge.Fragment,null,o)}}function xb(e,n){return{content:Gj(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:n}}function Gj(e,n,t=!1){return M.isValidElement(e)&&!pl(e.type)?M.cloneElement(e,{closeToast:n.closeToast,toastProps:n,data:n.data,isPaused:t}):Ni(e)?e({closeToast:n.closeToast,toastProps:n,data:n.data,isPaused:t}):e}function HM({closeToast:e,theme:n,ariaLabel:t="close"}){return ge.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:r=>{r.stopPropagation(),e(!0)},"aria-label":t},ge.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ge.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function VM({delay:e,isRunning:n,closeToast:t,type:r="default",hide:a,className:o,controlledProgress:d,progress:m,rtl:v,isIn:g,theme:w}){let b=a||d&&m===0,_={animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};d&&(_.transform=`scaleX(${m})`);let E=kn("Toastify__progress-bar",d?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${w}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":v}),T=Ni(o)?o({rtl:v,type:r,defaultClassName:E}):kn(E,o),I={[d&&m>=1?"onTransitionEnd":"onAnimationEnd"]:d&&m<1?null:()=>{g&&t()}};return ge.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":b},ge.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${w} Toastify__progress-bar--${r}`}),ge.createElement("div",{role:"progressbar","aria-hidden":b?"true":"false","aria-label":"notification timer",className:T,style:_,...I}))}var $M=1,Xj=()=>`${$M++}`;function YM(e,n,t){let r=1,a=0,o=[],d=[],m=n,v=new Map,g=new Set,w=A=>(g.add(A),()=>g.delete(A)),b=()=>{d=Array.from(v.values()),g.forEach(A=>A())},_=({containerId:A,toastId:O,updateId:P})=>{let $=A?A!==e:e!==1,L=v.has(O)&&P==null;return $||L},E=(A,O)=>{v.forEach(P=>{var $;(O==null||O===P.props.toastId)&&(($=P.toggle)==null||$.call(P,A))})},T=A=>{var O,P;(P=(O=A.props)==null?void 0:O.onClose)==null||P.call(O,A.removalReason),A.isActive=!1},I=A=>{if(A==null)v.forEach(T);else{let O=v.get(A);O&&T(O)}b()},k=()=>{a-=o.length,o=[]},S=A=>{var O,P;let{toastId:$,updateId:L}=A.props,F=L==null;A.staleId&&v.delete(A.staleId),A.isActive=!0,v.set($,A),b(),t(xb(A,F?"added":"updated")),F&&((P=(O=A.props).onOpen)==null||P.call(O))};return{id:e,props:m,observe:w,toggle:E,removeToast:I,toasts:v,clearQueue:k,buildToast:(A,O)=>{if(_(O))return;let{toastId:P,updateId:$,data:L,staleId:F,delay:W}=O,V=$==null;V&&a++;let re={...m,style:m.toastStyle,key:r++,...Object.fromEntries(Object.entries(O).filter(([ee,he])=>he!=null)),toastId:P,updateId:$,data:L,isIn:!1,className:Ax(O.className||m.toastClassName),progressClassName:Ax(O.progressClassName||m.progressClassName),autoClose:O.isLoading?!1:zM(O.autoClose,m.autoClose),closeToast(ee){v.get(P).removalReason=ee,I(P)},deleteToast(){let ee=v.get(P);if(ee!=null){if(t(xb(ee,"removed")),v.delete(P),a--,a<0&&(a=0),o.length>0){S(o.shift());return}b()}}};re.closeButton=m.closeButton,O.closeButton===!1||Tx(O.closeButton)?re.closeButton=O.closeButton:O.closeButton===!0&&(re.closeButton=Tx(m.closeButton)?m.closeButton:!0);let oe={content:A,props:re,staleId:F};m.limit&&m.limit>0&&a>m.limit&&V?o.push(oe):Iu(W)?setTimeout(()=>{S(oe)},W):S(oe)},setProps(A){m=A},setToggle:(A,O)=>{let P=v.get(A);P&&(P.toggle=O)},isToastActive:A=>{var O;return(O=v.get(A))==null?void 0:O.isActive},getSnapshot:()=>d}}var Qr=new Map,yu=[],Dx=new Set,QM=e=>Dx.forEach(n=>n(e)),Kj=()=>Qr.size>0;function GM(){yu.forEach(e=>Jj(e.content,e.options)),yu=[]}var XM=(e,{containerId:n})=>{var t;return(t=Qr.get(n||1))==null?void 0:t.toasts.get(e)};function Zj(e,n){var t;if(n)return!!((t=Qr.get(n))!=null&&t.isToastActive(e));let r=!1;return Qr.forEach(a=>{a.isToastActive(e)&&(r=!0)}),r}function KM(e){if(!Kj()){yu=yu.filter(n=>e!=null&&n.options.toastId!==e);return}if(e==null||UM(e))Qr.forEach(n=>{n.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let n=Qr.get(e.containerId);n?n.removeToast(e.id):Qr.forEach(t=>{t.removeToast(e.id)})}}var ZM=(e={})=>{Qr.forEach(n=>{n.props.limit&&(!e.containerId||n.id===e.containerId)&&n.clearQueue()})};function Jj(e,n){Tx(e)&&(Kj()||yu.push({content:e,options:n}),Qr.forEach(t=>{t.buildToast(e,n)}))}function JM(e){var n;(n=Qr.get(e.containerId||1))==null||n.setToggle(e.id,e.fn)}function eC(e,n){Qr.forEach(t=>{(n==null||!(n!=null&&n.containerId)||(n==null?void 0:n.containerId)===t.id)&&t.toggle(e,n==null?void 0:n.id)})}function eR(e){let n=e.containerId||1;return{subscribe(t){let r=YM(n,e,QM);Qr.set(n,r);let a=r.observe(t);return GM(),()=>{a(),Qr.delete(n)}},setProps(t){var r;(r=Qr.get(n))==null||r.setProps(t)},getSnapshot(){var t;return(t=Qr.get(n))==null?void 0:t.getSnapshot()}}}function tR(e){return Dx.add(e),()=>{Dx.delete(e)}}function nR(e){return e&&(pl(e.toastId)||Iu(e.toastId))?e.toastId:Xj()}function Mu(e,n){return Jj(e,n),n.toastId}function lp(e,n){return{...n,type:n&&n.type||e,toastId:nR(n)}}function cp(e){return(n,t)=>Mu(n,lp(e,t))}function Qe(e,n){return Mu(e,lp("default",n))}Qe.loading=(e,n)=>Mu(e,lp("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...n}));function rR(e,{pending:n,error:t,success:r},a){let o;n&&(o=pl(n)?Qe.loading(n,a):Qe.loading(n.render,{...a,...n}));let d={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},m=(g,w,b)=>{if(w==null){Qe.dismiss(o);return}let _={type:g,...d,...a,data:b},E=pl(w)?{render:w}:w;return o?Qe.update(o,{..._,...E}):Qe(E.render,{..._,...E}),b},v=Ni(e)?e():e;return v.then(g=>m("success",r,g)).catch(g=>m("error",t,g)),v}Qe.promise=rR;Qe.success=cp("success");Qe.info=cp("info");Qe.error=cp("error");Qe.warning=cp("warning");Qe.warn=Qe.warning;Qe.dark=(e,n)=>Mu(e,lp("default",{theme:"dark",...n}));function sR(e){KM(e)}Qe.dismiss=sR;Qe.clearWaitingQueue=ZM;Qe.isActive=Zj;Qe.update=(e,n={})=>{let t=XM(e,n);if(t){let{props:r,content:a}=t,o={delay:100,...r,...n,toastId:n.toastId||e,updateId:Xj()};o.toastId!==e&&(o.staleId=e);let d=o.render||a;delete o.render,Mu(d,o)}};Qe.done=e=>{Qe.update(e,{progress:1})};Qe.onChange=tR;Qe.play=e=>eC(!0,e);Qe.pause=e=>eC(!1,e);function aR(e){var n;let{subscribe:t,getSnapshot:r,setProps:a}=M.useRef(eR(e)).current;a(e);let o=(n=M.useSyncExternalStore(t,r,r))==null?void 0:n.slice();function d(m){if(!o)return[];let v=new Map;return e.newestOnTop&&o.reverse(),o.forEach(g=>{let{position:w}=g.props;v.has(w)||v.set(w,[]),v.get(w).push(g)}),Array.from(v,g=>m(g[0],g[1]))}return{getToastToRender:d,isToastActive:Zj,count:o==null?void 0:o.length}}function iR(e){let[n,t]=M.useState(!1),[r,a]=M.useState(!1),o=M.useRef(null),d=M.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:m,pauseOnHover:v,closeToast:g,onClick:w,closeOnClick:b}=e;JM({id:e.toastId,containerId:e.containerId,fn:t}),M.useEffect(()=>{if(e.pauseOnFocusLoss)return _(),()=>{E()}},[e.pauseOnFocusLoss]);function _(){document.hasFocus()||S(),window.addEventListener("focus",k),window.addEventListener("blur",S)}function E(){window.removeEventListener("focus",k),window.removeEventListener("blur",S)}function T(F){if(e.draggable===!0||e.draggable===F.pointerType){A();let W=o.current;d.canCloseOnClick=!0,d.canDrag=!0,W.style.transition="none",e.draggableDirection==="x"?(d.start=F.clientX,d.removalDistance=W.offsetWidth*(e.draggablePercent/100)):(d.start=F.clientY,d.removalDistance=W.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function I(F){let{top:W,bottom:V,left:re,right:oe}=o.current.getBoundingClientRect();F.nativeEvent.type!=="touchend"&&e.pauseOnHover&&F.clientX>=re&&F.clientX<=oe&&F.clientY>=W&&F.clientY<=V?S():k()}function k(){t(!0)}function S(){t(!1)}function A(){d.didMove=!1,document.addEventListener("pointermove",P),document.addEventListener("pointerup",$)}function O(){document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",$)}function P(F){let W=o.current;if(d.canDrag&&W){d.didMove=!0,n&&S(),e.draggableDirection==="x"?d.delta=F.clientX-d.start:d.delta=F.clientY-d.start,d.start!==F.clientX&&(d.canCloseOnClick=!1);let V=e.draggableDirection==="x"?`${d.delta}px, var(--y)`:`0, calc(${d.delta}px + var(--y))`;W.style.transform=`translate3d(${V},0)`,W.style.opacity=`${1-Math.abs(d.delta/d.removalDistance)}`}}function $(){O();let F=o.current;if(d.canDrag&&d.didMove&&F){if(d.canDrag=!1,Math.abs(d.delta)>d.removalDistance){a(!0),e.closeToast(!0),e.collapseAll();return}F.style.transition="transform 0.2s, opacity 0.2s",F.style.removeProperty("transform"),F.style.removeProperty("opacity")}}let L={onPointerDown:T,onPointerUp:I};return m&&v&&(L.onMouseEnter=S,e.stacked||(L.onMouseLeave=k)),b&&(L.onClick=F=>{w&&w(F),d.canCloseOnClick&&g(!0)}),{playToast:k,pauseToast:S,isRunning:n,preventExitTransition:r,toastRef:o,eventHandlers:L}}var oR=typeof window<"u"?M.useLayoutEffect:M.useEffect,dp=({theme:e,type:n,isLoading:t,...r})=>ge.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...r});function lR(e){return ge.createElement(dp,{...e},ge.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function cR(e){return ge.createElement(dp,{...e},ge.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function dR(e){return ge.createElement(dp,{...e},ge.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function uR(e){return ge.createElement(dp,{...e},ge.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function hR(){return ge.createElement("div",{className:"Toastify__spinner"})}var Ix={info:cR,warning:lR,success:dR,error:uR,spinner:hR},fR=e=>e in Ix;function pR({theme:e,type:n,isLoading:t,icon:r}){let a=null,o={theme:e,type:n};return r===!1||(Ni(r)?a=r({...o,isLoading:t}):M.isValidElement(r)?a=M.cloneElement(r,o):t?a=Ix.spinner():fR(n)&&(a=Ix[n](o))),a}var mR=e=>{let{isRunning:n,preventExitTransition:t,toastRef:r,eventHandlers:a,playToast:o}=iR(e),{closeButton:d,children:m,autoClose:v,onClick:g,type:w,hideProgressBar:b,closeToast:_,transition:E,position:T,className:I,style:k,progressClassName:S,updateId:A,role:O,progress:P,rtl:$,toastId:L,deleteToast:F,isIn:W,isLoading:V,closeOnClick:re,theme:oe,ariaLabel:ee}=e,he=kn("Toastify__toast",`Toastify__toast-theme--${oe}`,`Toastify__toast--${w}`,{"Toastify__toast--rtl":$},{"Toastify__toast--close-on-click":re}),ve=Ni(I)?I({rtl:$,position:T,type:w,defaultClassName:he}):kn(he,I),ne=pR(e),Q=!!P||!v,me={closeToast:_,type:w,theme:oe},fe=null;return d===!1||(Ni(d)?fe=d(me):M.isValidElement(d)?fe=M.cloneElement(d,me):fe=HM(me)),ge.createElement(E,{isIn:W,done:F,position:T,preventExitTransition:t,nodeRef:r,playToast:o},ge.createElement("div",{id:L,tabIndex:0,onClick:g,"data-in":W,className:ve,...a,style:k,ref:r,...W&&{role:O,"aria-label":ee}},ne!=null&&ge.createElement("div",{className:kn("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!V})},ne),Gj(m,e,!n),fe,!e.customProgressBar&&ge.createElement(VM,{...A&&!Q?{key:`p-${A}`}:{},rtl:$,theme:oe,delay:v,isRunning:n,isIn:W,closeToast:_,hide:b,type:w,className:S,controlledProgress:Q,progress:P||0})))},xR=(e,n=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:n}),gR=WM(xR("bounce",!0)),vR={position:"top-right",transition:gR,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function up(e){let n={...vR,...e},t=e.stacked,[r,a]=M.useState(!0),o=M.useRef(null),{getToastToRender:d,isToastActive:m,count:v}=aR(n),{className:g,style:w,rtl:b,containerId:_,hotKeys:E}=n;function T(k){let S=kn("Toastify__toast-container",`Toastify__toast-container--${k}`,{"Toastify__toast-container--rtl":b});return Ni(g)?g({position:k,rtl:b,defaultClassName:S}):kn(S,Ax(g))}function I(){t&&(a(!0),Qe.play())}return oR(()=>{var k;if(t){let S=o.current.querySelectorAll('[data-in="true"]'),A=12,O=(k=n.position)==null?void 0:k.includes("top"),P=0,$=0;Array.from(S).reverse().forEach((L,F)=>{let W=L;W.classList.add("Toastify__toast--stacked"),F>0&&(W.dataset.collapsed=`${r}`),W.dataset.pos||(W.dataset.pos=O?"top":"bot");let V=P*(r?.2:1)+(r?0:A*F);W.style.setProperty("--y",`${O?V:V*-1}px`),W.style.setProperty("--g",`${A}`),W.style.setProperty("--s",`${1-(r?$:0)}`),P+=W.offsetHeight,$+=.025})}},[r,v,t]),M.useEffect(()=>{function k(S){var A;let O=o.current;E(S)&&((A=O.querySelector('[tabIndex="0"]'))==null||A.focus(),a(!1),Qe.pause()),S.key==="Escape"&&(document.activeElement===O||O!=null&&O.contains(document.activeElement))&&(a(!0),Qe.play())}return document.addEventListener("keydown",k),()=>{document.removeEventListener("keydown",k)}},[E]),ge.createElement("section",{ref:o,className:"Toastify",id:_,onMouseEnter:()=>{t&&(a(!1),Qe.pause())},onMouseLeave:I,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":n["aria-label"]},d((k,S)=>{let A=S.length?{...w}:{...w,pointerEvents:"none"};return ge.createElement("div",{tabIndex:-1,className:T(k),"data-stacked":t,style:A,key:`c-${k}`},S.map(({content:O,props:P})=>ge.createElement(mR,{...P,stacked:t,collapseAll:I,isIn:m(P.toastId,P.containerId),key:`t-${P.key}`},O)))}))}var tC={exports:{}},yR="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",wR=yR,bR=wR;function nC(){}function rC(){}rC.resetWarningCache=nC;var NR=function(){function e(r,a,o,d,m,v){if(v!==bR){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}e.isRequired=e;function n(){return e}var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:rC,resetWarningCache:nC};return t.PropTypes=t,t};tC.exports=NR();var jR=tC.exports;const ce=Rf(jR),Oa=async({page:e=1,limit:n=10,type:t,brand:r,status:a,location_id:o,search:d,sortBy:m="updated_at",sortOrder:v="desc",startDate:g,endDate:w})=>{const b={page:e,limit:n};return t&&(b.type=t),r&&(b.brand=r),a&&(b.status=a),o&&(b.location_id=o),d&&(b.search=d),m&&(b.sortBy=m),v&&(b.sortOrder=v),g&&(b.startDate=g),w&&(b.endDate=w),(await ze.get("/api/equipment",{params:b})).data},hp=async e=>(await ze.get(`/api/equipment/${e}`)).data,CR=async e=>{var d,m,v;let n,t,r;e&&typeof e=="object"&&e.equipment?(n=e.equipment,t=e.files||[],r=e.referenceImageFile||null,console.log(" Service received object params:",JSON.stringify(e,null,2))):(n=e,t=arguments[1]||[],r=arguments[2]||null,console.log(" Service received individual params:",JSON.stringify(n,null,2)));const a=new FormData;if(console.log(" Service processing equipment data:",JSON.stringify(n,null,2)),!n.type_id||n.type_id===""||n.type_id==="0")throw console.error("Missing required field: type_id",n.type_id),new Error("Equipment type is required");if(!n.brand||n.brand.trim()==="")throw console.error("Missing required field: brand",n.brand),new Error("Brand is required");if(!n.model||n.model.trim()==="")throw console.error("Missing required field: model",n.model),new Error("Model is required");const o=Object.fromEntries(Object.entries(n).filter(([g,w])=>w!==void 0));console.log("Creating equipment with data:",o),Object.keys(o).forEach(g=>{let w=o[g];if(g==="type_id"&&typeof w=="string"&&(w=parseInt(w,10)),w===""&&["location_id","category_id","serial_number","reference_image_id"].includes(g)){console.log(` Skipping empty optional field: ${g}`);return}["location_id","category_id","quantity"].includes(g)&&typeof w=="string"&&w!==""&&(w=parseInt(w,10)),a.append(g,w)}),r&&a.append("referenceImage",r),t&&t.length>0&&t.forEach(g=>{a.append("files",g)});try{console.log(" Sending FormData to API...");for(let[w,b]of a.entries())console.log(` FormData: ${w} =`,b);const g=await ze.post("/api/equipment",a,{headers:{"Content-Type":"multipart/form-data"}});return console.log(" API Success Response:",g.data),g.data}catch(g){throw console.error(" API Error Details:",{status:(d=g.response)==null?void 0:d.status,statusText:(m=g.response)==null?void 0:m.statusText,data:(v=g.response)==null?void 0:v.data,message:g.message}),console.error(" Full error object:",g),g}},sC=async(e,n,t=[],r=[],a=null,o=!1)=>{try{const d=new FormData,m=Object.fromEntries(Object.entries(n).filter(([w,b])=>b!==void 0)),v=["location_id","type_id"];return Object.keys(m).forEach(w=>{w!=="reference_image_id"&&(v.includes(w)&&(m[w]===""||m[w]==="0")?(d.append(w,""),d.append(`${w}_is_null`,"true")):d.append(w,m[w]))}),a&&d.append("referenceImage",a),o&&d.append("removeReferenceImage","true"),t&&t.length>0&&t.forEach(w=>{d.append("files",w)}),r&&r.length>0&&d.append("filesToDelete",JSON.stringify(r)),(await ze.put(`/api/equipment/${e}`,d,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(d){throw console.error("Error in updateEquipment:",d),d}},_R=async e=>(await ze.delete(`/api/equipment/${e}`)).data,ER=async(e,n=null)=>{try{console.log(`Returning equipment ${e} from installation${n?` (quantity: ${n})`:""}`);const t=await ze.delete(`/api/equipment/${e}/installation`,{data:n?{quantity:n}:{}});return console.log("Return from installation response:",t.data),t.data}catch(t){throw console.error(`Error returning equipment ${e} from installation:`,t),t}},mf=(e,n=!1,t=!0)=>{if(!e)return null;const r=`/api/files/${e}`;let a=n?`${r}?thumbnail=true`:r;return t&&(a+=(a.includes("?")?"&":"?")+`t=${new Date().getTime()}`),a},SR=async(e,n)=>{try{return(await ze.patch(`/api/equipment/${e}/status`,{status:n})).data}catch(t){throw console.error("Error updating equipment status:",t),t}},kR=async(e,n)=>{try{return(await ze.patch(`/api/equipment/${e}/location`,n)).data}catch(t){throw console.error("Error updating equipment location:",t),t}},AR=async(e,n)=>{try{return(await ze.patch(`/api/equipment/${e}/type`,{type_id:n})).data}catch(t){throw console.error("Error updating equipment type:",t),t}},TR=async(e,n)=>{try{return console.log(`Updating equipment ${e} category to ${n}`),(await ze.patch(`/api/equipment/${e}/category`,{category_id:n})).data}catch(t){throw console.error("Error updating equipment category:",t),t}},DR=async(e,n)=>{try{return console.log(`Updating equipment ${e} brand/model:`,n),(await ze.patch(`/api/equipment/${e}/brand-model`,n)).data}catch(t){throw console.error("Error updating equipment brand/model:",t),t}},ki=async()=>{try{return(await ze.get("/api/equipment-types")).data}catch(e){throw console.error("Error fetching equipment types:",e),e}},IR=async e=>(await ze.post("/api/equipment-types",{name:e})).data,MR=async(e,n)=>(await ze.put(`/api/equipment-types/${e}`,{name:n})).data,RR=async e=>(await ze.delete(`/api/equipment-types/${e}`)).data,aC=M.createContext(),OR=3,iC=({children:e})=>{const[n,t]=M.useState([]),{user:r}=dr(),a=(r==null?void 0:r.role)==="admin",{data:o}=ut(["equipment",{limit:1e3}],()=>Oa({limit:1e3}),{enabled:a,refetchInterval:5*60*1e3,staleTime:4*60*1e3}),{data:d}=ut({queryKey:["equipment-types"],queryFn:ki,staleTime:3e5,enabled:a});M.useEffect(()=>{if(!a||!(o!=null&&o.equipment)||!(d!=null&&d.types))return;const T=o.equipment,I=d.types,k={};T.forEach(A=>{A.type&&(k[A.type]||(k[A.type]=[]),k[A.type].push(A))});const S=[];Object.entries(k).forEach(([A,O])=>{const P=O.filter($=>$.status==="available");if(P.length<=OR){const $=I.find(L=>L.name.toLowerCase()===A.toLowerCase());S.push({id:`low-stock-${A}`,type:"warning",title:"Low Stock Alert",message:`Only ${P.length} ${A} ${P.length===1?"item is":"items are"} available.`,timestamp:new Date,read:!1,typeId:$==null?void 0:$.id})}}),S.length>0&&t(A=>[...A.filter(P=>!P.id.startsWith("low-stock-")),...S])},[o,d,a]);const m=T=>{t(I=>[...I,{id:T.id||`notification-${Date.now()}`,timestamp:new Date,read:!1,...T}])},v=T=>{t(I=>I.map(k=>k.id===T?{...k,read:!0}:k))},g=()=>{t(T=>T.map(I=>({...I,read:!0})))},w=T=>{t(I=>I.filter(k=>k.id!==T))},b=()=>{t([])},_=n.filter(T=>!T.read).length,E={notifications:n,unreadCount:_,addNotification:m,markAsRead:v,markAllAsRead:g,removeNotification:w,clearNotifications:b};return s.jsx(aC.Provider,{value:E,children:e})};iC.propTypes={children:ce.node.isRequired};const LR=()=>{const e=M.useContext(aC);if(e===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return e},PR=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})}),FR=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})}),BR=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"})}),fp=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),UR=({className:e="w-5 h-5"})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),gb=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"})}),ic=({className:e="w-5 h-5"})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),fa=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125"})}),u2=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),h2=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})}),zR=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),oC=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),Wc=({className:e="w-4 h-4"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),Hc=({className:e="w-4 h-4"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),f2=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})}),vb=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}),qR=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"})}),WR=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75a2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})}),Cc=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),lC=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"})}),HR=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})}),VR=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),Mx=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})}),$R=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"})}),p2=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),yb=({className:e="w-4 h-4"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})}),cC=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),Rx=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})}),YR=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})}),QR=({className:e="w-5 h-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})}),dC=6048e5,GR=864e5,pp=6e4,mp=36e5,XR=1e3,J0=43200,wb=1440,bb=Symbol.for("constructDateFrom");function an(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&bb in e?e[bb](n):e instanceof Date?new e.constructor(n):new Date(n)}function at(e,n){return an(n||e,e)}function pa(e,n,t){const r=at(e,t==null?void 0:t.in);return isNaN(n)?an((t==null?void 0:t.in)||e,NaN):(n&&r.setDate(r.getDate()+n),r)}function xa(e,n,t){const r=at(e,t==null?void 0:t.in);if(isNaN(n))return an((t==null?void 0:t.in)||e,NaN);if(!n)return r;const a=r.getDate(),o=an((t==null?void 0:t.in)||e,r.getTime());o.setMonth(r.getMonth()+n+1,0);const d=o.getDate();return a>=d?o:(r.setFullYear(o.getFullYear(),o.getMonth(),a),r)}function uC(e,n,t){return an((t==null?void 0:t.in)||e,+at(e)+n)}function KR(e,n,t){return uC(e,n*mp,t)}let ZR={};function No(){return ZR}function ji(e,n){var m,v,g,w;const t=No(),r=(n==null?void 0:n.weekStartsOn)??((v=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:v.weekStartsOn)??t.weekStartsOn??((w=(g=t.locale)==null?void 0:g.options)==null?void 0:w.weekStartsOn)??0,a=at(e,n==null?void 0:n.in),o=a.getDay(),d=(o<r?7:0)+o-r;return a.setDate(a.getDate()-d),a.setHours(0,0,0,0),a}function _c(e,n){return ji(e,{...n,weekStartsOn:1})}function hC(e,n){const t=at(e,n==null?void 0:n.in),r=t.getFullYear(),a=an(t,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const o=_c(a),d=an(t,0);d.setFullYear(r,0,4),d.setHours(0,0,0,0);const m=_c(d);return t.getTime()>=o.getTime()?r+1:t.getTime()>=m.getTime()?r:r-1}function Ec(e){const n=at(e),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+e-+t}function va(e,...n){const t=an.bind(null,e||n.find(r=>typeof r=="object"));return n.map(t)}function ml(e,n){const t=at(e,n==null?void 0:n.in);return t.setHours(0,0,0,0),t}function Sc(e,n,t){const[r,a]=va(t==null?void 0:t.in,e,n),o=ml(r),d=ml(a),m=+o-Ec(o),v=+d-Ec(d);return Math.round((m-v)/GR)}function JR(e,n){const t=hC(e,n),r=an((n==null?void 0:n.in)||e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),_c(r)}function Ox(e,n,t){const r=at(e,t==null?void 0:t.in);return r.setTime(r.getTime()+n*pp),r}function m2(e,n,t){return xa(e,n*3,t)}function e9(e,n,t){return uC(e,n*1e3,t)}function xf(e,n,t){return pa(e,n*7,t)}function hi(e,n,t){return xa(e,n*12,t)}function Nb(e,n){let t,r=n==null?void 0:n.in;return e.forEach(a=>{!r&&typeof a=="object"&&(r=an.bind(null,a));const o=at(a,r);(!t||t<o||isNaN(+o))&&(t=o)}),an(r,t||NaN)}function jb(e,n){let t,r=n==null?void 0:n.in;return e.forEach(a=>{!r&&typeof a=="object"&&(r=an.bind(null,a));const o=at(a,r);(!t||t>o||isNaN(+o))&&(t=o)}),an(r,t||NaN)}function Sh(e,n){const t=+at(e)-+at(n);return t<0?-1:t>0?1:t}function t9(e){return an(e,Date.now())}function n9(e,n,t){const[r,a]=va(t==null?void 0:t.in,e,n);return+ml(r)==+ml(a)}function fi(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function gf(e){return!(!fi(e)&&typeof e!="number"||isNaN(+at(e)))}function wu(e,n,t){const[r,a]=va(t==null?void 0:t.in,e,n),o=r.getFullYear()-a.getFullYear(),d=r.getMonth()-a.getMonth();return o*12+d}function al(e,n){const t=at(e,n==null?void 0:n.in);return Math.trunc(t.getMonth()/3)+1}function vf(e,n,t){const[r,a]=va(t==null?void 0:t.in,e,n),o=r.getFullYear()-a.getFullYear(),d=al(r)-al(a);return o*4+d}function yf(e,n,t){const[r,a]=va(t==null?void 0:t.in,e,n);return r.getFullYear()-a.getFullYear()}function r9(e,n,t){const[r,a]=va(t==null?void 0:t.in,e,n),o=Cb(r,a),d=Math.abs(Sc(r,a));r.setDate(r.getDate()-o*d);const m=+(Cb(r,a)===-o),v=o*(d-m);return v===0?0:v}function Cb(e,n){const t=e.getFullYear()-n.getFullYear()||e.getMonth()-n.getMonth()||e.getDate()-n.getDate()||e.getHours()-n.getHours()||e.getMinutes()-n.getMinutes()||e.getSeconds()-n.getSeconds()||e.getMilliseconds()-n.getMilliseconds();return t<0?-1:t>0?1:t}function s9(e){return n=>{const r=(e?Math[e]:Math.trunc)(n);return r===0?0:r}}function a9(e,n){return+at(e)-+at(n)}function x2(e,n){const t=at(e,n==null?void 0:n.in);return t.setHours(23,59,59,999),t}function g2(e,n){const t=at(e,n==null?void 0:n.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function i9(e,n){const t=at(e,n==null?void 0:n.in);return+x2(t,n)==+g2(t,n)}function o9(e,n,t){const[r,a,o]=va(t==null?void 0:t.in,e,e,n),d=Sh(a,o),m=Math.abs(wu(a,o));if(m<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-d*m);let v=Sh(a,o)===-d;i9(r)&&m===1&&Sh(r,o)===1&&(v=!1);const g=d*(m-+v);return g===0?0:g}function l9(e,n,t){const r=a9(e,n)/1e3;return s9(t==null?void 0:t.roundingMethod)(r)}function Lx(e,n){const t=at(e,n==null?void 0:n.in),r=t.getMonth(),a=r-r%3;return t.setMonth(a,1),t.setHours(0,0,0,0),t}function fC(e,n){const t=at(e,n==null?void 0:n.in);return t.setDate(1),t.setHours(0,0,0,0),t}function pC(e,n){const t=at(e,n==null?void 0:n.in),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function xp(e,n){const t=at(e,n==null?void 0:n.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function c9(e,n){var m,v,g,w;const t=No(),r=(n==null?void 0:n.weekStartsOn)??((v=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:v.weekStartsOn)??t.weekStartsOn??((w=(g=t.locale)==null?void 0:g.options)==null?void 0:w.weekStartsOn)??0,a=at(e,n==null?void 0:n.in),o=a.getDay(),d=(o<r?-7:0)+6-(o-r);return a.setDate(a.getDate()+d),a.setHours(23,59,59,999),a}const d9={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},u9=(e,n,t)=>{let r;const a=d9[e];return typeof a=="string"?r=a:n===1?r=a.one:r=a.other.replace("{{count}}",n.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function i1(e){return(n={})=>{const t=n.width?String(n.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const h9={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},f9={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},p9={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},m9={date:i1({formats:h9,defaultWidth:"full"}),time:i1({formats:f9,defaultWidth:"full"}),dateTime:i1({formats:p9,defaultWidth:"full"})},x9={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},g9=(e,n,t,r)=>x9[e];function Id(e){return(n,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const d=e.defaultFormattingWidth||e.defaultWidth,m=t!=null&&t.width?String(t.width):d;a=e.formattingValues[m]||e.formattingValues[d]}else{const d=e.defaultWidth,m=t!=null&&t.width?String(t.width):e.defaultWidth;a=e.values[m]||e.values[d]}const o=e.argumentCallback?e.argumentCallback(n):n;return a[o]}}const v9={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},y9={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},w9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},b9={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},N9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},j9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},C9=(e,n)=>{const t=Number(e),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},_9={ordinalNumber:C9,era:Id({values:v9,defaultWidth:"wide"}),quarter:Id({values:y9,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Id({values:w9,defaultWidth:"wide"}),day:Id({values:b9,defaultWidth:"wide"}),dayPeriod:Id({values:N9,defaultWidth:"wide",formattingValues:j9,defaultFormattingWidth:"wide"})};function Md(e){return(n,t={})=>{const r=t.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=n.match(a);if(!o)return null;const d=o[0],m=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],v=Array.isArray(m)?S9(m,b=>b.test(d)):E9(m,b=>b.test(d));let g;g=e.valueCallback?e.valueCallback(v):v,g=t.valueCallback?t.valueCallback(g):g;const w=n.slice(d.length);return{value:g,rest:w}}}function E9(e,n){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&n(e[t]))return t}function S9(e,n){for(let t=0;t<e.length;t++)if(n(e[t]))return t}function k9(e){return(n,t={})=>{const r=n.match(e.matchPattern);if(!r)return null;const a=r[0],o=n.match(e.parsePattern);if(!o)return null;let d=e.valueCallback?e.valueCallback(o[0]):o[0];d=t.valueCallback?t.valueCallback(d):d;const m=n.slice(a.length);return{value:d,rest:m}}}const A9=/^(\d+)(th|st|nd|rd)?/i,T9=/\d+/i,D9={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},I9={any:[/^b/i,/^(a|c)/i]},M9={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},R9={any:[/1/i,/2/i,/3/i,/4/i]},O9={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},L9={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},P9={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},F9={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},B9={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},U9={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},z9={ordinalNumber:k9({matchPattern:A9,parsePattern:T9,valueCallback:e=>parseInt(e,10)}),era:Md({matchPatterns:D9,defaultMatchWidth:"wide",parsePatterns:I9,defaultParseWidth:"any"}),quarter:Md({matchPatterns:M9,defaultMatchWidth:"wide",parsePatterns:R9,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Md({matchPatterns:O9,defaultMatchWidth:"wide",parsePatterns:L9,defaultParseWidth:"any"}),day:Md({matchPatterns:P9,defaultMatchWidth:"wide",parsePatterns:F9,defaultParseWidth:"any"}),dayPeriod:Md({matchPatterns:B9,defaultMatchWidth:"any",parsePatterns:U9,defaultParseWidth:"any"})},v2={code:"en-US",formatDistance:u9,formatLong:m9,formatRelative:g9,localize:_9,match:z9,options:{weekStartsOn:0,firstWeekContainsDate:1}};function q9(e,n){const t=at(e,n==null?void 0:n.in);return Sc(t,xp(t))+1}function y2(e,n){const t=at(e,n==null?void 0:n.in),r=+_c(t)-+JR(t);return Math.round(r/dC)+1}function w2(e,n){var w,b,_,E;const t=at(e,n==null?void 0:n.in),r=t.getFullYear(),a=No(),o=(n==null?void 0:n.firstWeekContainsDate)??((b=(w=n==null?void 0:n.locale)==null?void 0:w.options)==null?void 0:b.firstWeekContainsDate)??a.firstWeekContainsDate??((E=(_=a.locale)==null?void 0:_.options)==null?void 0:E.firstWeekContainsDate)??1,d=an((n==null?void 0:n.in)||e,0);d.setFullYear(r+1,0,o),d.setHours(0,0,0,0);const m=ji(d,n),v=an((n==null?void 0:n.in)||e,0);v.setFullYear(r,0,o),v.setHours(0,0,0,0);const g=ji(v,n);return+t>=+m?r+1:+t>=+g?r:r-1}function W9(e,n){var m,v,g,w;const t=No(),r=(n==null?void 0:n.firstWeekContainsDate)??((v=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??t.firstWeekContainsDate??((w=(g=t.locale)==null?void 0:g.options)==null?void 0:w.firstWeekContainsDate)??1,a=w2(e,n),o=an((n==null?void 0:n.in)||e,0);return o.setFullYear(a,0,r),o.setHours(0,0,0,0),ji(o,n)}function mC(e,n){const t=at(e,n==null?void 0:n.in),r=+ji(t,n)-+W9(t,n);return Math.round(r/dC)+1}function hn(e,n){const t=e<0?"-":"",r=Math.abs(e).toString().padStart(n,"0");return t+r}const Hi={y(e,n){const t=e.getFullYear(),r=t>0?t:1-t;return hn(n==="yy"?r%100:r,n.length)},M(e,n){const t=e.getMonth();return n==="M"?String(t+1):hn(t+1,2)},d(e,n){return hn(e.getDate(),n.length)},a(e,n){const t=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(e,n){return hn(e.getHours()%12||12,n.length)},H(e,n){return hn(e.getHours(),n.length)},m(e,n){return hn(e.getMinutes(),n.length)},s(e,n){return hn(e.getSeconds(),n.length)},S(e,n){const t=n.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,t-3));return hn(a,n.length)}},Wl={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_b={G:function(e,n,t){const r=e.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(e,n,t){if(n==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return t.ordinalNumber(a,{unit:"year"})}return Hi.y(e,n)},Y:function(e,n,t,r){const a=w2(e,r),o=a>0?a:1-a;if(n==="YY"){const d=o%100;return hn(d,2)}return n==="Yo"?t.ordinalNumber(o,{unit:"year"}):hn(o,n.length)},R:function(e,n){const t=hC(e);return hn(t,n.length)},u:function(e,n){const t=e.getFullYear();return hn(t,n.length)},Q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return hn(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return hn(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,n,t){const r=e.getMonth();switch(n){case"M":case"MM":return Hi.M(e,n);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(e,n,t){const r=e.getMonth();switch(n){case"L":return String(r+1);case"LL":return hn(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(e,n,t,r){const a=mC(e,r);return n==="wo"?t.ordinalNumber(a,{unit:"week"}):hn(a,n.length)},I:function(e,n,t){const r=y2(e);return n==="Io"?t.ordinalNumber(r,{unit:"week"}):hn(r,n.length)},d:function(e,n,t){return n==="do"?t.ordinalNumber(e.getDate(),{unit:"date"}):Hi.d(e,n)},D:function(e,n,t){const r=q9(e);return n==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):hn(r,n.length)},E:function(e,n,t){const r=e.getDay();switch(n){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(e,n,t,r){const a=e.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return hn(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(e,n,t,r){const a=e.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return hn(o,n.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(e,n,t){const r=e.getDay(),a=r===0?7:r;switch(n){case"i":return String(a);case"ii":return hn(a,n.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(e,n,t){const a=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,n,t){const r=e.getHours();let a;switch(r===12?a=Wl.noon:r===0?a=Wl.midnight:a=r/12>=1?"pm":"am",n){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,n,t){const r=e.getHours();let a;switch(r>=17?a=Wl.evening:r>=12?a=Wl.afternoon:r>=4?a=Wl.morning:a=Wl.night,n){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,n,t){if(n==="ho"){let r=e.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Hi.h(e,n)},H:function(e,n,t){return n==="Ho"?t.ordinalNumber(e.getHours(),{unit:"hour"}):Hi.H(e,n)},K:function(e,n,t){const r=e.getHours()%12;return n==="Ko"?t.ordinalNumber(r,{unit:"hour"}):hn(r,n.length)},k:function(e,n,t){let r=e.getHours();return r===0&&(r=24),n==="ko"?t.ordinalNumber(r,{unit:"hour"}):hn(r,n.length)},m:function(e,n,t){return n==="mo"?t.ordinalNumber(e.getMinutes(),{unit:"minute"}):Hi.m(e,n)},s:function(e,n,t){return n==="so"?t.ordinalNumber(e.getSeconds(),{unit:"second"}):Hi.s(e,n)},S:function(e,n){return Hi.S(e,n)},X:function(e,n,t){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(n){case"X":return Sb(r);case"XXXX":case"XX":return Qo(r);case"XXXXX":case"XXX":default:return Qo(r,":")}},x:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"x":return Sb(r);case"xxxx":case"xx":return Qo(r);case"xxxxx":case"xxx":default:return Qo(r,":")}},O:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Eb(r,":");case"OOOO":default:return"GMT"+Qo(r,":")}},z:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Eb(r,":");case"zzzz":default:return"GMT"+Qo(r,":")}},t:function(e,n,t){const r=Math.trunc(+e/1e3);return hn(r,n.length)},T:function(e,n,t){return hn(+e,n.length)}};function Eb(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),o=r%60;return o===0?t+String(a):t+String(a)+n+hn(o,2)}function Sb(e,n){return e%60===0?(e>0?"-":"+")+hn(Math.abs(e)/60,2):Qo(e,n)}function Qo(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),a=hn(Math.trunc(r/60),2),o=hn(r%60,2);return t+a+n+o}const kb=(e,n)=>{switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},xC=(e,n)=>{switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},H9=(e,n)=>{const t=e.match(/(P+)(p+)?/)||[],r=t[1],a=t[2];if(!a)return kb(e,n);let o;switch(r){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",kb(r,n)).replace("{{time}}",xC(a,n))},Px={p:xC,P:H9},V9=/^D+$/,$9=/^Y+$/,Y9=["D","DD","YY","YYYY"];function gC(e){return V9.test(e)}function vC(e){return $9.test(e)}function Fx(e,n,t){const r=Q9(e,n,t);if(console.warn(r),Y9.includes(e))throw new RangeError(r)}function Q9(e,n,t){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${n}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const G9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,X9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,K9=/^'([^]*?)'?$/,Z9=/''/g,J9=/[a-zA-Z]/;function bu(e,n,t){var w,b,_,E,T,I,k,S;const r=No(),a=(t==null?void 0:t.locale)??r.locale??v2,o=(t==null?void 0:t.firstWeekContainsDate)??((b=(w=t==null?void 0:t.locale)==null?void 0:w.options)==null?void 0:b.firstWeekContainsDate)??r.firstWeekContainsDate??((E=(_=r.locale)==null?void 0:_.options)==null?void 0:E.firstWeekContainsDate)??1,d=(t==null?void 0:t.weekStartsOn)??((I=(T=t==null?void 0:t.locale)==null?void 0:T.options)==null?void 0:I.weekStartsOn)??r.weekStartsOn??((S=(k=r.locale)==null?void 0:k.options)==null?void 0:S.weekStartsOn)??0,m=at(e,t==null?void 0:t.in);if(!gf(m))throw new RangeError("Invalid time value");let v=n.match(X9).map(A=>{const O=A[0];if(O==="p"||O==="P"){const P=Px[O];return P(A,a.formatLong)}return A}).join("").match(G9).map(A=>{if(A==="''")return{isToken:!1,value:"'"};const O=A[0];if(O==="'")return{isToken:!1,value:eO(A)};if(_b[O])return{isToken:!0,value:A};if(O.match(J9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+O+"`");return{isToken:!1,value:A}});a.localize.preprocessor&&(v=a.localize.preprocessor(m,v));const g={firstWeekContainsDate:o,weekStartsOn:d,locale:a};return v.map(A=>{if(!A.isToken)return A.value;const O=A.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&vC(O)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&gC(O))&&Fx(O,n,String(e));const P=_b[O[0]];return P(m,O,a.localize,g)}).join("")}function eO(e){const n=e.match(K9);return n?n[1].replace(Z9,"'"):e}function tO(e,n,t){const r=No(),a=(t==null?void 0:t.locale)??r.locale??v2,o=2520,d=Sh(e,n);if(isNaN(d))throw new RangeError("Invalid time value");const m=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:d}),[v,g]=va(t==null?void 0:t.in,...d>0?[n,e]:[e,n]),w=l9(g,v),b=(Ec(g)-Ec(v))/1e3,_=Math.round((w-b)/60);let E;if(_<2)return t!=null&&t.includeSeconds?w<5?a.formatDistance("lessThanXSeconds",5,m):w<10?a.formatDistance("lessThanXSeconds",10,m):w<20?a.formatDistance("lessThanXSeconds",20,m):w<40?a.formatDistance("halfAMinute",0,m):w<60?a.formatDistance("lessThanXMinutes",1,m):a.formatDistance("xMinutes",1,m):_===0?a.formatDistance("lessThanXMinutes",1,m):a.formatDistance("xMinutes",_,m);if(_<45)return a.formatDistance("xMinutes",_,m);if(_<90)return a.formatDistance("aboutXHours",1,m);if(_<wb){const T=Math.round(_/60);return a.formatDistance("aboutXHours",T,m)}else{if(_<o)return a.formatDistance("xDays",1,m);if(_<J0){const T=Math.round(_/wb);return a.formatDistance("xDays",T,m)}else if(_<J0*2)return E=Math.round(_/J0),a.formatDistance("aboutXMonths",E,m)}if(E=o9(g,v),E<12){const T=Math.round(_/J0);return a.formatDistance("xMonths",T,m)}else{const T=E%12,I=Math.trunc(E/12);return T<3?a.formatDistance("aboutXYears",I,m):T<9?a.formatDistance("overXYears",I,m):a.formatDistance("almostXYears",I+1,m)}}function nO(e,n){return tO(e,t9(e),n)}function Ab(e,n){return at(e,n==null?void 0:n.in).getDate()}function rO(e,n){return at(e,n==null?void 0:n.in).getDay()}function sO(e,n){const t=at(e,n==null?void 0:n.in),r=t.getFullYear(),a=t.getMonth(),o=an(t,0);return o.setFullYear(r,a+1,0),o.setHours(0,0,0,0),o.getDate()}function aO(){return Object.assign({},No())}function pi(e,n){return at(e,n==null?void 0:n.in).getHours()}function iO(e,n){const t=at(e,n==null?void 0:n.in).getDay();return t===0?7:t}function mi(e,n){return at(e,n==null?void 0:n.in).getMinutes()}function Pr(e,n){return at(e,n==null?void 0:n.in).getMonth()}function uo(e){return at(e).getSeconds()}function Bx(e){return+at(e)}function Lt(e,n){return at(e,n==null?void 0:n.in).getFullYear()}function xo(e,n){return+at(e)>+at(n)}function xl(e,n){return+at(e)<+at(n)}function oO(e,n){return+at(e)==+at(n)}function lO(e,n){const t=cO(n)?new n(0):an(n,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t}function cO(e){var n;return typeof e=="function"&&((n=e.prototype)==null?void 0:n.constructor)===e}const dO=10;class yC{constructor(){tt(this,"subPriority",0)}validate(n,t){return!0}}class uO extends yC{constructor(n,t,r,a,o){super(),this.value=n,this.validateValue=t,this.setValue=r,this.priority=a,o&&(this.subPriority=o)}validate(n,t){return this.validateValue(n,this.value,t)}set(n,t,r){return this.setValue(n,t,this.value,r)}}class hO extends yC{constructor(t,r){super();tt(this,"priority",dO);tt(this,"subPriority",-1);this.context=t||(a=>an(r,a))}set(t,r){return r.timestampIsSet?t:an(t,lO(t,this.context))}}class nn{run(n,t,r,a){const o=this.parse(n,t,r,a);return o?{setter:new uO(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(n,t,r){return!0}}class fO extends nn{constructor(){super(...arguments);tt(this,"priority",140);tt(this,"incompatibleTokens",["R","u","t","T"])}parse(t,r,a){switch(r){case"G":case"GG":case"GGG":return a.era(t,{width:"abbreviated"})||a.era(t,{width:"narrow"});case"GGGGG":return a.era(t,{width:"narrow"});case"GGGG":default:return a.era(t,{width:"wide"})||a.era(t,{width:"abbreviated"})||a.era(t,{width:"narrow"})}}set(t,r,a){return r.era=a,t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}}const Gn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ma={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Xn(e,n){return e&&{value:n(e.value),rest:e.rest}}function Mn(e,n){const t=n.match(e);return t?{value:parseInt(t[0],10),rest:n.slice(t[0].length)}:null}function Ra(e,n){const t=n.match(e);if(!t)return null;if(t[0]==="Z")return{value:0,rest:n.slice(1)};const r=t[1]==="+"?1:-1,a=t[2]?parseInt(t[2],10):0,o=t[3]?parseInt(t[3],10):0,d=t[5]?parseInt(t[5],10):0;return{value:r*(a*mp+o*pp+d*XR),rest:n.slice(t[0].length)}}function wC(e){return Mn(Gn.anyDigitsSigned,e)}function Hn(e,n){switch(e){case 1:return Mn(Gn.singleDigit,n);case 2:return Mn(Gn.twoDigits,n);case 3:return Mn(Gn.threeDigits,n);case 4:return Mn(Gn.fourDigits,n);default:return Mn(new RegExp("^\\d{1,"+e+"}"),n)}}function wf(e,n){switch(e){case 1:return Mn(Gn.singleDigitSigned,n);case 2:return Mn(Gn.twoDigitsSigned,n);case 3:return Mn(Gn.threeDigitsSigned,n);case 4:return Mn(Gn.fourDigitsSigned,n);default:return Mn(new RegExp("^-?\\d{1,"+e+"}"),n)}}function b2(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function bC(e,n){const t=n>0,r=t?n:1-n;let a;if(r<=50)a=e||100;else{const o=r+50,d=Math.trunc(o/100)*100,m=e>=o%100;a=e+d-(m?100:0)}return t?a:1-a}function NC(e){return e%400===0||e%4===0&&e%100!==0}class pO extends nn{constructor(){super(...arguments);tt(this,"priority",130);tt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,r,a){const o=d=>({year:d,isTwoDigitYear:r==="yy"});switch(r){case"y":return Xn(Hn(4,t),o);case"yo":return Xn(a.ordinalNumber(t,{unit:"year"}),o);default:return Xn(Hn(r.length,t),o)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,a){const o=t.getFullYear();if(a.isTwoDigitYear){const m=bC(a.year,o);return t.setFullYear(m,0,1),t.setHours(0,0,0,0),t}const d=!("era"in r)||r.era===1?a.year:1-a.year;return t.setFullYear(d,0,1),t.setHours(0,0,0,0),t}}class mO extends nn{constructor(){super(...arguments);tt(this,"priority",130);tt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,r,a){const o=d=>({year:d,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Xn(Hn(4,t),o);case"Yo":return Xn(a.ordinalNumber(t,{unit:"year"}),o);default:return Xn(Hn(r.length,t),o)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,a,o){const d=w2(t,o);if(a.isTwoDigitYear){const v=bC(a.year,d);return t.setFullYear(v,0,o.firstWeekContainsDate),t.setHours(0,0,0,0),ji(t,o)}const m=!("era"in r)||r.era===1?a.year:1-a.year;return t.setFullYear(m,0,o.firstWeekContainsDate),t.setHours(0,0,0,0),ji(t,o)}}class xO extends nn{constructor(){super(...arguments);tt(this,"priority",130);tt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,r){return wf(r==="R"?4:r.length,t)}set(t,r,a){const o=an(t,0);return o.setFullYear(a,0,4),o.setHours(0,0,0,0),_c(o)}}class gO extends nn{constructor(){super(...arguments);tt(this,"priority",130);tt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,r){return wf(r==="u"?4:r.length,t)}set(t,r,a){return t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}}class vO extends nn{constructor(){super(...arguments);tt(this,"priority",120);tt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,a){switch(r){case"Q":case"QQ":return Hn(r.length,t);case"Qo":return a.ordinalNumber(t,{unit:"quarter"});case"QQQ":return a.quarter(t,{width:"abbreviated",context:"formatting"})||a.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(t,{width:"wide",context:"formatting"})||a.quarter(t,{width:"abbreviated",context:"formatting"})||a.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,a){return t.setMonth((a-1)*3,1),t.setHours(0,0,0,0),t}}class yO extends nn{constructor(){super(...arguments);tt(this,"priority",120);tt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,a){switch(r){case"q":case"qq":return Hn(r.length,t);case"qo":return a.ordinalNumber(t,{unit:"quarter"});case"qqq":return a.quarter(t,{width:"abbreviated",context:"standalone"})||a.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(t,{width:"wide",context:"standalone"})||a.quarter(t,{width:"abbreviated",context:"standalone"})||a.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,a){return t.setMonth((a-1)*3,1),t.setHours(0,0,0,0),t}}class wO extends nn{constructor(){super(...arguments);tt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);tt(this,"priority",110)}parse(t,r,a){const o=d=>d-1;switch(r){case"M":return Xn(Mn(Gn.month,t),o);case"MM":return Xn(Hn(2,t),o);case"Mo":return Xn(a.ordinalNumber(t,{unit:"month"}),o);case"MMM":return a.month(t,{width:"abbreviated",context:"formatting"})||a.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(t,{width:"wide",context:"formatting"})||a.month(t,{width:"abbreviated",context:"formatting"})||a.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,a){return t.setMonth(a,1),t.setHours(0,0,0,0),t}}class bO extends nn{constructor(){super(...arguments);tt(this,"priority",110);tt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,r,a){const o=d=>d-1;switch(r){case"L":return Xn(Mn(Gn.month,t),o);case"LL":return Xn(Hn(2,t),o);case"Lo":return Xn(a.ordinalNumber(t,{unit:"month"}),o);case"LLL":return a.month(t,{width:"abbreviated",context:"standalone"})||a.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(t,{width:"wide",context:"standalone"})||a.month(t,{width:"abbreviated",context:"standalone"})||a.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,a){return t.setMonth(a,1),t.setHours(0,0,0,0),t}}function NO(e,n,t){const r=at(e,t==null?void 0:t.in),a=mC(r,t)-n;return r.setDate(r.getDate()-a*7),at(r,t==null?void 0:t.in)}class jO extends nn{constructor(){super(...arguments);tt(this,"priority",100);tt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,r,a){switch(r){case"w":return Mn(Gn.week,t);case"wo":return a.ordinalNumber(t,{unit:"week"});default:return Hn(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,a,o){return ji(NO(t,a,o),o)}}function CO(e,n,t){const r=at(e,t==null?void 0:t.in),a=y2(r,t)-n;return r.setDate(r.getDate()-a*7),r}class _O extends nn{constructor(){super(...arguments);tt(this,"priority",100);tt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,r,a){switch(r){case"I":return Mn(Gn.week,t);case"Io":return a.ordinalNumber(t,{unit:"week"});default:return Hn(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,a){return _c(CO(t,a))}}const EO=[31,28,31,30,31,30,31,31,30,31,30,31],SO=[31,29,31,30,31,30,31,31,30,31,30,31];class kO extends nn{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"subPriority",1);tt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,r,a){switch(r){case"d":return Mn(Gn.date,t);case"do":return a.ordinalNumber(t,{unit:"date"});default:return Hn(r.length,t)}}validate(t,r){const a=t.getFullYear(),o=NC(a),d=t.getMonth();return o?r>=1&&r<=SO[d]:r>=1&&r<=EO[d]}set(t,r,a){return t.setDate(a),t.setHours(0,0,0,0),t}}class AO extends nn{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"subpriority",1);tt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,r,a){switch(r){case"D":case"DD":return Mn(Gn.dayOfYear,t);case"Do":return a.ordinalNumber(t,{unit:"date"});default:return Hn(r.length,t)}}validate(t,r){const a=t.getFullYear();return NC(a)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,a){return t.setMonth(0,a),t.setHours(0,0,0,0),t}}function N2(e,n,t){var b,_,E,T;const r=No(),a=(t==null?void 0:t.weekStartsOn)??((_=(b=t==null?void 0:t.locale)==null?void 0:b.options)==null?void 0:_.weekStartsOn)??r.weekStartsOn??((T=(E=r.locale)==null?void 0:E.options)==null?void 0:T.weekStartsOn)??0,o=at(e,t==null?void 0:t.in),d=o.getDay(),v=(n%7+7)%7,g=7-a,w=n<0||n>6?n-(d+g)%7:(v+g)%7-(d+g)%7;return pa(o,w,t)}class TO extends nn{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,r,a){switch(r){case"E":case"EE":case"EEE":return a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(t,{width:"wide",context:"formatting"})||a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,a,o){return t=N2(t,a,o),t.setHours(0,0,0,0),t}}class DO extends nn{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,r,a,o){const d=m=>{const v=Math.floor((m-1)/7)*7;return(m+o.weekStartsOn+6)%7+v};switch(r){case"e":case"ee":return Xn(Hn(r.length,t),d);case"eo":return Xn(a.ordinalNumber(t,{unit:"day"}),d);case"eee":return a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"});case"eeeee":return a.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(t,{width:"wide",context:"formatting"})||a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,a,o){return t=N2(t,a,o),t.setHours(0,0,0,0),t}}class IO extends nn{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,r,a,o){const d=m=>{const v=Math.floor((m-1)/7)*7;return(m+o.weekStartsOn+6)%7+v};switch(r){case"c":case"cc":return Xn(Hn(r.length,t),d);case"co":return Xn(a.ordinalNumber(t,{unit:"day"}),d);case"ccc":return a.day(t,{width:"abbreviated",context:"standalone"})||a.day(t,{width:"short",context:"standalone"})||a.day(t,{width:"narrow",context:"standalone"});case"ccccc":return a.day(t,{width:"narrow",context:"standalone"});case"cccccc":return a.day(t,{width:"short",context:"standalone"})||a.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(t,{width:"wide",context:"standalone"})||a.day(t,{width:"abbreviated",context:"standalone"})||a.day(t,{width:"short",context:"standalone"})||a.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,a,o){return t=N2(t,a,o),t.setHours(0,0,0,0),t}}function MO(e,n,t){const r=at(e,t==null?void 0:t.in),a=iO(r,t),o=n-a;return pa(r,o,t)}class RO extends nn{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,r,a){const o=d=>d===0?7:d;switch(r){case"i":case"ii":return Hn(r.length,t);case"io":return a.ordinalNumber(t,{unit:"day"});case"iii":return Xn(a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"}),o);case"iiiii":return Xn(a.day(t,{width:"narrow",context:"formatting"}),o);case"iiiiii":return Xn(a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"}),o);case"iiii":default:return Xn(a.day(t,{width:"wide",context:"formatting"})||a.day(t,{width:"abbreviated",context:"formatting"})||a.day(t,{width:"short",context:"formatting"})||a.day(t,{width:"narrow",context:"formatting"}),o)}}validate(t,r){return r>=1&&r<=7}set(t,r,a){return t=MO(t,a),t.setHours(0,0,0,0),t}}class OO extends nn{constructor(){super(...arguments);tt(this,"priority",80);tt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,r,a){switch(r){case"a":case"aa":case"aaa":return a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(t,{width:"wide",context:"formatting"})||a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,a){return t.setHours(b2(a),0,0,0),t}}class LO extends nn{constructor(){super(...arguments);tt(this,"priority",80);tt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,r,a){switch(r){case"b":case"bb":case"bbb":return a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(t,{width:"wide",context:"formatting"})||a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,a){return t.setHours(b2(a),0,0,0),t}}class PO extends nn{constructor(){super(...arguments);tt(this,"priority",80);tt(this,"incompatibleTokens",["a","b","t","T"])}parse(t,r,a){switch(r){case"B":case"BB":case"BBB":return a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(t,{width:"wide",context:"formatting"})||a.dayPeriod(t,{width:"abbreviated",context:"formatting"})||a.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,a){return t.setHours(b2(a),0,0,0),t}}class FO extends nn{constructor(){super(...arguments);tt(this,"priority",70);tt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,r,a){switch(r){case"h":return Mn(Gn.hour12h,t);case"ho":return a.ordinalNumber(t,{unit:"hour"});default:return Hn(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,a){const o=t.getHours()>=12;return o&&a<12?t.setHours(a+12,0,0,0):!o&&a===12?t.setHours(0,0,0,0):t.setHours(a,0,0,0),t}}class BO extends nn{constructor(){super(...arguments);tt(this,"priority",70);tt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,r,a){switch(r){case"H":return Mn(Gn.hour23h,t);case"Ho":return a.ordinalNumber(t,{unit:"hour"});default:return Hn(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,a){return t.setHours(a,0,0,0),t}}class UO extends nn{constructor(){super(...arguments);tt(this,"priority",70);tt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,r,a){switch(r){case"K":return Mn(Gn.hour11h,t);case"Ko":return a.ordinalNumber(t,{unit:"hour"});default:return Hn(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,a){return t.getHours()>=12&&a<12?t.setHours(a+12,0,0,0):t.setHours(a,0,0,0),t}}class zO extends nn{constructor(){super(...arguments);tt(this,"priority",70);tt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,r,a){switch(r){case"k":return Mn(Gn.hour24h,t);case"ko":return a.ordinalNumber(t,{unit:"hour"});default:return Hn(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,a){const o=a<=24?a%24:a;return t.setHours(o,0,0,0),t}}class qO extends nn{constructor(){super(...arguments);tt(this,"priority",60);tt(this,"incompatibleTokens",["t","T"])}parse(t,r,a){switch(r){case"m":return Mn(Gn.minute,t);case"mo":return a.ordinalNumber(t,{unit:"minute"});default:return Hn(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,a){return t.setMinutes(a,0,0),t}}class WO extends nn{constructor(){super(...arguments);tt(this,"priority",50);tt(this,"incompatibleTokens",["t","T"])}parse(t,r,a){switch(r){case"s":return Mn(Gn.second,t);case"so":return a.ordinalNumber(t,{unit:"second"});default:return Hn(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,a){return t.setSeconds(a,0),t}}class HO extends nn{constructor(){super(...arguments);tt(this,"priority",30);tt(this,"incompatibleTokens",["t","T"])}parse(t,r){const a=o=>Math.trunc(o*Math.pow(10,-r.length+3));return Xn(Hn(r.length,t),a)}set(t,r,a){return t.setMilliseconds(a),t}}class VO extends nn{constructor(){super(...arguments);tt(this,"priority",10);tt(this,"incompatibleTokens",["t","T","x"])}parse(t,r){switch(r){case"X":return Ra(Ma.basicOptionalMinutes,t);case"XX":return Ra(Ma.basic,t);case"XXXX":return Ra(Ma.basicOptionalSeconds,t);case"XXXXX":return Ra(Ma.extendedOptionalSeconds,t);case"XXX":default:return Ra(Ma.extended,t)}}set(t,r,a){return r.timestampIsSet?t:an(t,t.getTime()-Ec(t)-a)}}class $O extends nn{constructor(){super(...arguments);tt(this,"priority",10);tt(this,"incompatibleTokens",["t","T","X"])}parse(t,r){switch(r){case"x":return Ra(Ma.basicOptionalMinutes,t);case"xx":return Ra(Ma.basic,t);case"xxxx":return Ra(Ma.basicOptionalSeconds,t);case"xxxxx":return Ra(Ma.extendedOptionalSeconds,t);case"xxx":default:return Ra(Ma.extended,t)}}set(t,r,a){return r.timestampIsSet?t:an(t,t.getTime()-Ec(t)-a)}}class YO extends nn{constructor(){super(...arguments);tt(this,"priority",40);tt(this,"incompatibleTokens","*")}parse(t){return wC(t)}set(t,r,a){return[an(t,a*1e3),{timestampIsSet:!0}]}}class QO extends nn{constructor(){super(...arguments);tt(this,"priority",20);tt(this,"incompatibleTokens","*")}parse(t){return wC(t)}set(t,r,a){return[an(t,a),{timestampIsSet:!0}]}}const GO={G:new fO,y:new pO,Y:new mO,R:new xO,u:new gO,Q:new vO,q:new yO,M:new wO,L:new bO,w:new jO,I:new _O,d:new kO,D:new AO,E:new TO,e:new DO,c:new IO,i:new RO,a:new OO,b:new LO,B:new PO,h:new FO,H:new BO,K:new UO,k:new zO,m:new qO,s:new WO,S:new HO,X:new VO,x:new $O,t:new YO,T:new QO},XO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,KO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ZO=/^'([^]*?)'?$/,JO=/''/g,eL=/\S/,tL=/[a-zA-Z]/;function nL(e,n,t,r){var k,S,A,O,P,$,L,F;const a=()=>an((r==null?void 0:r.in)||t,NaN),o=aO(),d=(r==null?void 0:r.locale)??o.locale??v2,m=(r==null?void 0:r.firstWeekContainsDate)??((S=(k=r==null?void 0:r.locale)==null?void 0:k.options)==null?void 0:S.firstWeekContainsDate)??o.firstWeekContainsDate??((O=(A=o.locale)==null?void 0:A.options)==null?void 0:O.firstWeekContainsDate)??1,v=(r==null?void 0:r.weekStartsOn)??(($=(P=r==null?void 0:r.locale)==null?void 0:P.options)==null?void 0:$.weekStartsOn)??o.weekStartsOn??((F=(L=o.locale)==null?void 0:L.options)==null?void 0:F.weekStartsOn)??0;if(!n)return e?a():at(t,r==null?void 0:r.in);const g={firstWeekContainsDate:m,weekStartsOn:v,locale:d},w=[new hO(r==null?void 0:r.in,t)],b=n.match(KO).map(W=>{const V=W[0];if(V in Px){const re=Px[V];return re(W,d.formatLong)}return W}).join("").match(XO),_=[];for(let W of b){!(r!=null&&r.useAdditionalWeekYearTokens)&&vC(W)&&Fx(W,n,e),!(r!=null&&r.useAdditionalDayOfYearTokens)&&gC(W)&&Fx(W,n,e);const V=W[0],re=GO[V];if(re){const{incompatibleTokens:oe}=re;if(Array.isArray(oe)){const he=_.find(ve=>oe.includes(ve.token)||ve.token===V);if(he)throw new RangeError(`The format string mustn't contain \`${he.fullToken}\` and \`${W}\` at the same time`)}else if(re.incompatibleTokens==="*"&&_.length>0)throw new RangeError(`The format string mustn't contain \`${W}\` and any other token at the same time`);_.push({token:V,fullToken:W});const ee=re.run(e,W,d.match,g);if(!ee)return a();w.push(ee.setter),e=ee.rest}else{if(V.match(tL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+V+"`");if(W==="''"?W="'":V==="'"&&(W=rL(W)),e.indexOf(W)===0)e=e.slice(W.length);else return a()}}if(e.length>0&&eL.test(e))return a();const E=w.map(W=>W.priority).sort((W,V)=>V-W).filter((W,V,re)=>re.indexOf(W)===V).map(W=>w.filter(V=>V.priority===W).sort((V,re)=>re.subPriority-V.subPriority)).map(W=>W[0]);let T=at(t,r==null?void 0:r.in);if(isNaN(+T))return a();const I={};for(const W of E){if(!W.validate(T,g))return a();const V=W.set(T,I,g);Array.isArray(V)?(T=V[0],Object.assign(I,V[1])):T=V}return T}function rL(e){return e.match(ZO)[1].replace(JO,"'")}function sL(e,n,t){const[r,a]=va(t==null?void 0:t.in,e,n);return r.getFullYear()===a.getFullYear()&&r.getMonth()===a.getMonth()}function aL(e,n,t){const[r,a]=va(t==null?void 0:t.in,e,n);return+Lx(r)==+Lx(a)}function iL(e,n,t){const[r,a]=va(t==null?void 0:t.in,e,n);return r.getFullYear()===a.getFullYear()}function Nu(e,n,t){const r=+at(e,t==null?void 0:t.in),[a,o]=[+at(n.start,t==null?void 0:t.in),+at(n.end,t==null?void 0:t.in)].sort((d,m)=>d-m);return r>=a&&r<=o}function oL(e,n,t){return pa(e,-n,t)}function lL(e,n){const t=()=>an(n==null?void 0:n.in,NaN),r=(n==null?void 0:n.additionalDigits)??2,a=hL(e);let o;if(a.date){const g=fL(a.date,r);o=pL(g.restDateString,g.year)}if(!o||isNaN(+o))return t();const d=+o;let m=0,v;if(a.time&&(m=mL(a.time),isNaN(m)))return t();if(a.timezone){if(v=xL(a.timezone),isNaN(v))return t()}else{const g=new Date(d+m),w=at(0,n==null?void 0:n.in);return w.setFullYear(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()),w.setHours(g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()),w}return at(d+m+v,n==null?void 0:n.in)}const eh={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},cL=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,dL=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,uL=/^([+-])(\d{2})(?::?(\d{2}))?$/;function hL(e){const n={},t=e.split(eh.dateTimeDelimiter);let r;if(t.length>2)return n;if(/:/.test(t[0])?r=t[0]:(n.date=t[0],r=t[1],eh.timeZoneDelimiter.test(n.date)&&(n.date=e.split(eh.timeZoneDelimiter)[0],r=e.substr(n.date.length,e.length))),r){const a=eh.timezone.exec(r);a?(n.time=r.replace(a[1],""),n.timezone=a[1]):n.time=r}return n}function fL(e,n){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+n)+"})|(\\d{2}|[+-]\\d{"+(2+n)+"})$)"),r=e.match(t);if(!r)return{year:NaN,restDateString:""};const a=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?a:o*100,restDateString:e.slice((r[1]||r[2]).length)}}function pL(e,n){if(n===null)return new Date(NaN);const t=e.match(cL);if(!t)return new Date(NaN);const r=!!t[4],a=Rd(t[1]),o=Rd(t[2])-1,d=Rd(t[3]),m=Rd(t[4]),v=Rd(t[5])-1;if(r)return bL(n,m,v)?gL(n,m,v):new Date(NaN);{const g=new Date(0);return!yL(n,o,d)||!wL(n,a)?new Date(NaN):(g.setUTCFullYear(n,o,Math.max(a,d)),g)}}function Rd(e){return e?parseInt(e):1}function mL(e){const n=e.match(dL);if(!n)return NaN;const t=o1(n[1]),r=o1(n[2]),a=o1(n[3]);return NL(t,r,a)?t*mp+r*pp+a*1e3:NaN}function o1(e){return e&&parseFloat(e.replace(",","."))||0}function xL(e){if(e==="Z")return 0;const n=e.match(uL);if(!n)return 0;const t=n[1]==="+"?-1:1,r=parseInt(n[2]),a=n[3]&&parseInt(n[3])||0;return jL(r,a)?t*(r*mp+a*pp):NaN}function gL(e,n,t){const r=new Date(0);r.setUTCFullYear(e,0,4);const a=r.getUTCDay()||7,o=(n-1)*7+t+1-a;return r.setUTCDate(r.getUTCDate()+o),r}const vL=[31,null,31,30,31,30,31,31,30,31,30,31];function jC(e){return e%400===0||e%4===0&&e%100!==0}function yL(e,n,t){return n>=0&&n<=11&&t>=1&&t<=(vL[n]||(jC(e)?29:28))}function wL(e,n){return n>=1&&n<=(jC(e)?366:365)}function bL(e,n,t){return n>=1&&n<=53&&t>=0&&t<=6}function NL(e,n,t){return e===24?n===0&&t===0:t>=0&&t<60&&n>=0&&n<60&&e>=0&&e<25}function jL(e,n){return n>=0&&n<=59}function Hs(e,n,t){const r=at(e,t==null?void 0:t.in),a=r.getFullYear(),o=r.getDate(),d=an((t==null?void 0:t.in)||e,0);d.setFullYear(a,n,15),d.setHours(0,0,0,0);const m=sO(d);return r.setMonth(n,Math.min(o,m)),r}function kh(e,n,t){const r=at(e,t==null?void 0:t.in);return r.setHours(n),r}function Ah(e,n,t){const r=at(e,t==null?void 0:t.in);return r.setMinutes(n),r}function Vl(e,n,t){const r=at(e,t==null?void 0:t.in),a=Math.trunc(r.getMonth()/3)+1,o=n-a;return Hs(r,r.getMonth()+o*3)}function Th(e,n,t){const r=at(e,t==null?void 0:t.in);return r.setSeconds(n),r}function Aa(e,n,t){const r=at(e,t==null?void 0:t.in);return isNaN(+r)?an((t==null?void 0:t.in)||e,NaN):(r.setFullYear(n),r)}function il(e,n,t){return xa(e,-n,t)}function CC(e,n,t){return m2(e,-n,t)}function Tb(e,n,t){return xf(e,-n,t)}function kc(e,n,t){return hi(e,-n,t)}const CL=()=>{const[e,n]=M.useState(!1),t=M.useRef(null),{notifications:r,unreadCount:a,markAsRead:o,markAllAsRead:d,clearNotifications:m}=LR();M.useEffect(()=>{const b=_=>{t.current&&!t.current.contains(_.target)&&n(!1)};return document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[]);const v=()=>{n(!e)},g=b=>{o(b.id),n(!1)},w=b=>{switch(b){case"warning":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"info":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})});case"success":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});default:return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})})}};return s.jsxs("div",{className:"relative",ref:t,children:[s.jsxs("button",{className:"relative p-2 text-gray-600 hover:text-gray-800 focus:outline-none",onClick:v,"aria-label":`Notifications ${a>0?`(${a} unread)`:""}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),a>0&&s.jsx("span",{className:"absolute top-1 right-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:a})]}),e&&s.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-md shadow-lg overflow-hidden z-50",children:s.jsxs("div",{className:"py-2",children:[s.jsxs("div",{className:"px-4 py-2 bg-gray-100 flex justify-between items-center",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Notifications"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:d,className:"text-xs text-blue-600 hover:text-blue-800",children:"Mark all as read"}),s.jsx("button",{onClick:m,className:"text-xs text-red-600 hover:text-red-800",children:"Clear all"})]})]}),s.jsx("div",{className:"max-h-60 overflow-y-auto",children:r.length===0?s.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No notifications"}):r.map(b=>s.jsx("div",{className:`px-4 py-3 border-b border-gray-100 ${b.read?"":"bg-blue-50"}`,onClick:()=>g(b),children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:w(b.type)}),s.jsxs("div",{className:"ml-3 w-0 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:b.title}),s.jsx("p",{className:"text-sm text-gray-600",children:b.message}),b.typeId&&s.jsx(qn,{to:`/equipment?type=${b.typeId}`,className:"text-xs text-blue-600 hover:text-blue-800 mt-1 inline-block",onClick:_=>_.stopPropagation(),children:"View equipment"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:nO(new Date(b.timestamp),{addSuffix:!0})})]})]})},b.id))})]})})]})},_C=({toggleSidebar:e})=>{const{user:n,logout:t,isImpersonating:r}=dr(),a=us(),o=()=>{t(),a("/login")};return s.jsx("nav",{className:"bg-white text-slate-800 shadow-soft sticky top-0 z-30 border-b border-slate-200 h-16",children:s.jsx("div",{className:"container-app py-0",children:s.jsxs("div",{className:"flex justify-between h-16",children:[s.jsx("div",{className:"flex items-center",children:s.jsxs(qn,{to:"/",className:"flex-shrink-0 flex items-center gap-2",children:[s.jsx("img",{src:"/bird-logo.svg",alt:"Theater Equipment Logo",className:"w-8 h-8"}),s.jsx("span",{className:"text-xl font-bold text-slate-800",children:"Ton Equipment Inventory Manager"})]})}),n?s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"flex items-center gap-3",children:[n.role==="admin"&&s.jsx(CL,{}),s.jsxs("div",{className:"px-3 py-1 rounded-full bg-slate-100 text-slate-700 text-sm flex items-center",children:[s.jsx("span",{className:"font-medium",children:n.username}),s.jsx("span",{className:"ml-1 text-xs px-1.5 py-0.5 bg-primary-100 text-primary-700 rounded-full",children:n.role}),r()&&s.jsx("span",{className:"ml-1 text-xs bg-yellow-100 text-yellow-700 px-1.5 py-0.5 rounded-full border border-yellow-200",children:"Impersonating"})]}),s.jsxs("button",{onClick:o,className:"nav-link text-slate-600 hover:text-red-600","aria-label":"Logout",children:[s.jsx(gb,{}),s.jsx("span",{className:"hidden md:inline",children:r()?"End Impersonation":"Logout"})]})]})}):s.jsx("div",{className:"flex items-center",children:s.jsxs(qn,{to:"/login",className:"btn btn-primary",children:[s.jsx(gb,{className:"rotate-180"}),s.jsx("span",{children:"Login"})]})})]})})})},_L=({className:e})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:s.jsx("polyline",{points:"9 18 15 12 9 6"})}),EC=({isOpen:e,isCollapsed:n,toggleSidebar:t,toggleCollapse:r})=>{const{isAdmin:a,isAdvanced:o}=dr(),d=Bc();M.useEffect(()=>{const v=()=>{window.innerWidth<768&&e&&t(!1)};return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[e,t]);const m=v=>d.pathname===v;return s.jsxs(s.Fragment,{children:[e&&s.jsx("div",{className:"sidebar-overlay",onClick:()=>t(!1),style:{opacity:e?1:0}}),s.jsxs("aside",{className:`sidebar ${e?"":"sidebar-hidden"} ${n?"sidebar-collapsed":"sidebar-expanded"}`,children:[s.jsxs("div",{className:"flex justify-between items-center px-4 py-2",children:[!n&&s.jsx("span",{className:"text-lg font-semibold text-slate-800",children:"Navigation"}),s.jsxs("div",{className:"flex",children:[s.jsx("button",{onClick:()=>r(!n),className:"sidebar-collapse-btn","aria-label":n?"Expand sidebar":"Collapse sidebar",children:n?s.jsx(_L,{className:"w-4 h-4"}):s.jsx(oC,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>t(!e),className:"sidebar-toggle-btn md:hidden","aria-label":e?"Hide sidebar":"Show sidebar",children:s.jsx(zR,{className:"w-4 h-4"})})]})]}),s.jsxs("nav",{className:"sidebar-nav",children:[s.jsxs(qn,{to:"/dashboard",className:`sidebar-nav-item ${m("/dashboard")?"sidebar-nav-item-active":""}`,onClick:()=>window.innerWidth<768&&t(!1),title:"Dashboard",children:[s.jsx(PR,{className:"sidebar-nav-icon"}),s.jsx("span",{className:`sidebar-nav-text ${n?"hidden":"block"}`,children:"Dashboard"})]}),s.jsxs(qn,{to:"/equipment",className:`sidebar-nav-item ${m("/equipment")?"sidebar-nav-item-active":""}`,onClick:()=>window.innerWidth<768&&t(!1),title:"Equipment",children:[s.jsx(FR,{className:"sidebar-nav-icon"}),s.jsx("span",{className:`sidebar-nav-text ${n?"hidden":"block"}`,children:"Equipment"})]}),s.jsxs(qn,{to:"/show-list",className:`sidebar-nav-item ${m("/show-list")?"sidebar-nav-item-active":""}`,onClick:()=>window.innerWidth<768&&t(!1),title:"Production Lists",children:[s.jsx(Mx,{className:"sidebar-nav-icon"}),s.jsx("span",{className:`sidebar-nav-text ${n?"hidden":"block"}`,children:"Production Lists"})]}),(a()||o())&&s.jsxs(qn,{to:"/equipment/new",className:`sidebar-nav-item ${m("/equipment/new")?"sidebar-nav-item-active":""}`,onClick:()=>window.innerWidth<768&&t(!1),title:"Add Equipment",children:[s.jsx(fp,{className:"sidebar-nav-icon"}),s.jsx("span",{className:`sidebar-nav-text ${n?"hidden":"block"}`,children:"Add Equipment"})]}),a()&&s.jsxs(qn,{to:"/equipment-logs",className:`sidebar-nav-item ${m("/equipment-logs")?"sidebar-nav-item-active":""}`,onClick:()=>window.innerWidth<768&&t(!1),title:"Equipment Logs",children:[s.jsx(WR,{className:"sidebar-nav-icon"}),s.jsx("span",{className:`sidebar-nav-text ${n?"hidden":"block"}`,children:"Equipment Logs"})]}),a()&&s.jsxs(qn,{to:"/admin",className:`sidebar-nav-item ${m("/admin")?"sidebar-nav-item-active":""}`,onClick:()=>window.innerWidth<768&&t(!1),title:"Admin",children:[s.jsx(BR,{className:"sidebar-nav-icon"}),s.jsx("span",{className:`sidebar-nav-text ${n?"hidden":"block"}`,children:"Admin"})]}),s.jsxs(qn,{to:"/settings",className:`sidebar-nav-item ${m("/settings")?"sidebar-nav-item-active":""}`,onClick:()=>window.innerWidth<768&&t(!1),title:"Settings",children:[s.jsx(UR,{className:"sidebar-nav-icon"}),s.jsx("span",{className:`sidebar-nav-text ${n?"hidden":"block"}`,children:"Settings"})]})]})]})]})},SC=()=>{const{user:e,isImpersonating:n,logout:t}=dr();return n()?s.jsx("div",{className:"bg-yellow-500 text-white py-2",children:s.jsxs("div",{className:"container-app py-0 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold",children:"Impersonation Mode:"})," You are currently viewing the application as ",e.username," (",e.role,")"]}),s.jsx("button",{onClick:t,className:"bg-white text-yellow-700 px-3 py-1 rounded-md text-sm font-medium hover:bg-yellow-100",children:"End Impersonation"})]})}):null},xi=({id:e,label:n,value:t,onChange:r,placeholder:a,required:o=!1,error:d="",className:m="",...v})=>{const[g,w]=M.useState(!1),b=()=>{w(!g)};return s.jsxs("div",{className:`space-y-1 ${m}`,children:[n&&s.jsxs("label",{htmlFor:e,className:"block text-sm font-medium text-slate-700",children:[n,o&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:g?"text":"password",id:e,value:t,onChange:r,placeholder:a,required:o,className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${d?"border-red-500 focus:ring-red-500":"border-slate-300 focus:border-blue-500"}`,...v}),s.jsx("button",{type:"button",onClick:b,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600",tabIndex:-1,children:g?s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[s.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z",clipRule:"evenodd"}),s.jsx("path",{d:"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"})]}):s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[s.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),s.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]})})]}),d&&s.jsx("p",{className:"text-sm text-red-600",children:d})]})},EL=()=>{const[e,n]=M.useState(""),[t,r]=M.useState(""),[a,o]=M.useState(""),[d,m]=M.useState(!1),{login:v}=dr(),g=us(),w=async b=>{var _,E;if(b.preventDefault(),!e||!t){o("Username and password are required");return}try{m(!0),o(""),await v(e,t),g("/dashboard")}catch(T){o(((E=(_=T.response)==null?void 0:_.data)==null?void 0:E.message)||"Login failed")}finally{m(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Theater Equipment Catalog"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to your account"})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:w,children:[a&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:s.jsx("p",{className:"text-red-700",children:a})}),s.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),s.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Username",value:e,onChange:b=>n(b.target.value)})]}),s.jsx("div",{children:s.jsx(xi,{id:"password",value:t,onChange:b=>r(b.target.value),placeholder:"Password",required:!0,className:"rounded-b-md"})})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:d,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 ${d?"opacity-70 cursor-not-allowed":""}`,children:d?"Signing in...":"Sign in"})}),s.jsx("div",{className:"text-sm text-center",children:s.jsx("p",{className:"text-gray-600",children:"Insert the credentials the admin provided to you"})})]})]})})},Vc=async()=>{try{return{categories:(await ze.get("/api/categories")).data}}catch(e){return console.error("Error fetching categories:",e),{categories:[]}}},SL=async(e,n="")=>(await ze.post("/api/categories",{name:e,description:n})).data,kL=async(e,n,t="")=>(await ze.put(`/api/categories/${e}`,{name:n,description:t})).data,AL=async e=>(await ze.delete(`/api/categories/${e}`)).data,kC=async()=>{try{return{searches:(await ze.get("/api/saved-searches")).data||[]}}catch(e){return console.error("Error fetching saved searches:",e),{searches:[]}}},AC=async e=>{try{return(await ze.post("/api/saved-searches",e)).data}catch(n){throw console.error("Error saving search:",n),n}},TC=async e=>{try{return(await ze.delete(`/api/saved-searches/${e}`)).data}catch(n){throw console.error("Error deleting saved search:",n),n}},ke=({children:e,variant:n="primary",size:t="md",type:r="button",fullWidth:a=!1,disabled:o=!1,onClick:d,className:m="",as:v="button",...g})=>{const w="inline-flex items-center justify-center font-medium transition-all duration-200 rounded-md focus:outline-none focus:ring-1 focus:ring-offset-1",b={primary:"bg-white text-primary-600 hover:bg-primary-50 focus:ring-primary-500 border border-primary-500 hover:border-primary-600 hover:shadow-sm transition-all",secondary:"bg-white text-slate-600 hover:bg-slate-50 focus:ring-slate-500 border border-slate-300 hover:border-slate-400 hover:shadow-sm transition-all",outline:"bg-white hover:bg-slate-50 text-slate-700 focus:ring-primary-500 border border-slate-300 hover:border-slate-400 hover:shadow-sm transition-all",danger:"bg-white text-red-600 hover:bg-red-50 focus:ring-red-500 border border-red-500 hover:border-red-600 hover:shadow-sm transition-all",success:"bg-white text-green-600 hover:bg-green-50 focus:ring-green-500 border border-green-500 hover:border-green-600 hover:shadow-sm transition-all",ghost:"bg-transparent hover:bg-slate-100 text-slate-700 focus:ring-slate-500 border border-transparent hover:shadow-sm transition-all"},_={sm:"px-2 py-1 text-xs",md:"px-3 py-1.5 text-sm",lg:"px-4 py-2 text-sm"},E=o?"opacity-60 cursor-not-allowed":"cursor-pointer",T=a?"w-full":"",I=`
    ${w}
    ${b[n]||b.primary}
    ${_[t]||_.md}
    ${E}
    ${T}
    ${m}
  `,k=v==="button"?{type:r,...g}:g;return s.jsx(v,{className:I,disabled:o,onClick:d,...k,children:e})};ke.propTypes={children:ce.node.isRequired,variant:ce.oneOf(["primary","secondary","outline","danger","success","ghost"]),size:ce.oneOf(["sm","md","lg"]),type:ce.oneOf(["button","submit","reset"]),fullWidth:ce.bool,disabled:ce.bool,onClick:ce.func,className:ce.string,as:ce.elementType};const xt=({id:e,name:n,type:t="text",label:r,placeholder:a,value:o,onChange:d,onBlur:m,error:v,helpText:g,icon:w,disabled:b=!1,required:_=!1,className:E="",...T})=>{const{helpText:I,...k}={helpText:g,...T},$=`
    w-full rounded-md shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500
    ${v?"border-red-300 text-red-900 placeholder-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-300 text-slate-900 placeholder-slate-400"}
    ${b?"bg-slate-100 cursor-not-allowed opacity-75":"bg-white"}
    ${w?"pl-10":"pl-3"}
    py-2 pr-3 text-sm
    ${E}
  `;return s.jsxs("div",{className:"w-full",children:[r&&s.jsxs("label",{htmlFor:e,className:`block text-sm font-medium mb-1 ${v?"text-red-600":"text-slate-700"}`,children:[r,_&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"relative",children:[w&&s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-500",children:w}),s.jsx("input",{id:e,name:n,type:t,value:o,onChange:d,onBlur:m,placeholder:a,disabled:b,required:_,className:$,...k})]}),v&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:v}),g&&!v&&s.jsx("p",{className:"mt-1 text-sm text-slate-500",children:g})]})};xt.propTypes={id:ce.string.isRequired,name:ce.string.isRequired,type:ce.string,label:ce.string,placeholder:ce.string,value:ce.oneOfType([ce.string,ce.number]),onChange:ce.func,onBlur:ce.func,error:ce.string,helpText:ce.string,icon:ce.node,disabled:ce.bool,required:ce.bool,className:ce.string};var rt;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(rt||(rt={}));var Db=new Map([[rt.QR_CODE,"QR_CODE"],[rt.AZTEC,"AZTEC"],[rt.CODABAR,"CODABAR"],[rt.CODE_39,"CODE_39"],[rt.CODE_93,"CODE_93"],[rt.CODE_128,"CODE_128"],[rt.DATA_MATRIX,"DATA_MATRIX"],[rt.MAXICODE,"MAXICODE"],[rt.ITF,"ITF"],[rt.EAN_13,"EAN_13"],[rt.EAN_8,"EAN_8"],[rt.PDF_417,"PDF_417"],[rt.RSS_14,"RSS_14"],[rt.RSS_EXPANDED,"RSS_EXPANDED"],[rt.UPC_A,"UPC_A"],[rt.UPC_E,"UPC_E"],[rt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Ib;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(Ib||(Ib={}));function TL(e){return Object.values(rt).includes(e)}var bf;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(bf||(bf={}));var DL=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[bf.SCAN_TYPE_CAMERA,bf.SCAN_TYPE_FILE],e}(),DC=function(){function e(n,t){this.format=n,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(n){if(!Db.has(n))throw"".concat(n," not in html5QrcodeSupportedFormatsTextMap");return new e(n,Db.get(n))},e}(),Mb=function(){function e(){}return e.createFromText=function(n){var t={text:n};return{decodedText:n,result:t}},e.createFromQrcodeResult=function(n){return{decodedText:n.text,result:n}},e}(),Ux;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Ux||(Ux={}));var IL=function(){function e(){}return e.createFrom=function(n){return{errorMessage:n,type:Ux.UNKWOWN_ERROR}},e}(),ML=function(){function e(n){this.verbose=n}return e.prototype.log=function(n){this.verbose&&console.log(n)},e.prototype.warn=function(n){this.verbose&&console.warn(n)},e.prototype.logError=function(n,t){(this.verbose||t===!0)&&console.error(n)},e.prototype.logErrors=function(n){if(n.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(n)},e}();function ii(e){return typeof e>"u"||e===null}var oc=function(){function e(){}return e.codeParseError=function(n){return"QR code parse error, error = ".concat(n)},e.errorGettingUserMedia=function(n){return"Error getting userMedia, error = ".concat(n)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),IC=function(){function e(){}return e.isMediaStreamConstraintsValid=function(n,t){if(typeof n!="object"){var r=typeof n;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(a),d=Object.keys(n),m=0,v=d;m<v.length;m++){var g=v[m];if(o.has(g))return t.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},e}(),zx={exports:{}};(function(e,n){(function(t,r){r(n)})(Da,function(t){function r(B){return B==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,i){B.__proto__=i}||function(B,i){for(var l in i)i.hasOwnProperty(l)&&(B[l]=i[l])};function o(B,i){a(B,i);function l(){this.constructor=B}B.prototype=i===null?Object.create(i):(l.prototype=i.prototype,new l)}function d(B,i){var l=Object.setPrototypeOf;l?l(B,i):B.__proto__=i}function m(B,i){i===void 0&&(i=B.constructor);var l=Error.captureStackTrace;l&&l(B,i)}var v=function(B){o(i,B);function i(l){var c=this.constructor,h=B.call(this,l)||this;return Object.defineProperty(h,"name",{value:c.name,enumerable:!1}),d(h,c.prototype),m(h),h}return i}(Error);class g extends v{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}g.kind="Exception";class w extends g{}w.kind="ArgumentException";class b extends g{}b.kind="IllegalArgumentException";class _{constructor(i){if(this.binarizer=i,i===null)throw new b("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,l){return this.binarizer.getBlackRow(i,l)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,l,c,h){const f=this.binarizer.getLuminanceSource().crop(i,l,c,h);return new _(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class E extends g{static getChecksumInstance(){return new E}}E.kind="ChecksumException";class T{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class I{static arraycopy(i,l,c,h,f){for(;f--;)c[h++]=i[l++]}static currentTimeMillis(){return Date.now()}}class k extends g{}k.kind="IndexOutOfBoundsException";class S extends k{constructor(i=void 0,l=void 0){super(l),this.index=i,this.message=l}}S.kind="ArrayIndexOutOfBoundsException";class A{static fill(i,l){for(let c=0,h=i.length;c<h;c++)i[c]=l}static fillWithin(i,l,c,h){A.rangeCheck(i.length,l,c);for(let f=l;f<c;f++)i[f]=h}static rangeCheck(i,l,c){if(l>c)throw new b("fromIndex("+l+") > toIndex("+c+")");if(l<0)throw new S(l);if(c>i)throw new S(c)}static asList(...i){return i}static create(i,l,c){return Array.from({length:i}).map(f=>Array.from({length:l}).fill(c))}static createInt32Array(i,l,c){return Array.from({length:i}).map(f=>Int32Array.from({length:l}).fill(c))}static equals(i,l){if(!i||!l||!i.length||!l.length||i.length!==l.length)return!1;for(let c=0,h=i.length;c<h;c++)if(i[c]!==l[c])return!1;return!0}static hashCode(i){if(i===null)return 0;let l=1;for(const c of i)l=31*l+c;return l}static fillUint8Array(i,l){for(let c=0;c!==i.length;c++)i[c]=l}static copyOf(i,l){return i.slice(0,l)}static copyOfUint8Array(i,l){if(i.length<=l){const c=new Uint8Array(l);return c.set(i),c}return i.slice(0,l)}static copyOfRange(i,l,c){const h=c-l,f=new Int32Array(h);return I.arraycopy(i,l,f,0,h),f}static binarySearch(i,l,c){c===void 0&&(c=A.numberComparator);let h=0,f=i.length-1;for(;h<=f;){const x=f+h>>1,y=c(l,i[x]);if(y>0)h=x+1;else if(y<0)f=x-1;else return x}return-h-1}static numberComparator(i,l){return i-l}}class O{static numberOfTrailingZeros(i){let l;if(i===0)return 32;let c=31;return l=i<<16,l!==0&&(c-=16,i=l),l=i<<8,l!==0&&(c-=8,i=l),l=i<<4,l!==0&&(c-=4,i=l),l=i<<2,l!==0&&(c-=2,i=l),c-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let l=1;return i>>>16||(l+=16,i<<=16),i>>>24||(l+=8,i<<=8),i>>>28||(l+=4,i<<=4),i>>>30||(l+=2,i<<=2),l-=i>>>31,l}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,l){return Math.trunc(i/l)}static parseInt(i,l=void 0){return parseInt(i,l)}}O.MIN_VALUE_32_BITS=-2147483648,O.MAX_VALUE=Number.MAX_SAFE_INTEGER;class P{constructor(i,l){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,l==null?this.bits=P.makeArray(i):this.bits=l)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const l=P.makeArray(i);I.arraycopy(this.bits,0,l,0,this.bits.length),this.bits=l}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const l=this.size;if(i>=l)return l;const c=this.bits;let h=Math.floor(i/32),f=c[h];f&=~((1<<(i&31))-1);const x=c.length;for(;f===0;){if(++h===x)return l;f=c[h]}const y=h*32+O.numberOfTrailingZeros(f);return y>l?l:y}getNextUnset(i){const l=this.size;if(i>=l)return l;const c=this.bits;let h=Math.floor(i/32),f=~c[h];f&=~((1<<(i&31))-1);const x=c.length;for(;f===0;){if(++h===x)return l;f=~c[h]}const y=h*32+O.numberOfTrailingZeros(f);return y>l?l:y}setBulk(i,l){this.bits[Math.floor(i/32)]=l}setRange(i,l){if(l<i||i<0||l>this.size)throw new b;if(l===i)return;l--;const c=Math.floor(i/32),h=Math.floor(l/32),f=this.bits;for(let x=c;x<=h;x++){const y=x>c?0:i&31,C=(2<<(x<h?31:l&31))-(1<<y);f[x]|=C}}clear(){const i=this.bits.length,l=this.bits;for(let c=0;c<i;c++)l[c]=0}isRange(i,l,c){if(l<i||i<0||l>this.size)throw new b;if(l===i)return!0;l--;const h=Math.floor(i/32),f=Math.floor(l/32),x=this.bits;for(let y=h;y<=f;y++){const j=y>h?0:i&31,R=(2<<(y<f?31:l&31))-(1<<j)&4294967295;if((x[y]&R)!==(c?R:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,l){if(l<0||l>32)throw new b("Num bits must be between 0 and 32");this.ensureCapacity(this.size+l);for(let c=l;c>0;c--)this.appendBit((i>>c-1&1)===1)}appendBitArray(i){const l=i.size;this.ensureCapacity(this.size+l);for(let c=0;c<l;c++)this.appendBit(i.get(c))}xor(i){if(this.size!==i.size)throw new b("Sizes don't match");const l=this.bits;for(let c=0,h=l.length;c<h;c++)l[c]^=i.bits[c]}toBytes(i,l,c,h){for(let f=0;f<h;f++){let x=0;for(let y=0;y<8;y++)this.get(i)&&(x|=1<<7-y),i++;l[c+f]=x}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),l=Math.floor((this.size-1)/32),c=l+1,h=this.bits;for(let f=0;f<c;f++){let x=h[f];x=x>>1&1431655765|(x&1431655765)<<1,x=x>>2&858993459|(x&858993459)<<2,x=x>>4&252645135|(x&252645135)<<4,x=x>>8&16711935|(x&16711935)<<8,x=x>>16&65535|(x&65535)<<16,i[l-f]=x}if(this.size!==c*32){const f=c*32-this.size;let x=i[0]>>>f;for(let y=1;y<c;y++){const j=i[y];x|=j<<32-f,i[y-1]=x,x=j>>>f}i[c-1]=x}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof P))return!1;const l=i;return this.size===l.size&&A.equals(this.bits,l.bits)}hashCode(){return 31*this.size+A.hashCode(this.bits)}toString(){let i="";for(let l=0,c=this.size;l<c;l++)l&7||(i+=" "),i+=this.get(l)?"X":".";return i}clone(){return new P(this.size,this.bits.slice())}}var $;(function(B){B[B.OTHER=0]="OTHER",B[B.PURE_BARCODE=1]="PURE_BARCODE",B[B.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",B[B.TRY_HARDER=3]="TRY_HARDER",B[B.CHARACTER_SET=4]="CHARACTER_SET",B[B.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",B[B.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",B[B.ASSUME_GS1=7]="ASSUME_GS1",B[B.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",B[B.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",B[B.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})($||($={}));var L=$;class F extends g{static getFormatInstance(){return new F}}F.kind="FormatException";var W;(function(B){B[B.Cp437=0]="Cp437",B[B.ISO8859_1=1]="ISO8859_1",B[B.ISO8859_2=2]="ISO8859_2",B[B.ISO8859_3=3]="ISO8859_3",B[B.ISO8859_4=4]="ISO8859_4",B[B.ISO8859_5=5]="ISO8859_5",B[B.ISO8859_6=6]="ISO8859_6",B[B.ISO8859_7=7]="ISO8859_7",B[B.ISO8859_8=8]="ISO8859_8",B[B.ISO8859_9=9]="ISO8859_9",B[B.ISO8859_10=10]="ISO8859_10",B[B.ISO8859_11=11]="ISO8859_11",B[B.ISO8859_13=12]="ISO8859_13",B[B.ISO8859_14=13]="ISO8859_14",B[B.ISO8859_15=14]="ISO8859_15",B[B.ISO8859_16=15]="ISO8859_16",B[B.SJIS=16]="SJIS",B[B.Cp1250=17]="Cp1250",B[B.Cp1251=18]="Cp1251",B[B.Cp1252=19]="Cp1252",B[B.Cp1256=20]="Cp1256",B[B.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",B[B.UTF8=22]="UTF8",B[B.ASCII=23]="ASCII",B[B.Big5=24]="Big5",B[B.GB18030=25]="GB18030",B[B.EUC_KR=26]="EUC_KR"})(W||(W={}));class V{constructor(i,l,c,...h){this.valueIdentifier=i,this.name=c,typeof l=="number"?this.values=Int32Array.from([l]):this.values=l,this.otherEncodingNames=h,V.VALUE_IDENTIFIER_TO_ECI.set(i,this),V.NAME_TO_ECI.set(c,this);const f=this.values;for(let x=0,y=f.length;x!==y;x++){const j=f[x];V.VALUES_TO_ECI.set(j,this)}for(const x of h)V.NAME_TO_ECI.set(x,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new F("incorect value");const l=V.VALUES_TO_ECI.get(i);if(l===void 0)throw new F("incorect value");return l}static getCharacterSetECIByName(i){const l=V.NAME_TO_ECI.get(i);if(l===void 0)throw new F("incorect value");return l}equals(i){if(!(i instanceof V))return!1;const l=i;return this.getName()===l.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(W.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(W.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(W.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(W.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(W.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(W.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(W.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(W.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(W.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(W.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(W.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(W.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(W.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(W.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(W.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(W.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(W.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(W.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(W.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(W.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(W.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(W.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(W.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(W.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(W.Big5,28,"Big5"),V.GB18030=new V(W.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(W.EUC_KR,30,"EUC_KR","EUC-KR");class re extends g{}re.kind="UnsupportedOperationException";class oe{static decode(i,l){const c=this.encodingName(l);return this.customDecoder?this.customDecoder(i,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(i,c):new TextDecoder(c).decode(i)}static shouldDecodeOnFallback(i){return!oe.isBrowser()&&i==="ISO-8859-1"}static encode(i,l){const c=this.encodingName(l);return this.customEncoder?this.customEncoder(i,c):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof V?i:V.getCharacterSetECIByName(i)}static decodeFallback(i,l){const c=this.encodingCharacterSet(l);if(oe.isDecodeFallbackSupported(c)){let h="";for(let f=0,x=i.length;f<x;f++){let y=i[f].toString(16);y.length<2&&(y="0"+y),h+="%"+y}return decodeURIComponent(h)}if(c.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new re(`Encoding ${this.encodingName(l)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(V.UTF8)||i.equals(V.ISO8859_1)||i.equals(V.ASCII)}static encodeFallback(i){const c=btoa(unescape(encodeURIComponent(i))).split(""),h=[];for(let f=0;f<c.length;f++)h.push(c[f].charCodeAt(0));return new Uint8Array(h)}}class ee{static castAsNonUtf8Char(i,l=null){const c=l?l.getName():this.ISO88591;return oe.decode(new Uint8Array([i]),c)}static guessEncoding(i,l){if(l!=null&&l.get(L.CHARACTER_SET)!==void 0)return l.get(L.CHARACTER_SET).toString();const c=i.length;let h=!0,f=!0,x=!0,y=0,j=0,C=0,R=0,U=0,H=0,J=0,q=0,G=0,K=0,le=0;const Ce=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let Me=0;Me<c&&(h||f||x);Me++){const Re=i[Me]&255;x&&(y>0?Re&128?y--:x=!1:Re&128&&(Re&64?(y++,Re&32?(y++,Re&16?(y++,Re&8?x=!1:R++):C++):j++):x=!1)),h&&(Re>127&&Re<160?h=!1:Re>159&&(Re<192||Re===215||Re===247)&&le++),f&&(U>0?Re<64||Re===127||Re>252?f=!1:U--:Re===128||Re===160||Re>239?f=!1:Re>160&&Re<224?(H++,q=0,J++,J>G&&(G=J)):Re>127?(U++,J=0,q++,q>K&&(K=q)):(J=0,q=0))}return x&&y>0&&(x=!1),f&&U>0&&(f=!1),x&&(Ce||j+C+R>0)?ee.UTF8:f&&(ee.ASSUME_SHIFT_JIS||G>=3||K>=3)?ee.SHIFT_JIS:h&&f?G===2&&H===2||le*10>=c?ee.SHIFT_JIS:ee.ISO88591:h?ee.ISO88591:f?ee.SHIFT_JIS:x?ee.UTF8:ee.PLATFORM_DEFAULT_ENCODING}static format(i,...l){let c=-1;function h(x,y,j,C,R,U){if(x==="%%")return"%";if(l[++c]===void 0)return;x=C?parseInt(C.substr(1)):void 0;let H=R?parseInt(R.substr(1)):void 0,J;switch(U){case"s":J=l[c];break;case"c":J=l[c][0];break;case"f":J=parseFloat(l[c]).toFixed(x);break;case"p":J=parseFloat(l[c]).toPrecision(x);break;case"e":J=parseFloat(l[c]).toExponential(x);break;case"x":J=parseInt(l[c]).toString(H||16);break;case"d":J=parseFloat(parseInt(l[c],H||10).toPrecision(x)).toFixed(0);break}J=typeof J=="object"?JSON.stringify(J):(+J).toString(H);let q=parseInt(j),G=j&&j[0]+""=="0"?"0":" ";for(;J.length<q;)J=y!==void 0?J+G:G+J;return J}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,h)}static getBytes(i,l){return oe.encode(i,l)}static getCharCode(i,l=0){return i.charCodeAt(l)}static getCharAt(i){return String.fromCharCode(i)}}ee.SHIFT_JIS=V.SJIS.getName(),ee.GB2312="GB2312",ee.ISO88591=V.ISO8859_1.getName(),ee.EUC_JP="EUC_JP",ee.UTF8=V.UTF8.getName(),ee.PLATFORM_DEFAULT_ENCODING=ee.UTF8,ee.ASSUME_SHIFT_JIS=!1;class he{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=ee.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,l,c){for(let h=l;l<l+c;h++)this.append(i[h]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,l){this.value=this.value.substr(0,i)+l+this.value.substr(i+1)}substring(i,l){return this.value.substring(i,l)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,l){this.value=this.value.substr(0,i)+l+this.value.substr(i+l.length)}}class ve{constructor(i,l,c,h){if(this.width=i,this.height=l,this.rowSize=c,this.bits=h,l==null&&(l=i),this.height=l,i<1||l<1)throw new b("Both dimensions must be greater than 0");c==null&&(c=Math.floor((i+31)/32)),this.rowSize=c,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const l=i.length,c=i[0].length,h=new ve(c,l);for(let f=0;f<l;f++){const x=i[f];for(let y=0;y<c;y++)x[y]&&h.set(y,f)}return h}static parseFromString(i,l,c){if(i===null)throw new b("stringRepresentation cannot be null");const h=new Array(i.length);let f=0,x=0,y=-1,j=0,C=0;for(;C<i.length;)if(i.charAt(C)===`
`||i.charAt(C)==="\r"){if(f>x){if(y===-1)y=f-x;else if(f-x!==y)throw new b("row lengths do not match");x=f,j++}C++}else if(i.substring(C,C+l.length)===l)C+=l.length,h[f]=!0,f++;else if(i.substring(C,C+c.length)===c)C+=c.length,h[f]=!1,f++;else throw new b("illegal character encountered: "+i.substring(C));if(f>x){if(y===-1)y=f-x;else if(f-x!==y)throw new b("row lengths do not match");j++}const R=new ve(y,j);for(let U=0;U<f;U++)h[U]&&R.set(Math.floor(U%y),Math.floor(U/y));return R}get(i,l){const c=l*this.rowSize+Math.floor(i/32);return(this.bits[c]>>>(i&31)&1)!==0}set(i,l){const c=l*this.rowSize+Math.floor(i/32);this.bits[c]|=1<<(i&31)&4294967295}unset(i,l){const c=l*this.rowSize+Math.floor(i/32);this.bits[c]&=~(1<<(i&31)&4294967295)}flip(i,l){const c=l*this.rowSize+Math.floor(i/32);this.bits[c]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new b("input matrix dimensions do not match");const l=new P(Math.floor(this.width/32)+1),c=this.rowSize,h=this.bits;for(let f=0,x=this.height;f<x;f++){const y=f*c,j=i.getRow(f,l).getBitArray();for(let C=0;C<c;C++)h[y+C]^=j[C]}}clear(){const i=this.bits,l=i.length;for(let c=0;c<l;c++)i[c]=0}setRegion(i,l,c,h){if(l<0||i<0)throw new b("Left and top must be nonnegative");if(h<1||c<1)throw new b("Height and width must be at least 1");const f=i+c,x=l+h;if(x>this.height||f>this.width)throw new b("The region must fit inside the matrix");const y=this.rowSize,j=this.bits;for(let C=l;C<x;C++){const R=C*y;for(let U=i;U<f;U++)j[R+Math.floor(U/32)]|=1<<(U&31)&4294967295}}getRow(i,l){l==null||l.getSize()<this.width?l=new P(this.width):l.clear();const c=this.rowSize,h=this.bits,f=i*c;for(let x=0;x<c;x++)l.setBulk(x*32,h[f+x]);return l}setRow(i,l){I.arraycopy(l.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),l=this.getHeight();let c=new P(i),h=new P(i);for(let f=0,x=Math.floor((l+1)/2);f<x;f++)c=this.getRow(f,c),h=this.getRow(l-1-f,h),c.reverse(),h.reverse(),this.setRow(f,h),this.setRow(l-1-f,c)}getEnclosingRectangle(){const i=this.width,l=this.height,c=this.rowSize,h=this.bits;let f=i,x=l,y=-1,j=-1;for(let C=0;C<l;C++)for(let R=0;R<c;R++){const U=h[C*c+R];if(U!==0){if(C<x&&(x=C),C>j&&(j=C),R*32<f){let H=0;for(;!(U<<31-H&4294967295);)H++;R*32+H<f&&(f=R*32+H)}if(R*32+31>y){let H=31;for(;!(U>>>H);)H--;R*32+H>y&&(y=R*32+H)}}}return y<f||j<x?null:Int32Array.from([f,x,y-f+1,j-x+1])}getTopLeftOnBit(){const i=this.rowSize,l=this.bits;let c=0;for(;c<l.length&&l[c]===0;)c++;if(c===l.length)return null;const h=c/i;let f=c%i*32;const x=l[c];let y=0;for(;!(x<<31-y&4294967295);)y++;return f+=y,Int32Array.from([f,h])}getBottomRightOnBit(){const i=this.rowSize,l=this.bits;let c=l.length-1;for(;c>=0&&l[c]===0;)c--;if(c<0)return null;const h=Math.floor(c/i);let f=Math.floor(c%i)*32;const x=l[c];let y=31;for(;!(x>>>y);)y--;return f+=y,Int32Array.from([f,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof ve))return!1;const l=i;return this.width===l.width&&this.height===l.height&&this.rowSize===l.rowSize&&A.equals(this.bits,l.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+A.hashCode(this.bits),i}toString(i="X ",l="  ",c=`
`){return this.buildToString(i,l,c)}buildToString(i,l,c){let h=new he;for(let f=0,x=this.height;f<x;f++){for(let y=0,j=this.width;y<j;y++)h.append(this.get(y,f)?i:l);h.append(c)}return h.toString()}clone(){return new ve(this.width,this.height,this.rowSize,this.bits.slice())}}class ne extends g{static getNotFoundInstance(){return new ne}}ne.kind="NotFoundException";class Q extends T{constructor(i){super(i),this.luminances=Q.EMPTY,this.buckets=new Int32Array(Q.LUMINANCE_BUCKETS)}getBlackRow(i,l){const c=this.getLuminanceSource(),h=c.getWidth();l==null||l.getSize()<h?l=new P(h):l.clear(),this.initArrays(h);const f=c.getRow(i,this.luminances),x=this.buckets;for(let j=0;j<h;j++)x[(f[j]&255)>>Q.LUMINANCE_SHIFT]++;const y=Q.estimateBlackPoint(x);if(h<3)for(let j=0;j<h;j++)(f[j]&255)<y&&l.set(j);else{let j=f[0]&255,C=f[1]&255;for(let R=1;R<h-1;R++){const U=f[R+1]&255;(C*4-j-U)/2<y&&l.set(R),j=C,C=U}}return l}getBlackMatrix(){const i=this.getLuminanceSource(),l=i.getWidth(),c=i.getHeight(),h=new ve(l,c);this.initArrays(l);const f=this.buckets;for(let j=1;j<5;j++){const C=Math.floor(c*j/5),R=i.getRow(C,this.luminances),U=Math.floor(l*4/5);for(let H=Math.floor(l/5);H<U;H++){const J=R[H]&255;f[J>>Q.LUMINANCE_SHIFT]++}}const x=Q.estimateBlackPoint(f),y=i.getMatrix();for(let j=0;j<c;j++){const C=j*l;for(let R=0;R<l;R++)(y[C+R]&255)<x&&h.set(R,j)}return h}createBinarizer(i){return new Q(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const l=this.buckets;for(let c=0;c<Q.LUMINANCE_BUCKETS;c++)l[c]=0}static estimateBlackPoint(i){const l=i.length;let c=0,h=0,f=0;for(let R=0;R<l;R++)i[R]>f&&(h=R,f=i[R]),i[R]>c&&(c=i[R]);let x=0,y=0;for(let R=0;R<l;R++){const U=R-h,H=i[R]*U*U;H>y&&(x=R,y=H)}if(h>x){const R=h;h=x,x=R}if(x-h<=l/16)throw new ne;let j=x-1,C=-1;for(let R=x-1;R>h;R--){const U=R-h,H=U*U*(x-R)*(c-i[R]);H>C&&(j=R,C=H)}return j<<Q.LUMINANCE_SHIFT}}Q.LUMINANCE_BITS=5,Q.LUMINANCE_SHIFT=8-Q.LUMINANCE_BITS,Q.LUMINANCE_BUCKETS=1<<Q.LUMINANCE_BITS,Q.EMPTY=Uint8ClampedArray.from([0]);class me extends Q{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),l=i.getWidth(),c=i.getHeight();if(l>=me.MINIMUM_DIMENSION&&c>=me.MINIMUM_DIMENSION){const h=i.getMatrix();let f=l>>me.BLOCK_SIZE_POWER;l&me.BLOCK_SIZE_MASK&&f++;let x=c>>me.BLOCK_SIZE_POWER;c&me.BLOCK_SIZE_MASK&&x++;const y=me.calculateBlackPoints(h,f,x,l,c),j=new ve(l,c);me.calculateThresholdForBlock(h,f,x,l,c,y,j),this.matrix=j}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new me(i)}static calculateThresholdForBlock(i,l,c,h,f,x,y){const j=f-me.BLOCK_SIZE,C=h-me.BLOCK_SIZE;for(let R=0;R<c;R++){let U=R<<me.BLOCK_SIZE_POWER;U>j&&(U=j);const H=me.cap(R,2,c-3);for(let J=0;J<l;J++){let q=J<<me.BLOCK_SIZE_POWER;q>C&&(q=C);const G=me.cap(J,2,l-3);let K=0;for(let Ce=-2;Ce<=2;Ce++){const Me=x[H+Ce];K+=Me[G-2]+Me[G-1]+Me[G]+Me[G+1]+Me[G+2]}const le=K/25;me.thresholdBlock(i,q,U,le,h,y)}}}static cap(i,l,c){return i<l?l:i>c?c:i}static thresholdBlock(i,l,c,h,f,x){for(let y=0,j=c*f+l;y<me.BLOCK_SIZE;y++,j+=f)for(let C=0;C<me.BLOCK_SIZE;C++)(i[j+C]&255)<=h&&x.set(l+C,c+y)}static calculateBlackPoints(i,l,c,h,f){const x=f-me.BLOCK_SIZE,y=h-me.BLOCK_SIZE,j=new Array(c);for(let C=0;C<c;C++){j[C]=new Int32Array(l);let R=C<<me.BLOCK_SIZE_POWER;R>x&&(R=x);for(let U=0;U<l;U++){let H=U<<me.BLOCK_SIZE_POWER;H>y&&(H=y);let J=0,q=255,G=0;for(let le=0,Ce=R*h+H;le<me.BLOCK_SIZE;le++,Ce+=h){for(let Me=0;Me<me.BLOCK_SIZE;Me++){const Re=i[Ce+Me]&255;J+=Re,Re<q&&(q=Re),Re>G&&(G=Re)}if(G-q>me.MIN_DYNAMIC_RANGE)for(le++,Ce+=h;le<me.BLOCK_SIZE;le++,Ce+=h)for(let Me=0;Me<me.BLOCK_SIZE;Me++)J+=i[Ce+Me]&255}let K=J>>me.BLOCK_SIZE_POWER*2;if(G-q<=me.MIN_DYNAMIC_RANGE&&(K=q/2,C>0&&U>0)){const le=(j[C-1][U]+2*j[C][U-1]+j[C-1][U-1])/4;q<le&&(K=le)}j[C][U]=K}}return j}}me.BLOCK_SIZE_POWER=3,me.BLOCK_SIZE=1<<me.BLOCK_SIZE_POWER,me.BLOCK_SIZE_MASK=me.BLOCK_SIZE-1,me.MINIMUM_DIMENSION=me.BLOCK_SIZE*5,me.MIN_DYNAMIC_RANGE=24;class fe{constructor(i,l){this.width=i,this.height=l}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,l,c,h){throw new re("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new re("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new re("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let l=new he;for(let c=0;c<this.height;c++){const h=this.getRow(c,i);for(let f=0;f<this.width;f++){const x=h[f]&255;let y;x<64?y="#":x<128?y="+":x<192?y=".":y=" ",l.append(y)}l.append(`
`)}return l.toString()}}class Ie extends fe{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,l){const c=this.delegate.getRow(i,l),h=this.getWidth();for(let f=0;f<h;f++)c[f]=255-(c[f]&255);return c}getMatrix(){const i=this.delegate.getMatrix(),l=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(l);for(let h=0;h<l;h++)c[h]=255-(i[h]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(i,l,c,h){return new Ie(this.delegate.crop(i,l,c,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ie(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ie(this.delegate.rotateCounterClockwise45())}}class ue extends fe{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=ue.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const l=i.getContext("2d").getImageData(0,0,i.width,i.height);return ue.toGrayscaleBuffer(l.data,i.width,i.height)}static toGrayscaleBuffer(i,l,c){const h=new Uint8ClampedArray(l*c);for(let f=0,x=0,y=i.length;f<y;f+=4,x++){let j;if(i[f+3]===0)j=255;else{const R=i[f],U=i[f+1],H=i[f+2];j=306*R+601*U+117*H+512>>10}h[x]=j}return h}getRow(i,l){if(i<0||i>=this.getHeight())throw new b("Requested row is outside the image: "+i);const c=this.getWidth(),h=i*c;return l===null?l=this.buffer.slice(h,h+c):(l.length<c&&(l=new Uint8ClampedArray(c)),l.set(this.buffer.slice(h,h+c))),l}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,l,c,h){return super.crop(i,l,c,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const l=this.getTempCanvasElement(),c=l.getContext("2d"),h=i*ue.DEGREE_TO_RADIANS,f=this.canvas.width,x=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(h))*f+Math.abs(Math.sin(h))*x),j=Math.ceil(Math.abs(Math.sin(h))*f+Math.abs(Math.cos(h))*x);return l.width=y,l.height=j,c.translate(y/2,j/2),c.rotate(h),c.drawImage(this.canvas,f/-2,x/-2),this.buffer=ue.makeBufferFromCanvasImageData(l),this}invert(){return new Ie(this)}}ue.DEGREE_TO_RADIANS=Math.PI/180;class Ye{constructor(i,l,c){this.deviceId=i,this.label=l,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var we=(globalThis||Da||self||window||void 0)&&(globalThis||Da||self||window||void 0).__awaiter||function(B,i,l,c){function h(f){return f instanceof l?f:new l(function(x){x(f)})}return new(l||(l=Promise))(function(f,x){function y(R){try{C(c.next(R))}catch(U){x(U)}}function j(R){try{C(c.throw(R))}catch(U){x(U)}}function C(R){R.done?f(R.value):h(R.value).then(y,j)}C((c=c.apply(B,i||[])).next())})};class Ve{constructor(i,l=500,c){this.reader=i,this.timeBetweenScansMillis=l,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return we(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),l=[];for(const c of i){const h=c.kind==="video"?"videoinput":c.kind;if(h!=="videoinput")continue;const f=c.deviceId||c.id,x=c.label||`Video device ${l.length+1}`,y=c.groupId,j={deviceId:f,label:x,kind:h,groupId:y};l.push(j)}return l})}getVideoInputDevices(){return we(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(l=>new Ye(l.deviceId,l.label))})}findDeviceById(i){return we(this,void 0,void 0,function*(){const l=yield this.listVideoInputDevices();return l?l.find(c=>c.deviceId===i):null})}decodeFromInputVideoDevice(i,l){return we(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,l)})}decodeOnceFromVideoDevice(i,l){return we(this,void 0,void 0,function*(){this.reset();let c;i?c={deviceId:{exact:i}}:c={facingMode:"environment"};const h={video:c};return yield this.decodeOnceFromConstraints(h,l)})}decodeOnceFromConstraints(i,l){return we(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(c,l)})}decodeOnceFromStream(i,l){return we(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(i,l);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(i,l,c){return we(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,l,c)})}decodeFromVideoDevice(i,l,c){return we(this,void 0,void 0,function*(){let h;i?h={deviceId:{exact:i}}:h={facingMode:"environment"};const f={video:h};return yield this.decodeFromConstraints(f,l,c)})}decodeFromConstraints(i,l,c){return we(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(h,l,c)})}decodeFromStream(i,l,c){return we(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(i,l);return yield this.decodeContinuously(h,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,l){return we(this,void 0,void 0,function*(){const c=this.prepareVideoElement(l);return this.addVideoSource(c,i),this.videoElement=c,this.stream=i,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(i){return new Promise((l,c)=>this.playVideoOnLoad(i,()=>l()))}playVideoOnLoad(i,l){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",l),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return we(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,l){const c=document.getElementById(i);if(!c)throw new w(`element with id '${i}' not found`);if(c.nodeName.toLowerCase()!==l.toLowerCase())throw new w(`element with id '${i}' must be an ${l} element`);return c}decodeFromImage(i,l){if(!i&&!l)throw new w("either imageElement with a src set or an url must be provided");return l&&!i?this.decodeFromImageUrl(l):this.decodeFromImageElement(i)}decodeFromVideo(i,l){if(!i&&!l)throw new w("Either an element with a src set or an URL must be provided");return l&&!i?this.decodeFromVideoUrl(l):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,l,c){if(i===void 0&&l===void 0)throw new w("Either an element with a src set or an URL must be provided");return l&&!i?this.decodeFromVideoUrlContinuously(l,c):this.decodeFromVideoElementContinuously(i,c)}decodeFromImageElement(i){if(!i)throw new w("An image element must be provided.");this.reset();const l=this.prepareImageElement(i);this.imageElement=l;let c;return this.isImageLoaded(l)?c=this.decodeOnce(l,!1,!0):c=this._decodeOnLoadImage(l),c}decodeFromVideoElement(i){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(l)}decodeFromVideoElementContinuously(i,l){const c=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(c,l)}_decodeFromVideoElementSetup(i){if(!i)throw new w("A video element must be provided.");this.reset();const l=this.prepareVideoElement(i);return this.videoElement=l,l}decodeFromImageUrl(i){if(!i)throw new w("An URL must be provided.");this.reset();const l=this.prepareImageElement();this.imageElement=l;const c=this._decodeOnLoadImage(l);return l.src=i,c}decodeFromVideoUrl(i){if(!i)throw new w("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),c=this.decodeFromVideoElement(l);return l.src=i,c}decodeFromVideoUrlContinuously(i,l){if(!i)throw new w("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(c,l);return c.src=i,h}_decodeOnLoadImage(i){return new Promise((l,c)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(l,c),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return we(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,l){return we(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,l)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let l;return typeof i>"u"&&(l=document.createElement("img"),l.width=200,l.height=200),typeof i=="string"&&(l=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(l=i),l}prepareVideoElement(i){let l;return!i&&typeof document<"u"&&(l=document.createElement("video"),l.width=200,l.height=200),typeof i=="string"&&(l=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(l=i),l.setAttribute("autoplay","true"),l.setAttribute("muted","true"),l.setAttribute("playsinline","true"),l}decodeOnce(i,l=!0,c=!0){this._stopAsyncDecode=!1;const h=(f,x)=>{if(this._stopAsyncDecode){x(new ne("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(i);f(y)}catch(y){const j=l&&y instanceof ne,R=(y instanceof E||y instanceof F)&&c;if(j||R)return setTimeout(h,this._timeBetweenDecodingAttempts,f,x);x(y)}};return new Promise((f,x)=>h(f,x))}decodeContinuously(i,l){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(i);l(h,null),setTimeout(c,this.timeBetweenScansMillis)}catch(h){l(null,h);const f=h instanceof E||h instanceof F,x=h instanceof ne;(f||x)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(i){const l=this.createBinaryBitmap(i);return this.decodeBitmap(l)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,l,c){l||(l={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(i,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}drawImageOnCanvas(i,l,c=this.captureCanvasContext){l||(l={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(i,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const l=this.getCaptureCanvas(i),c=new ue(l),h=new me(c);return new _(h)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const l=this.createCaptureCanvas(i);this.captureCanvas=l}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const l=document.createElement("canvas");let c,h;return typeof i<"u"&&(i instanceof HTMLVideoElement?(c=i.videoWidth,h=i.videoHeight):i instanceof HTMLImageElement&&(c=i.naturalWidth||i.width,h=i.naturalHeight||i.height)),l.style.width=c+"px",l.style.height=h+"px",l.width=c,l.height=h,l}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,l){try{i.srcObject=l}catch{i.src=URL.createObjectURL(l)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class Be{constructor(i,l,c=l==null?0:8*l.length,h,f,x=I.currentTimeMillis()){this.text=i,this.rawBytes=l,this.numBits=c,this.resultPoints=h,this.format=f,this.timestamp=x,this.text=i,this.rawBytes=l,c==null?this.numBits=l==null?0:8*l.length:this.numBits=c,this.resultPoints=h,this.format=f,this.resultMetadata=null,x==null?this.timestamp=I.currentTimeMillis():this.timestamp=x}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,l){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,l)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const l=this.resultPoints;if(l===null)this.resultPoints=i;else if(i!==null&&i.length>0){const c=new Array(l.length+i.length);I.arraycopy(l,0,c,0,l.length),I.arraycopy(i,0,c,l.length,i.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ct;(function(B){B[B.AZTEC=0]="AZTEC",B[B.CODABAR=1]="CODABAR",B[B.CODE_39=2]="CODE_39",B[B.CODE_93=3]="CODE_93",B[B.CODE_128=4]="CODE_128",B[B.DATA_MATRIX=5]="DATA_MATRIX",B[B.EAN_8=6]="EAN_8",B[B.EAN_13=7]="EAN_13",B[B.ITF=8]="ITF",B[B.MAXICODE=9]="MAXICODE",B[B.PDF_417=10]="PDF_417",B[B.QR_CODE=11]="QR_CODE",B[B.RSS_14=12]="RSS_14",B[B.RSS_EXPANDED=13]="RSS_EXPANDED",B[B.UPC_A=14]="UPC_A",B[B.UPC_E=15]="UPC_E",B[B.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ct||(ct={}));var Ae=ct,Se;(function(B){B[B.OTHER=0]="OTHER",B[B.ORIENTATION=1]="ORIENTATION",B[B.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",B[B.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",B[B.ISSUE_NUMBER=4]="ISSUE_NUMBER",B[B.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",B[B.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",B[B.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",B[B.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",B[B.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",B[B.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Se||(Se={}));var nt=Se;class qt{constructor(i,l,c,h,f=-1,x=-1){this.rawBytes=i,this.text=l,this.byteSegments=c,this.ecLevel=h,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=x,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class bt{exp(i){return this.expTable[i]}log(i){if(i===0)throw new b;return this.logTable[i]}static addOrSubtract(i,l){return i^l}}class Pt{constructor(i,l){if(l.length===0)throw new b;this.field=i;const c=l.length;if(c>1&&l[0]===0){let h=1;for(;h<c&&l[h]===0;)h++;h===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-h),I.arraycopy(l,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const l=this.coefficients;let c;if(i===1){c=0;for(let x=0,y=l.length;x!==y;x++){const j=l[x];c=bt.addOrSubtract(c,j)}return c}c=l[0];const h=l.length,f=this.field;for(let x=1;x<h;x++)c=bt.addOrSubtract(f.multiply(i,c),l[x]);return c}addOrSubtract(i){if(!this.field.equals(i.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let l=this.coefficients,c=i.coefficients;if(l.length>c.length){const x=l;l=c,c=x}let h=new Int32Array(c.length);const f=c.length-l.length;I.arraycopy(c,0,h,0,f);for(let x=f;x<c.length;x++)h[x]=bt.addOrSubtract(l[x-f],c[x]);return new Pt(this.field,h)}multiply(i){if(!this.field.equals(i.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const l=this.coefficients,c=l.length,h=i.coefficients,f=h.length,x=new Int32Array(c+f-1),y=this.field;for(let j=0;j<c;j++){const C=l[j];for(let R=0;R<f;R++)x[j+R]=bt.addOrSubtract(x[j+R],y.multiply(C,h[R]))}return new Pt(y,x)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const l=this.coefficients.length,c=this.field,h=new Int32Array(l),f=this.coefficients;for(let x=0;x<l;x++)h[x]=c.multiply(f[x],i);return new Pt(c,h)}multiplyByMonomial(i,l){if(i<0)throw new b;if(l===0)return this.field.getZero();const c=this.coefficients,h=c.length,f=new Int32Array(h+i),x=this.field;for(let y=0;y<h;y++)f[y]=x.multiply(c[y],l);return new Pt(x,f)}divide(i){if(!this.field.equals(i.field))throw new b("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new b("Divide by 0");const l=this.field;let c=l.getZero(),h=this;const f=i.getCoefficient(i.getDegree()),x=l.inverse(f);for(;h.getDegree()>=i.getDegree()&&!h.isZero();){const y=h.getDegree()-i.getDegree(),j=l.multiply(h.getCoefficient(h.getDegree()),x),C=i.multiplyByMonomial(y,j),R=l.buildMonomial(y,j);c=c.addOrSubtract(R),h=h.addOrSubtract(C)}return[c,h]}toString(){let i="";for(let l=this.getDegree();l>=0;l--){let c=this.getCoefficient(l);if(c!==0){if(c<0?(i+=" - ",c=-c):i.length>0&&(i+=" + "),l===0||c!==1){const h=this.field.log(c);h===0?i+="1":h===1?i+="a":(i+="a^",i+=h)}l!==0&&(l===1?i+="x":(i+="x^",i+=l))}}return i}}class Tt extends g{}Tt.kind="ArithmeticException";class Te extends bt{constructor(i,l,c){super(),this.primitive=i,this.size=l,this.generatorBase=c;const h=new Int32Array(l);let f=1;for(let y=0;y<l;y++)h[y]=f,f*=2,f>=l&&(f^=i,f&=l-1);this.expTable=h;const x=new Int32Array(l);for(let y=0;y<l-1;y++)x[h[y]]=y;this.logTable=x,this.zero=new Pt(this,Int32Array.from([0])),this.one=new Pt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,l){if(i<0)throw new b;if(l===0)return this.zero;const c=new Int32Array(i+1);return c[0]=l,new Pt(this,c)}inverse(i){if(i===0)throw new Tt;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,l){return i===0||l===0?0:this.expTable[(this.logTable[i]+this.logTable[l])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+O.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}Te.AZTEC_DATA_12=new Te(4201,4096,1),Te.AZTEC_DATA_10=new Te(1033,1024,1),Te.AZTEC_DATA_6=new Te(67,64,1),Te.AZTEC_PARAM=new Te(19,16,1),Te.QR_CODE_FIELD_256=new Te(285,256,0),Te.DATA_MATRIX_FIELD_256=new Te(301,256,1),Te.AZTEC_DATA_8=Te.DATA_MATRIX_FIELD_256,Te.MAXICODE_FIELD_64=Te.AZTEC_DATA_6;class Ne extends g{}Ne.kind="ReedSolomonException";class Ze extends g{}Ze.kind="IllegalStateException";class be{constructor(i){this.field=i}decode(i,l){const c=this.field,h=new Pt(c,i),f=new Int32Array(l);let x=!0;for(let J=0;J<l;J++){const q=h.evaluateAt(c.exp(J+c.getGeneratorBase()));f[f.length-1-J]=q,q!==0&&(x=!1)}if(x)return;const y=new Pt(c,f),j=this.runEuclideanAlgorithm(c.buildMonomial(l,1),y,l),C=j[0],R=j[1],U=this.findErrorLocations(C),H=this.findErrorMagnitudes(R,U);for(let J=0;J<U.length;J++){const q=i.length-1-c.log(U[J]);if(q<0)throw new Ne("Bad error location");i[q]=Te.addOrSubtract(i[q],H[J])}}runEuclideanAlgorithm(i,l,c){if(i.getDegree()<l.getDegree()){const J=i;i=l,l=J}const h=this.field;let f=i,x=l,y=h.getZero(),j=h.getOne();for(;x.getDegree()>=(c/2|0);){let J=f,q=y;if(f=x,y=j,f.isZero())throw new Ne("r_{i-1} was zero");x=J;let G=h.getZero();const K=f.getCoefficient(f.getDegree()),le=h.inverse(K);for(;x.getDegree()>=f.getDegree()&&!x.isZero();){const Ce=x.getDegree()-f.getDegree(),Me=h.multiply(x.getCoefficient(x.getDegree()),le);G=G.addOrSubtract(h.buildMonomial(Ce,Me)),x=x.addOrSubtract(f.multiplyByMonomial(Ce,Me))}if(j=G.multiply(y).addOrSubtract(q),x.getDegree()>=f.getDegree())throw new Ze("Division algorithm failed to reduce polynomial?")}const C=j.getCoefficient(0);if(C===0)throw new Ne("sigmaTilde(0) was zero");const R=h.inverse(C),U=j.multiplyScalar(R),H=x.multiplyScalar(R);return[U,H]}findErrorLocations(i){const l=i.getDegree();if(l===1)return Int32Array.from([i.getCoefficient(1)]);const c=new Int32Array(l);let h=0;const f=this.field;for(let x=1;x<f.getSize()&&h<l;x++)i.evaluateAt(x)===0&&(c[h]=f.inverse(x),h++);if(h!==l)throw new Ne("Error locator degree does not match number of roots");return c}findErrorMagnitudes(i,l){const c=l.length,h=new Int32Array(c),f=this.field;for(let x=0;x<c;x++){const y=f.inverse(l[x]);let j=1;for(let C=0;C<c;C++)if(x!==C){const R=f.multiply(l[C],y),U=R&1?R&-2:R|1;j=f.multiply(j,U)}h[x]=f.multiply(i.evaluateAt(y),f.inverse(j)),f.getGeneratorBase()!==0&&(h[x]=f.multiply(h[x],y))}return h}}var De;(function(B){B[B.UPPER=0]="UPPER",B[B.LOWER=1]="LOWER",B[B.MIXED=2]="MIXED",B[B.DIGIT=3]="DIGIT",B[B.PUNCT=4]="PUNCT",B[B.BINARY=5]="BINARY"})(De||(De={}));class $e{decode(i){this.ddata=i;let l=i.getBits(),c=this.extractBits(l),h=this.correctBits(c),f=$e.convertBoolArrayToByteArray(h),x=$e.getEncodedData(h),y=new qt(f,x,null,null);return y.setNumBits(h.length),y}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let l=i.length,c=De.UPPER,h=De.UPPER,f="",x=0;for(;x<l;)if(h===De.BINARY){if(l-x<5)break;let y=$e.readCode(i,x,5);if(x+=5,y===0){if(l-x<11)break;y=$e.readCode(i,x,11)+31,x+=11}for(let j=0;j<y;j++){if(l-x<8){x=l;break}const C=$e.readCode(i,x,8);f+=ee.castAsNonUtf8Char(C),x+=8}h=c}else{let y=h===De.DIGIT?4:5;if(l-x<y)break;let j=$e.readCode(i,x,y);x+=y;let C=$e.getCharacter(h,j);C.startsWith("CTRL_")?(c=h,h=$e.getTable(C.charAt(5)),C.charAt(6)==="L"&&(c=h)):(f+=C,h=c)}return f}static getTable(i){switch(i){case"L":return De.LOWER;case"P":return De.PUNCT;case"M":return De.MIXED;case"D":return De.DIGIT;case"B":return De.BINARY;case"U":default:return De.UPPER}}static getCharacter(i,l){switch(i){case De.UPPER:return $e.UPPER_TABLE[l];case De.LOWER:return $e.LOWER_TABLE[l];case De.MIXED:return $e.MIXED_TABLE[l];case De.PUNCT:return $e.PUNCT_TABLE[l];case De.DIGIT:return $e.DIGIT_TABLE[l];default:throw new Ze("Bad table")}}correctBits(i){let l,c;this.ddata.getNbLayers()<=2?(c=6,l=Te.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,l=Te.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,l=Te.AZTEC_DATA_10):(c=12,l=Te.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),f=i.length/c;if(f<h)throw new F;let x=i.length%c,y=new Int32Array(f);for(let H=0;H<f;H++,x+=c)y[H]=$e.readCode(i,x,c);try{new be(l).decode(y,f-h)}catch(H){throw new F(H)}let j=(1<<c)-1,C=0;for(let H=0;H<h;H++){let J=y[H];if(J===0||J===j)throw new F;(J===1||J===j-1)&&C++}let R=new Array(h*c-C),U=0;for(let H=0;H<h;H++){let J=y[H];if(J===1||J===j-1)R.fill(J>1,U,U+c-1),U+=c-1;else for(let q=c-1;q>=0;--q)R[U++]=(J&1<<q)!==0}return R}extractBits(i){let l=this.ddata.isCompact(),c=this.ddata.getNbLayers(),h=(l?11:14)+c*4,f=new Int32Array(h),x=new Array(this.totalBitsInLayer(c,l));if(l)for(let y=0;y<f.length;y++)f[y]=y;else{let y=h+1+2*O.truncDivision(O.truncDivision(h,2)-1,15),j=h/2,C=O.truncDivision(y,2);for(let R=0;R<j;R++){let U=R+O.truncDivision(R,15);f[j-R-1]=C-U-1,f[j+R]=C+U+1}}for(let y=0,j=0;y<c;y++){let C=(c-y)*4+(l?9:12),R=y*2,U=h-1-R;for(let H=0;H<C;H++){let J=H*2;for(let q=0;q<2;q++)x[j+J+q]=i.get(f[R+q],f[R+H]),x[j+2*C+J+q]=i.get(f[R+H],f[U-q]),x[j+4*C+J+q]=i.get(f[U-q],f[U-H]),x[j+6*C+J+q]=i.get(f[U-H],f[R+q])}j+=C*8}return x}static readCode(i,l,c){let h=0;for(let f=l;f<l+c;f++)h<<=1,i[f]&&(h|=1);return h}static readByte(i,l){let c=i.length-l;return c>=8?$e.readCode(i,l,8):$e.readCode(i,l,c)<<8-c}static convertBoolArrayToByteArray(i){let l=new Uint8Array((i.length+7)/8);for(let c=0;c<l.length;c++)l[c]=$e.readByte(i,8*c);return l}totalBitsInLayer(i,l){return((l?88:112)+16*i)*i}}$e.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],$e.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],$e.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],$e.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],$e.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ge{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,l,c,h){const f=i-c,x=l-h;return Math.sqrt(f*f+x*x)}static sum(i){let l=0;for(let c=0,h=i.length;c!==h;c++){const f=i[c];l+=f}return l}}class ae{static floatToIntBits(i){return i}}ae.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ye{constructor(i,l){this.x=i,this.y=l}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof ye){const l=i;return this.x===l.x&&this.y===l.y}return!1}hashCode(){return 31*ae.floatToIntBits(this.x)+ae.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const l=this.distance(i[0],i[1]),c=this.distance(i[1],i[2]),h=this.distance(i[0],i[2]);let f,x,y;if(c>=l&&c>=h?(x=i[0],f=i[1],y=i[2]):h>=c&&h>=l?(x=i[1],f=i[0],y=i[2]):(x=i[2],f=i[0],y=i[1]),this.crossProductZ(f,x,y)<0){const j=f;f=y,y=j}i[0]=f,i[1]=x,i[2]=y}static distance(i,l){return Ge.distance(i.x,i.y,l.x,l.y)}static crossProductZ(i,l,c){const h=l.x,f=l.y;return(c.x-h)*(i.y-f)-(c.y-f)*(i.x-h)}}class ie{constructor(i,l){this.bits=i,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class He extends ie{constructor(i,l,c,h,f){super(i,l),this.compact=c,this.nbDatablocks=h,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ee{constructor(i,l,c,h){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),l==null&&(l=Ee.INIT_SIZE),c==null&&(c=i.getWidth()/2|0),h==null&&(h=i.getHeight()/2|0);const f=l/2|0;if(this.leftInit=c-f,this.rightInit=c+f,this.upInit=h-f,this.downInit=h+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ne}detect(){let i=this.leftInit,l=this.rightInit,c=this.upInit,h=this.downInit,f=!1,x=!0,y=!1,j=!1,C=!1,R=!1,U=!1;const H=this.width,J=this.height;for(;x;){x=!1;let q=!0;for(;(q||!j)&&l<H;)q=this.containsBlackPoint(c,h,l,!1),q?(l++,x=!0,j=!0):j||l++;if(l>=H){f=!0;break}let G=!0;for(;(G||!C)&&h<J;)G=this.containsBlackPoint(i,l,h,!0),G?(h++,x=!0,C=!0):C||h++;if(h>=J){f=!0;break}let K=!0;for(;(K||!R)&&i>=0;)K=this.containsBlackPoint(c,h,i,!1),K?(i--,x=!0,R=!0):R||i--;if(i<0){f=!0;break}let le=!0;for(;(le||!U)&&c>=0;)le=this.containsBlackPoint(i,l,c,!0),le?(c--,x=!0,U=!0):U||c--;if(c<0){f=!0;break}x&&(y=!0)}if(!f&&y){const q=l-i;let G=null;for(let Me=1;G===null&&Me<q;Me++)G=this.getBlackPointOnSegment(i,h-Me,i+Me,h);if(G==null)throw new ne;let K=null;for(let Me=1;K===null&&Me<q;Me++)K=this.getBlackPointOnSegment(i,c+Me,i+Me,c);if(K==null)throw new ne;let le=null;for(let Me=1;le===null&&Me<q;Me++)le=this.getBlackPointOnSegment(l,c+Me,l-Me,c);if(le==null)throw new ne;let Ce=null;for(let Me=1;Ce===null&&Me<q;Me++)Ce=this.getBlackPointOnSegment(l,h-Me,l-Me,h);if(Ce==null)throw new ne;return this.centerEdges(Ce,G,le,K)}else throw new ne}getBlackPointOnSegment(i,l,c,h){const f=Ge.round(Ge.distance(i,l,c,h)),x=(c-i)/f,y=(h-l)/f,j=this.image;for(let C=0;C<f;C++){const R=Ge.round(i+C*x),U=Ge.round(l+C*y);if(j.get(R,U))return new ye(R,U)}return null}centerEdges(i,l,c,h){const f=i.getX(),x=i.getY(),y=l.getX(),j=l.getY(),C=c.getX(),R=c.getY(),U=h.getX(),H=h.getY(),J=Ee.CORR;return f<this.width/2?[new ye(U-J,H+J),new ye(y+J,j+J),new ye(C-J,R-J),new ye(f+J,x-J)]:[new ye(U+J,H+J),new ye(y+J,j-J),new ye(C-J,R+J),new ye(f-J,x-J)]}containsBlackPoint(i,l,c,h){const f=this.image;if(h){for(let x=i;x<=l;x++)if(f.get(x,c))return!0}else for(let x=i;x<=l;x++)if(f.get(c,x))return!0;return!1}}Ee.INIT_SIZE=10,Ee.CORR=1;class Fe{static checkAndNudgePoints(i,l){const c=i.getWidth(),h=i.getHeight();let f=!0;for(let x=0;x<l.length&&f;x+=2){const y=Math.floor(l[x]),j=Math.floor(l[x+1]);if(y<-1||y>c||j<-1||j>h)throw new ne;f=!1,y===-1?(l[x]=0,f=!0):y===c&&(l[x]=c-1,f=!0),j===-1?(l[x+1]=0,f=!0):j===h&&(l[x+1]=h-1,f=!0)}f=!0;for(let x=l.length-2;x>=0&&f;x-=2){const y=Math.floor(l[x]),j=Math.floor(l[x+1]);if(y<-1||y>c||j<-1||j>h)throw new ne;f=!1,y===-1?(l[x]=0,f=!0):y===c&&(l[x]=c-1,f=!0),j===-1?(l[x+1]=0,f=!0):j===h&&(l[x+1]=h-1,f=!0)}}}class ht{constructor(i,l,c,h,f,x,y,j,C){this.a11=i,this.a21=l,this.a31=c,this.a12=h,this.a22=f,this.a32=x,this.a13=y,this.a23=j,this.a33=C}static quadrilateralToQuadrilateral(i,l,c,h,f,x,y,j,C,R,U,H,J,q,G,K){const le=ht.quadrilateralToSquare(i,l,c,h,f,x,y,j);return ht.squareToQuadrilateral(C,R,U,H,J,q,G,K).times(le)}transformPoints(i){const l=i.length,c=this.a11,h=this.a12,f=this.a13,x=this.a21,y=this.a22,j=this.a23,C=this.a31,R=this.a32,U=this.a33;for(let H=0;H<l;H+=2){const J=i[H],q=i[H+1],G=f*J+j*q+U;i[H]=(c*J+x*q+C)/G,i[H+1]=(h*J+y*q+R)/G}}transformPointsWithValues(i,l){const c=this.a11,h=this.a12,f=this.a13,x=this.a21,y=this.a22,j=this.a23,C=this.a31,R=this.a32,U=this.a33,H=i.length;for(let J=0;J<H;J++){const q=i[J],G=l[J],K=f*q+j*G+U;i[J]=(c*q+x*G+C)/K,l[J]=(h*q+y*G+R)/K}}static squareToQuadrilateral(i,l,c,h,f,x,y,j){const C=i-c+f-y,R=l-h+x-j;if(C===0&&R===0)return new ht(c-i,f-c,i,h-l,x-h,l,0,0,1);{const U=c-f,H=y-f,J=h-x,q=j-x,G=U*q-H*J,K=(C*q-H*R)/G,le=(U*R-C*J)/G;return new ht(c-i+K*c,y-i+le*y,i,h-l+K*h,j-l+le*j,l,K,le,1)}}static quadrilateralToSquare(i,l,c,h,f,x,y,j){return ht.squareToQuadrilateral(i,l,c,h,f,x,y,j).buildAdjoint()}buildAdjoint(){return new ht(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new ht(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class Et extends Fe{sampleGrid(i,l,c,h,f,x,y,j,C,R,U,H,J,q,G,K,le,Ce,Me){const Re=ht.quadrilateralToQuadrilateral(h,f,x,y,j,C,R,U,H,J,q,G,K,le,Ce,Me);return this.sampleGridWithTransform(i,l,c,Re)}sampleGridWithTransform(i,l,c,h){if(l<=0||c<=0)throw new ne;const f=new ve(l,c),x=new Float32Array(2*l);for(let y=0;y<c;y++){const j=x.length,C=y+.5;for(let R=0;R<j;R+=2)x[R]=R/2+.5,x[R+1]=C;h.transformPoints(x),Fe.checkAndNudgePoints(i,x);try{for(let R=0;R<j;R+=2)i.get(Math.floor(x[R]),Math.floor(x[R+1]))&&f.set(R/2,y)}catch{throw new ne}}return f}}class en{static setGridSampler(i){en.gridSampler=i}static getInstance(){return en.gridSampler}}en.gridSampler=new Et;class Rt{constructor(i,l){this.x=i,this.y=l}toResultPoint(){return new ye(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Cr{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let l=this.getMatrixCenter(),c=this.getBullsEyeCorners(l);if(i){let x=c[0];c[0]=c[2],c[2]=x}this.extractParameters(c);let h=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),f=this.getMatrixCornerPoints(c);return new He(h,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new ne;let l=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(i[0],i[1],l),this.sampleLine(i[1],i[2],l),this.sampleLine(i[2],i[3],l),this.sampleLine(i[3],i[0],l)]);this.shift=this.getRotation(c,l);let h=0;for(let x=0;x<4;x++){let y=c[(this.shift+x)%4];this.compact?(h<<=7,h+=y>>1&127):(h<<=10,h+=(y>>2&992)+(y>>1&31))}let f=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(i,l){let c=0;i.forEach((h,f,x)=>{let y=(h>>l-2<<1)+(h&1);c=(c<<3)+y}),c=((c&1)<<11)+(c>>1);for(let h=0;h<4;h++)if(O.bitCount(c^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new ne}getCorrectedParameterData(i,l){let c,h;l?(c=7,h=2):(c=10,h=4);let f=c-h,x=new Int32Array(c);for(let j=c-1;j>=0;--j)x[j]=i&15,i>>=4;try{new be(Te.AZTEC_PARAM).decode(x,f)}catch{throw new ne}let y=0;for(let j=0;j<h;j++)y=(y<<4)+x[j];return y}getBullsEyeCorners(i){let l=i,c=i,h=i,f=i,x=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let U=this.getFirstDifferent(l,x,1,-1),H=this.getFirstDifferent(c,x,1,1),J=this.getFirstDifferent(h,x,-1,1),q=this.getFirstDifferent(f,x,-1,-1);if(this.nbCenterLayers>2){let G=this.distancePoint(q,U)*this.nbCenterLayers/(this.distancePoint(f,l)*(this.nbCenterLayers+2));if(G<.75||G>1.25||!this.isWhiteOrBlackRectangle(U,H,J,q))break}l=U,c=H,h=J,f=q,x=!x}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ne;this.compact=this.nbCenterLayers===5;let y=new ye(l.getX()+.5,l.getY()-.5),j=new ye(c.getX()+.5,c.getY()+.5),C=new ye(h.getX()-.5,h.getY()+.5),R=new ye(f.getX()-.5,f.getY()-.5);return this.expandSquare([y,j,C,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,l,c,h;try{let y=new Ee(this.image).detect();i=y[0],l=y[1],c=y[2],h=y[3]}catch{let j=this.image.getWidth()/2,C=this.image.getHeight()/2;i=this.getFirstDifferent(new Rt(j+7,C-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new Rt(j+7,C+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Rt(j-7,C+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Rt(j-7,C-7),!1,-1,-1).toResultPoint()}let f=Ge.round((i.getX()+h.getX()+l.getX()+c.getX())/4),x=Ge.round((i.getY()+h.getY()+l.getY()+c.getY())/4);try{let y=new Ee(this.image,15,f,x).detect();i=y[0],l=y[1],c=y[2],h=y[3]}catch{i=this.getFirstDifferent(new Rt(f+7,x-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new Rt(f+7,x+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Rt(f-7,x+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Rt(f-7,x-7),!1,-1,-1).toResultPoint()}return f=Ge.round((i.getX()+h.getX()+l.getX()+c.getX())/4),x=Ge.round((i.getY()+h.getY()+l.getY()+c.getY())/4),new Rt(f,x)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,l,c,h,f){let x=en.getInstance(),y=this.getDimension(),j=y/2-this.nbCenterLayers,C=y/2+this.nbCenterLayers;return x.sampleGrid(i,y,y,j,j,C,j,C,C,j,C,l.getX(),l.getY(),c.getX(),c.getY(),h.getX(),h.getY(),f.getX(),f.getY())}sampleLine(i,l,c){let h=0,f=this.distanceResultPoint(i,l),x=f/c,y=i.getX(),j=i.getY(),C=x*(l.getX()-i.getX())/f,R=x*(l.getY()-i.getY())/f;for(let U=0;U<c;U++)this.image.get(Ge.round(y+U*C),Ge.round(j+U*R))&&(h|=1<<c-U-1);return h}isWhiteOrBlackRectangle(i,l,c,h){let f=3;i=new Rt(i.getX()-f,i.getY()+f),l=new Rt(l.getX()-f,l.getY()-f),c=new Rt(c.getX()+f,c.getY()-f),h=new Rt(h.getX()+f,h.getY()+f);let x=this.getColor(h,i);if(x===0)return!1;let y=this.getColor(i,l);return y!==x||(y=this.getColor(l,c),y!==x)?!1:(y=this.getColor(c,h),y===x)}getColor(i,l){let c=this.distancePoint(i,l),h=(l.getX()-i.getX())/c,f=(l.getY()-i.getY())/c,x=0,y=i.getX(),j=i.getY(),C=this.image.get(i.getX(),i.getY()),R=Math.ceil(c);for(let H=0;H<R;H++)y+=h,j+=f,this.image.get(Ge.round(y),Ge.round(j))!==C&&x++;let U=x/c;return U>.1&&U<.9?0:U<=.1===C?1:-1}getFirstDifferent(i,l,c,h){let f=i.getX()+c,x=i.getY()+h;for(;this.isValid(f,x)&&this.image.get(f,x)===l;)f+=c,x+=h;for(f-=c,x-=h;this.isValid(f,x)&&this.image.get(f,x)===l;)f+=c;for(f-=c;this.isValid(f,x)&&this.image.get(f,x)===l;)x+=h;return x-=h,new Rt(f,x)}expandSquare(i,l,c){let h=c/(2*l),f=i[0].getX()-i[2].getX(),x=i[0].getY()-i[2].getY(),y=(i[0].getX()+i[2].getX())/2,j=(i[0].getY()+i[2].getY())/2,C=new ye(y+h*f,j+h*x),R=new ye(y-h*f,j-h*x);f=i[1].getX()-i[3].getX(),x=i[1].getY()-i[3].getY(),y=(i[1].getX()+i[3].getX())/2,j=(i[1].getY()+i[3].getY())/2;let U=new ye(y+h*f,j+h*x),H=new ye(y-h*f,j-h*x);return[C,U,R,H]}isValid(i,l){return i>=0&&i<this.image.getWidth()&&l>0&&l<this.image.getHeight()}isValidPoint(i){let l=Ge.round(i.getX()),c=Ge.round(i.getY());return this.isValid(l,c)}distancePoint(i,l){return Ge.distance(i.getX(),i.getY(),l.getX(),l.getY())}distanceResultPoint(i,l){return Ge.distance(i.getX(),i.getY(),l.getX(),l.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(O.truncDivision(this.nbLayers-4,8)+1)+15}}class Br{decode(i,l=null){let c=null,h=new Cr(i.getBlackMatrix()),f=null,x=null;try{let R=h.detectMirror(!1);f=R.getPoints(),this.reportFoundResultPoints(l,f),x=new $e().decode(R)}catch(R){c=R}if(x==null)try{let R=h.detectMirror(!0);f=R.getPoints(),this.reportFoundResultPoints(l,f),x=new $e().decode(R)}catch(R){throw c??R}let y=new Be(x.getText(),x.getRawBytes(),x.getNumBits(),f,Ae.AZTEC,I.currentTimeMillis()),j=x.getByteSegments();j!=null&&y.putMetadata(nt.BYTE_SEGMENTS,j);let C=x.getECLevel();return C!=null&&y.putMetadata(nt.ERROR_CORRECTION_LEVEL,C),y}reportFoundResultPoints(i,l){if(i!=null){let c=i.get(L.NEED_RESULT_POINT_CALLBACK);c!=null&&l.forEach((h,f,x)=>{c.foundPossibleResultPoint(h)})}}reset(){}}class Ts extends Ve{constructor(i=500){super(new Br,i)}}class tn{decode(i,l){try{return this.doDecode(i,l)}catch{if(l&&l.get(L.TRY_HARDER)===!0&&i.isRotateSupported()){const f=i.rotateCounterClockwise(),x=this.doDecode(f,l),y=x.getResultMetadata();let j=270;y!==null&&y.get(nt.ORIENTATION)===!0&&(j=j+y.get(nt.ORIENTATION)%360),x.putMetadata(nt.ORIENTATION,j);const C=x.getResultPoints();if(C!==null){const R=f.getHeight();for(let U=0;U<C.length;U++)C[U]=new ye(R-C[U].getY()-1,C[U].getX())}return x}else throw new ne}}reset(){}doDecode(i,l){const c=i.getWidth(),h=i.getHeight();let f=new P(c);const x=l&&l.get(L.TRY_HARDER)===!0,y=Math.max(1,h>>(x?8:5));let j;x?j=h:j=15;const C=Math.trunc(h/2);for(let R=0;R<j;R++){const U=Math.trunc((R+1)/2),H=(R&1)===0,J=C+y*(H?U:-U);if(J<0||J>=h)break;try{f=i.getBlackRow(J,f)}catch{continue}for(let q=0;q<2;q++){if(q===1&&(f.reverse(),l&&l.get(L.NEED_RESULT_POINT_CALLBACK)===!0)){const G=new Map;l.forEach((K,le)=>G.set(le,K)),G.delete(L.NEED_RESULT_POINT_CALLBACK),l=G}try{const G=this.decodeRow(J,f,l);if(q===1){G.putMetadata(nt.ORIENTATION,180);const K=G.getResultPoints();K!==null&&(K[0]=new ye(c-K[0].getX()-1,K[0].getY()),K[1]=new ye(c-K[1].getX()-1,K[1].getY()))}return G}catch{}}}throw new ne}static recordPattern(i,l,c){const h=c.length;for(let C=0;C<h;C++)c[C]=0;const f=i.getSize();if(l>=f)throw new ne;let x=!i.get(l),y=0,j=l;for(;j<f;){if(i.get(j)!==x)c[y]++;else{if(++y===h)break;c[y]=1,x=!x}j++}if(!(y===h||y===h-1&&j===f))throw new ne}static recordPatternInReverse(i,l,c){let h=c.length,f=i.get(l);for(;l>0&&h>=0;)i.get(--l)!==f&&(h--,f=!f);if(h>=0)throw new ne;tn.recordPattern(i,l+1,c)}static patternMatchVariance(i,l,c){const h=i.length;let f=0,x=0;for(let C=0;C<h;C++)f+=i[C],x+=l[C];if(f<x)return Number.POSITIVE_INFINITY;const y=f/x;c*=y;let j=0;for(let C=0;C<h;C++){const R=i[C],U=l[C]*y,H=R>U?R-U:U-R;if(H>c)return Number.POSITIVE_INFINITY;j+=H}return j/f}}class te extends tn{static findStartPattern(i){const l=i.getSize(),c=i.getNextSet(0);let h=0,f=Int32Array.from([0,0,0,0,0,0]),x=c,y=!1;const j=6;for(let C=c;C<l;C++)if(i.get(C)!==y)f[h]++;else{if(h===j-1){let R=te.MAX_AVG_VARIANCE,U=-1;for(let H=te.CODE_START_A;H<=te.CODE_START_C;H++){const J=tn.patternMatchVariance(f,te.CODE_PATTERNS[H],te.MAX_INDIVIDUAL_VARIANCE);J<R&&(R=J,U=H)}if(U>=0&&i.isRange(Math.max(0,x-(C-x)/2),x,!1))return Int32Array.from([x,C,U]);x+=f[0]+f[1],f=f.slice(2,f.length-1),f[h-1]=0,f[h]=0,h--}else h++;f[h]=1,y=!y}throw new ne}static decodeCode(i,l,c){tn.recordPattern(i,c,l);let h=te.MAX_AVG_VARIANCE,f=-1;for(let x=0;x<te.CODE_PATTERNS.length;x++){const y=te.CODE_PATTERNS[x],j=this.patternMatchVariance(l,y,te.MAX_INDIVIDUAL_VARIANCE);j<h&&(h=j,f=x)}if(f>=0)return f;throw new ne}decodeRow(i,l,c){const h=c&&c.get(L.ASSUME_GS1)===!0,f=te.findStartPattern(l),x=f[2];let y=0;const j=new Uint8Array(20);j[y++]=x;let C;switch(x){case te.CODE_START_A:C=te.CODE_CODE_A;break;case te.CODE_START_B:C=te.CODE_CODE_B;break;case te.CODE_START_C:C=te.CODE_CODE_C;break;default:throw new F}let R=!1,U=!1,H="",J=f[0],q=f[1];const G=Int32Array.from([0,0,0,0,0,0]);let K=0,le=0,Ce=x,Me=0,Re=!0,it=!1,jt=!1;for(;!R;){const Ht=U;switch(U=!1,K=le,le=te.decodeCode(l,G,q),j[y++]=le,le!==te.CODE_STOP&&(Re=!0),le!==te.CODE_STOP&&(Me++,Ce+=Me*le),J=q,q+=G.reduce((Op,n0)=>Op+n0,0),le){case te.CODE_START_A:case te.CODE_START_B:case te.CODE_START_C:throw new F}switch(C){case te.CODE_CODE_A:if(le<64)jt===it?H+=String.fromCharCode(" ".charCodeAt(0)+le):H+=String.fromCharCode(" ".charCodeAt(0)+le+128),jt=!1;else if(le<96)jt===it?H+=String.fromCharCode(le-64):H+=String.fromCharCode(le+64),jt=!1;else switch(le!==te.CODE_STOP&&(Re=!1),le){case te.CODE_FNC_1:h&&(H.length===0?H+="]C1":H+=String.fromCharCode(29));break;case te.CODE_FNC_2:case te.CODE_FNC_3:break;case te.CODE_FNC_4_A:!it&&jt?(it=!0,jt=!1):it&&jt?(it=!1,jt=!1):jt=!0;break;case te.CODE_SHIFT:U=!0,C=te.CODE_CODE_B;break;case te.CODE_CODE_B:C=te.CODE_CODE_B;break;case te.CODE_CODE_C:C=te.CODE_CODE_C;break;case te.CODE_STOP:R=!0;break}break;case te.CODE_CODE_B:if(le<96)jt===it?H+=String.fromCharCode(" ".charCodeAt(0)+le):H+=String.fromCharCode(" ".charCodeAt(0)+le+128),jt=!1;else switch(le!==te.CODE_STOP&&(Re=!1),le){case te.CODE_FNC_1:h&&(H.length===0?H+="]C1":H+=String.fromCharCode(29));break;case te.CODE_FNC_2:case te.CODE_FNC_3:break;case te.CODE_FNC_4_B:!it&&jt?(it=!0,jt=!1):it&&jt?(it=!1,jt=!1):jt=!0;break;case te.CODE_SHIFT:U=!0,C=te.CODE_CODE_A;break;case te.CODE_CODE_A:C=te.CODE_CODE_A;break;case te.CODE_CODE_C:C=te.CODE_CODE_C;break;case te.CODE_STOP:R=!0;break}break;case te.CODE_CODE_C:if(le<100)le<10&&(H+="0"),H+=le;else switch(le!==te.CODE_STOP&&(Re=!1),le){case te.CODE_FNC_1:h&&(H.length===0?H+="]C1":H+=String.fromCharCode(29));break;case te.CODE_CODE_A:C=te.CODE_CODE_A;break;case te.CODE_CODE_B:C=te.CODE_CODE_B;break;case te.CODE_STOP:R=!0;break}break}Ht&&(C=C===te.CODE_CODE_A?te.CODE_CODE_B:te.CODE_CODE_A)}const Ar=q-J;if(q=l.getNextUnset(q),!l.isRange(q,Math.min(l.getSize(),q+(q-J)/2),!1))throw new ne;if(Ce-=Me*K,Ce%103!==K)throw new E;const _n=H.length;if(_n===0)throw new ne;_n>0&&Re&&(C===te.CODE_CODE_C?H=H.substring(0,_n-2):H=H.substring(0,_n-1));const ar=(f[1]+f[0])/2,un=J+Ar/2,En=j.length,fr=new Uint8Array(En);for(let Ht=0;Ht<En;Ht++)fr[Ht]=j[Ht];const ta=[new ye(ar,i),new ye(un,i)];return new Be(H,fr,0,ta,Ae.CODE_128,new Date().getTime())}}te.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],te.MAX_AVG_VARIANCE=.25,te.MAX_INDIVIDUAL_VARIANCE=.7,te.CODE_SHIFT=98,te.CODE_CODE_C=99,te.CODE_CODE_B=100,te.CODE_CODE_A=101,te.CODE_FNC_1=102,te.CODE_FNC_2=97,te.CODE_FNC_3=96,te.CODE_FNC_4_A=101,te.CODE_FNC_4_B=100,te.CODE_START_A=103,te.CODE_START_B=104,te.CODE_START_C=105,te.CODE_STOP=106;class Je extends tn{constructor(i=!1,l=!1){super(),this.usingCheckDigit=i,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,l,c){let h=this.counters;h.fill(0),this.decodeRowResult="";let f=Je.findAsteriskPattern(l,h),x=l.getNextSet(f[1]),y=l.getSize(),j,C;do{Je.recordPattern(l,x,h);let G=Je.toNarrowWidePattern(h);if(G<0)throw new ne;j=Je.patternToChar(G),this.decodeRowResult+=j,C=x;for(let K of h)x+=K;x=l.getNextSet(x)}while(j!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let G of h)R+=G;let U=x-C-R;if(x!==y&&U*2<R)throw new ne;if(this.usingCheckDigit){let G=this.decodeRowResult.length-1,K=0;for(let le=0;le<G;le++)K+=Je.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(le));if(this.decodeRowResult.charAt(G)!==Je.ALPHABET_STRING.charAt(K%43))throw new E;this.decodeRowResult=this.decodeRowResult.substring(0,G)}if(this.decodeRowResult.length===0)throw new ne;let H;this.extendedMode?H=Je.decodeExtended(this.decodeRowResult):H=this.decodeRowResult;let J=(f[1]+f[0])/2,q=C+R/2;return new Be(H,null,0,[new ye(J,i),new ye(q,i)],Ae.CODE_39,new Date().getTime())}static findAsteriskPattern(i,l){let c=i.getSize(),h=i.getNextSet(0),f=0,x=h,y=!1,j=l.length;for(let C=h;C<c;C++)if(i.get(C)!==y)l[f]++;else{if(f===j-1){if(this.toNarrowWidePattern(l)===Je.ASTERISK_ENCODING&&i.isRange(Math.max(0,x-Math.floor((C-x)/2)),x,!1))return[x,C];x+=l[0]+l[1],l.copyWithin(0,2,2+f-1),l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,y=!y}throw new ne}static toNarrowWidePattern(i){let l=i.length,c=0,h;do{let f=2147483647;for(let j of i)j<f&&j>c&&(f=j);c=f,h=0;let x=0,y=0;for(let j=0;j<l;j++){let C=i[j];C>c&&(y|=1<<l-1-j,h++,x+=C)}if(h===3){for(let j=0;j<l&&h>0;j++){let C=i[j];if(C>c&&(h--,C*2>=x))return-1}return y}}while(h>3);return-1}static patternToChar(i){for(let l=0;l<Je.CHARACTER_ENCODINGS.length;l++)if(Je.CHARACTER_ENCODINGS[l]===i)return Je.ALPHABET_STRING.charAt(l);if(i===Je.ASTERISK_ENCODING)return"*";throw new ne}static decodeExtended(i){let l=i.length,c="";for(let h=0;h<l;h++){let f=i.charAt(h);if(f==="+"||f==="$"||f==="%"||f==="/"){let x=i.charAt(h+1),y="\0";switch(f){case"+":if(x>="A"&&x<="Z")y=String.fromCharCode(x.charCodeAt(0)+32);else throw new F;break;case"$":if(x>="A"&&x<="Z")y=String.fromCharCode(x.charCodeAt(0)-64);else throw new F;break;case"%":if(x>="A"&&x<="E")y=String.fromCharCode(x.charCodeAt(0)-38);else if(x>="F"&&x<="J")y=String.fromCharCode(x.charCodeAt(0)-11);else if(x>="K"&&x<="O")y=String.fromCharCode(x.charCodeAt(0)+16);else if(x>="P"&&x<="T")y=String.fromCharCode(x.charCodeAt(0)+43);else if(x==="U")y="\0";else if(x==="V")y="@";else if(x==="W")y="`";else if(x==="X"||x==="Y"||x==="Z")y="";else throw new F;break;case"/":if(x>="A"&&x<="O")y=String.fromCharCode(x.charCodeAt(0)-32);else if(x==="Z")y=":";else throw new F;break}c+=y,h++}else c+=f}return c}}Je.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Je.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Je.ASTERISK_ENCODING=148;class ft extends tn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,l,c){let h=this.decodeStart(l),f=this.decodeEnd(l),x=new he;ft.decodeMiddle(l,h[1],f[0],x);let y=x.toString(),j=null;c!=null&&(j=c.get(L.ALLOWED_LENGTHS)),j==null&&(j=ft.DEFAULT_ALLOWED_LENGTHS);let C=y.length,R=!1,U=0;for(let q of j){if(C===q){R=!0;break}q>U&&(U=q)}if(!R&&C>U&&(R=!0),!R)throw new F;const H=[new ye(h[1],i),new ye(f[0],i)];return new Be(y,null,0,H,Ae.ITF,new Date().getTime())}static decodeMiddle(i,l,c,h){let f=new Int32Array(10),x=new Int32Array(5),y=new Int32Array(5);for(f.fill(0),x.fill(0),y.fill(0);l<c;){tn.recordPattern(i,l,f);for(let C=0;C<5;C++){let R=2*C;x[C]=f[R],y[C]=f[R+1]}let j=ft.decodeDigit(x);h.append(j.toString()),j=this.decodeDigit(y),h.append(j.toString()),f.forEach(function(C){l+=C})}}decodeStart(i){let l=ft.skipWhiteSpace(i),c=ft.findGuardPattern(i,l,ft.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(i,c[0]),c}validateQuietZone(i,l){let c=this.narrowLineWidth*10;c=c<l?c:l;for(let h=l-1;c>0&&h>=0&&!i.get(h);h--)c--;if(c!==0)throw new ne}static skipWhiteSpace(i){const l=i.getSize(),c=i.getNextSet(0);if(c===l)throw new ne;return c}decodeEnd(i){i.reverse();try{let l=ft.skipWhiteSpace(i),c;try{c=ft.findGuardPattern(i,l,ft.END_PATTERN_REVERSED[0])}catch(f){f instanceof ne&&(c=ft.findGuardPattern(i,l,ft.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,c[0]);let h=c[0];return c[0]=i.getSize()-c[1],c[1]=i.getSize()-h,c}finally{i.reverse()}}static findGuardPattern(i,l,c){let h=c.length,f=new Int32Array(h),x=i.getSize(),y=!1,j=0,C=l;f.fill(0);for(let R=l;R<x;R++)if(i.get(R)!==y)f[j]++;else{if(j===h-1){if(tn.patternMatchVariance(f,c,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE)return[C,R];C+=f[0]+f[1],I.arraycopy(f,2,f,0,j-1),f[j-1]=0,f[j]=0,j--}else j++;f[j]=1,y=!y}throw new ne}static decodeDigit(i){let l=ft.MAX_AVG_VARIANCE,c=-1,h=ft.PATTERNS.length;for(let f=0;f<h;f++){let x=ft.PATTERNS[f],y=tn.patternMatchVariance(i,x,ft.MAX_INDIVIDUAL_VARIANCE);y<l?(l=y,c=f):y===l&&(c=-1)}if(c>=0)return c%10;throw new ne}}ft.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ft.MAX_AVG_VARIANCE=.38,ft.MAX_INDIVIDUAL_VARIANCE=.5,ft.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ft.START_PATTERN=Int32Array.from([1,1,1,1]),ft.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class It extends tn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let l=!1,c,h=0,f=Int32Array.from([0,0,0]);for(;!l;){f=Int32Array.from([0,0,0]),c=It.findGuardPattern(i,h,!1,this.START_END_PATTERN,f);let x=c[0];h=c[1];let y=x-(h-x);y>=0&&(l=i.isRange(y,x,!1))}return c}static checkChecksum(i){return It.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let l=i.length;if(l===0)return!1;let c=parseInt(i.charAt(l-1),10);return It.getStandardUPCEANChecksum(i.substring(0,l-1))===c}static getStandardUPCEANChecksum(i){let l=i.length,c=0;for(let h=l-1;h>=0;h-=2){let f=i.charAt(h).charCodeAt(0)-"0".charCodeAt(0);if(f<0||f>9)throw new F;c+=f}c*=3;for(let h=l-2;h>=0;h-=2){let f=i.charAt(h).charCodeAt(0)-"0".charCodeAt(0);if(f<0||f>9)throw new F;c+=f}return(1e3-c)%10}static decodeEnd(i,l){return It.findGuardPattern(i,l,!1,It.START_END_PATTERN,new Int32Array(It.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,l,c,h){return this.findGuardPattern(i,l,c,h,new Int32Array(h.length))}static findGuardPattern(i,l,c,h,f){let x=i.getSize();l=c?i.getNextUnset(l):i.getNextSet(l);let y=0,j=l,C=h.length,R=c;for(let U=l;U<x;U++)if(i.get(U)!==R)f[y]++;else{if(y===C-1){if(tn.patternMatchVariance(f,h,It.MAX_INDIVIDUAL_VARIANCE)<It.MAX_AVG_VARIANCE)return Int32Array.from([j,U]);j+=f[0]+f[1];let H=f.slice(2,f.length-1);for(let J=0;J<y-1;J++)f[J]=H[J];f[y-1]=0,f[y]=0,y--}else y++;f[y]=1,R=!R}throw new ne}static decodeDigit(i,l,c,h){this.recordPattern(i,c,l);let f=this.MAX_AVG_VARIANCE,x=-1,y=h.length;for(let j=0;j<y;j++){let C=h[j],R=tn.patternMatchVariance(l,C,It.MAX_INDIVIDUAL_VARIANCE);R<f&&(f=R,x=j)}if(x>=0)return x;throw new ne}}It.MAX_AVG_VARIANCE=.48,It.MAX_INDIVIDUAL_VARIANCE=.7,It.START_END_PATTERN=Int32Array.from([1,1,1]),It.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),It.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),It.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class on{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,l,c){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(l,c,h),x=h.toString(),y=on.parseExtensionString(x),j=[new ye((c[0]+c[1])/2,i),new ye(f,i)],C=new Be(x,null,0,j,Ae.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&C.putAllMetadata(y),C}decodeMiddle(i,l,c){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),x=l[1],y=0;for(let C=0;C<5&&x<f;C++){let R=It.decodeDigit(i,h,x,It.L_AND_G_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+R%10);for(let U of h)x+=U;R>=10&&(y|=1<<4-C),C!==4&&(x=i.getNextSet(x),x=i.getNextUnset(x))}if(c.length!==5)throw new ne;let j=this.determineCheckDigit(y);if(on.extensionChecksum(c.toString())!==j)throw new ne;return x}static extensionChecksum(i){let l=i.length,c=0;for(let h=l-2;h>=0;h-=2)c+=i.charAt(h).charCodeAt(0)-"0".charCodeAt(0);c*=3;for(let h=l-1;h>=0;h-=2)c+=i.charAt(h).charCodeAt(0)-"0".charCodeAt(0);return c*=3,c%10}determineCheckDigit(i){for(let l=0;l<10;l++)if(i===this.CHECK_DIGIT_ENCODINGS[l])return l;throw new ne}static parseExtensionString(i){if(i.length!==5)return null;let l=on.parseExtension5String(i);return l==null?null:new Map([[nt.SUGGESTED_PRICE,l]])}static parseExtension5String(i){let l;switch(i.charAt(0)){case"0":l="";break;case"5":l="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}l="";break;default:l="";break}let c=parseInt(i.substring(1)),h=(c/100).toString(),f=c%100,x=f<10?"0"+f:f.toString();return l+h+"."+x}}class Ur{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,l,c){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(l,c,h),x=h.toString(),y=Ur.parseExtensionString(x),j=[new ye((c[0]+c[1])/2,i),new ye(f,i)],C=new Be(x,null,0,j,Ae.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&C.putAllMetadata(y),C}decodeMiddle(i,l,c){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),x=l[1],y=0;for(let j=0;j<2&&x<f;j++){let C=It.decodeDigit(i,h,x,It.L_AND_G_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+C%10);for(let R of h)x+=R;C>=10&&(y|=1<<1-j),j!==1&&(x=i.getNextSet(x),x=i.getNextUnset(x))}if(c.length!==2)throw new ne;if(parseInt(c.toString())%4!==y)throw new ne;return x}static parseExtensionString(i){return i.length!==2?null:new Map([[nt.ISSUE_NUMBER,parseInt(i)]])}}class Co{static decodeRow(i,l,c){let h=It.findGuardPattern(l,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new on().decodeRow(i,l,h)}catch{return new Ur().decodeRow(i,l,h)}}}Co.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Wt extends It{constructor(){super(),this.decodeRowStringBuffer="",Wt.L_AND_G_PATTERNS=Wt.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let l=Wt.L_PATTERNS[i-10],c=new Int32Array(l.length);for(let h=0;h<l.length;h++)c[h]=l[l.length-h-1];Wt.L_AND_G_PATTERNS[i]=c}}decodeRow(i,l,c){let h=Wt.findStartGuardPattern(l),f=c==null?null:c.get(L.NEED_RESULT_POINT_CALLBACK);if(f!=null){const Re=new ye((h[0]+h[1])/2,i);f.foundPossibleResultPoint(Re)}let x=this.decodeMiddle(l,h,this.decodeRowStringBuffer),y=x.rowOffset,j=x.resultString;if(f!=null){const Re=new ye(y,i);f.foundPossibleResultPoint(Re)}let C=this.decodeEnd(l,y);if(f!=null){const Re=new ye((C[0]+C[1])/2,i);f.foundPossibleResultPoint(Re)}let R=C[1],U=R+(R-C[0]);if(U>=l.getSize()||!l.isRange(R,U,!1))throw new ne;let H=j.toString();if(H.length<8)throw new F;if(!Wt.checkChecksum(H))throw new E;let J=(h[1]+h[0])/2,q=(C[1]+C[0])/2,G=this.getBarcodeFormat(),K=[new ye(J,i),new ye(q,i)],le=new Be(H,null,0,K,G,new Date().getTime()),Ce=0;try{let Re=Co.decodeRow(i,l,C[1]);le.putMetadata(nt.UPC_EAN_EXTENSION,Re.getText()),le.putAllMetadata(Re.getResultMetadata()),le.addResultPoints(Re.getResultPoints()),Ce=Re.getText().length}catch{}let Me=c==null?null:c.get(L.ALLOWED_EAN_EXTENSIONS);if(Me!=null){let Re=!1;for(let it in Me)if(Ce.toString()===it){Re=!0;break}if(!Re)throw new ne}return le}decodeEnd(i,l){return Wt.findGuardPattern(i,l,!1,Wt.START_END_PATTERN,new Int32Array(Wt.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return Wt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let l=i.length;if(l===0)return!1;let c=parseInt(i.charAt(l-1),10);return Wt.getStandardUPCEANChecksum(i.substring(0,l-1))===c}static getStandardUPCEANChecksum(i){let l=i.length,c=0;for(let h=l-1;h>=0;h-=2){let f=i.charAt(h).charCodeAt(0)-"0".charCodeAt(0);if(f<0||f>9)throw new F;c+=f}c*=3;for(let h=l-2;h>=0;h-=2){let f=i.charAt(h).charCodeAt(0)-"0".charCodeAt(0);if(f<0||f>9)throw new F;c+=f}return(1e3-c)%10}}class ya extends Wt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,l,c){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),x=l[1],y=0;for(let C=0;C<6&&x<f;C++){let R=Wt.decodeDigit(i,h,x,Wt.L_AND_G_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+R%10);for(let U of h)x+=U;R>=10&&(y|=1<<5-C)}c=ya.determineFirstDigit(c,y),x=Wt.findGuardPattern(i,x,!0,Wt.MIDDLE_PATTERN,new Int32Array(Wt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&x<f;C++){let R=Wt.decodeDigit(i,h,x,Wt.L_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+R);for(let U of h)x+=U}return{rowOffset:x,resultString:c}}getBarcodeFormat(){return Ae.EAN_13}static determineFirstDigit(i,l){for(let c=0;c<10;c++)if(l===this.FIRST_DIGIT_ENCODINGS[c])return i=String.fromCharCode("0".charCodeAt(0)+c)+i,i;throw new ne}}ya.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Uu extends Wt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,l,c){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),x=l[1];for(let j=0;j<4&&x<f;j++){let C=Wt.decodeDigit(i,h,x,Wt.L_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+C);for(let R of h)x+=R}x=Wt.findGuardPattern(i,x,!0,Wt.MIDDLE_PATTERN,new Int32Array(Wt.MIDDLE_PATTERN.length).fill(0))[1];for(let j=0;j<4&&x<f;j++){let C=Wt.decodeDigit(i,h,x,Wt.L_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+C);for(let R of h)x+=R}return{rowOffset:x,resultString:c}}getBarcodeFormat(){return Ae.EAN_8}}class zu extends Wt{constructor(){super(...arguments),this.ean13Reader=new ya}getBarcodeFormat(){return Ae.UPC_A}decode(i,l){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,l,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,l,c))}decodeMiddle(i,l,c){return this.ean13Reader.decodeMiddle(i,l,c)}maybeReturnResult(i){let l=i.getText();if(l.charAt(0)==="0"){let c=new Be(l.substring(1),null,null,i.getResultPoints(),Ae.UPC_A);return i.getResultMetadata()!=null&&c.putAllMetadata(i.getResultMetadata()),c}else throw new ne}reset(){this.ean13Reader.reset()}}class hs extends Wt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,l,c){const h=this.decodeMiddleCounters.map(C=>C);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const f=i.getSize();let x=l[1],y=0;for(let C=0;C<6&&x<f;C++){const R=hs.decodeDigit(i,h,x,hs.L_AND_G_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+R%10);for(let U of h)x+=U;R>=10&&(y|=1<<5-C)}let j=hs.determineNumSysAndCheckDigit(c,y);return{rowOffset:x,resultString:j}}decodeEnd(i,l){return hs.findGuardPatternWithoutCounters(i,l,!0,hs.MIDDLE_END_PATTERN)}checkChecksum(i){return Wt.checkChecksum(hs.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,l){for(let c=0;c<=1;c++)for(let h=0;h<10;h++)if(l===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][h]){let f=String.fromCharCode("0".charCodeAt(0)+c),x=String.fromCharCode("0".charCodeAt(0)+h);return f+i+x}throw ne.getNotFoundInstance()}getBarcodeFormat(){return Ae.UPC_E}static convertUPCEtoUPCA(i){const l=i.slice(1,7).split("").map(f=>f.charCodeAt(0)),c=new he;c.append(i.charAt(0));let h=l[5];switch(h){case 0:case 1:case 2:c.appendChars(l,0,2),c.append(h),c.append("0000"),c.appendChars(l,2,3);break;case 3:c.appendChars(l,0,3),c.append("00000"),c.appendChars(l,3,2);break;case 4:c.appendChars(l,0,4),c.append("00000"),c.append(l[4]);break;default:c.appendChars(l,0,5),c.append("0000"),c.append(h);break}return i.length>=8&&c.append(i.charAt(7)),c.toString()}}hs.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),hs.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Yc extends tn{constructor(i){super();let l=i==null?null:i.get(L.POSSIBLE_FORMATS),c=[];r(l)?(c.push(new ya),c.push(new zu),c.push(new Uu),c.push(new hs)):(l.indexOf(Ae.EAN_13)>-1&&c.push(new ya),l.indexOf(Ae.UPC_A)>-1&&c.push(new zu),l.indexOf(Ae.EAN_8)>-1&&c.push(new Uu),l.indexOf(Ae.UPC_E)>-1&&c.push(new hs)),this.readers=c}decodeRow(i,l,c){for(let h of this.readers)try{const f=h.decodeRow(i,l,c),x=f.getBarcodeFormat()===Ae.EAN_13&&f.getText().charAt(0)==="0",y=c==null?null:c.get(L.POSSIBLE_FORMATS),j=y==null||y.includes(Ae.UPC_A);if(x&&j){const C=f.getRawBytes(),R=new Be(f.getText().substring(1),C,C?C.length:null,f.getResultPoints(),Ae.UPC_A);return R.putAllMetadata(f.getResultMetadata()),R}return f}catch{}throw new ne}reset(){for(let i of this.readers)i.reset()}}class nr extends tn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,l){for(let c=0;c<l.length;c++)if(tn.patternMatchVariance(i,l[c],nr.MAX_INDIVIDUAL_VARIANCE)<nr.MAX_AVG_VARIANCE)return c;throw new ne}static count(i){return Ge.sum(new Int32Array(i))}static increment(i,l){let c=0,h=l[0];for(let f=1;f<i.length;f++)l[f]>h&&(h=l[f],c=f);i[c]++}static decrement(i,l){let c=0,h=l[0];for(let f=1;f<i.length;f++)l[f]<h&&(h=l[f],c=f);i[c]--}static isFinderPattern(i){let l=i[0]+i[1],c=l+i[2]+i[3],h=l/c;if(h>=nr.MIN_FINDER_PATTERN_RATIO&&h<=nr.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER;for(let y of i)y>x&&(x=y),y<f&&(f=y);return x<10*f}return!1}}nr.MAX_AVG_VARIANCE=.2,nr.MAX_INDIVIDUAL_VARIANCE=.45,nr.MIN_FINDER_PATTERN_RATIO=9.5/12,nr.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ai{constructor(i,l){this.value=i,this.checksumPortion=l}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof Ai))return!1;const l=i;return this.value===l.value&&this.checksumPortion===l.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class jl{constructor(i,l,c,h,f){this.value=i,this.startEnd=l,this.value=i,this.startEnd=l,this.resultPoints=new Array,this.resultPoints.push(new ye(c,f)),this.resultPoints.push(new ye(h,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof jl))return!1;const l=i;return this.value===l.value}hashCode(){return this.value}}class Ds{constructor(){}static getRSSvalue(i,l,c){let h=0;for(let j of i)h+=j;let f=0,x=0,y=i.length;for(let j=0;j<y-1;j++){let C;for(C=1,x|=1<<j;C<i[j];C++,x&=~(1<<j)){let R=Ds.combins(h-C-1,y-j-2);if(c&&x===0&&h-C-(y-j-1)>=y-j-1&&(R-=Ds.combins(h-C-(y-j),y-j-2)),y-j-1>1){let U=0;for(let H=h-C-(y-j-2);H>l;H--)U+=Ds.combins(h-C-H-1,y-j-3);R-=U*(y-1-j)}else h-C>l&&R--;f+=R}h-=C}return f}static combins(i,l){let c,h;i-l>l?(h=l,c=i-l):(h=i-l,c=l);let f=1,x=1;for(let y=i;y>c;y--)f*=y,x<=h&&(f/=x,x++);for(;x<=h;)f/=x,x++;return f}}class Qc{static buildBitArray(i){let l=i.length*2-1;i[i.length-1].getRightChar()==null&&(l-=1);let c=12*l,h=new P(c),f=0,y=i[0].getRightChar().getValue();for(let j=11;j>=0;--j)y&1<<j&&h.set(f),f++;for(let j=1;j<i.length;++j){let C=i[j],R=C.getLeftChar().getValue();for(let U=11;U>=0;--U)R&1<<U&&h.set(f),f++;if(C.getRightChar()!=null){let U=C.getRightChar().getValue();for(let H=11;H>=0;--H)U&1<<H&&h.set(f),f++}}return h}}class qa{constructor(i,l){l?this.decodedInformation=null:(this.finished=i,this.decodedInformation=l)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class _o{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class _r extends _o{constructor(i,l){super(i),this.value=l}getValue(){return this.value}isFNC1(){return this.value===_r.FNC1}}_r.FNC1="$";class Wa extends _o{constructor(i,l,c){super(i),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=l}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Jr extends _o{constructor(i,l,c){if(super(i),l<0||l>10||c<0||c>10)throw new F;this.firstDigit=l,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Jr.FNC1}isSecondDigitFNC1(){return this.secondDigit===Jr.FNC1}isAnyFNC1(){return this.firstDigit===Jr.FNC1||this.secondDigit===Jr.FNC1}}Jr.FNC1=10;class et{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new ne;let l=i.substring(0,2);for(let f of et.TWO_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===et.VARIABLE_LENGTH?et.processVariableAI(2,f[2],i):et.processFixedAI(2,f[1],i);if(i.length<3)throw new ne;let c=i.substring(0,3);for(let f of et.THREE_DIGIT_DATA_LENGTH)if(f[0]===c)return f[1]===et.VARIABLE_LENGTH?et.processVariableAI(3,f[2],i):et.processFixedAI(3,f[1],i);for(let f of et.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===c)return f[1]===et.VARIABLE_LENGTH?et.processVariableAI(4,f[2],i):et.processFixedAI(4,f[1],i);if(i.length<4)throw new ne;let h=i.substring(0,4);for(let f of et.FOUR_DIGIT_DATA_LENGTH)if(f[0]===h)return f[1]===et.VARIABLE_LENGTH?et.processVariableAI(4,f[2],i):et.processFixedAI(4,f[1],i);throw new ne}static processFixedAI(i,l,c){if(c.length<i)throw new ne;let h=c.substring(0,i);if(c.length<i+l)throw new ne;let f=c.substring(i,i+l),x=c.substring(i+l),y="("+h+")"+f,j=et.parseFieldsInGeneralPurpose(x);return j==null?y:y+j}static processVariableAI(i,l,c){let h=c.substring(0,i),f;c.length<i+l?f=c.length:f=i+l;let x=c.substring(i,f),y=c.substring(f),j="("+h+")"+x,C=et.parseFieldsInGeneralPurpose(y);return C==null?j:j+C}}et.VARIABLE_LENGTH=[],et.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",et.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",et.VARIABLE_LENGTH,20],["22",et.VARIABLE_LENGTH,29],["30",et.VARIABLE_LENGTH,8],["37",et.VARIABLE_LENGTH,8],["90",et.VARIABLE_LENGTH,30],["91",et.VARIABLE_LENGTH,30],["92",et.VARIABLE_LENGTH,30],["93",et.VARIABLE_LENGTH,30],["94",et.VARIABLE_LENGTH,30],["95",et.VARIABLE_LENGTH,30],["96",et.VARIABLE_LENGTH,30],["97",et.VARIABLE_LENGTH,3],["98",et.VARIABLE_LENGTH,30],["99",et.VARIABLE_LENGTH,30]],et.THREE_DIGIT_DATA_LENGTH=[["240",et.VARIABLE_LENGTH,30],["241",et.VARIABLE_LENGTH,30],["242",et.VARIABLE_LENGTH,6],["250",et.VARIABLE_LENGTH,30],["251",et.VARIABLE_LENGTH,30],["253",et.VARIABLE_LENGTH,17],["254",et.VARIABLE_LENGTH,20],["400",et.VARIABLE_LENGTH,30],["401",et.VARIABLE_LENGTH,30],["402",17],["403",et.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",et.VARIABLE_LENGTH,20],["421",et.VARIABLE_LENGTH,15],["422",3],["423",et.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],et.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",et.VARIABLE_LENGTH,15],["391",et.VARIABLE_LENGTH,18],["392",et.VARIABLE_LENGTH,15],["393",et.VARIABLE_LENGTH,18],["703",et.VARIABLE_LENGTH,30]],et.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",et.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",et.VARIABLE_LENGTH,20],["8003",et.VARIABLE_LENGTH,30],["8004",et.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",et.VARIABLE_LENGTH,30],["8008",et.VARIABLE_LENGTH,12],["8018",18],["8020",et.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",et.VARIABLE_LENGTH,70],["8200",et.VARIABLE_LENGTH,70]];class Ti{constructor(i){this.buffer=new he,this.information=i}decodeAllCodes(i,l){let c=l,h=null;do{let f=this.decodeGeneralPurposeField(c,h),x=et.parseFieldsInGeneralPurpose(f.getNewString());if(x!=null&&i.append(x),f.isRemaining()?h=""+f.getRemainingValue():h=null,c===f.getNewPosition())break;c=f.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let l=i;l<i+3;++l)if(this.information.get(l))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(i,4);return f===0?new Jr(this.information.getSize(),Jr.FNC1,Jr.FNC1):new Jr(this.information.getSize(),f-1,Jr.FNC1)}let l=this.extractNumericValueFromBitArray(i,7),c=(l-8)/11,h=(l-8)%11;return new Jr(i+7,c,h)}extractNumericValueFromBitArray(i,l){return Ti.extractNumericValueFromBitArray(this.information,i,l)}static extractNumericValueFromBitArray(i,l,c){let h=0;for(let f=0;f<c;++f)i.get(l+f)&&(h|=1<<c-f-1);return h}decodeGeneralPurposeField(i,l){this.buffer.setLengthToZero(),l!=null&&this.buffer.append(l),this.current.setPosition(i);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new Wa(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new Wa(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,l;do{let c=this.current.getPosition();if(this.current.isAlpha()?(l=this.parseAlphaBlock(),i=l.isFinished()):this.current.isIsoIec646()?(l=this.parseIsoIec646Block(),i=l.isFinished()):(l=this.parseNumericBlock(),i=l.isFinished()),!(c!==this.current.getPosition())&&!i)break}while(!i);return l.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let l;return i.isSecondDigitFNC1()?l=new Wa(this.current.getPosition(),this.buffer.toString()):l=new Wa(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new qa(!0,l)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let l=new Wa(this.current.getPosition(),this.buffer.toString());return new qa(!0,l)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new qa(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let l=new Wa(this.current.getPosition(),this.buffer.toString());return new qa(!0,l)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new qa(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let l=new Wa(this.current.getPosition(),this.buffer.toString());return new qa(!0,l)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new qa(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,5);if(l>=5&&l<16)return!0;if(i+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,7);if(c>=64&&c<116)return!0;if(i+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(i,8);return h>=232&&h<253}decodeIsoIec646(i){let l=this.extractNumericValueFromBitArray(i,5);if(l===15)return new _r(i+5,_r.FNC1);if(l>=5&&l<15)return new _r(i+5,"0"+(l-5));let c=this.extractNumericValueFromBitArray(i,7);if(c>=64&&c<90)return new _r(i+7,""+(c+1));if(c>=90&&c<116)return new _r(i+7,""+(c+7));let h=this.extractNumericValueFromBitArray(i,8),f;switch(h){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new F}return new _r(i+8,f)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,5);if(l>=5&&l<16)return!0;if(i+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,6);return c>=16&&c<63}decodeAlphanumeric(i){let l=this.extractNumericValueFromBitArray(i,5);if(l===15)return new _r(i+5,_r.FNC1);if(l>=5&&l<15)return new _r(i+5,"0"+(l-5));let c=this.extractNumericValueFromBitArray(i,6);if(c>=32&&c<58)return new _r(i+6,""+(c+33));let h;switch(c){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new Ze("Decoding invalid alphanumeric value: "+c)}return new _r(i+6,h)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let l=0;l<5&&l+i<this.information.getSize();++l)if(l===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+l))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let l=i;l<i+3;++l)if(this.information.get(l))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let l=0;l<4&&l+i<this.information.getSize();++l)if(this.information.get(i+l))return!1;return!0}}class Gc{constructor(i){this.information=i,this.generalDecoder=new Ti(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Er extends Gc{constructor(i){super(i)}encodeCompressedGtin(i,l){i.append("(01)");let c=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,l,c)}encodeCompressedGtinWithoutAI(i,l,c){for(let h=0;h<4;++h){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*h,10);f/100===0&&i.append("0"),f/10===0&&i.append("0"),i.append(f)}Er.appendCheckDigit(i,c)}static appendCheckDigit(i,l){let c=0;for(let h=0;h<13;h++){let f=i.charAt(h+l).charCodeAt(0)-"0".charCodeAt(0);c+=h&1?f:3*f}c=10-c%10,c===10&&(c=0),i.append(c)}}Er.GTIN_SIZE=40;class Di extends Er{constructor(i){super(i)}parseInformation(){let i=new he;i.append("(01)");let l=i.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(Di.HEADER_SIZE,4);return i.append(c),this.encodeCompressedGtinWithoutAI(i,Di.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(i,Di.HEADER_SIZE+44)}}Di.HEADER_SIZE=1+1+2;class Eo extends Gc{constructor(i){super(i)}parseInformation(){let i=new he;return this.getGeneralDecoder().decodeAllCodes(i,Eo.HEADER_SIZE)}}Eo.HEADER_SIZE=2+1+2;class Cl extends Er{constructor(i){super(i)}encodeCompressedWeight(i,l,c){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(l,c);this.addWeightCode(i,h);let f=this.checkWeight(h),x=1e5;for(let y=0;y<5;++y)f/x===0&&i.append("0"),x/=10;i.append(f)}}class Is extends Cl{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Is.HEADER_SIZE+Cl.GTIN_SIZE+Is.WEIGHT_SIZE)throw new ne;let i=new he;return this.encodeCompressedGtin(i,Is.HEADER_SIZE),this.encodeCompressedWeight(i,Is.HEADER_SIZE+Cl.GTIN_SIZE,Is.WEIGHT_SIZE),i.toString()}}Is.HEADER_SIZE=4+1,Is.WEIGHT_SIZE=15;class Cp extends Is{constructor(i){super(i)}addWeightCode(i,l){i.append("(3103)")}checkWeight(i){return i}}class _p extends Is{constructor(i){super(i)}addWeightCode(i,l){l<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class Ms extends Er{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<Ms.HEADER_SIZE+Er.GTIN_SIZE)throw new ne;let i=new he;this.encodeCompressedGtin(i,Ms.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Ms.HEADER_SIZE+Er.GTIN_SIZE,Ms.LAST_DIGIT_SIZE);i.append("(392"),i.append(l),i.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(Ms.HEADER_SIZE+Er.GTIN_SIZE+Ms.LAST_DIGIT_SIZE,null);return i.append(c.getNewString()),i.toString()}}Ms.HEADER_SIZE=5+1+2,Ms.LAST_DIGIT_SIZE=2;class vr extends Er{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<vr.HEADER_SIZE+Er.GTIN_SIZE)throw new ne;let i=new he;this.encodeCompressedGtin(i,vr.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(vr.HEADER_SIZE+Er.GTIN_SIZE,vr.LAST_DIGIT_SIZE);i.append("(393"),i.append(l),i.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(vr.HEADER_SIZE+Er.GTIN_SIZE+vr.LAST_DIGIT_SIZE,vr.FIRST_THREE_DIGITS_SIZE);c/100==0&&i.append("0"),c/10==0&&i.append("0"),i.append(c);let h=this.getGeneralDecoder().decodeGeneralPurposeField(vr.HEADER_SIZE+Er.GTIN_SIZE+vr.LAST_DIGIT_SIZE+vr.FIRST_THREE_DIGITS_SIZE,null);return i.append(h.getNewString()),i.toString()}}vr.HEADER_SIZE=5+1+2,vr.LAST_DIGIT_SIZE=2,vr.FIRST_THREE_DIGITS_SIZE=10;class ln extends Cl{constructor(i,l,c){super(i),this.dateCode=c,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=ln.HEADER_SIZE+ln.GTIN_SIZE+ln.WEIGHT_SIZE+ln.DATE_SIZE)throw new ne;let i=new he;return this.encodeCompressedGtin(i,ln.HEADER_SIZE),this.encodeCompressedWeight(i,ln.HEADER_SIZE+ln.GTIN_SIZE,ln.WEIGHT_SIZE),this.encodeCompressedDate(i,ln.HEADER_SIZE+ln.GTIN_SIZE+ln.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(l,ln.DATE_SIZE);if(c==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let h=c%32;c/=32;let f=c%12+1;c/=12;let x=c;x/10==0&&i.append("0"),i.append(x),f/10==0&&i.append("0"),i.append(f),h/10==0&&i.append("0"),i.append(h)}addWeightCode(i,l){i.append("("),i.append(this.firstAIdigits),i.append(l/1e5),i.append(")")}checkWeight(i){return i%1e5}}ln.HEADER_SIZE=7+1,ln.WEIGHT_SIZE=20,ln.DATE_SIZE=16;function qu(B){try{if(B.get(1))return new Di(B);if(!B.get(2))return new Eo(B);switch(Ti.extractNumericValueFromBitArray(B,1,4)){case 4:return new Cp(B);case 5:return new _p(B)}switch(Ti.extractNumericValueFromBitArray(B,1,5)){case 12:return new Ms(B);case 13:return new vr(B)}switch(Ti.extractNumericValueFromBitArray(B,1,7)){case 56:return new ln(B,"310","11");case 57:return new ln(B,"320","11");case 58:return new ln(B,"310","13");case 59:return new ln(B,"320","13");case 60:return new ln(B,"310","15");case 61:return new ln(B,"320","15");case 62:return new ln(B,"310","17");case 63:return new ln(B,"320","17")}}catch(i){throw console.log(i),new Ze("unknown decoder: "+B)}}class fs{constructor(i,l,c,h){this.leftchar=i,this.rightchar=l,this.finderpattern=c,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,l){return i instanceof fs?fs.equalsOrNull(i.leftchar,l.leftchar)&&fs.equalsOrNull(i.rightchar,l.rightchar)&&fs.equalsOrNull(i.finderpattern,l.finderpattern):!1}static equalsOrNull(i,l){return i===null?l===null:fs.equals(i,l)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Xc{constructor(i,l,c){this.pairs=i,this.rowNumber=l,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,l){return i instanceof Xc?this.checkEqualitity(i,l)&&i.wasReversed===l.wasReversed:!1}checkEqualitity(i,l){if(!i||!l)return;let c;return i.forEach((h,f)=>{l.forEach(x=>{h.getLeftChar().getValue()===x.getLeftChar().getValue()&&h.getRightChar().getValue()===x.getRightChar().getValue()&&h.getFinderPatter().getValue()===x.getFinderPatter().getValue()&&(c=!0)})}),c}}class Pe extends nr{constructor(i){super(...arguments),this.pairs=new Array(Pe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,l,c){this.pairs.length=0,this.startFromEven=!1;try{return Pe.constructResult(this.decodeRow2pairs(i,l))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,Pe.constructResult(this.decodeRow2pairs(i,l))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,l){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(l,this.pairs,i))}catch(f){if(f instanceof ne){if(!this.pairs.length)throw new ne;c=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(i,!1),h){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new ne}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let l=null;try{l=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return i&&(this.rows=this.rows.reverse()),l}checkRows(i,l){for(let c=l;c<this.rows.length;c++){let h=this.rows[c];this.pairs.length=0;for(let x of i)this.pairs.push(x.getPairs());if(this.pairs.push(h.getPairs()),!Pe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(i);f.push(h);try{return this.checkRows(f,c+1)}catch(x){this.verbose&&console.log(x)}}throw new ne}static isValidSequence(i){for(let l of Pe.FINDER_PATTERN_SEQUENCES){if(i.length>l.length)continue;let c=!0;for(let h=0;h<i.length;h++)if(i[h].getFinderPattern().getValue()!=l[h]){c=!1;break}if(c)return!0}return!1}storeRow(i,l){let c=0,h=!1,f=!1;for(;c<this.rows.length;){let x=this.rows[c];if(x.getRowNumber()>i){f=x.isEquivalent(this.pairs);break}h=x.isEquivalent(this.pairs),c++}f||h||Pe.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new Xc(this.pairs,i,l)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,l){for(let c of l)if(c.getPairs().length!==i.length){for(let h of c.getPairs())for(let f of i)if(fs.equals(h,f))break}}static isPartialRow(i,l){for(let c of l){let h=!0;for(let f of i){let x=!1;for(let y of c.getPairs())if(f.equals(y)){x=!0;break}if(!x){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(i){let l=Qc.buildBitArray(i),h=qu(l).parseInformation(),f=i[0].getFinderPattern().getResultPoints(),x=i[i.length-1].getFinderPattern().getResultPoints(),y=[f[0],f[1],x[0],x[1]];return new Be(h,null,null,y,Ae.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),l=i.getLeftChar(),c=i.getRightChar();if(c==null)return!1;let h=c.getChecksumPortion(),f=2;for(let y=1;y<this.pairs.size();++y){let j=this.pairs.get(y);h+=j.getLeftChar().getChecksumPortion(),f++;let C=j.getRightChar();C!=null&&(h+=C.getChecksumPortion(),f++)}return h%=211,211*(f-4)+h==l.getValue()}static getNextSecondBar(i,l){let c;return i.get(l)?(c=i.getNextUnset(l),c=i.getNextSet(c)):(c=i.getNextSet(l),c=i.getNextUnset(c)),c}retrieveNextPair(i,l,c){let h=l.length%2==0;this.startFromEven&&(h=!h);let f,x=!0,y=-1;do this.findNextPair(i,l,y),f=this.parseFoundFinderPattern(i,c,h),f==null?y=Pe.getNextSecondBar(i,this.startEnd[0]):x=!1;while(x);let j=this.decodeDataCharacter(i,f,h,!0);if(!this.isEmptyPair(l)&&l[l.length-1].mustBeLast())throw new ne;let C;try{C=this.decodeDataCharacter(i,f,h,!1)}catch(R){C=null,this.verbose&&console.log(R)}return new fs(j,C,f,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,l,c){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),x;c>=0?x=c:this.isEmptyPair(l)?x=0:x=l[l.length-1].getFinderPattern().getStartEnd()[1];let y=l.length%2!=0;this.startFromEven&&(y=!y);let j=!1;for(;x<f&&(j=!i.get(x),!!j);)x++;let C=0,R=x;for(let U=x;U<f;U++)if(i.get(U)!=j)h[C]++;else{if(C==3){if(y&&Pe.reverseCounters(h),Pe.isFinderPattern(h)){this.startEnd[0]=R,this.startEnd[1]=U;return}y&&Pe.reverseCounters(h),R+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,C--}else C++;h[C]=1,j=!j}throw new ne}static reverseCounters(i){let l=i.length;for(let c=0;c<l/2;++c){let h=i[c];i[c]=i[l-c-1],i[l-c-1]=h}}parseFoundFinderPattern(i,l,c){let h,f,x;if(c){let C=this.startEnd[0]-1;for(;C>=0&&!i.get(C);)C--;C++,h=this.startEnd[0]-C,f=C,x=this.startEnd[1]}else f=this.startEnd[0],x=i.getNextUnset(this.startEnd[1]+1),h=x-this.startEnd[1];let y=this.getDecodeFinderCounters();I.arraycopy(y,0,y,1,y.length-1),y[0]=h;let j;try{j=this.parseFinderValue(y,Pe.FINDER_PATTERNS)}catch{return null}return new jl(j,[f,x],f,x,l)}decodeDataCharacter(i,l,c,h){let f=this.getDataCharacterCounters();for(let un=0;un<f.length;un++)f[un]=0;if(h)Pe.recordPatternInReverse(i,l.getStartEnd()[0],f);else{Pe.recordPattern(i,l.getStartEnd()[1],f);for(let un=0,En=f.length-1;un<En;un++,En--){let fr=f[un];f[un]=f[En],f[En]=fr}}let x=17,y=Ge.sum(new Int32Array(f))/x,j=(l.getStartEnd()[1]-l.getStartEnd()[0])/15;if(Math.abs(y-j)/j>.3)throw new ne;let C=this.getOddCounts(),R=this.getEvenCounts(),U=this.getOddRoundingErrors(),H=this.getEvenRoundingErrors();for(let un=0;un<f.length;un++){let En=1*f[un]/y,fr=En+.5;if(fr<1){if(En<.3)throw new ne;fr=1}else if(fr>8){if(En>8.7)throw new ne;fr=8}let ta=un/2;un&1?(R[ta]=fr,H[ta]=En-fr):(C[ta]=fr,U[ta]=En-fr)}this.adjustOddEvenCounts(x);let J=4*l.getValue()+(c?0:2)+(h?0:1)-1,q=0,G=0;for(let un=C.length-1;un>=0;un--){if(Pe.isNotA1left(l,c,h)){let En=Pe.WEIGHTS[J][2*un];G+=C[un]*En}q+=C[un]}let K=0;for(let un=R.length-1;un>=0;un--)if(Pe.isNotA1left(l,c,h)){let En=Pe.WEIGHTS[J][2*un+1];K+=R[un]*En}let le=G+K;if(q&1||q>13||q<4)throw new ne;let Ce=(13-q)/2,Me=Pe.SYMBOL_WIDEST[Ce],Re=9-Me,it=Ds.getRSSvalue(C,Me,!0),jt=Ds.getRSSvalue(R,Re,!1),Ar=Pe.EVEN_TOTAL_SUBSET[Ce],_n=Pe.GSUM[Ce],ar=it*Ar+jt+_n;return new Ai(ar,le)}static isNotA1left(i,l,c){return!(i.getValue()==0&&l&&c)}adjustOddEvenCounts(i){let l=Ge.sum(new Int32Array(this.getOddCounts())),c=Ge.sum(new Int32Array(this.getEvenCounts())),h=!1,f=!1;l>13?f=!0:l<4&&(h=!0);let x=!1,y=!1;c>13?y=!0:c<4&&(x=!0);let j=l+c-i,C=(l&1)==1,R=(c&1)==0;if(j==1)if(C){if(R)throw new ne;f=!0}else{if(!R)throw new ne;y=!0}else if(j==-1)if(C){if(R)throw new ne;h=!0}else{if(!R)throw new ne;x=!0}else if(j==0){if(C){if(!R)throw new ne;l<c?(h=!0,y=!0):(f=!0,x=!0)}else if(R)throw new ne}else throw new ne;if(h){if(f)throw new ne;Pe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Pe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(y)throw new ne;Pe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Pe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Pe.SYMBOL_WIDEST=[7,5,4,3,1],Pe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Pe.GSUM=[0,348,1388,2948,3988],Pe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Pe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Pe.FINDER_PAT_A=0,Pe.FINDER_PAT_B=1,Pe.FINDER_PAT_C=2,Pe.FINDER_PAT_D=3,Pe.FINDER_PAT_E=4,Pe.FINDER_PAT_F=5,Pe.FINDER_PATTERN_SEQUENCES=[[Pe.FINDER_PAT_A,Pe.FINDER_PAT_A],[Pe.FINDER_PAT_A,Pe.FINDER_PAT_B,Pe.FINDER_PAT_B],[Pe.FINDER_PAT_A,Pe.FINDER_PAT_C,Pe.FINDER_PAT_B,Pe.FINDER_PAT_D],[Pe.FINDER_PAT_A,Pe.FINDER_PAT_E,Pe.FINDER_PAT_B,Pe.FINDER_PAT_D,Pe.FINDER_PAT_C],[Pe.FINDER_PAT_A,Pe.FINDER_PAT_E,Pe.FINDER_PAT_B,Pe.FINDER_PAT_D,Pe.FINDER_PAT_D,Pe.FINDER_PAT_F],[Pe.FINDER_PAT_A,Pe.FINDER_PAT_E,Pe.FINDER_PAT_B,Pe.FINDER_PAT_D,Pe.FINDER_PAT_E,Pe.FINDER_PAT_F,Pe.FINDER_PAT_F],[Pe.FINDER_PAT_A,Pe.FINDER_PAT_A,Pe.FINDER_PAT_B,Pe.FINDER_PAT_B,Pe.FINDER_PAT_C,Pe.FINDER_PAT_C,Pe.FINDER_PAT_D,Pe.FINDER_PAT_D],[Pe.FINDER_PAT_A,Pe.FINDER_PAT_A,Pe.FINDER_PAT_B,Pe.FINDER_PAT_B,Pe.FINDER_PAT_C,Pe.FINDER_PAT_C,Pe.FINDER_PAT_D,Pe.FINDER_PAT_E,Pe.FINDER_PAT_E],[Pe.FINDER_PAT_A,Pe.FINDER_PAT_A,Pe.FINDER_PAT_B,Pe.FINDER_PAT_B,Pe.FINDER_PAT_C,Pe.FINDER_PAT_C,Pe.FINDER_PAT_D,Pe.FINDER_PAT_E,Pe.FINDER_PAT_F,Pe.FINDER_PAT_F],[Pe.FINDER_PAT_A,Pe.FINDER_PAT_A,Pe.FINDER_PAT_B,Pe.FINDER_PAT_B,Pe.FINDER_PAT_C,Pe.FINDER_PAT_D,Pe.FINDER_PAT_D,Pe.FINDER_PAT_E,Pe.FINDER_PAT_E,Pe.FINDER_PAT_F,Pe.FINDER_PAT_F]],Pe.MAX_PAIRS=11;class Ep extends Ai{constructor(i,l,c){super(i,l),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class yn extends nr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,l,c){const h=this.decodePair(l,!1,i,c);yn.addOrTally(this.possibleLeftPairs,h),l.reverse();let f=this.decodePair(l,!0,i,c);yn.addOrTally(this.possibleRightPairs,f),l.reverse();for(let x of this.possibleLeftPairs)if(x.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&yn.checkChecksum(x,y))return yn.constructResult(x,y)}throw new ne}static addOrTally(i,l){if(l==null)return;let c=!1;for(let h of i)if(h.getValue()===l.getValue()){h.incrementCount(),c=!0;break}c||i.push(l)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,l){let c=4537077*i.getValue()+l.getValue(),h=new String(c).toString(),f=new he;for(let C=13-h.length;C>0;C--)f.append("0");f.append(h);let x=0;for(let C=0;C<13;C++){let R=f.charAt(C).charCodeAt(0)-"0".charCodeAt(0);x+=C&1?R:3*R}x=10-x%10,x===10&&(x=0),f.append(x.toString());let y=i.getFinderPattern().getResultPoints(),j=l.getFinderPattern().getResultPoints();return new Be(f.toString(),null,0,[y[0],y[1],j[0],j[1]],Ae.RSS_14,new Date().getTime())}static checkChecksum(i,l){let c=(i.getChecksumPortion()+16*l.getChecksumPortion())%79,h=9*i.getFinderPattern().getValue()+l.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,c===h}decodePair(i,l,c,h){try{let f=this.findFinderPattern(i,l),x=this.parseFoundFinderPattern(i,c,l,f),y=h==null?null:h.get(L.NEED_RESULT_POINT_CALLBACK);if(y!=null){let R=(f[0]+f[1])/2;l&&(R=i.getSize()-1-R),y.foundPossibleResultPoint(new ye(R,c))}let j=this.decodeDataCharacter(i,x,!0),C=this.decodeDataCharacter(i,x,!1);return new Ep(1597*j.getValue()+C.getValue(),j.getChecksumPortion()+4*C.getChecksumPortion(),x)}catch{return null}}decodeDataCharacter(i,l,c){let h=this.getDataCharacterCounters();for(let K=0;K<h.length;K++)h[K]=0;if(c)tn.recordPatternInReverse(i,l.getStartEnd()[0],h);else{tn.recordPattern(i,l.getStartEnd()[1]+1,h);for(let K=0,le=h.length-1;K<le;K++,le--){let Ce=h[K];h[K]=h[le],h[le]=Ce}}let f=c?16:15,x=Ge.sum(new Int32Array(h))/f,y=this.getOddCounts(),j=this.getEvenCounts(),C=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let K=0;K<h.length;K++){let le=h[K]/x,Ce=Math.floor(le+.5);Ce<1?Ce=1:Ce>8&&(Ce=8);let Me=Math.floor(K/2);K&1?(j[Me]=Ce,R[Me]=le-Ce):(y[Me]=Ce,C[Me]=le-Ce)}this.adjustOddEvenCounts(c,f);let U=0,H=0;for(let K=y.length-1;K>=0;K--)H*=9,H+=y[K],U+=y[K];let J=0,q=0;for(let K=j.length-1;K>=0;K--)J*=9,J+=j[K],q+=j[K];let G=H+3*J;if(c){if(U&1||U>12||U<4)throw new ne;let K=(12-U)/2,le=yn.OUTSIDE_ODD_WIDEST[K],Ce=9-le,Me=Ds.getRSSvalue(y,le,!1),Re=Ds.getRSSvalue(j,Ce,!0),it=yn.OUTSIDE_EVEN_TOTAL_SUBSET[K],jt=yn.OUTSIDE_GSUM[K];return new Ai(Me*it+Re+jt,G)}else{if(q&1||q>10||q<4)throw new ne;let K=(10-q)/2,le=yn.INSIDE_ODD_WIDEST[K],Ce=9-le,Me=Ds.getRSSvalue(y,le,!0),Re=Ds.getRSSvalue(j,Ce,!1),it=yn.INSIDE_ODD_TOTAL_SUBSET[K],jt=yn.INSIDE_GSUM[K];return new Ai(Re*it+Me+jt,G)}}findFinderPattern(i,l){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=i.getSize(),f=!1,x=0;for(;x<h&&(f=!i.get(x),l!==f);)x++;let y=0,j=x;for(let C=x;C<h;C++)if(i.get(C)!==f)c[y]++;else{if(y===3){if(nr.isFinderPattern(c))return[j,C];j+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,y--}else y++;c[y]=1,f=!f}throw new ne}parseFoundFinderPattern(i,l,c,h){let f=i.get(h[0]),x=h[0]-1;for(;x>=0&&f!==i.get(x);)x--;x++;const y=h[0]-x,j=this.getDecodeFinderCounters(),C=new Int32Array(j.length);I.arraycopy(j,0,C,1,j.length-1),C[0]=y;const R=this.parseFinderValue(C,yn.FINDER_PATTERNS);let U=x,H=h[1];return c&&(U=i.getSize()-1-U,H=i.getSize()-1-H),new jl(R,[x,h[1]],U,H,l)}adjustOddEvenCounts(i,l){let c=Ge.sum(new Int32Array(this.getOddCounts())),h=Ge.sum(new Int32Array(this.getEvenCounts())),f=!1,x=!1,y=!1,j=!1;i?(c>12?x=!0:c<4&&(f=!0),h>12?j=!0:h<4&&(y=!0)):(c>11?x=!0:c<5&&(f=!0),h>10?j=!0:h<4&&(y=!0));let C=c+h-l,R=(c&1)===(i?1:0),U=(h&1)===1;if(C===1)if(R){if(U)throw new ne;x=!0}else{if(!U)throw new ne;j=!0}else if(C===-1)if(R){if(U)throw new ne;f=!0}else{if(!U)throw new ne;y=!0}else if(C===0){if(R){if(!U)throw new ne;c<h?(f=!0,j=!0):(x=!0,y=!0)}else if(U)throw new ne}else throw new ne;if(f){if(x)throw new ne;nr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(x&&nr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(j)throw new ne;nr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}j&&nr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}yn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],yn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],yn.OUTSIDE_GSUM=[0,161,961,2015,2715],yn.INSIDE_GSUM=[0,336,1036,1516],yn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],yn.INSIDE_ODD_WIDEST=[2,4,6,8],yn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ha extends tn{constructor(i,l){super(),this.readers=[],this.verbose=l===!0;const c=i?i.get(L.POSSIBLE_FORMATS):null,h=i&&i.get(L.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(Ae.EAN_13)||c.includes(Ae.UPC_A)||c.includes(Ae.EAN_8)||c.includes(Ae.UPC_E))&&this.readers.push(new Yc(i)),c.includes(Ae.CODE_39)&&this.readers.push(new Je(h)),c.includes(Ae.CODE_128)&&this.readers.push(new te),c.includes(Ae.ITF)&&this.readers.push(new ft),c.includes(Ae.RSS_14)&&this.readers.push(new yn),c.includes(Ae.RSS_EXPANDED)&&this.readers.push(new Pe(this.verbose))):(this.readers.push(new Yc(i)),this.readers.push(new Je),this.readers.push(new Yc(i)),this.readers.push(new te),this.readers.push(new ft),this.readers.push(new yn),this.readers.push(new Pe(this.verbose)))}decodeRow(i,l,c){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(i,l,c)}catch{}throw new ne}reset(){this.readers.forEach(i=>i.reset())}}class Wu extends Ve{constructor(i=500,l){super(new Ha(l),i,l)}}class Kt{constructor(i,l,c){this.ecCodewords=i,this.ecBlocks=[l],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Yt{constructor(i,l){this.count=i,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ft{constructor(i,l,c,h,f,x){this.versionNumber=i,this.symbolSizeRows=l,this.symbolSizeColumns=c,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=f,this.ecBlocks=x;let y=0;const j=x.getECCodewords(),C=x.getECBlocks();for(let R of C)y+=R.getCount()*(R.getDataCodewords()+j);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,l){if(i&1||l&1)throw new F;for(let c of Ft.VERSIONS)if(c.symbolSizeRows===i&&c.symbolSizeColumns===l)return c;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new Ft(1,10,10,8,8,new Kt(5,new Yt(1,3))),new Ft(2,12,12,10,10,new Kt(7,new Yt(1,5))),new Ft(3,14,14,12,12,new Kt(10,new Yt(1,8))),new Ft(4,16,16,14,14,new Kt(12,new Yt(1,12))),new Ft(5,18,18,16,16,new Kt(14,new Yt(1,18))),new Ft(6,20,20,18,18,new Kt(18,new Yt(1,22))),new Ft(7,22,22,20,20,new Kt(20,new Yt(1,30))),new Ft(8,24,24,22,22,new Kt(24,new Yt(1,36))),new Ft(9,26,26,24,24,new Kt(28,new Yt(1,44))),new Ft(10,32,32,14,14,new Kt(36,new Yt(1,62))),new Ft(11,36,36,16,16,new Kt(42,new Yt(1,86))),new Ft(12,40,40,18,18,new Kt(48,new Yt(1,114))),new Ft(13,44,44,20,20,new Kt(56,new Yt(1,144))),new Ft(14,48,48,22,22,new Kt(68,new Yt(1,174))),new Ft(15,52,52,24,24,new Kt(42,new Yt(2,102))),new Ft(16,64,64,14,14,new Kt(56,new Yt(2,140))),new Ft(17,72,72,16,16,new Kt(36,new Yt(4,92))),new Ft(18,80,80,18,18,new Kt(48,new Yt(4,114))),new Ft(19,88,88,20,20,new Kt(56,new Yt(4,144))),new Ft(20,96,96,22,22,new Kt(68,new Yt(4,174))),new Ft(21,104,104,24,24,new Kt(56,new Yt(6,136))),new Ft(22,120,120,18,18,new Kt(68,new Yt(6,175))),new Ft(23,132,132,20,20,new Kt(62,new Yt(8,163))),new Ft(24,144,144,22,22,new Kt(62,new Yt(8,156),new Yt(2,155))),new Ft(25,8,18,6,16,new Kt(7,new Yt(1,5))),new Ft(26,8,32,6,14,new Kt(11,new Yt(1,10))),new Ft(27,12,26,10,24,new Kt(14,new Yt(1,16))),new Ft(28,12,36,10,16,new Kt(18,new Yt(1,22))),new Ft(29,16,36,14,16,new Kt(24,new Yt(1,32))),new Ft(30,16,48,14,22,new Kt(28,new Yt(1,49)))]}}Ft.VERSIONS=Ft.buildVersions();class Kc{constructor(i){const l=i.getHeight();if(l<8||l>144||l&1)throw new F;this.version=Kc.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new ve(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const l=i.getHeight(),c=i.getWidth();return Ft.getVersionForDimensions(l,c)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let l=0,c=4,h=0;const f=this.mappingBitMatrix.getHeight(),x=this.mappingBitMatrix.getWidth();let y=!1,j=!1,C=!1,R=!1;do if(c===f&&h===0&&!y)i[l++]=this.readCorner1(f,x)&255,c-=2,h+=2,y=!0;else if(c===f-2&&h===0&&x&3&&!j)i[l++]=this.readCorner2(f,x)&255,c-=2,h+=2,j=!0;else if(c===f+4&&h===2&&!(x&7)&&!C)i[l++]=this.readCorner3(f,x)&255,c-=2,h+=2,C=!0;else if(c===f-2&&h===0&&(x&7)===4&&!R)i[l++]=this.readCorner4(f,x)&255,c-=2,h+=2,R=!0;else{do c<f&&h>=0&&!this.readMappingMatrix.get(h,c)&&(i[l++]=this.readUtah(c,h,f,x)&255),c-=2,h+=2;while(c>=0&&h<x);c+=1,h+=3;do c>=0&&h<x&&!this.readMappingMatrix.get(h,c)&&(i[l++]=this.readUtah(c,h,f,x)&255),c+=2,h-=2;while(c<f&&h>=0);c+=3,h+=1}while(c<f||h<x);if(l!==this.version.getTotalCodewords())throw new F;return i}readModule(i,l,c,h){return i<0&&(i+=c,l+=4-(c+4&7)),l<0&&(l+=h,i+=4-(h+4&7)),this.readMappingMatrix.set(l,i),this.mappingBitMatrix.get(l,i)}readUtah(i,l,c,h){let f=0;return this.readModule(i-2,l-2,c,h)&&(f|=1),f<<=1,this.readModule(i-2,l-1,c,h)&&(f|=1),f<<=1,this.readModule(i-1,l-2,c,h)&&(f|=1),f<<=1,this.readModule(i-1,l-1,c,h)&&(f|=1),f<<=1,this.readModule(i-1,l,c,h)&&(f|=1),f<<=1,this.readModule(i,l-2,c,h)&&(f|=1),f<<=1,this.readModule(i,l-1,c,h)&&(f|=1),f<<=1,this.readModule(i,l,c,h)&&(f|=1),f}readCorner1(i,l){let c=0;return this.readModule(i-1,0,i,l)&&(c|=1),c<<=1,this.readModule(i-1,1,i,l)&&(c|=1),c<<=1,this.readModule(i-1,2,i,l)&&(c|=1),c<<=1,this.readModule(0,l-2,i,l)&&(c|=1),c<<=1,this.readModule(0,l-1,i,l)&&(c|=1),c<<=1,this.readModule(1,l-1,i,l)&&(c|=1),c<<=1,this.readModule(2,l-1,i,l)&&(c|=1),c<<=1,this.readModule(3,l-1,i,l)&&(c|=1),c}readCorner2(i,l){let c=0;return this.readModule(i-3,0,i,l)&&(c|=1),c<<=1,this.readModule(i-2,0,i,l)&&(c|=1),c<<=1,this.readModule(i-1,0,i,l)&&(c|=1),c<<=1,this.readModule(0,l-4,i,l)&&(c|=1),c<<=1,this.readModule(0,l-3,i,l)&&(c|=1),c<<=1,this.readModule(0,l-2,i,l)&&(c|=1),c<<=1,this.readModule(0,l-1,i,l)&&(c|=1),c<<=1,this.readModule(1,l-1,i,l)&&(c|=1),c}readCorner3(i,l){let c=0;return this.readModule(i-1,0,i,l)&&(c|=1),c<<=1,this.readModule(i-1,l-1,i,l)&&(c|=1),c<<=1,this.readModule(0,l-3,i,l)&&(c|=1),c<<=1,this.readModule(0,l-2,i,l)&&(c|=1),c<<=1,this.readModule(0,l-1,i,l)&&(c|=1),c<<=1,this.readModule(1,l-3,i,l)&&(c|=1),c<<=1,this.readModule(1,l-2,i,l)&&(c|=1),c<<=1,this.readModule(1,l-1,i,l)&&(c|=1),c}readCorner4(i,l){let c=0;return this.readModule(i-3,0,i,l)&&(c|=1),c<<=1,this.readModule(i-2,0,i,l)&&(c|=1),c<<=1,this.readModule(i-1,0,i,l)&&(c|=1),c<<=1,this.readModule(0,l-2,i,l)&&(c|=1),c<<=1,this.readModule(0,l-1,i,l)&&(c|=1),c<<=1,this.readModule(1,l-1,i,l)&&(c|=1),c<<=1,this.readModule(2,l-1,i,l)&&(c|=1),c<<=1,this.readModule(3,l-1,i,l)&&(c|=1),c}extractDataRegion(i){const l=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(i.getHeight()!==l)throw new b("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),x=l/h|0,y=c/f|0,j=x*h,C=y*f,R=new ve(C,j);for(let U=0;U<x;++U){const H=U*h;for(let J=0;J<y;++J){const q=J*f;for(let G=0;G<h;++G){const K=U*(h+2)+1+G,le=H+G;for(let Ce=0;Ce<f;++Ce){const Me=J*(f+2)+1+Ce;if(i.get(Me,K)){const Re=q+Ce;R.set(Re,le)}}}}}return R}}class _l{constructor(i,l){this.numDataCodewords=i,this.codewords=l}static getDataBlocks(i,l){const c=l.getECBlocks();let h=0;const f=c.getECBlocks();for(let G of f)h+=G.getCount();const x=new Array(h);let y=0;for(let G of f)for(let K=0;K<G.getCount();K++){const le=G.getDataCodewords(),Ce=c.getECCodewords()+le;x[y++]=new _l(le,new Uint8Array(Ce))}const C=x[0].codewords.length-c.getECCodewords(),R=C-1;let U=0;for(let G=0;G<R;G++)for(let K=0;K<y;K++)x[K].codewords[G]=i[U++];const H=l.getVersionNumber()===24,J=H?8:y;for(let G=0;G<J;G++)x[G].codewords[C-1]=i[U++];const q=x[0].codewords.length;for(let G=C;G<q;G++)for(let K=0;K<y;K++){const le=H?(K+8)%y:K,Ce=H&&le>7?G-1:G;x[le].codewords[Ce]=i[U++]}if(U!==i.length)throw new b;return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class El{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new b(""+i);let l=0,c=this.bitOffset,h=this.byteOffset;const f=this.bytes;if(c>0){const x=8-c,y=i<x?i:x,j=x-y,C=255>>8-y<<j;l=(f[h]&C)>>j,i-=y,c+=y,c===8&&(c=0,h++)}if(i>0){for(;i>=8;)l=l<<8|f[h]&255,h++,i-=8;if(i>0){const x=8-i,y=255>>x<<x;l=l<<i|(f[h]&y)>>x,c+=i}}return this.bitOffset=c,this.byteOffset=h,l}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ln;(function(B){B[B.PAD_ENCODE=0]="PAD_ENCODE",B[B.ASCII_ENCODE=1]="ASCII_ENCODE",B[B.C40_ENCODE=2]="C40_ENCODE",B[B.TEXT_ENCODE=3]="TEXT_ENCODE",B[B.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",B[B.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",B[B.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ln||(Ln={}));class Rs{static decode(i){const l=new El(i),c=new he,h=new he,f=new Array;let x=Ln.ASCII_ENCODE;do if(x===Ln.ASCII_ENCODE)x=this.decodeAsciiSegment(l,c,h);else{switch(x){case Ln.C40_ENCODE:this.decodeC40Segment(l,c);break;case Ln.TEXT_ENCODE:this.decodeTextSegment(l,c);break;case Ln.ANSIX12_ENCODE:this.decodeAnsiX12Segment(l,c);break;case Ln.EDIFACT_ENCODE:this.decodeEdifactSegment(l,c);break;case Ln.BASE256_ENCODE:this.decodeBase256Segment(l,c,f);break;default:throw new F}x=Ln.ASCII_ENCODE}while(x!==Ln.PAD_ENCODE&&l.available()>0);return h.length()>0&&c.append(h.toString()),new qt(i,c.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(i,l,c){let h=!1;do{let f=i.readBits(8);if(f===0)throw new F;if(f<=128)return h&&(f+=128),l.append(String.fromCharCode(f-1)),Ln.ASCII_ENCODE;if(f===129)return Ln.PAD_ENCODE;if(f<=229){const x=f-130;x<10&&l.append("0"),l.append(""+x)}else switch(f){case 230:return Ln.C40_ENCODE;case 231:return Ln.BASE256_ENCODE;case 232:l.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:h=!0;break;case 236:l.append("[)>05"),c.insert(0,"");break;case 237:l.append("[)>06"),c.insert(0,"");break;case 238:return Ln.ANSIX12_ENCODE;case 239:return Ln.TEXT_ENCODE;case 240:return Ln.EDIFACT_ENCODE;case 241:break;default:if(f!==254||i.available()!==0)throw new F;break}}while(i.available()>0);return Ln.ASCII_ENCODE}static decodeC40Segment(i,l){let c=!1;const h=[];let f=0;do{if(i.available()===8)return;const x=i.readBits(8);if(x===254)return;this.parseTwoBytes(x,i.readBits(8),h);for(let y=0;y<3;y++){const j=h[y];switch(f){case 0:if(j<3)f=j+1;else if(j<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[j];c?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),c=!1):l.append(C)}else throw new F;break;case 1:c?(l.append(String.fromCharCode(j+128)),c=!1):l.append(String.fromCharCode(j)),f=0;break;case 2:if(j<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[j];c?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),c=!1):l.append(C)}else switch(j){case 27:l.append(String.fromCharCode(29));break;case 30:c=!0;break;default:throw new F}f=0;break;case 3:c?(l.append(String.fromCharCode(j+224)),c=!1):l.append(String.fromCharCode(j+96)),f=0;break;default:throw new F}}}while(i.available()>0)}static decodeTextSegment(i,l){let c=!1,h=[],f=0;do{if(i.available()===8)return;const x=i.readBits(8);if(x===254)return;this.parseTwoBytes(x,i.readBits(8),h);for(let y=0;y<3;y++){const j=h[y];switch(f){case 0:if(j<3)f=j+1;else if(j<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[j];c?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),c=!1):l.append(C)}else throw new F;break;case 1:c?(l.append(String.fromCharCode(j+128)),c=!1):l.append(String.fromCharCode(j)),f=0;break;case 2:if(j<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[j];c?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),c=!1):l.append(C)}else switch(j){case 27:l.append(String.fromCharCode(29));break;case 30:c=!0;break;default:throw new F}f=0;break;case 3:if(j<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[j];c?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),c=!1):l.append(C),f=0}else throw new F;break;default:throw new F}}}while(i.available()>0)}static decodeAnsiX12Segment(i,l){const c=[];do{if(i.available()===8)return;const h=i.readBits(8);if(h===254)return;this.parseTwoBytes(h,i.readBits(8),c);for(let f=0;f<3;f++){const x=c[f];switch(x){case 0:l.append("\r");break;case 1:l.append("*");break;case 2:l.append(">");break;case 3:l.append(" ");break;default:if(x<14)l.append(String.fromCharCode(x+44));else if(x<40)l.append(String.fromCharCode(x+51));else throw new F;break}}}while(i.available()>0)}static parseTwoBytes(i,l,c){let h=(i<<8)+l-1,f=Math.floor(h/1600);c[0]=f,h-=f*1600,f=Math.floor(h/40),c[1]=f,c[2]=h-f*40}static decodeEdifactSegment(i,l){do{if(i.available()<=16)return;for(let c=0;c<4;c++){let h=i.readBits(6);if(h===31){const f=8-i.getBitOffset();f!==8&&i.readBits(f);return}h&32||(h|=64),l.append(String.fromCharCode(h))}}while(i.available()>0)}static decodeBase256Segment(i,l,c){let h=1+i.getByteOffset();const f=this.unrandomize255State(i.readBits(8),h++);let x;if(f===0?x=i.available()/8|0:f<250?x=f:x=250*(f-249)+this.unrandomize255State(i.readBits(8),h++),x<0)throw new F;const y=new Uint8Array(x);for(let j=0;j<x;j++){if(i.available()<8)throw new F;y[j]=this.unrandomize255State(i.readBits(8),h++)}c.push(y);try{l.append(oe.decode(y,ee.ISO88591))}catch(j){throw new Ze("Platform does not support required encoding: "+j.message)}}static unrandomize255State(i,l){const c=149*l%255+1,h=i-c;return h>=0?h:h+256}}Rs.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Rs.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Rs.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Rs.TEXT_SHIFT2_SET_CHARS=Rs.C40_SHIFT2_SET_CHARS,Rs.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class Sp{constructor(){this.rsDecoder=new be(Te.DATA_MATRIX_FIELD_256)}decode(i){const l=new Kc(i),c=l.getVersion(),h=l.readCodewords(),f=_l.getDataBlocks(h,c);let x=0;for(let C of f)x+=C.getNumDataCodewords();const y=new Uint8Array(x),j=f.length;for(let C=0;C<j;C++){const R=f[C],U=R.getCodewords(),H=R.getNumDataCodewords();this.correctErrors(U,H);for(let J=0;J<H;J++)y[J*j+C]=U[J]}return Rs.decode(y)}correctErrors(i,l){const c=new Int32Array(i);try{this.rsDecoder.decode(c,i.length-l)}catch{throw new E}for(let h=0;h<l;h++)i[h]=c[h]}}class jn{constructor(i){this.image=i,this.rectangleDetector=new Ee(this.image)}detect(){const i=this.rectangleDetector.detect();let l=this.detectSolid1(i);if(l=this.detectSolid2(l),l[3]=this.correctTopRight(l),!l[3])throw new ne;l=this.shiftToModuleCenter(l);const c=l[0],h=l[1],f=l[2],x=l[3];let y=this.transitionsBetween(c,x)+1,j=this.transitionsBetween(f,x)+1;(y&1)===1&&(y+=1),(j&1)===1&&(j+=1),4*y<7*j&&4*j<7*y&&(y=j=Math.max(y,j));let C=jn.sampleGrid(this.image,c,h,f,x,y,j);return new ie(C,[c,h,f,x])}static shiftPoint(i,l,c){let h=(l.getX()-i.getX())/(c+1),f=(l.getY()-i.getY())/(c+1);return new ye(i.getX()+h,i.getY()+f)}static moveAway(i,l,c){let h=i.getX(),f=i.getY();return h<l?h-=1:h+=1,f<c?f-=1:f+=1,new ye(h,f)}detectSolid1(i){let l=i[0],c=i[1],h=i[3],f=i[2],x=this.transitionsBetween(l,c),y=this.transitionsBetween(c,h),j=this.transitionsBetween(h,f),C=this.transitionsBetween(f,l),R=x,U=[f,l,c,h];return R>y&&(R=y,U[0]=l,U[1]=c,U[2]=h,U[3]=f),R>j&&(R=j,U[0]=c,U[1]=h,U[2]=f,U[3]=l),R>C&&(U[0]=h,U[1]=f,U[2]=l,U[3]=c),U}detectSolid2(i){let l=i[0],c=i[1],h=i[2],f=i[3],x=this.transitionsBetween(l,f),y=jn.shiftPoint(c,h,(x+1)*4),j=jn.shiftPoint(h,c,(x+1)*4),C=this.transitionsBetween(y,l),R=this.transitionsBetween(j,f);return C<R?(i[0]=l,i[1]=c,i[2]=h,i[3]=f):(i[0]=c,i[1]=h,i[2]=f,i[3]=l),i}correctTopRight(i){let l=i[0],c=i[1],h=i[2],f=i[3],x=this.transitionsBetween(l,f),y=this.transitionsBetween(c,f),j=jn.shiftPoint(l,c,(y+1)*4),C=jn.shiftPoint(h,c,(x+1)*4);x=this.transitionsBetween(j,f),y=this.transitionsBetween(C,f);let R=new ye(f.getX()+(h.getX()-c.getX())/(x+1),f.getY()+(h.getY()-c.getY())/(x+1)),U=new ye(f.getX()+(l.getX()-c.getX())/(y+1),f.getY()+(l.getY()-c.getY())/(y+1));if(!this.isValid(R))return this.isValid(U)?U:null;if(!this.isValid(U))return R;let H=this.transitionsBetween(j,R)+this.transitionsBetween(C,R),J=this.transitionsBetween(j,U)+this.transitionsBetween(C,U);return H>J?R:U}shiftToModuleCenter(i){let l=i[0],c=i[1],h=i[2],f=i[3],x=this.transitionsBetween(l,f)+1,y=this.transitionsBetween(h,f)+1,j=jn.shiftPoint(l,c,y*4),C=jn.shiftPoint(h,c,x*4);x=this.transitionsBetween(j,f)+1,y=this.transitionsBetween(C,f)+1,(x&1)===1&&(x+=1),(y&1)===1&&(y+=1);let R=(l.getX()+c.getX()+h.getX()+f.getX())/4,U=(l.getY()+c.getY()+h.getY()+f.getY())/4;l=jn.moveAway(l,R,U),c=jn.moveAway(c,R,U),h=jn.moveAway(h,R,U),f=jn.moveAway(f,R,U);let H,J;return j=jn.shiftPoint(l,c,y*4),j=jn.shiftPoint(j,f,x*4),H=jn.shiftPoint(c,l,y*4),H=jn.shiftPoint(H,h,x*4),C=jn.shiftPoint(h,f,y*4),C=jn.shiftPoint(C,c,x*4),J=jn.shiftPoint(f,h,y*4),J=jn.shiftPoint(J,l,x*4),[j,H,C,J]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,l,c,h,f,x,y){return en.getInstance().sampleGrid(i,x,y,.5,.5,x-.5,.5,x-.5,y-.5,.5,y-.5,l.getX(),l.getY(),f.getX(),f.getY(),h.getX(),h.getY(),c.getX(),c.getY())}transitionsBetween(i,l){let c=Math.trunc(i.getX()),h=Math.trunc(i.getY()),f=Math.trunc(l.getX()),x=Math.trunc(l.getY()),y=Math.abs(x-h)>Math.abs(f-c);if(y){let G=c;c=h,h=G,G=f,f=x,x=G}let j=Math.abs(f-c),C=Math.abs(x-h),R=-j/2,U=h<x?1:-1,H=c<f?1:-1,J=0,q=this.image.get(y?h:c,y?c:h);for(let G=c,K=h;G!==f;G+=H){let le=this.image.get(y?K:G,y?G:K);if(le!==q&&(J++,q=le),R+=C,R>0){if(K===x)break;K+=U,R-=j}}return J}}class ps{constructor(){this.decoder=new Sp}decode(i,l=null){let c,h;if(l!=null&&l.has(L.PURE_BARCODE)){const C=ps.extractPureBits(i.getBlackMatrix());c=this.decoder.decode(C),h=ps.NO_POINTS}else{const C=new jn(i.getBlackMatrix()).detect();c=this.decoder.decode(C.getBits()),h=C.getPoints()}const f=c.getRawBytes(),x=new Be(c.getText(),f,8*f.length,h,Ae.DATA_MATRIX,I.currentTimeMillis()),y=c.getByteSegments();y!=null&&x.putMetadata(nt.BYTE_SEGMENTS,y);const j=c.getECLevel();return j!=null&&x.putMetadata(nt.ERROR_CORRECTION_LEVEL,j),x}reset(){}static extractPureBits(i){const l=i.getTopLeftOnBit(),c=i.getBottomRightOnBit();if(l==null||c==null)throw new ne;const h=this.moduleSize(l,i);let f=l[1];const x=c[1];let y=l[0];const C=(c[0]-y+1)/h,R=(x-f+1)/h;if(C<=0||R<=0)throw new ne;const U=h/2;f+=U,y+=U;const H=new ve(C,R);for(let J=0;J<R;J++){const q=f+J*h;for(let G=0;G<C;G++)i.get(y+G*h,q)&&H.set(G,J)}return H}static moduleSize(i,l){const c=l.getWidth();let h=i[0];const f=i[1];for(;h<c&&l.get(h,f);)h++;if(h===c)throw new ne;const x=h-i[0];if(x===0)throw new ne;return x}}ps.NO_POINTS=[];class Hu extends Ve{constructor(i=500){super(new ps,i)}}var Ii;(function(B){B[B.L=0]="L",B[B.M=1]="M",B[B.Q=2]="Q",B[B.H=3]="H"})(Ii||(Ii={}));class cn{constructor(i,l,c){this.value=i,this.stringValue=l,this.bits=c,cn.FOR_BITS.set(c,this),cn.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return cn.L;case"M":return cn.M;case"Q":return cn.Q;case"H":return cn.H;default:throw new w(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof cn))return!1;const l=i;return this.value===l.value}static forBits(i){if(i<0||i>=cn.FOR_BITS.size)throw new b;return cn.FOR_BITS.get(i)}}cn.FOR_BITS=new Map,cn.FOR_VALUE=new Map,cn.L=new cn(Ii.L,"L",1),cn.M=new cn(Ii.M,"M",0),cn.Q=new cn(Ii.Q,"Q",3),cn.H=new cn(Ii.H,"H",2);class rr{constructor(i){this.errorCorrectionLevel=cn.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,l){return O.bitCount(i^l)}static decodeFormatInformation(i,l){const c=rr.doDecodeFormatInformation(i,l);return c!==null?c:rr.doDecodeFormatInformation(i^rr.FORMAT_INFO_MASK_QR,l^rr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,l){let c=Number.MAX_SAFE_INTEGER,h=0;for(const f of rr.FORMAT_INFO_DECODE_LOOKUP){const x=f[0];if(x===i||x===l)return new rr(f[1]);let y=rr.numBitsDiffering(i,x);y<c&&(h=f[1],c=y),i!==l&&(y=rr.numBitsDiffering(l,x),y<c&&(h=f[1],c=y))}return c<=3?new rr(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof rr))return!1;const l=i;return this.errorCorrectionLevel===l.errorCorrectionLevel&&this.dataMask===l.dataMask}}rr.FORMAT_INFO_MASK_QR=21522,rr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class xe{constructor(i,...l){this.ecCodewordsPerBlock=i,this.ecBlocks=l}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const l=this.ecBlocks;for(const c of l)i+=c.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Z{constructor(i,l){this.count=i,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class dt{constructor(i,l,...c){this.versionNumber=i,this.alignmentPatternCenters=l,this.ecBlocks=c;let h=0;const f=c[0].getECCodewordsPerBlock(),x=c[0].getECBlocks();for(const y of x)h+=y.getCount()*(y.getDataCodewords()+f);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new F;try{return this.getVersionForNumber((i-17)/4)}catch{throw new F}}static getVersionForNumber(i){if(i<1||i>40)throw new b;return dt.VERSIONS[i-1]}static decodeVersionInformation(i){let l=Number.MAX_SAFE_INTEGER,c=0;for(let h=0;h<dt.VERSION_DECODE_INFO.length;h++){const f=dt.VERSION_DECODE_INFO[h];if(f===i)return dt.getVersionForNumber(h+7);const x=rr.numBitsDiffering(i,f);x<l&&(c=h+7,l=x)}return l<=3?dt.getVersionForNumber(c):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),l=new ve(i);l.setRegion(0,0,9,9),l.setRegion(i-8,0,8,9),l.setRegion(0,i-8,9,8);const c=this.alignmentPatternCenters.length;for(let h=0;h<c;h++){const f=this.alignmentPatternCenters[h]-2;for(let x=0;x<c;x++)h===0&&(x===0||x===c-1)||h===c-1&&x===0||l.setRegion(this.alignmentPatternCenters[x]-2,f,5,5)}return l.setRegion(6,9,1,i-17),l.setRegion(9,6,i-17,1),this.versionNumber>6&&(l.setRegion(i-11,0,3,6),l.setRegion(0,i-11,6,3)),l}toString(){return""+this.versionNumber}}dt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),dt.VERSIONS=[new dt(1,new Int32Array(0),new xe(7,new Z(1,19)),new xe(10,new Z(1,16)),new xe(13,new Z(1,13)),new xe(17,new Z(1,9))),new dt(2,Int32Array.from([6,18]),new xe(10,new Z(1,34)),new xe(16,new Z(1,28)),new xe(22,new Z(1,22)),new xe(28,new Z(1,16))),new dt(3,Int32Array.from([6,22]),new xe(15,new Z(1,55)),new xe(26,new Z(1,44)),new xe(18,new Z(2,17)),new xe(22,new Z(2,13))),new dt(4,Int32Array.from([6,26]),new xe(20,new Z(1,80)),new xe(18,new Z(2,32)),new xe(26,new Z(2,24)),new xe(16,new Z(4,9))),new dt(5,Int32Array.from([6,30]),new xe(26,new Z(1,108)),new xe(24,new Z(2,43)),new xe(18,new Z(2,15),new Z(2,16)),new xe(22,new Z(2,11),new Z(2,12))),new dt(6,Int32Array.from([6,34]),new xe(18,new Z(2,68)),new xe(16,new Z(4,27)),new xe(24,new Z(4,19)),new xe(28,new Z(4,15))),new dt(7,Int32Array.from([6,22,38]),new xe(20,new Z(2,78)),new xe(18,new Z(4,31)),new xe(18,new Z(2,14),new Z(4,15)),new xe(26,new Z(4,13),new Z(1,14))),new dt(8,Int32Array.from([6,24,42]),new xe(24,new Z(2,97)),new xe(22,new Z(2,38),new Z(2,39)),new xe(22,new Z(4,18),new Z(2,19)),new xe(26,new Z(4,14),new Z(2,15))),new dt(9,Int32Array.from([6,26,46]),new xe(30,new Z(2,116)),new xe(22,new Z(3,36),new Z(2,37)),new xe(20,new Z(4,16),new Z(4,17)),new xe(24,new Z(4,12),new Z(4,13))),new dt(10,Int32Array.from([6,28,50]),new xe(18,new Z(2,68),new Z(2,69)),new xe(26,new Z(4,43),new Z(1,44)),new xe(24,new Z(6,19),new Z(2,20)),new xe(28,new Z(6,15),new Z(2,16))),new dt(11,Int32Array.from([6,30,54]),new xe(20,new Z(4,81)),new xe(30,new Z(1,50),new Z(4,51)),new xe(28,new Z(4,22),new Z(4,23)),new xe(24,new Z(3,12),new Z(8,13))),new dt(12,Int32Array.from([6,32,58]),new xe(24,new Z(2,92),new Z(2,93)),new xe(22,new Z(6,36),new Z(2,37)),new xe(26,new Z(4,20),new Z(6,21)),new xe(28,new Z(7,14),new Z(4,15))),new dt(13,Int32Array.from([6,34,62]),new xe(26,new Z(4,107)),new xe(22,new Z(8,37),new Z(1,38)),new xe(24,new Z(8,20),new Z(4,21)),new xe(22,new Z(12,11),new Z(4,12))),new dt(14,Int32Array.from([6,26,46,66]),new xe(30,new Z(3,115),new Z(1,116)),new xe(24,new Z(4,40),new Z(5,41)),new xe(20,new Z(11,16),new Z(5,17)),new xe(24,new Z(11,12),new Z(5,13))),new dt(15,Int32Array.from([6,26,48,70]),new xe(22,new Z(5,87),new Z(1,88)),new xe(24,new Z(5,41),new Z(5,42)),new xe(30,new Z(5,24),new Z(7,25)),new xe(24,new Z(11,12),new Z(7,13))),new dt(16,Int32Array.from([6,26,50,74]),new xe(24,new Z(5,98),new Z(1,99)),new xe(28,new Z(7,45),new Z(3,46)),new xe(24,new Z(15,19),new Z(2,20)),new xe(30,new Z(3,15),new Z(13,16))),new dt(17,Int32Array.from([6,30,54,78]),new xe(28,new Z(1,107),new Z(5,108)),new xe(28,new Z(10,46),new Z(1,47)),new xe(28,new Z(1,22),new Z(15,23)),new xe(28,new Z(2,14),new Z(17,15))),new dt(18,Int32Array.from([6,30,56,82]),new xe(30,new Z(5,120),new Z(1,121)),new xe(26,new Z(9,43),new Z(4,44)),new xe(28,new Z(17,22),new Z(1,23)),new xe(28,new Z(2,14),new Z(19,15))),new dt(19,Int32Array.from([6,30,58,86]),new xe(28,new Z(3,113),new Z(4,114)),new xe(26,new Z(3,44),new Z(11,45)),new xe(26,new Z(17,21),new Z(4,22)),new xe(26,new Z(9,13),new Z(16,14))),new dt(20,Int32Array.from([6,34,62,90]),new xe(28,new Z(3,107),new Z(5,108)),new xe(26,new Z(3,41),new Z(13,42)),new xe(30,new Z(15,24),new Z(5,25)),new xe(28,new Z(15,15),new Z(10,16))),new dt(21,Int32Array.from([6,28,50,72,94]),new xe(28,new Z(4,116),new Z(4,117)),new xe(26,new Z(17,42)),new xe(28,new Z(17,22),new Z(6,23)),new xe(30,new Z(19,16),new Z(6,17))),new dt(22,Int32Array.from([6,26,50,74,98]),new xe(28,new Z(2,111),new Z(7,112)),new xe(28,new Z(17,46)),new xe(30,new Z(7,24),new Z(16,25)),new xe(24,new Z(34,13))),new dt(23,Int32Array.from([6,30,54,78,102]),new xe(30,new Z(4,121),new Z(5,122)),new xe(28,new Z(4,47),new Z(14,48)),new xe(30,new Z(11,24),new Z(14,25)),new xe(30,new Z(16,15),new Z(14,16))),new dt(24,Int32Array.from([6,28,54,80,106]),new xe(30,new Z(6,117),new Z(4,118)),new xe(28,new Z(6,45),new Z(14,46)),new xe(30,new Z(11,24),new Z(16,25)),new xe(30,new Z(30,16),new Z(2,17))),new dt(25,Int32Array.from([6,32,58,84,110]),new xe(26,new Z(8,106),new Z(4,107)),new xe(28,new Z(8,47),new Z(13,48)),new xe(30,new Z(7,24),new Z(22,25)),new xe(30,new Z(22,15),new Z(13,16))),new dt(26,Int32Array.from([6,30,58,86,114]),new xe(28,new Z(10,114),new Z(2,115)),new xe(28,new Z(19,46),new Z(4,47)),new xe(28,new Z(28,22),new Z(6,23)),new xe(30,new Z(33,16),new Z(4,17))),new dt(27,Int32Array.from([6,34,62,90,118]),new xe(30,new Z(8,122),new Z(4,123)),new xe(28,new Z(22,45),new Z(3,46)),new xe(30,new Z(8,23),new Z(26,24)),new xe(30,new Z(12,15),new Z(28,16))),new dt(28,Int32Array.from([6,26,50,74,98,122]),new xe(30,new Z(3,117),new Z(10,118)),new xe(28,new Z(3,45),new Z(23,46)),new xe(30,new Z(4,24),new Z(31,25)),new xe(30,new Z(11,15),new Z(31,16))),new dt(29,Int32Array.from([6,30,54,78,102,126]),new xe(30,new Z(7,116),new Z(7,117)),new xe(28,new Z(21,45),new Z(7,46)),new xe(30,new Z(1,23),new Z(37,24)),new xe(30,new Z(19,15),new Z(26,16))),new dt(30,Int32Array.from([6,26,52,78,104,130]),new xe(30,new Z(5,115),new Z(10,116)),new xe(28,new Z(19,47),new Z(10,48)),new xe(30,new Z(15,24),new Z(25,25)),new xe(30,new Z(23,15),new Z(25,16))),new dt(31,Int32Array.from([6,30,56,82,108,134]),new xe(30,new Z(13,115),new Z(3,116)),new xe(28,new Z(2,46),new Z(29,47)),new xe(30,new Z(42,24),new Z(1,25)),new xe(30,new Z(23,15),new Z(28,16))),new dt(32,Int32Array.from([6,34,60,86,112,138]),new xe(30,new Z(17,115)),new xe(28,new Z(10,46),new Z(23,47)),new xe(30,new Z(10,24),new Z(35,25)),new xe(30,new Z(19,15),new Z(35,16))),new dt(33,Int32Array.from([6,30,58,86,114,142]),new xe(30,new Z(17,115),new Z(1,116)),new xe(28,new Z(14,46),new Z(21,47)),new xe(30,new Z(29,24),new Z(19,25)),new xe(30,new Z(11,15),new Z(46,16))),new dt(34,Int32Array.from([6,34,62,90,118,146]),new xe(30,new Z(13,115),new Z(6,116)),new xe(28,new Z(14,46),new Z(23,47)),new xe(30,new Z(44,24),new Z(7,25)),new xe(30,new Z(59,16),new Z(1,17))),new dt(35,Int32Array.from([6,30,54,78,102,126,150]),new xe(30,new Z(12,121),new Z(7,122)),new xe(28,new Z(12,47),new Z(26,48)),new xe(30,new Z(39,24),new Z(14,25)),new xe(30,new Z(22,15),new Z(41,16))),new dt(36,Int32Array.from([6,24,50,76,102,128,154]),new xe(30,new Z(6,121),new Z(14,122)),new xe(28,new Z(6,47),new Z(34,48)),new xe(30,new Z(46,24),new Z(10,25)),new xe(30,new Z(2,15),new Z(64,16))),new dt(37,Int32Array.from([6,28,54,80,106,132,158]),new xe(30,new Z(17,122),new Z(4,123)),new xe(28,new Z(29,46),new Z(14,47)),new xe(30,new Z(49,24),new Z(10,25)),new xe(30,new Z(24,15),new Z(46,16))),new dt(38,Int32Array.from([6,32,58,84,110,136,162]),new xe(30,new Z(4,122),new Z(18,123)),new xe(28,new Z(13,46),new Z(32,47)),new xe(30,new Z(48,24),new Z(14,25)),new xe(30,new Z(42,15),new Z(32,16))),new dt(39,Int32Array.from([6,26,54,82,110,138,166]),new xe(30,new Z(20,117),new Z(4,118)),new xe(28,new Z(40,47),new Z(7,48)),new xe(30,new Z(43,24),new Z(22,25)),new xe(30,new Z(10,15),new Z(67,16))),new dt(40,Int32Array.from([6,30,58,86,114,142,170]),new xe(30,new Z(19,118),new Z(6,119)),new xe(28,new Z(18,47),new Z(31,48)),new xe(30,new Z(34,24),new Z(34,25)),new xe(30,new Z(20,15),new Z(61,16)))];var Pn;(function(B){B[B.DATA_MASK_000=0]="DATA_MASK_000",B[B.DATA_MASK_001=1]="DATA_MASK_001",B[B.DATA_MASK_010=2]="DATA_MASK_010",B[B.DATA_MASK_011=3]="DATA_MASK_011",B[B.DATA_MASK_100=4]="DATA_MASK_100",B[B.DATA_MASK_101=5]="DATA_MASK_101",B[B.DATA_MASK_110=6]="DATA_MASK_110",B[B.DATA_MASK_111=7]="DATA_MASK_111"})(Pn||(Pn={}));class Sr{constructor(i,l){this.value=i,this.isMasked=l}unmaskBitMatrix(i,l){for(let c=0;c<l;c++)for(let h=0;h<l;h++)this.isMasked(c,h)&&i.flip(h,c)}}Sr.values=new Map([[Pn.DATA_MASK_000,new Sr(Pn.DATA_MASK_000,(B,i)=>(B+i&1)===0)],[Pn.DATA_MASK_001,new Sr(Pn.DATA_MASK_001,(B,i)=>(B&1)===0)],[Pn.DATA_MASK_010,new Sr(Pn.DATA_MASK_010,(B,i)=>i%3===0)],[Pn.DATA_MASK_011,new Sr(Pn.DATA_MASK_011,(B,i)=>(B+i)%3===0)],[Pn.DATA_MASK_100,new Sr(Pn.DATA_MASK_100,(B,i)=>(Math.floor(B/2)+Math.floor(i/3)&1)===0)],[Pn.DATA_MASK_101,new Sr(Pn.DATA_MASK_101,(B,i)=>B*i%6===0)],[Pn.DATA_MASK_110,new Sr(Pn.DATA_MASK_110,(B,i)=>B*i%6<3)],[Pn.DATA_MASK_111,new Sr(Pn.DATA_MASK_111,(B,i)=>(B+i+B*i%3&1)===0)]]);class Mi{constructor(i){const l=i.getHeight();if(l<21||(l&3)!==1)throw new F;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let f=0;f<6;f++)i=this.copyBit(f,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let f=5;f>=0;f--)i=this.copyBit(8,f,i);const l=this.bitMatrix.getHeight();let c=0;const h=l-7;for(let f=l-1;f>=h;f--)c=this.copyBit(8,f,c);for(let f=l-8;f<l;f++)c=this.copyBit(f,8,c);if(this.parsedFormatInfo=rr.decodeFormatInformation(i,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),l=Math.floor((i-17)/4);if(l<=6)return dt.getVersionForNumber(l);let c=0;const h=i-11;for(let x=5;x>=0;x--)for(let y=i-9;y>=h;y--)c=this.copyBit(y,x,c);let f=dt.decodeVersionInformation(c);if(f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;c=0;for(let x=5;x>=0;x--)for(let y=i-9;y>=h;y--)c=this.copyBit(x,y,c);if(f=dt.decodeVersionInformation(c),f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;throw new F}copyBit(i,l,c){return(this.isMirror?this.bitMatrix.get(l,i):this.bitMatrix.get(i,l))?c<<1|1:c<<1}readCodewords(){const i=this.readFormatInformation(),l=this.readVersion(),c=Sr.values.get(i.getDataMask()),h=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,h);const f=l.buildFunctionPattern();let x=!0;const y=new Uint8Array(l.getTotalCodewords());let j=0,C=0,R=0;for(let U=h-1;U>0;U-=2){U===6&&U--;for(let H=0;H<h;H++){const J=x?h-1-H:H;for(let q=0;q<2;q++)f.get(U-q,J)||(R++,C<<=1,this.bitMatrix.get(U-q,J)&&(C|=1),R===8&&(y[j++]=C,R=0,C=0))}x=!x}if(j!==l.getTotalCodewords())throw new F;return y}remask(){if(this.parsedFormatInfo===null)return;const i=Sr.values[this.parsedFormatInfo.getDataMask()],l=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,l)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let l=0,c=i.getWidth();l<c;l++)for(let h=l+1,f=i.getHeight();h<f;h++)i.get(l,h)!==i.get(h,l)&&(i.flip(h,l),i.flip(l,h))}}class Sl{constructor(i,l){this.numDataCodewords=i,this.codewords=l}static getDataBlocks(i,l,c){if(i.length!==l.getTotalCodewords())throw new b;const h=l.getECBlocksForLevel(c);let f=0;const x=h.getECBlocks();for(const q of x)f+=q.getCount();const y=new Array(f);let j=0;for(const q of x)for(let G=0;G<q.getCount();G++){const K=q.getDataCodewords(),le=h.getECCodewordsPerBlock()+K;y[j++]=new Sl(K,new Uint8Array(le))}const C=y[0].codewords.length;let R=y.length-1;for(;R>=0&&y[R].codewords.length!==C;)R--;R++;const U=C-h.getECCodewordsPerBlock();let H=0;for(let q=0;q<U;q++)for(let G=0;G<j;G++)y[G].codewords[q]=i[H++];for(let q=R;q<j;q++)y[q].codewords[U]=i[H++];const J=y[0].codewords.length;for(let q=U;q<J;q++)for(let G=0;G<j;G++){const K=G<R?q:q+1;y[G].codewords[K]=i[H++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var zr;(function(B){B[B.TERMINATOR=0]="TERMINATOR",B[B.NUMERIC=1]="NUMERIC",B[B.ALPHANUMERIC=2]="ALPHANUMERIC",B[B.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",B[B.BYTE=4]="BYTE",B[B.ECI=5]="ECI",B[B.KANJI=6]="KANJI",B[B.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",B[B.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",B[B.HANZI=9]="HANZI"})(zr||(zr={}));class pt{constructor(i,l,c,h){this.value=i,this.stringValue=l,this.characterCountBitsForVersions=c,this.bits=h,pt.FOR_BITS.set(h,this),pt.FOR_VALUE.set(i,this)}static forBits(i){const l=pt.FOR_BITS.get(i);if(l===void 0)throw new b;return l}getCharacterCountBits(i){const l=i.getVersionNumber();let c;return l<=9?c=0:l<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof pt))return!1;const l=i;return this.value===l.value}toString(){return this.stringValue}}pt.FOR_BITS=new Map,pt.FOR_VALUE=new Map,pt.TERMINATOR=new pt(zr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),pt.NUMERIC=new pt(zr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),pt.ALPHANUMERIC=new pt(zr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),pt.STRUCTURED_APPEND=new pt(zr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),pt.BYTE=new pt(zr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),pt.ECI=new pt(zr.ECI,"ECI",Int32Array.from([0,0,0]),7),pt.KANJI=new pt(zr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),pt.FNC1_FIRST_POSITION=new pt(zr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),pt.FNC1_SECOND_POSITION=new pt(zr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),pt.HANZI=new pt(zr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class gn{static decode(i,l,c,h){const f=new El(i);let x=new he;const y=new Array;let j=-1,C=-1;try{let R=null,U=!1,H;do{if(f.available()<4)H=pt.TERMINATOR;else{const J=f.readBits(4);H=pt.forBits(J)}switch(H){case pt.TERMINATOR:break;case pt.FNC1_FIRST_POSITION:case pt.FNC1_SECOND_POSITION:U=!0;break;case pt.STRUCTURED_APPEND:if(f.available()<16)throw new F;j=f.readBits(8),C=f.readBits(8);break;case pt.ECI:const J=gn.parseECIValue(f);if(R=V.getCharacterSetECIByValue(J),R===null)throw new F;break;case pt.HANZI:const q=f.readBits(4),G=f.readBits(H.getCharacterCountBits(l));q===gn.GB2312_SUBSET&&gn.decodeHanziSegment(f,x,G);break;default:const K=f.readBits(H.getCharacterCountBits(l));switch(H){case pt.NUMERIC:gn.decodeNumericSegment(f,x,K);break;case pt.ALPHANUMERIC:gn.decodeAlphanumericSegment(f,x,K,U);break;case pt.BYTE:gn.decodeByteSegment(f,x,K,R,y,h);break;case pt.KANJI:gn.decodeKanjiSegment(f,x,K);break;default:throw new F}break}}while(H!==pt.TERMINATOR)}catch{throw new F}return new qt(i,x.toString(),y.length===0?null:y,c===null?null:c.toString(),j,C)}static decodeHanziSegment(i,l,c){if(c*13>i.available())throw new F;const h=new Uint8Array(2*c);let f=0;for(;c>0;){const x=i.readBits(13);let y=x/96<<8&4294967295|x%96;y<959?y+=41377:y+=42657,h[f]=y>>8&255,h[f+1]=y&255,f+=2,c--}try{l.append(oe.decode(h,ee.GB2312))}catch(x){throw new F(x)}}static decodeKanjiSegment(i,l,c){if(c*13>i.available())throw new F;const h=new Uint8Array(2*c);let f=0;for(;c>0;){const x=i.readBits(13);let y=x/192<<8&4294967295|x%192;y<7936?y+=33088:y+=49472,h[f]=y>>8,h[f+1]=y,f+=2,c--}try{l.append(oe.decode(h,ee.SHIFT_JIS))}catch(x){throw new F(x)}}static decodeByteSegment(i,l,c,h,f,x){if(8*c>i.available())throw new F;const y=new Uint8Array(c);for(let C=0;C<c;C++)y[C]=i.readBits(8);let j;h===null?j=ee.guessEncoding(y,x):j=h.getName();try{l.append(oe.decode(y,j))}catch(C){throw new F(C)}f.push(y)}static toAlphaNumericChar(i){if(i>=gn.ALPHANUMERIC_CHARS.length)throw new F;return gn.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,l,c,h){const f=l.length();for(;c>1;){if(i.available()<11)throw new F;const x=i.readBits(11);l.append(gn.toAlphaNumericChar(Math.floor(x/45))),l.append(gn.toAlphaNumericChar(x%45)),c-=2}if(c===1){if(i.available()<6)throw new F;l.append(gn.toAlphaNumericChar(i.readBits(6)))}if(h)for(let x=f;x<l.length();x++)l.charAt(x)==="%"&&(x<l.length()-1&&l.charAt(x+1)==="%"?l.deleteCharAt(x+1):l.setCharAt(x,String.fromCharCode(29)))}static decodeNumericSegment(i,l,c){for(;c>=3;){if(i.available()<10)throw new F;const h=i.readBits(10);if(h>=1e3)throw new F;l.append(gn.toAlphaNumericChar(Math.floor(h/100))),l.append(gn.toAlphaNumericChar(Math.floor(h/10)%10)),l.append(gn.toAlphaNumericChar(h%10)),c-=3}if(c===2){if(i.available()<7)throw new F;const h=i.readBits(7);if(h>=100)throw new F;l.append(gn.toAlphaNumericChar(Math.floor(h/10))),l.append(gn.toAlphaNumericChar(h%10))}else if(c===1){if(i.available()<4)throw new F;const h=i.readBits(4);if(h>=10)throw new F;l.append(gn.toAlphaNumericChar(h))}}static parseECIValue(i){const l=i.readBits(8);if(!(l&128))return l&127;if((l&192)===128){const c=i.readBits(8);return(l&63)<<8&4294967295|c}if((l&224)===192){const c=i.readBits(16);return(l&31)<<16&4294967295|c}throw new F}}gn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",gn.GB2312_SUBSET=1;class Zc{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const l=i[0];i[0]=i[2],i[2]=l}}class Vu{constructor(){this.rsDecoder=new be(Te.QR_CODE_FIELD_256)}decodeBooleanArray(i,l){return this.decodeBitMatrix(ve.parseFromBooleanArray(i),l)}decodeBitMatrix(i,l){const c=new Mi(i);let h=null;try{return this.decodeBitMatrixParser(c,l)}catch(f){h=f}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const f=this.decodeBitMatrixParser(c,l);return f.setOther(new Zc(!0)),f}catch(f){throw h!==null?h:f}}decodeBitMatrixParser(i,l){const c=i.readVersion(),h=i.readFormatInformation().getErrorCorrectionLevel(),f=i.readCodewords(),x=Sl.getDataBlocks(f,c,h);let y=0;for(const R of x)y+=R.getNumDataCodewords();const j=new Uint8Array(y);let C=0;for(const R of x){const U=R.getCodewords(),H=R.getNumDataCodewords();this.correctErrors(U,H);for(let J=0;J<H;J++)j[C++]=U[J]}return gn.decode(j,c,h,l)}correctErrors(i,l){const c=new Int32Array(i);try{this.rsDecoder.decode(c,i.length-l)}catch{throw new E}for(let h=0;h<l;h++)i[h]=c[h]}}class kl extends ye{constructor(i,l,c){super(i,l),this.estimatedModuleSize=c}aboutEquals(i,l,c){if(Math.abs(l-this.getY())<=i&&Math.abs(c-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,l,c){const h=(this.getX()+l)/2,f=(this.getY()+i)/2,x=(this.estimatedModuleSize+c)/2;return new kl(h,f,x)}}class Al{constructor(i,l,c,h,f,x,y){this.image=i,this.startX=l,this.startY=c,this.width=h,this.height=f,this.moduleSize=x,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,l=this.height,c=this.width,h=i+c,f=this.startY+l/2,x=new Int32Array(3),y=this.image;for(let j=0;j<l;j++){const C=f+(j&1?-Math.floor((j+1)/2):Math.floor((j+1)/2));x[0]=0,x[1]=0,x[2]=0;let R=i;for(;R<h&&!y.get(R,C);)R++;let U=0;for(;R<h;){if(y.get(R,C))if(U===1)x[1]++;else if(U===2){if(this.foundPatternCross(x)){const H=this.handlePossibleCenter(x,C,R);if(H!==null)return H}x[0]=x[2],x[1]=1,x[2]=0,U=1}else x[++U]++;else U===1&&U++,x[U]++;R++}if(this.foundPatternCross(x)){const H=this.handlePossibleCenter(x,C,h);if(H!==null)return H}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ne}static centerFromEnd(i,l){return l-i[2]-i[1]/2}foundPatternCross(i){const l=this.moduleSize,c=l/2;for(let h=0;h<3;h++)if(Math.abs(l-i[h])>=c)return!1;return!0}crossCheckVertical(i,l,c,h){const f=this.image,x=f.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let j=i;for(;j>=0&&f.get(l,j)&&y[1]<=c;)y[1]++,j--;if(j<0||y[1]>c)return NaN;for(;j>=0&&!f.get(l,j)&&y[0]<=c;)y[0]++,j--;if(y[0]>c)return NaN;for(j=i+1;j<x&&f.get(l,j)&&y[1]<=c;)y[1]++,j++;if(j===x||y[1]>c)return NaN;for(;j<x&&!f.get(l,j)&&y[2]<=c;)y[2]++,j++;if(y[2]>c)return NaN;const C=y[0]+y[1]+y[2];return 5*Math.abs(C-h)>=2*h?NaN:this.foundPatternCross(y)?Al.centerFromEnd(y,j):NaN}handlePossibleCenter(i,l,c){const h=i[0]+i[1]+i[2],f=Al.centerFromEnd(i,c),x=this.crossCheckVertical(l,f,2*i[1],h);if(!isNaN(x)){const y=(i[0]+i[1]+i[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(y,x,f))return C.combineEstimate(x,f,y);const j=new kl(f,x,y);this.possibleCenters.push(j),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(j)}return null}}class Jc extends ye{constructor(i,l,c,h){super(i,l),this.estimatedModuleSize=c,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,l,c){if(Math.abs(l-this.getY())<=i&&Math.abs(c-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,l,c){const h=this.count+1,f=(this.count*this.getX()+l)/h,x=(this.count*this.getY()+i)/h,y=(this.count*this.estimatedModuleSize+c)/h;return new Jc(f,x,y,h)}}class kp{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Vn{constructor(i,l){this.image=i,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const l=i!=null&&i.get(L.TRY_HARDER)!==void 0,c=i!=null&&i.get(L.PURE_BARCODE)!==void 0,h=this.image,f=h.getHeight(),x=h.getWidth();let y=Math.floor(3*f/(4*Vn.MAX_MODULES));(y<Vn.MIN_SKIP||l)&&(y=Vn.MIN_SKIP);let j=!1;const C=new Int32Array(5);for(let U=y-1;U<f&&!j;U+=y){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let H=0;for(let J=0;J<x;J++)if(h.get(J,U))(H&1)===1&&H++,C[H]++;else if(H&1)C[H]++;else if(H===4)if(Vn.foundPatternCross(C)){if(this.handlePossibleCenter(C,U,J,c)===!0)if(y=2,this.hasSkipped===!0)j=this.haveMultiplyConfirmedCenters();else{const G=this.findRowSkip();G>C[2]&&(U+=G-C[2]-y,J=x-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,H=3;continue}H=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,H=3;else C[++H]++;Vn.foundPatternCross(C)&&this.handlePossibleCenter(C,U,x,c)===!0&&(y=C[0],this.hasSkipped&&(j=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return ye.orderBestPatterns(R),new kp(R)}static centerFromEnd(i,l){return l-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let l=0;for(let f=0;f<5;f++){const x=i[f];if(x===0)return!1;l+=x}if(l<7)return!1;const c=l/7,h=c/2;return Math.abs(c-i[0])<h&&Math.abs(c-i[1])<h&&Math.abs(3*c-i[2])<3*h&&Math.abs(c-i[3])<h&&Math.abs(c-i[4])<h}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,l,c,h){const f=this.getCrossCheckStateCount();let x=0;const y=this.image;for(;i>=x&&l>=x&&y.get(l-x,i-x);)f[2]++,x++;if(i<x||l<x)return!1;for(;i>=x&&l>=x&&!y.get(l-x,i-x)&&f[1]<=c;)f[1]++,x++;if(i<x||l<x||f[1]>c)return!1;for(;i>=x&&l>=x&&y.get(l-x,i-x)&&f[0]<=c;)f[0]++,x++;if(f[0]>c)return!1;const j=y.getHeight(),C=y.getWidth();for(x=1;i+x<j&&l+x<C&&y.get(l+x,i+x);)f[2]++,x++;if(i+x>=j||l+x>=C)return!1;for(;i+x<j&&l+x<C&&!y.get(l+x,i+x)&&f[3]<c;)f[3]++,x++;if(i+x>=j||l+x>=C||f[3]>=c)return!1;for(;i+x<j&&l+x<C&&y.get(l+x,i+x)&&f[4]<c;)f[4]++,x++;if(f[4]>=c)return!1;const R=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(R-h)<2*h&&Vn.foundPatternCross(f)}crossCheckVertical(i,l,c,h){const f=this.image,x=f.getHeight(),y=this.getCrossCheckStateCount();let j=i;for(;j>=0&&f.get(l,j);)y[2]++,j--;if(j<0)return NaN;for(;j>=0&&!f.get(l,j)&&y[1]<=c;)y[1]++,j--;if(j<0||y[1]>c)return NaN;for(;j>=0&&f.get(l,j)&&y[0]<=c;)y[0]++,j--;if(y[0]>c)return NaN;for(j=i+1;j<x&&f.get(l,j);)y[2]++,j++;if(j===x)return NaN;for(;j<x&&!f.get(l,j)&&y[3]<c;)y[3]++,j++;if(j===x||y[3]>=c)return NaN;for(;j<x&&f.get(l,j)&&y[4]<c;)y[4]++,j++;if(y[4]>=c)return NaN;const C=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(C-h)>=2*h?NaN:Vn.foundPatternCross(y)?Vn.centerFromEnd(y,j):NaN}crossCheckHorizontal(i,l,c,h){const f=this.image,x=f.getWidth(),y=this.getCrossCheckStateCount();let j=i;for(;j>=0&&f.get(j,l);)y[2]++,j--;if(j<0)return NaN;for(;j>=0&&!f.get(j,l)&&y[1]<=c;)y[1]++,j--;if(j<0||y[1]>c)return NaN;for(;j>=0&&f.get(j,l)&&y[0]<=c;)y[0]++,j--;if(y[0]>c)return NaN;for(j=i+1;j<x&&f.get(j,l);)y[2]++,j++;if(j===x)return NaN;for(;j<x&&!f.get(j,l)&&y[3]<c;)y[3]++,j++;if(j===x||y[3]>=c)return NaN;for(;j<x&&f.get(j,l)&&y[4]<c;)y[4]++,j++;if(y[4]>=c)return NaN;const C=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(C-h)>=h?NaN:Vn.foundPatternCross(y)?Vn.centerFromEnd(y,j):NaN}handlePossibleCenter(i,l,c,h){const f=i[0]+i[1]+i[2]+i[3]+i[4];let x=Vn.centerFromEnd(i,c),y=this.crossCheckVertical(l,Math.floor(x),i[2],f);if(!isNaN(y)&&(x=this.crossCheckHorizontal(Math.floor(x),Math.floor(y),i[2],f),!isNaN(x)&&(!h||this.crossCheckDiagonal(Math.floor(y),Math.floor(x),i[2],f)))){const j=f/7;let C=!1;const R=this.possibleCenters;for(let U=0,H=R.length;U<H;U++){const J=R[U];if(J.aboutEquals(j,y,x)){R[U]=J.combineEstimate(y,x,j),C=!0;break}}if(!C){const U=new Jc(x,y,j);R.push(U),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(U)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(const c of this.possibleCenters)if(c.getCount()>=Vn.CENTER_QUORUM)if(l==null)l=c;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-c.getX())-Math.abs(l.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,l=0;const c=this.possibleCenters.length;for(const x of this.possibleCenters)x.getCount()>=Vn.CENTER_QUORUM&&(i++,l+=x.getEstimatedModuleSize());if(i<3)return!1;const h=l/c;let f=0;for(const x of this.possibleCenters)f+=Math.abs(x.getEstimatedModuleSize()-h);return f<=.05*l}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new ne;const l=this.possibleCenters;let c;if(i>3){let h=0,f=0;for(const j of this.possibleCenters){const C=j.getEstimatedModuleSize();h+=C,f+=C*C}c=h/i;let x=Math.sqrt(f/i-c*c);l.sort((j,C)=>{const R=Math.abs(C.getEstimatedModuleSize()-c),U=Math.abs(j.getEstimatedModuleSize()-c);return R<U?-1:R>U?1:0});const y=Math.max(.2*c,x);for(let j=0;j<l.length&&l.length>3;j++){const C=l[j];Math.abs(C.getEstimatedModuleSize()-c)>y&&(l.splice(j,1),j--)}}if(l.length>3){let h=0;for(const f of l)h+=f.getEstimatedModuleSize();c=h/l.length,l.sort((f,x)=>{if(x.getCount()===f.getCount()){const y=Math.abs(x.getEstimatedModuleSize()-c),j=Math.abs(f.getEstimatedModuleSize()-c);return y<j?1:y>j?-1:0}else return x.getCount()-f.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}Vn.CENTER_QUORUM=2,Vn.MIN_SKIP=3,Vn.MAX_MODULES=57;class So{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(L.NEED_RESULT_POINT_CALLBACK);const c=new Vn(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(c)}processFinderPatternInfo(i){const l=i.getTopLeft(),c=i.getTopRight(),h=i.getBottomLeft(),f=this.calculateModuleSize(l,c,h);if(f<1)throw new ne("No pattern found in proccess finder.");const x=So.computeDimension(l,c,h,f),y=dt.getProvisionalVersionForDimension(x),j=y.getDimensionForVersion()-7;let C=null;if(y.getAlignmentPatternCenters().length>0){const J=c.getX()-l.getX()+h.getX(),q=c.getY()-l.getY()+h.getY(),G=1-3/j,K=Math.floor(l.getX()+G*(J-l.getX())),le=Math.floor(l.getY()+G*(q-l.getY()));for(let Ce=4;Ce<=16;Ce<<=1)try{C=this.findAlignmentInRegion(f,K,le,Ce);break}catch(Me){if(!(Me instanceof ne))throw Me}}const R=So.createTransform(l,c,h,C,x),U=So.sampleGrid(this.image,R,x);let H;return C===null?H=[h,l,c]:H=[h,l,c,C],new ie(U,H)}static createTransform(i,l,c,h,f){const x=f-3.5;let y,j,C,R;return h!==null?(y=h.getX(),j=h.getY(),C=x-3,R=C):(y=l.getX()-i.getX()+c.getX(),j=l.getY()-i.getY()+c.getY(),C=x,R=x),ht.quadrilateralToQuadrilateral(3.5,3.5,x,3.5,C,R,3.5,x,i.getX(),i.getY(),l.getX(),l.getY(),y,j,c.getX(),c.getY())}static sampleGrid(i,l,c){return en.getInstance().sampleGridWithTransform(i,c,c,l)}static computeDimension(i,l,c,h){const f=Ge.round(ye.distance(i,l)/h),x=Ge.round(ye.distance(i,c)/h);let y=Math.floor((f+x)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new ne("Dimensions could be not found.")}return y}calculateModuleSize(i,l,c){return(this.calculateModuleSizeOneWay(i,l)+this.calculateModuleSizeOneWay(i,c))/2}calculateModuleSizeOneWay(i,l){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(l.getX()),Math.floor(l.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(c)?h/7:isNaN(h)?c/7:(c+h)/14}sizeOfBlackWhiteBlackRunBothWays(i,l,c,h){let f=this.sizeOfBlackWhiteBlackRun(i,l,c,h),x=1,y=i-(c-i);y<0?(x=i/(i-y),y=0):y>=this.image.getWidth()&&(x=(this.image.getWidth()-1-i)/(y-i),y=this.image.getWidth()-1);let j=Math.floor(l-(h-l)*x);return x=1,j<0?(x=l/(l-j),j=0):j>=this.image.getHeight()&&(x=(this.image.getHeight()-1-l)/(j-l),j=this.image.getHeight()-1),y=Math.floor(i+(y-i)*x),f+=this.sizeOfBlackWhiteBlackRun(i,l,y,j),f-1}sizeOfBlackWhiteBlackRun(i,l,c,h){const f=Math.abs(h-l)>Math.abs(c-i);if(f){let J=i;i=l,l=J,J=c,c=h,h=J}const x=Math.abs(c-i),y=Math.abs(h-l);let j=-x/2;const C=i<c?1:-1,R=l<h?1:-1;let U=0;const H=c+C;for(let J=i,q=l;J!==H;J+=C){const G=f?q:J,K=f?J:q;if(U===1===this.image.get(G,K)){if(U===2)return Ge.distance(J,q,i,l);U++}if(j+=y,j>0){if(q===h)break;q+=R,j-=x}}return U===2?Ge.distance(c+C,h,i,l):NaN}findAlignmentInRegion(i,l,c,h){const f=Math.floor(h*i),x=Math.max(0,l-f),y=Math.min(this.image.getWidth()-1,l+f);if(y-x<i*3)throw new ne("Alignment top exceeds estimated module size.");const j=Math.max(0,c-f),C=Math.min(this.image.getHeight()-1,c+f);if(C-j<i*3)throw new ne("Alignment bottom exceeds estimated module size.");return new Al(this.image,x,j,y-x,C-j,i,this.resultPointCallback).find()}}class wa{constructor(){this.decoder=new Vu}getDecoder(){return this.decoder}decode(i,l){let c,h;if(l!=null&&l.get(L.PURE_BARCODE)!==void 0){const j=wa.extractPureBits(i.getBlackMatrix());c=this.decoder.decodeBitMatrix(j,l),h=wa.NO_POINTS}else{const j=new So(i.getBlackMatrix()).detect(l);c=this.decoder.decodeBitMatrix(j.getBits(),l),h=j.getPoints()}c.getOther()instanceof Zc&&c.getOther().applyMirroredCorrection(h);const f=new Be(c.getText(),c.getRawBytes(),void 0,h,Ae.QR_CODE,void 0),x=c.getByteSegments();x!==null&&f.putMetadata(nt.BYTE_SEGMENTS,x);const y=c.getECLevel();return y!==null&&f.putMetadata(nt.ERROR_CORRECTION_LEVEL,y),c.hasStructuredAppend()&&(f.putMetadata(nt.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),f.putMetadata(nt.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),f}reset(){}static extractPureBits(i){const l=i.getTopLeftOnBit(),c=i.getBottomRightOnBit();if(l===null||c===null)throw new ne;const h=this.moduleSize(l,i);let f=l[1],x=c[1],y=l[0],j=c[0];if(y>=j||f>=x)throw new ne;if(x-f!==j-y&&(j=y+(x-f),j>=i.getWidth()))throw new ne;const C=Math.round((j-y+1)/h),R=Math.round((x-f+1)/h);if(C<=0||R<=0)throw new ne;if(R!==C)throw new ne;const U=Math.floor(h/2);f+=U,y+=U;const H=y+Math.floor((C-1)*h)-j;if(H>0){if(H>U)throw new ne;y-=H}const J=f+Math.floor((R-1)*h)-x;if(J>0){if(J>U)throw new ne;f-=J}const q=new ve(C,R);for(let G=0;G<R;G++){const K=f+Math.floor(G*h);for(let le=0;le<C;le++)i.get(y+Math.floor(le*h),K)&&q.set(le,G)}return q}static moduleSize(i,l){const c=l.getHeight(),h=l.getWidth();let f=i[0],x=i[1],y=!0,j=0;for(;f<h&&x<c;){if(y!==l.get(f,x)){if(++j===5)break;y=!y}f++,x++}if(f===h||x===c)throw new ne;return(f-i[0])/7}}wa.NO_POINTS=new Array;class gt{PDF417Common(){}static getBitCountSum(i){return Ge.sum(i)}static toIntArray(i){if(i==null||!i.length)return gt.EMPTY_INT_ARRAY;const l=new Int32Array(i.length);let c=0;for(const h of i)l[c++]=h;return l}static getCodeword(i){const l=A.binarySearch(gt.SYMBOL_TABLE,i&262143);return l<0?-1:(gt.CODEWORD_TABLE[l]-1)%gt.NUMBER_OF_CODEWORDS}}gt.NUMBER_OF_CODEWORDS=929,gt.MAX_CODEWORDS_IN_BARCODE=gt.NUMBER_OF_CODEWORDS-1,gt.MIN_ROWS_IN_BARCODE=3,gt.MAX_ROWS_IN_BARCODE=90,gt.MODULES_IN_CODEWORD=17,gt.MODULES_IN_STOP_PATTERN=18,gt.BARS_IN_MODULE=8,gt.EMPTY_INT_ARRAY=new Int32Array([]),gt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),gt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ap{constructor(i,l){this.bits=i,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class Ct{static detectMultiple(i,l,c){let h=i.getBlackMatrix(),f=Ct.detect(c,h);return f.length||(h=h.clone(),h.rotate180(),f=Ct.detect(c,h)),new Ap(h,f)}static detect(i,l){const c=new Array;let h=0,f=0,x=!1;for(;h<l.getHeight();){const y=Ct.findVertices(l,h,f);if(y[0]==null&&y[3]==null){if(!x)break;x=!1,f=0;for(const j of c)j[1]!=null&&(h=Math.trunc(Math.max(h,j[1].getY()))),j[3]!=null&&(h=Math.max(h,Math.trunc(j[3].getY())));h+=Ct.ROW_STEP;continue}if(x=!0,c.push(y),!i)break;y[2]!=null?(f=Math.trunc(y[2].getX()),h=Math.trunc(y[2].getY())):(f=Math.trunc(y[4].getX()),h=Math.trunc(y[4].getY()))}return c}static findVertices(i,l,c){const h=i.getHeight(),f=i.getWidth(),x=new Array(8);return Ct.copyToResult(x,Ct.findRowsWithPattern(i,h,f,l,c,Ct.START_PATTERN),Ct.INDEXES_START_PATTERN),x[4]!=null&&(c=Math.trunc(x[4].getX()),l=Math.trunc(x[4].getY())),Ct.copyToResult(x,Ct.findRowsWithPattern(i,h,f,l,c,Ct.STOP_PATTERN),Ct.INDEXES_STOP_PATTERN),x}static copyToResult(i,l,c){for(let h=0;h<c.length;h++)i[c[h]]=l[h]}static findRowsWithPattern(i,l,c,h,f,x){const y=new Array(4);let j=!1;const C=new Int32Array(x.length);for(;h<l;h+=Ct.ROW_STEP){let U=Ct.findGuardPattern(i,f,h,c,!1,x,C);if(U!=null){for(;h>0;){const H=Ct.findGuardPattern(i,f,--h,c,!1,x,C);if(H!=null)U=H;else{h++;break}}y[0]=new ye(U[0],h),y[1]=new ye(U[1],h),j=!0;break}}let R=h+1;if(j){let U=0,H=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;R<l;R++){const J=Ct.findGuardPattern(i,H[0],R,c,!1,x,C);if(J!=null&&Math.abs(H[0]-J[0])<Ct.MAX_PATTERN_DRIFT&&Math.abs(H[1]-J[1])<Ct.MAX_PATTERN_DRIFT)H=J,U=0;else{if(U>Ct.SKIPPED_ROW_COUNT_MAX)break;U++}}R-=U+1,y[2]=new ye(H[0],R),y[3]=new ye(H[1],R)}return R-h<Ct.BARCODE_MIN_HEIGHT&&A.fill(y,null),y}static findGuardPattern(i,l,c,h,f,x,y){A.fillWithin(y,0,y.length,0);let j=l,C=0;for(;i.get(j,c)&&j>0&&C++<Ct.MAX_PIXEL_DRIFT;)j--;let R=j,U=0,H=x.length;for(let J=f;R<h;R++)if(i.get(R,c)!==J)y[U]++;else{if(U===H-1){if(Ct.patternMatchVariance(y,x,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE)return new Int32Array([j,R]);j+=y[0]+y[1],I.arraycopy(y,2,y,0,U-1),y[U-1]=0,y[U]=0,U--}else U++;y[U]=1,J=!J}return U===H-1&&Ct.patternMatchVariance(y,x,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE?new Int32Array([j,R-1]):null}static patternMatchVariance(i,l,c){let h=i.length,f=0,x=0;for(let C=0;C<h;C++)f+=i[C],x+=l[C];if(f<x)return 1/0;let y=f/x;c*=y;let j=0;for(let C=0;C<h;C++){let R=i[C],U=l[C]*y,H=R>U?R-U:U-R;if(H>c)return 1/0;j+=H}return j/f}}Ct.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ct.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ct.MAX_AVG_VARIANCE=.42,Ct.MAX_INDIVIDUAL_VARIANCE=.8,Ct.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ct.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ct.MAX_PIXEL_DRIFT=3,Ct.MAX_PATTERN_DRIFT=5,Ct.SKIPPED_ROW_COUNT_MAX=25,Ct.ROW_STEP=5,Ct.BARCODE_MIN_HEIGHT=10;class sr{constructor(i,l){if(l.length===0)throw new b;this.field=i;let c=l.length;if(c>1&&l[0]===0){let h=1;for(;h<c&&l[h]===0;)h++;h===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-h),I.arraycopy(l,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let h=0;for(let f of this.coefficients)h=this.field.add(h,f);return h}let l=this.coefficients[0],c=this.coefficients.length;for(let h=1;h<c;h++)l=this.field.add(this.field.multiply(i,l),this.coefficients[h]);return l}add(i){if(!this.field.equals(i.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let l=this.coefficients,c=i.coefficients;if(l.length>c.length){let x=l;l=c,c=x}let h=new Int32Array(c.length),f=c.length-l.length;I.arraycopy(c,0,h,0,f);for(let x=f;x<c.length;x++)h[x]=this.field.add(l[x-f],c[x]);return new sr(this.field,h)}subtract(i){if(!this.field.equals(i.field))throw new b("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof sr?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new sr(this.field,new Int32Array([0]));let l=this.coefficients,c=l.length,h=i.coefficients,f=h.length,x=new Int32Array(c+f-1);for(let y=0;y<c;y++){let j=l[y];for(let C=0;C<f;C++)x[y+C]=this.field.add(x[y+C],this.field.multiply(j,h[C]))}return new sr(this.field,x)}negative(){let i=this.coefficients.length,l=new Int32Array(i);for(let c=0;c<i;c++)l[c]=this.field.subtract(0,this.coefficients[c]);return new sr(this.field,l)}multiplyScalar(i){if(i===0)return new sr(this.field,new Int32Array([0]));if(i===1)return this;let l=this.coefficients.length,c=new Int32Array(l);for(let h=0;h<l;h++)c[h]=this.field.multiply(this.coefficients[h],i);return new sr(this.field,c)}multiplyByMonomial(i,l){if(i<0)throw new b;if(l===0)return new sr(this.field,new Int32Array([0]));let c=this.coefficients.length,h=new Int32Array(c+i);for(let f=0;f<c;f++)h[f]=this.field.multiply(this.coefficients[f],l);return new sr(this.field,h)}toString(){let i=new he;for(let l=this.getDegree();l>=0;l--){let c=this.getCoefficient(l);c!==0&&(c<0?(i.append(" - "),c=-c):i.length()>0&&i.append(" + "),(l===0||c!==1)&&i.append(c),l!==0&&(l===1?i.append("x"):(i.append("x^"),i.append(l))))}return i.toString()}}class Tp{add(i,l){return(i+l)%this.modulus}subtract(i,l){return(this.modulus+i-l)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new b;return this.logTable[i]}inverse(i){if(i===0)throw new Tt;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,l){return i===0||l===0?0:this.expTable[(this.logTable[i]+this.logTable[l])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class ed extends Tp{constructor(i,l){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let c=1;for(let h=0;h<i;h++)this.expTable[h]=c,c=c*l%i;for(let h=0;h<i-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new sr(this,new Int32Array([0])),this.one=new sr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,l){if(i<0)throw new b;if(l===0)return this.zero;let c=new Int32Array(i+1);return c[0]=l,new sr(this,c)}}ed.PDF417_GF=new ed(gt.NUMBER_OF_CODEWORDS,3);class $u{constructor(){this.field=ed.PDF417_GF}decode(i,l,c){let h=new sr(this.field,i),f=new Int32Array(l),x=!1;for(let q=l;q>0;q--){let G=h.evaluateAt(this.field.exp(q));f[l-q]=G,G!==0&&(x=!0)}if(!x)return 0;let y=this.field.getOne();if(c!=null)for(const q of c){let G=this.field.exp(i.length-1-q),K=new sr(this.field,new Int32Array([this.field.subtract(0,G),1]));y=y.multiply(K)}let j=new sr(this.field,f),C=this.runEuclideanAlgorithm(this.field.buildMonomial(l,1),j,l),R=C[0],U=C[1],H=this.findErrorLocations(R),J=this.findErrorMagnitudes(U,R,H);for(let q=0;q<H.length;q++){let G=i.length-1-this.field.log(H[q]);if(G<0)throw E.getChecksumInstance();i[G]=this.field.subtract(i[G],J[q])}return H.length}runEuclideanAlgorithm(i,l,c){if(i.getDegree()<l.getDegree()){let H=i;i=l,l=H}let h=i,f=l,x=this.field.getZero(),y=this.field.getOne();for(;f.getDegree()>=Math.round(c/2);){let H=h,J=x;if(h=f,x=y,h.isZero())throw E.getChecksumInstance();f=H;let q=this.field.getZero(),G=h.getCoefficient(h.getDegree()),K=this.field.inverse(G);for(;f.getDegree()>=h.getDegree()&&!f.isZero();){let le=f.getDegree()-h.getDegree(),Ce=this.field.multiply(f.getCoefficient(f.getDegree()),K);q=q.add(this.field.buildMonomial(le,Ce)),f=f.subtract(h.multiplyByMonomial(le,Ce))}y=q.multiply(x).subtract(J).negative()}let j=y.getCoefficient(0);if(j===0)throw E.getChecksumInstance();let C=this.field.inverse(j),R=y.multiply(C),U=f.multiply(C);return[R,U]}findErrorLocations(i){let l=i.getDegree(),c=new Int32Array(l),h=0;for(let f=1;f<this.field.getSize()&&h<l;f++)i.evaluateAt(f)===0&&(c[h]=this.field.inverse(f),h++);if(h!==l)throw E.getChecksumInstance();return c}findErrorMagnitudes(i,l,c){let h=l.getDegree(),f=new Int32Array(h);for(let C=1;C<=h;C++)f[h-C]=this.field.multiply(C,l.getCoefficient(C));let x=new sr(this.field,f),y=c.length,j=new Int32Array(y);for(let C=0;C<y;C++){let R=this.field.inverse(c[C]),U=this.field.subtract(0,i.evaluateAt(R)),H=this.field.inverse(x.evaluateAt(R));j[C]=this.field.multiply(U,H)}return j}}class Va{constructor(i,l,c,h,f){i instanceof Va?this.constructor_2(i):this.constructor_1(i,l,c,h,f)}constructor_1(i,l,c,h,f){const x=l==null||c==null,y=h==null||f==null;if(x&&y)throw new ne;x?(l=new ye(0,h.getY()),c=new ye(0,f.getY())):y&&(h=new ye(i.getWidth()-1,l.getY()),f=new ye(i.getWidth()-1,c.getY())),this.image=i,this.topLeft=l,this.bottomLeft=c,this.topRight=h,this.bottomRight=f,this.minX=Math.trunc(Math.min(l.getX(),c.getX())),this.maxX=Math.trunc(Math.max(h.getX(),f.getX())),this.minY=Math.trunc(Math.min(l.getY(),h.getY())),this.maxY=Math.trunc(Math.max(c.getY(),f.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,l){return i==null?l:l==null?i:new Va(i.image,i.topLeft,i.bottomLeft,l.topRight,l.bottomRight)}addMissingRows(i,l,c){let h=this.topLeft,f=this.bottomLeft,x=this.topRight,y=this.bottomRight;if(i>0){let j=c?this.topLeft:this.topRight,C=Math.trunc(j.getY()-i);C<0&&(C=0);let R=new ye(j.getX(),C);c?h=R:x=R}if(l>0){let j=c?this.bottomLeft:this.bottomRight,C=Math.trunc(j.getY()+l);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let R=new ye(j.getX(),C);c?f=R:y=R}return new Va(this.image,h,f,x,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class mn{constructor(i,l,c,h){this.columnCount=i,this.errorCorrectionLevel=h,this.rowCountUpperPart=l,this.rowCountLowerPart=c,this.rowCount=l+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Zt{constructor(){this.buffer=""}static form(i,l){let c=-1;function h(x,y,j,C,R,U){if(x==="%%")return"%";if(l[++c]===void 0)return;x=C?parseInt(C.substr(1)):void 0;let H=R?parseInt(R.substr(1)):void 0,J;switch(U){case"s":J=l[c];break;case"c":J=l[c][0];break;case"f":J=parseFloat(l[c]).toFixed(x);break;case"p":J=parseFloat(l[c]).toPrecision(x);break;case"e":J=parseFloat(l[c]).toExponential(x);break;case"x":J=parseInt(l[c]).toString(H||16);break;case"d":J=parseFloat(parseInt(l[c],H||10).toPrecision(x)).toFixed(0);break}J=typeof J=="object"?JSON.stringify(J):(+J).toString(H);let q=parseInt(j),G=j&&j[0]+""=="0"?"0":" ";for(;J.length<q;)J=y!==void 0?J+G:G+J;return J}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,h)}format(i,...l){this.buffer+=Zt.form(i,l)}toString(){return this.buffer}}class ko{constructor(i){this.boundingBox=new Va(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let l=this.getCodeword(i);if(l!=null)return l;for(let c=1;c<ko.MAX_NEARBY_DISTANCE;c++){let h=this.imageRowToCodewordIndex(i)-c;if(h>=0&&(l=this.codewords[h],l!=null)||(h=this.imageRowToCodewordIndex(i)+c,h<this.codewords.length&&(l=this.codewords[h],l!=null)))return l}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,l){this.codewords[this.imageRowToCodewordIndex(i)]=l}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new Zt;let l=0;for(const c of this.codewords){if(c==null){i.format("%3d:    |   %n",l++);continue}i.format("%3d: %3d|%3d%n",l++,c.getRowNumber(),c.getValue())}return i.toString()}}ko.MAX_NEARBY_DISTANCE=5;class Ao{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let l=this.values.get(i);l==null&&(l=0),l++,this.values.set(i,l)}getValue(){let i=-1,l=new Array;for(const[c,h]of this.values.entries()){const f={getKey:()=>c,getValue:()=>h};f.getValue()>i?(i=f.getValue(),l=[],l.push(f.getKey())):f.getValue()===i&&l.push(f.getKey())}return gt.toIntArray(l)}getConfidence(i){return this.values.get(i)}}class Yu extends ko{constructor(i,l){super(i),this._isLeft=l}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let l=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(l,i);let c=this.getBoundingBox(),h=this._isLeft?c.getTopLeft():c.getTopRight(),f=this._isLeft?c.getBottomLeft():c.getBottomRight(),x=this.imageRowToCodewordIndex(Math.trunc(h.getY())),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),j=-1,C=1,R=0;for(let U=x;U<y;U++){if(l[U]==null)continue;let H=l[U],J=H.getRowNumber()-j;if(J===0)R++;else if(J===1)C=Math.max(C,R),R=1,j=H.getRowNumber();else if(J<0||H.getRowNumber()>=i.getRowCount()||J>U)l[U]=null;else{let q;C>2?q=(C-2)*J:q=J;let G=q>=U;for(let K=1;K<=q&&!G;K++)G=l[U-K]!=null;G?l[U]=null:(j=H.getRowNumber(),R=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let l=new Int32Array(i.getRowCount());for(let c of this.getCodewords())if(c!=null){let h=c.getRowNumber();if(h>=l.length)continue;l[h]++}return l}adjustIncompleteIndicatorColumnRowNumbers(i){let l=this.getBoundingBox(),c=this._isLeft?l.getTopLeft():l.getTopRight(),h=this._isLeft?l.getBottomLeft():l.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),x=this.imageRowToCodewordIndex(Math.trunc(h.getY())),y=this.getCodewords(),j=-1;for(let C=f;C<x;C++){if(y[C]==null)continue;let R=y[C];R.setRowNumberAsRowIndicatorColumn();let U=R.getRowNumber()-j;U===0||(U===1?j=R.getRowNumber():R.getRowNumber()>=i.getRowCount()?y[C]=null:j=R.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),l=new Ao,c=new Ao,h=new Ao,f=new Ao;for(let y of i){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let j=y.getValue()%30,C=y.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:c.setValue(j*3+1);break;case 1:f.setValue(j/3),h.setValue(j%3);break;case 2:l.setValue(j+1);break}}if(l.getValue().length===0||c.getValue().length===0||h.getValue().length===0||f.getValue().length===0||l.getValue()[0]<1||c.getValue()[0]+h.getValue()[0]<gt.MIN_ROWS_IN_BARCODE||c.getValue()[0]+h.getValue()[0]>gt.MAX_ROWS_IN_BARCODE)return null;let x=new mn(l.getValue()[0],c.getValue()[0],h.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(i,x),x}removeIncorrectCodewords(i,l){for(let c=0;c<i.length;c++){let h=i[c];if(i[c]==null)continue;let f=h.getValue()%30,x=h.getRowNumber();if(x>l.getRowCount()){i[c]=null;continue}switch(this._isLeft||(x+=2),x%3){case 0:f*3+1!==l.getRowCountUpperPart()&&(i[c]=null);break;case 1:(Math.trunc(f/3)!==l.getErrorCorrectionLevel()||f%3!==l.getRowCountLowerPart())&&(i[c]=null);break;case 2:f+1!==l.getColumnCount()&&(i[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class To{constructor(i,l){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=l,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=gt.MAX_CODEWORDS_IN_BARCODE,l;do l=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<l);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let l=1;l<this.barcodeColumnCount+1;l++){let c=this.detectionResultColumns[l].getCodewords();for(let h=0;h<c.length;h++)c[h]!=null&&(c[h].hasValidRowNumber()||this.adjustRowNumbers(l,h,c))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<i.length;c++)if(i[c]!=null&&l[c]!=null&&i[c].getRowNumber()===l[c].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let f=this.detectionResultColumns[h].getCodewords()[c];f!=null&&(f.setRowNumber(i[c].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<l.length;c++){if(l[c]==null)continue;let h=l[c].getRowNumber(),f=0;for(let x=this.barcodeColumnCount+1;x>0&&f<this.ADJUST_ROW_NUMBER_SKIP;x--){let y=this.detectionResultColumns[x].getCodewords()[c];y!=null&&(f=To.adjustRowNumberIfValid(h,f,y),y.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,l=this.detectionResultColumns[0].getCodewords();for(let c=0;c<l.length;c++){if(l[c]==null)continue;let h=l[c].getRowNumber(),f=0;for(let x=1;x<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;x++){let y=this.detectionResultColumns[x].getCodewords()[c];y!=null&&(f=To.adjustRowNumberIfValid(h,f,y),y.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,l,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(i)?(c.setRowNumber(i),l=0):++l),l}adjustRowNumbers(i,l,c){if(!this.detectionResultColumns[i-1])return;let h=c[l],f=this.detectionResultColumns[i-1].getCodewords(),x=f;this.detectionResultColumns[i+1]!=null&&(x=this.detectionResultColumns[i+1].getCodewords());let y=new Array(14);y[2]=f[l],y[3]=x[l],l>0&&(y[0]=c[l-1],y[4]=f[l-1],y[5]=x[l-1]),l>1&&(y[8]=c[l-2],y[10]=f[l-2],y[11]=x[l-2]),l<c.length-1&&(y[1]=c[l+1],y[6]=f[l+1],y[7]=x[l+1]),l<c.length-2&&(y[9]=c[l+2],y[12]=f[l+2],y[13]=x[l+2]);for(let j of y)if(To.adjustRowNumber(h,j))return}static adjustRowNumber(i,l){return l==null?!1:l.hasValidRowNumber()&&l.getBucket()===i.getBucket()?(i.setRowNumber(l.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,l){this.detectionResultColumns[i]=l}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let l=new Zt;for(let c=0;c<i.getCodewords().length;c++){l.format("CW %3d:",c);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){l.format("    |   ");continue}let f=this.detectionResultColumns[h].getCodewords()[c];if(f==null){l.format("    |   ");continue}l.format(" %3d|%3d",f.getRowNumber(),f.getValue())}l.format("%n")}return l.toString()}}class Do{constructor(i,l,c,h){this.rowNumber=Do.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(l),this.bucket=Math.trunc(c),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==Do.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}Do.BARCODE_ROW_UNKNOWN=-1;class kr{static initialize(){for(let i=0;i<gt.SYMBOL_TABLE.length;i++){let l=gt.SYMBOL_TABLE[i],c=l&1;for(let h=0;h<gt.BARS_IN_MODULE;h++){let f=0;for(;(l&1)===c;)f+=1,l>>=1;c=l&1,kr.RATIOS_TABLE[i]||(kr.RATIOS_TABLE[i]=new Array(gt.BARS_IN_MODULE)),kr.RATIOS_TABLE[i][gt.BARS_IN_MODULE-h-1]=Math.fround(f/gt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let l=kr.getDecodedCodewordValue(kr.sampleBitCounts(i));return l!==-1?l:kr.getClosestDecodedValue(i)}static sampleBitCounts(i){let l=Ge.sum(i),c=new Int32Array(gt.BARS_IN_MODULE),h=0,f=0;for(let x=0;x<gt.MODULES_IN_CODEWORD;x++){let y=l/(2*gt.MODULES_IN_CODEWORD)+x*l/gt.MODULES_IN_CODEWORD;f+i[h]<=y&&(f+=i[h],h++),c[h]++}return c}static getDecodedCodewordValue(i){let l=kr.getBitValue(i);return gt.getCodeword(l)===-1?-1:l}static getBitValue(i){let l=0;for(let c=0;c<i.length;c++)for(let h=0;h<i[c];h++)l=l<<1|(c%2===0?1:0);return Math.trunc(l)}static getClosestDecodedValue(i){let l=Ge.sum(i),c=new Array(gt.BARS_IN_MODULE);if(l>1)for(let x=0;x<c.length;x++)c[x]=Math.fround(i[x]/l);let h=ae.MAX_VALUE,f=-1;this.bSymbolTableReady||kr.initialize();for(let x=0;x<kr.RATIOS_TABLE.length;x++){let y=0,j=kr.RATIOS_TABLE[x];for(let C=0;C<gt.BARS_IN_MODULE;C++){let R=Math.fround(j[C]-c[C]);if(y+=Math.fround(R*R),y>=h)break}y<h&&(h=y,f=gt.SYMBOL_TABLE[x])}return f}}kr.bSymbolTableReady=!1,kr.RATIOS_TABLE=new Array(gt.SYMBOL_TABLE.length).map(B=>new Array(gt.BARS_IN_MODULE));class td{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Qu{static parseLong(i,l=void 0){return parseInt(i,l)}}class Zn extends g{}Zn.kind="NullPointerException";class nd{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,l,c){if(i==null)throw new Zn;if(l<0||l>i.length||c<0||l+c>i.length||l+c<0)throw new k;if(c===0)return;for(let h=0;h<c;h++)this.write(i[l+h])}flush(){}close(){}}class $a extends g{}class Gu extends nd{constructor(i=32){if(super(),this.count=0,i<0)throw new b("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let c=this.buf.length<<1;if(c-i<0&&(c=i),c<0){if(i<0)throw new $a;c=O.MAX_VALUE}this.buf=A.copyOfUint8Array(this.buf,c)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,l,c){if(l<0||l>i.length||c<0||l+c-i.length>0)throw new k;this.ensureCapacity(this.count+c),I.arraycopy(i,l,this.buf,this.count,c),this.count+=c}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return A.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Jt;(function(B){B[B.ALPHA=0]="ALPHA",B[B.LOWER=1]="LOWER",B[B.MIXED=2]="MIXED",B[B.PUNCT=3]="PUNCT",B[B.ALPHA_SHIFT=4]="ALPHA_SHIFT",B[B.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Jt||(Jt={}));function qr(){if(typeof window<"u")return window.BigInt||null;if(typeof Da<"u")return Da.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Io;function Js(B){if(typeof Io>"u"&&(Io=qr()),Io===null)throw new Error("BigInt is not supported!");return Io(B)}function Xu(){let B=[];B[0]=Js(1);let i=Js(900);B[1]=i;for(let l=2;l<16;l++)B[l]=B[l-1]*i;return B}class je{static decode(i,l){let c=new he(""),h=V.ISO8859_1;c.enableDecoding(h);let f=1,x=i[f++],y=new td;for(;f<i[0];){switch(x){case je.TEXT_COMPACTION_MODE_LATCH:f=je.textCompaction(i,f,c);break;case je.BYTE_COMPACTION_MODE_LATCH:case je.BYTE_COMPACTION_MODE_LATCH_6:f=je.byteCompaction(x,i,h,f,c);break;case je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[f++]);break;case je.NUMERIC_COMPACTION_MODE_LATCH:f=je.numericCompaction(i,f,c);break;case je.ECI_CHARSET:V.getCharacterSetECIByValue(i[f++]);break;case je.ECI_GENERAL_PURPOSE:f+=2;break;case je.ECI_USER_DEFINED:f++;break;case je.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=je.decodeMacroBlock(i,f,y);break;case je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case je.MACRO_PDF417_TERMINATOR:throw new F;default:f--,f=je.textCompaction(i,f,c);break}if(f<i.length)x=i[f++];else throw F.getFormatInstance()}if(c.length()===0)throw F.getFormatInstance();let j=new qt(null,c.toString(),null,l);return j.setOther(y),j}static decodeMacroBlock(i,l,c){if(l+je.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw F.getFormatInstance();let h=new Int32Array(je.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<je.NUMBER_OF_SEQUENCE_CODEWORDS;y++,l++)h[y]=i[l];c.setSegmentIndex(O.parseInt(je.decodeBase900toBase10(h,je.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new he;l=je.textCompaction(i,l,f),c.setFileId(f.toString());let x=-1;for(i[l]===je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(x=l+1);l<i[0];)switch(i[l]){case je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(l++,i[l]){case je.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new he;l=je.textCompaction(i,l+1,y),c.setFileName(y.toString());break;case je.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let j=new he;l=je.textCompaction(i,l+1,j),c.setSender(j.toString());break;case je.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new he;l=je.textCompaction(i,l+1,C),c.setAddressee(C.toString());break;case je.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new he;l=je.numericCompaction(i,l+1,R),c.setSegmentCount(O.parseInt(R.toString()));break;case je.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let U=new he;l=je.numericCompaction(i,l+1,U),c.setTimestamp(Qu.parseLong(U.toString()));break;case je.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let H=new he;l=je.numericCompaction(i,l+1,H),c.setChecksum(O.parseInt(H.toString()));break;case je.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let J=new he;l=je.numericCompaction(i,l+1,J),c.setFileSize(Qu.parseLong(J.toString()));break;default:throw F.getFormatInstance()}break;case je.MACRO_PDF417_TERMINATOR:l++,c.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(x!==-1){let y=l-x;c.isLastSegment()&&y--,c.setOptionalData(A.copyOfRange(i,x,x+y))}return l}static textCompaction(i,l,c){let h=new Int32Array((i[0]-l)*2),f=new Int32Array((i[0]-l)*2),x=0,y=!1;for(;l<i[0]&&!y;){let j=i[l++];if(j<je.TEXT_COMPACTION_MODE_LATCH)h[x]=j/30,h[x+1]=j%30,x+=2;else switch(j){case je.TEXT_COMPACTION_MODE_LATCH:h[x++]=je.TEXT_COMPACTION_MODE_LATCH;break;case je.BYTE_COMPACTION_MODE_LATCH:case je.BYTE_COMPACTION_MODE_LATCH_6:case je.NUMERIC_COMPACTION_MODE_LATCH:case je.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case je.MACRO_PDF417_TERMINATOR:l--,y=!0;break;case je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[x]=je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,j=i[l++],f[x]=j,x++;break}}return je.decodeTextCompaction(h,f,x,c),l}static decodeTextCompaction(i,l,c,h){let f=Jt.ALPHA,x=Jt.ALPHA,y=0;for(;y<c;){let j=i[y],C="";switch(f){case Jt.ALPHA:if(j<26)C=String.fromCharCode(65+j);else switch(j){case 26:C=" ";break;case je.LL:f=Jt.LOWER;break;case je.ML:f=Jt.MIXED;break;case je.PS:x=f,f=Jt.PUNCT_SHIFT;break;case je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case je.TEXT_COMPACTION_MODE_LATCH:f=Jt.ALPHA;break}break;case Jt.LOWER:if(j<26)C=String.fromCharCode(97+j);else switch(j){case 26:C=" ";break;case je.AS:x=f,f=Jt.ALPHA_SHIFT;break;case je.ML:f=Jt.MIXED;break;case je.PS:x=f,f=Jt.PUNCT_SHIFT;break;case je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case je.TEXT_COMPACTION_MODE_LATCH:f=Jt.ALPHA;break}break;case Jt.MIXED:if(j<je.PL)C=je.MIXED_CHARS[j];else switch(j){case je.PL:f=Jt.PUNCT;break;case 26:C=" ";break;case je.LL:f=Jt.LOWER;break;case je.AL:f=Jt.ALPHA;break;case je.PS:x=f,f=Jt.PUNCT_SHIFT;break;case je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case je.TEXT_COMPACTION_MODE_LATCH:f=Jt.ALPHA;break}break;case Jt.PUNCT:if(j<je.PAL)C=je.PUNCT_CHARS[j];else switch(j){case je.PAL:f=Jt.ALPHA;break;case je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case je.TEXT_COMPACTION_MODE_LATCH:f=Jt.ALPHA;break}break;case Jt.ALPHA_SHIFT:if(f=x,j<26)C=String.fromCharCode(65+j);else switch(j){case 26:C=" ";break;case je.TEXT_COMPACTION_MODE_LATCH:f=Jt.ALPHA;break}break;case Jt.PUNCT_SHIFT:if(f=x,j<je.PAL)C=je.PUNCT_CHARS[j];else switch(j){case je.PAL:f=Jt.ALPHA;break;case je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case je.TEXT_COMPACTION_MODE_LATCH:f=Jt.ALPHA;break}break}C!==""&&h.append(C),y++}}static byteCompaction(i,l,c,h,f){let x=new Gu,y=0,j=0,C=!1;switch(i){case je.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),U=l[h++];for(;h<l[0]&&!C;)switch(R[y++]=U,j=900*j+U,U=l[h++],U){case je.TEXT_COMPACTION_MODE_LATCH:case je.BYTE_COMPACTION_MODE_LATCH:case je.NUMERIC_COMPACTION_MODE_LATCH:case je.BYTE_COMPACTION_MODE_LATCH_6:case je.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case je.MACRO_PDF417_TERMINATOR:h--,C=!0;break;default:if(y%5===0&&y>0){for(let H=0;H<6;++H)x.write(Number(Js(j)>>Js(8*(5-H))));j=0,y=0}break}h===l[0]&&U<je.TEXT_COMPACTION_MODE_LATCH&&(R[y++]=U);for(let H=0;H<y;H++)x.write(R[H]);break;case je.BYTE_COMPACTION_MODE_LATCH_6:for(;h<l[0]&&!C;){let H=l[h++];if(H<je.TEXT_COMPACTION_MODE_LATCH)y++,j=900*j+H;else switch(H){case je.TEXT_COMPACTION_MODE_LATCH:case je.BYTE_COMPACTION_MODE_LATCH:case je.NUMERIC_COMPACTION_MODE_LATCH:case je.BYTE_COMPACTION_MODE_LATCH_6:case je.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case je.MACRO_PDF417_TERMINATOR:h--,C=!0;break}if(y%5===0&&y>0){for(let J=0;J<6;++J)x.write(Number(Js(j)>>Js(8*(5-J))));j=0,y=0}}break}return f.append(oe.decode(x.toByteArray(),c)),h}static numericCompaction(i,l,c){let h=0,f=!1,x=new Int32Array(je.MAX_NUMERIC_CODEWORDS);for(;l<i[0]&&!f;){let y=i[l++];if(l===i[0]&&(f=!0),y<je.TEXT_COMPACTION_MODE_LATCH)x[h]=y,h++;else switch(y){case je.TEXT_COMPACTION_MODE_LATCH:case je.BYTE_COMPACTION_MODE_LATCH:case je.BYTE_COMPACTION_MODE_LATCH_6:case je.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case je.MACRO_PDF417_TERMINATOR:l--,f=!0;break}(h%je.MAX_NUMERIC_CODEWORDS===0||y===je.NUMERIC_COMPACTION_MODE_LATCH||f)&&h>0&&(c.append(je.decodeBase900toBase10(x,h)),h=0)}return l}static decodeBase900toBase10(i,l){let c=Js(0);for(let f=0;f<l;f++)c+=je.EXP900[l-f-1]*Js(i[f]);let h=c.toString();if(h.charAt(0)!=="1")throw new F;return h.substring(1)}}je.TEXT_COMPACTION_MODE_LATCH=900,je.BYTE_COMPACTION_MODE_LATCH=901,je.NUMERIC_COMPACTION_MODE_LATCH=902,je.BYTE_COMPACTION_MODE_LATCH_6=924,je.ECI_USER_DEFINED=925,je.ECI_GENERAL_PURPOSE=926,je.ECI_CHARSET=927,je.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,je.MACRO_PDF417_TERMINATOR=922,je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,je.MAX_NUMERIC_CODEWORDS=15,je.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,je.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,je.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,je.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,je.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,je.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,je.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,je.PL=25,je.LL=27,je.AS=27,je.ML=28,je.AL=28,je.PS=29,je.PAL=29,je.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,je.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",je.EXP900=qr()?Xu():[],je.NUMBER_OF_SEQUENCE_CODEWORDS=2;class kt{constructor(){}static decode(i,l,c,h,f,x,y){let j=new Va(i,l,c,h,f),C=null,R=null,U;for(let q=!0;;q=!1){if(l!=null&&(C=kt.getRowIndicatorColumn(i,j,l,!0,x,y)),h!=null&&(R=kt.getRowIndicatorColumn(i,j,h,!1,x,y)),U=kt.merge(C,R),U==null)throw ne.getNotFoundInstance();let G=U.getBoundingBox();if(q&&G!=null&&(G.getMinY()<j.getMinY()||G.getMaxY()>j.getMaxY()))j=G;else break}U.setBoundingBox(j);let H=U.getBarcodeColumnCount()+1;U.setDetectionResultColumn(0,C),U.setDetectionResultColumn(H,R);let J=C!=null;for(let q=1;q<=H;q++){let G=J?q:H-q;if(U.getDetectionResultColumn(G)!==void 0)continue;let K;G===0||G===H?K=new Yu(j,G===0):K=new ko(j),U.setDetectionResultColumn(G,K);let le=-1,Ce=le;for(let Me=j.getMinY();Me<=j.getMaxY();Me++){if(le=kt.getStartColumn(U,G,Me,J),le<0||le>j.getMaxX()){if(Ce===-1)continue;le=Ce}let Re=kt.detectCodeword(i,j.getMinX(),j.getMaxX(),J,le,Me,x,y);Re!=null&&(K.setCodeword(Me,Re),Ce=le,x=Math.min(x,Re.getWidth()),y=Math.max(y,Re.getWidth()))}}return kt.createDecoderResult(U)}static merge(i,l){if(i==null&&l==null)return null;let c=kt.getBarcodeMetadata(i,l);if(c==null)return null;let h=Va.merge(kt.adjustBoundingBox(i),kt.adjustBoundingBox(l));return new To(c,h)}static adjustBoundingBox(i){if(i==null)return null;let l=i.getRowHeights();if(l==null)return null;let c=kt.getMax(l),h=0;for(let y of l)if(h+=c-y,y>0)break;let f=i.getCodewords();for(let y=0;h>0&&f[y]==null;y++)h--;let x=0;for(let y=l.length-1;y>=0&&(x+=c-l[y],!(l[y]>0));y--);for(let y=f.length-1;x>0&&f[y]==null;y--)x--;return i.getBoundingBox().addMissingRows(h,x,i.isLeft())}static getMax(i){let l=-1;for(let c of i)l=Math.max(l,c);return l}static getBarcodeMetadata(i,l){let c;if(i==null||(c=i.getBarcodeMetadata())==null)return l==null?null:l.getBarcodeMetadata();let h;return l==null||(h=l.getBarcodeMetadata())==null?c:c.getColumnCount()!==h.getColumnCount()&&c.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&c.getRowCount()!==h.getRowCount()?null:c}static getRowIndicatorColumn(i,l,c,h,f,x){let y=new Yu(l,h);for(let j=0;j<2;j++){let C=j===0?1:-1,R=Math.trunc(Math.trunc(c.getX()));for(let U=Math.trunc(Math.trunc(c.getY()));U<=l.getMaxY()&&U>=l.getMinY();U+=C){let H=kt.detectCodeword(i,0,i.getWidth(),h,R,U,f,x);H!=null&&(y.setCodeword(U,H),h?R=H.getStartX():R=H.getEndX())}}return y}static adjustCodewordCount(i,l){let c=l[0][1],h=c.getValue(),f=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-kt.getNumberOfECCodeWords(i.getBarcodeECLevel());if(h.length===0){if(f<1||f>gt.MAX_CODEWORDS_IN_BARCODE)throw ne.getNotFoundInstance();c.setValue(f)}else h[0]!==f&&c.setValue(f)}static createDecoderResult(i){let l=kt.createBarcodeMatrix(i);kt.adjustCodewordCount(i,l);let c=new Array,h=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),f=[],x=new Array;for(let j=0;j<i.getBarcodeRowCount();j++)for(let C=0;C<i.getBarcodeColumnCount();C++){let R=l[j][C+1].getValue(),U=j*i.getBarcodeColumnCount()+C;R.length===0?c.push(U):R.length===1?h[U]=R[0]:(x.push(U),f.push(R))}let y=new Array(f.length);for(let j=0;j<y.length;j++)y[j]=f[j];return kt.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),h,gt.toIntArray(c),gt.toIntArray(x),y)}static createDecoderResultFromAmbiguousValues(i,l,c,h,f){let x=new Int32Array(h.length),y=100;for(;y-- >0;){for(let j=0;j<x.length;j++)l[h[j]]=f[j][x[j]];try{return kt.decodeCodewords(l,i,c)}catch(j){if(!(j instanceof E))throw j}if(x.length===0)throw E.getChecksumInstance();for(let j=0;j<x.length;j++)if(x[j]<f[j].length-1){x[j]++;break}else if(x[j]=0,j===x.length-1)throw E.getChecksumInstance()}throw E.getChecksumInstance()}static createBarcodeMatrix(i){let l=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let h=0;h<l.length;h++)for(let f=0;f<l[h].length;f++)l[h][f]=new Ao;let c=0;for(let h of i.getDetectionResultColumns()){if(h!=null){for(let f of h.getCodewords())if(f!=null){let x=f.getRowNumber();if(x>=0){if(x>=l.length)continue;l[x][c].setValue(f.getValue())}}}c++}return l}static isValidBarcodeColumn(i,l){return l>=0&&l<=i.getBarcodeColumnCount()+1}static getStartColumn(i,l,c,h){let f=h?1:-1,x=null;if(kt.isValidBarcodeColumn(i,l-f)&&(x=i.getDetectionResultColumn(l-f).getCodeword(c)),x!=null)return h?x.getEndX():x.getStartX();if(x=i.getDetectionResultColumn(l).getCodewordNearby(c),x!=null)return h?x.getStartX():x.getEndX();if(kt.isValidBarcodeColumn(i,l-f)&&(x=i.getDetectionResultColumn(l-f).getCodewordNearby(c)),x!=null)return h?x.getEndX():x.getStartX();let y=0;for(;kt.isValidBarcodeColumn(i,l-f);){l-=f;for(let j of i.getDetectionResultColumn(l).getCodewords())if(j!=null)return(h?j.getEndX():j.getStartX())+f*y*(j.getEndX()-j.getStartX());y++}return h?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,l,c,h,f,x,y,j){f=kt.adjustCodewordStartColumn(i,l,c,h,f,x);let C=kt.getModuleBitCount(i,l,c,h,f,x);if(C==null)return null;let R,U=Ge.sum(C);if(h)R=f+U;else{for(let q=0;q<C.length/2;q++){let G=C[q];C[q]=C[C.length-1-q],C[C.length-1-q]=G}R=f,f=R-U}if(!kt.checkCodewordSkew(U,y,j))return null;let H=kr.getDecodedValue(C),J=gt.getCodeword(H);return J===-1?null:new Do(f,R,kt.getCodewordBucketNumber(H),J)}static getModuleBitCount(i,l,c,h,f,x){let y=f,j=new Int32Array(8),C=0,R=h?1:-1,U=h;for(;(h?y<c:y>=l)&&C<j.length;)i.get(y,x)===U?(j[C]++,y+=R):(C++,U=!U);return C===j.length||y===(h?c:l)&&C===j.length-1?j:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,l,c,h,f,x){let y=f,j=h?-1:1;for(let C=0;C<2;C++){for(;(h?y>=l:y<c)&&h===i.get(y,x);){if(Math.abs(f-y)>kt.CODEWORD_SKEW_SIZE)return f;y+=j}j=-j,h=!h}return y}static checkCodewordSkew(i,l,c){return l-kt.CODEWORD_SKEW_SIZE<=i&&i<=c+kt.CODEWORD_SKEW_SIZE}static decodeCodewords(i,l,c){if(i.length===0)throw F.getFormatInstance();let h=1<<l+1,f=kt.correctErrors(i,c,h);kt.verifyCodewordCount(i,h);let x=je.decode(i,""+l);return x.setErrorsCorrected(f),x.setErasures(c.length),x}static correctErrors(i,l,c){if(l!=null&&l.length>c/2+kt.MAX_ERRORS||c<0||c>kt.MAX_EC_CODEWORDS)throw E.getChecksumInstance();return kt.errorCorrection.decode(i,c,l)}static verifyCodewordCount(i,l){if(i.length<4)throw F.getFormatInstance();let c=i[0];if(c>i.length)throw F.getFormatInstance();if(c===0)if(l<i.length)i[0]=i.length-l;else throw F.getFormatInstance()}static getBitCountForCodeword(i){let l=new Int32Array(8),c=0,h=l.length-1;for(;!((i&1)!==c&&(c=i&1,h--,h<0));)l[h]++,i>>=1;return l}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return kt.getCodewordBucketNumber(kt.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let l=new Zt;for(let c=0;c<i.length;c++){l.format("Row %2d: ",c);for(let h=0;h<i[c].length;h++){let f=i[c][h];f.getValue().length===0?l.format("        ",null):l.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}l.format("%n")}return l.toString()}}kt.CODEWORD_SKEW_SIZE=2,kt.MAX_ERRORS=3,kt.MAX_EC_CODEWORDS=512,kt.errorCorrection=new $u;class Jn{decode(i,l=null){let c=Jn.decode(i,l,!1);if(c==null||c.length===0||c[0]==null)throw ne.getNotFoundInstance();return c[0]}decodeMultiple(i,l=null){try{return Jn.decode(i,l,!0)}catch(c){throw c instanceof F||c instanceof E?ne.getNotFoundInstance():c}}static decode(i,l,c){const h=new Array,f=Ct.detectMultiple(i,l,c);for(const x of f.getPoints()){const y=kt.decode(f.getBits(),x[4],x[5],x[6],x[7],Jn.getMinCodewordWidth(x),Jn.getMaxCodewordWidth(x)),j=new Be(y.getText(),y.getRawBytes(),void 0,x,Ae.PDF_417);j.putMetadata(nt.ERROR_CORRECTION_LEVEL,y.getECLevel());const C=y.getOther();C!=null&&j.putMetadata(nt.PDF417_EXTRA_METADATA,C),h.push(j)}return h.map(x=>x)}static getMaxWidth(i,l){return i==null||l==null?0:Math.trunc(Math.abs(i.getX()-l.getX()))}static getMinWidth(i,l){return i==null||l==null?O.MAX_VALUE:Math.trunc(Math.abs(i.getX()-l.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Jn.getMaxWidth(i[0],i[4]),Jn.getMaxWidth(i[6],i[2])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN),Math.max(Jn.getMaxWidth(i[1],i[5]),Jn.getMaxWidth(i[7],i[3])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Jn.getMinWidth(i[0],i[4]),Jn.getMinWidth(i[6],i[2])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN),Math.min(Jn.getMinWidth(i[1],i[5]),Jn.getMinWidth(i[7],i[3])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN)))}reset(){}}class ur extends g{}ur.kind="ReaderException";class Ku{constructor(i,l){this.verbose=i===!0,l&&this.setHints(l)}decode(i,l){return l&&this.setHints(l),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const l=!r(i)&&i.get(L.TRY_HARDER)===!0,c=r(i)?null:i.get(L.POSSIBLE_FORMATS),h=new Array;if(!r(c)){const f=c.some(x=>x===Ae.UPC_A||x===Ae.UPC_E||x===Ae.EAN_13||x===Ae.EAN_8||x===Ae.CODABAR||x===Ae.CODE_39||x===Ae.CODE_93||x===Ae.CODE_128||x===Ae.ITF||x===Ae.RSS_14||x===Ae.RSS_EXPANDED);f&&!l&&h.push(new Ha(i,this.verbose)),c.includes(Ae.QR_CODE)&&h.push(new wa),c.includes(Ae.DATA_MATRIX)&&h.push(new ps),c.includes(Ae.AZTEC)&&h.push(new Br),c.includes(Ae.PDF_417)&&h.push(new Jn),f&&l&&h.push(new Ha(i,this.verbose))}h.length===0&&(l||h.push(new Ha(i,this.verbose)),h.push(new wa),h.push(new ps),h.push(new Br),h.push(new Jn),l&&h.push(new Ha(i,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new ur("No readers where selected, nothing can be read.");for(const l of this.readers)try{return l.decode(i,this.hints)}catch(c){if(c instanceof ur)continue}throw new ne("No MultiFormat Readers were able to detect the code.")}}class es extends Ve{constructor(i=null,l=500){const c=new Ku;c.setHints(i),super(c,l)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class Dp extends Ve{constructor(i=500){super(new Jn,i)}}class Zu extends Ve{constructor(i=500){super(new wa,i)}}var Os;(function(B){B[B.ERROR_CORRECTION=0]="ERROR_CORRECTION",B[B.CHARACTER_SET=1]="CHARACTER_SET",B[B.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",B[B.MIN_SIZE=3]="MIN_SIZE",B[B.MAX_SIZE=4]="MAX_SIZE",B[B.MARGIN=5]="MARGIN",B[B.PDF417_COMPACT=6]="PDF417_COMPACT",B[B.PDF417_COMPACTION=7]="PDF417_COMPACTION",B[B.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",B[B.AZTEC_LAYERS=9]="AZTEC_LAYERS",B[B.QR_VERSION=10]="QR_VERSION"})(Os||(Os={}));var Cn=Os;class Mo{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Pt(i,Int32Array.from([1])))}buildGenerator(i){const l=this.cachedGenerators;if(i>=l.length){let c=l[l.length-1];const h=this.field;for(let f=l.length;f<=i;f++){const x=c.multiply(new Pt(h,Int32Array.from([1,h.exp(f-1+h.getGeneratorBase())])));l.push(x),c=x}}return l[i]}encode(i,l){if(l===0)throw new b("No error correction bytes");const c=i.length-l;if(c<=0)throw new b("No data bytes provided");const h=this.buildGenerator(l),f=new Int32Array(c);I.arraycopy(i,0,f,0,c);let x=new Pt(this.field,f);x=x.multiplyByMonomial(l,1);const j=x.divide(h)[1].getCoefficients(),C=l-j.length;for(let R=0;R<C;R++)i[c+R]=0;I.arraycopy(j,0,i,c+C,j.length)}}class Nt{constructor(){}static applyMaskPenaltyRule1(i){return Nt.applyMaskPenaltyRule1Internal(i,!0)+Nt.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let l=0;const c=i.getArray(),h=i.getWidth(),f=i.getHeight();for(let x=0;x<f-1;x++){const y=c[x];for(let j=0;j<h-1;j++){const C=y[j];C===y[j+1]&&C===c[x+1][j]&&C===c[x+1][j+1]&&l++}}return Nt.N2*l}static applyMaskPenaltyRule3(i){let l=0;const c=i.getArray(),h=i.getWidth(),f=i.getHeight();for(let x=0;x<f;x++)for(let y=0;y<h;y++){const j=c[x];y+6<h&&j[y]===1&&j[y+1]===0&&j[y+2]===1&&j[y+3]===1&&j[y+4]===1&&j[y+5]===0&&j[y+6]===1&&(Nt.isWhiteHorizontal(j,y-4,y)||Nt.isWhiteHorizontal(j,y+7,y+11))&&l++,x+6<f&&c[x][y]===1&&c[x+1][y]===0&&c[x+2][y]===1&&c[x+3][y]===1&&c[x+4][y]===1&&c[x+5][y]===0&&c[x+6][y]===1&&(Nt.isWhiteVertical(c,y,x-4,x)||Nt.isWhiteVertical(c,y,x+7,x+11))&&l++}return l*Nt.N3}static isWhiteHorizontal(i,l,c){l=Math.max(l,0),c=Math.min(c,i.length);for(let h=l;h<c;h++)if(i[h]===1)return!1;return!0}static isWhiteVertical(i,l,c,h){c=Math.max(c,0),h=Math.min(h,i.length);for(let f=c;f<h;f++)if(i[f][l]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let l=0;const c=i.getArray(),h=i.getWidth(),f=i.getHeight();for(let j=0;j<f;j++){const C=c[j];for(let R=0;R<h;R++)C[R]===1&&l++}const x=i.getHeight()*i.getWidth();return Math.floor(Math.abs(l*2-x)*10/x)*Nt.N4}static getDataMaskBit(i,l,c){let h,f;switch(i){case 0:h=c+l&1;break;case 1:h=c&1;break;case 2:h=l%3;break;case 3:h=(c+l)%3;break;case 4:h=Math.floor(c/2)+Math.floor(l/3)&1;break;case 5:f=c*l,h=(f&1)+f%3;break;case 6:f=c*l,h=(f&1)+f%3&1;break;case 7:f=c*l,h=f%3+(c+l&1)&1;break;default:throw new b("Invalid mask pattern: "+i)}return h===0}static applyMaskPenaltyRule1Internal(i,l){let c=0;const h=l?i.getHeight():i.getWidth(),f=l?i.getWidth():i.getHeight(),x=i.getArray();for(let y=0;y<h;y++){let j=0,C=-1;for(let R=0;R<f;R++){const U=l?x[y][R]:x[R][y];U===C?j++:(j>=5&&(c+=Nt.N1+(j-5)),j=1,C=U)}j>=5&&(c+=Nt.N1+(j-5))}return c}}Nt.N1=3,Nt.N2=3,Nt.N3=40,Nt.N4=10;class ms{constructor(i,l){this.width=i,this.height=l;const c=new Array(l);for(let h=0;h!==l;h++)c[h]=new Uint8Array(i);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(i,l){return this.bytes[l][i]}getArray(){return this.bytes}setNumber(i,l,c){this.bytes[l][i]=c}setBoolean(i,l,c){this.bytes[l][i]=c?1:0}clear(i){for(const l of this.bytes)A.fill(l,i)}equals(i){if(!(i instanceof ms))return!1;const l=i;if(this.width!==l.width||this.height!==l.height)return!1;for(let c=0,h=this.height;c<h;++c){const f=this.bytes[c],x=l.bytes[c];for(let y=0,j=this.width;y<j;++y)if(f[y]!==x[y])return!1}return!0}toString(){const i=new he;for(let l=0,c=this.height;l<c;++l){const h=this.bytes[l];for(let f=0,x=this.width;f<x;++f)switch(h[f]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class ea{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new he;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<ea.NUM_MASK_PATTERNS}}ea.NUM_MASK_PATTERNS=8;class dn extends g{}dn.kind="WriterException";class mt{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,l,c,h,f){mt.clearMatrix(f),mt.embedBasicPatterns(c,f),mt.embedTypeInfo(l,h,f),mt.maybeEmbedVersionInfo(c,f),mt.embedDataBits(i,h,f)}static embedBasicPatterns(i,l){mt.embedPositionDetectionPatternsAndSeparators(l),mt.embedDarkDotAtLeftBottomCorner(l),mt.maybeEmbedPositionAdjustmentPatterns(i,l),mt.embedTimingPatterns(l)}static embedTypeInfo(i,l,c){const h=new P;mt.makeTypeInfoBits(i,l,h);for(let f=0,x=h.getSize();f<x;++f){const y=h.get(h.getSize()-1-f),j=mt.TYPE_INFO_COORDINATES[f],C=j[0],R=j[1];if(c.setBoolean(C,R,y),f<8){const U=c.getWidth()-f-1,H=8;c.setBoolean(U,H,y)}else{const H=c.getHeight()-7+(f-8);c.setBoolean(8,H,y)}}}static maybeEmbedVersionInfo(i,l){if(i.getVersionNumber()<7)return;const c=new P;mt.makeVersionInfoBits(i,c);let h=6*3-1;for(let f=0;f<6;++f)for(let x=0;x<3;++x){const y=c.get(h);h--,l.setBoolean(f,l.getHeight()-11+x,y),l.setBoolean(l.getHeight()-11+x,f,y)}}static embedDataBits(i,l,c){let h=0,f=-1,x=c.getWidth()-1,y=c.getHeight()-1;for(;x>0;){for(x===6&&(x-=1);y>=0&&y<c.getHeight();){for(let j=0;j<2;++j){const C=x-j;if(!mt.isEmpty(c.get(C,y)))continue;let R;h<i.getSize()?(R=i.get(h),++h):R=!1,l!==255&&Nt.getDataMaskBit(l,C,y)&&(R=!R),c.setBoolean(C,y,R)}y+=f}f=-f,y+=f,x-=2}if(h!==i.getSize())throw new dn("Not all bits consumed: "+h+"/"+i.getSize())}static findMSBSet(i){return 32-O.numberOfLeadingZeros(i)}static calculateBCHCode(i,l){if(l===0)throw new b("0 polynomial");const c=mt.findMSBSet(l);for(i<<=c-1;mt.findMSBSet(i)>=c;)i^=l<<mt.findMSBSet(i)-c;return i}static makeTypeInfoBits(i,l,c){if(!ea.isValidMaskPattern(l))throw new dn("Invalid mask pattern");const h=i.getBits()<<3|l;c.appendBits(h,5);const f=mt.calculateBCHCode(h,mt.TYPE_INFO_POLY);c.appendBits(f,10);const x=new P;if(x.appendBits(mt.TYPE_INFO_MASK_PATTERN,15),c.xor(x),c.getSize()!==15)throw new dn("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(i,l){l.appendBits(i.getVersionNumber(),6);const c=mt.calculateBCHCode(i.getVersionNumber(),mt.VERSION_INFO_POLY);if(l.appendBits(c,12),l.getSize()!==18)throw new dn("should not happen but we got: "+l.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let l=8;l<i.getWidth()-8;++l){const c=(l+1)%2;mt.isEmpty(i.get(l,6))&&i.setNumber(l,6,c),mt.isEmpty(i.get(6,l))&&i.setNumber(6,l,c)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new dn;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,l,c){for(let h=0;h<8;++h){if(!mt.isEmpty(c.get(i+h,l)))throw new dn;c.setNumber(i+h,l,0)}}static embedVerticalSeparationPattern(i,l,c){for(let h=0;h<7;++h){if(!mt.isEmpty(c.get(i,l+h)))throw new dn;c.setNumber(i,l+h,0)}}static embedPositionAdjustmentPattern(i,l,c){for(let h=0;h<5;++h){const f=mt.POSITION_ADJUSTMENT_PATTERN[h];for(let x=0;x<5;++x)c.setNumber(i+x,l+h,f[x])}}static embedPositionDetectionPattern(i,l,c){for(let h=0;h<7;++h){const f=mt.POSITION_DETECTION_PATTERN[h];for(let x=0;x<7;++x)c.setNumber(i+x,l+h,f[x])}}static embedPositionDetectionPatternsAndSeparators(i){const l=mt.POSITION_DETECTION_PATTERN[0].length;mt.embedPositionDetectionPattern(0,0,i),mt.embedPositionDetectionPattern(i.getWidth()-l,0,i),mt.embedPositionDetectionPattern(0,i.getWidth()-l,i);const c=8;mt.embedHorizontalSeparationPattern(0,c-1,i),mt.embedHorizontalSeparationPattern(i.getWidth()-c,c-1,i),mt.embedHorizontalSeparationPattern(0,i.getWidth()-c,i);const h=7;mt.embedVerticalSeparationPattern(h,0,i),mt.embedVerticalSeparationPattern(i.getHeight()-h-1,0,i),mt.embedVerticalSeparationPattern(h,i.getHeight()-h,i)}static maybeEmbedPositionAdjustmentPatterns(i,l){if(i.getVersionNumber()<2)return;const c=i.getVersionNumber()-1,h=mt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let f=0,x=h.length;f!==x;f++){const y=h[f];if(y>=0)for(let j=0;j!==x;j++){const C=h[j];C>=0&&mt.isEmpty(l.get(C,y))&&mt.embedPositionAdjustmentPattern(C-2,y-2,l)}}}}mt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),mt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),mt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),mt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),mt.VERSION_INFO_POLY=7973,mt.TYPE_INFO_POLY=1335,mt.TYPE_INFO_MASK_PATTERN=21522;class Ip{constructor(i,l){this.dataBytes=i,this.errorCorrectionBytes=l}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class xn{constructor(){}static calculateMaskPenalty(i){return Nt.applyMaskPenaltyRule1(i)+Nt.applyMaskPenaltyRule2(i)+Nt.applyMaskPenaltyRule3(i)+Nt.applyMaskPenaltyRule4(i)}static encode(i,l,c=null){let h=xn.DEFAULT_BYTE_MODE_ENCODING;const f=c!==null&&c.get(Cn.CHARACTER_SET)!==void 0;f&&(h=c.get(Cn.CHARACTER_SET).toString());const x=this.chooseMode(i,h),y=new P;if(x===pt.BYTE&&(f||xn.DEFAULT_BYTE_MODE_ENCODING!==h)){const Me=V.getCharacterSetECIByName(h);Me!==void 0&&this.appendECI(Me,y)}this.appendModeInfo(x,y);const j=new P;this.appendBytes(i,x,j,h);let C;if(c!==null&&c.get(Cn.QR_VERSION)!==void 0){const Me=Number.parseInt(c.get(Cn.QR_VERSION).toString(),10);C=dt.getVersionForNumber(Me);const Re=this.calculateBitsNeeded(x,y,j,C);if(!this.willFit(Re,C,l))throw new dn("Data too big for requested version")}else C=this.recommendVersion(l,x,y,j);const R=new P;R.appendBitArray(y);const U=x===pt.BYTE?j.getSizeInBytes():i.length;this.appendLengthInfo(U,C,x,R),R.appendBitArray(j);const H=C.getECBlocksForLevel(l),J=C.getTotalCodewords()-H.getTotalECCodewords();this.terminateBits(J,R);const q=this.interleaveWithECBytes(R,C.getTotalCodewords(),J,H.getNumBlocks()),G=new ea;G.setECLevel(l),G.setMode(x),G.setVersion(C);const K=C.getDimensionForVersion(),le=new ms(K,K),Ce=this.chooseMaskPattern(q,l,C,le);return G.setMaskPattern(Ce),mt.buildMatrix(q,l,C,Ce,le),G.setMatrix(le),G}static recommendVersion(i,l,c,h){const f=this.calculateBitsNeeded(l,c,h,dt.getVersionForNumber(1)),x=this.chooseVersion(f,i),y=this.calculateBitsNeeded(l,c,h,x);return this.chooseVersion(y,i)}static calculateBitsNeeded(i,l,c,h){return l.getSize()+i.getCharacterCountBits(h)+c.getSize()}static getAlphanumericCode(i){return i<xn.ALPHANUMERIC_TABLE.length?xn.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,l=null){if(V.SJIS.getName()===l&&this.isOnlyDoubleByteKanji(i))return pt.KANJI;let c=!1,h=!1;for(let f=0,x=i.length;f<x;++f){const y=i.charAt(f);if(xn.isDigit(y))c=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)h=!0;else return pt.BYTE}return h?pt.ALPHANUMERIC:c?pt.NUMERIC:pt.BYTE}static isOnlyDoubleByteKanji(i){let l;try{l=oe.encode(i,V.SJIS)}catch{return!1}const c=l.length;if(c%2!==0)return!1;for(let h=0;h<c;h+=2){const f=l[h]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(i,l,c,h){let f=Number.MAX_SAFE_INTEGER,x=-1;for(let y=0;y<ea.NUM_MASK_PATTERNS;y++){mt.buildMatrix(i,l,c,y,h);let j=this.calculateMaskPenalty(h);j<f&&(f=j,x=y)}return x}static chooseVersion(i,l){for(let c=1;c<=40;c++){const h=dt.getVersionForNumber(c);if(xn.willFit(i,h,l))return h}throw new dn("Data too big")}static willFit(i,l,c){const h=l.getTotalCodewords(),x=l.getECBlocksForLevel(c).getTotalECCodewords(),y=h-x,j=(i+7)/8;return y>=j}static terminateBits(i,l){const c=i*8;if(l.getSize()>c)throw new dn("data bits cannot fit in the QR Code"+l.getSize()+" > "+c);for(let x=0;x<4&&l.getSize()<c;++x)l.appendBit(!1);const h=l.getSize()&7;if(h>0)for(let x=h;x<8;x++)l.appendBit(!1);const f=i-l.getSizeInBytes();for(let x=0;x<f;++x)l.appendBits(x&1?17:236,8);if(l.getSize()!==c)throw new dn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,l,c,h,f,x){if(h>=c)throw new dn("Block ID too large");const y=i%c,j=c-y,C=Math.floor(i/c),R=C+1,U=Math.floor(l/c),H=U+1,J=C-U,q=R-H;if(J!==q)throw new dn("EC bytes mismatch");if(c!==j+y)throw new dn("RS blocks mismatch");if(i!==(U+J)*j+(H+q)*y)throw new dn("Total bytes mismatch");h<j?(f[0]=U,x[0]=J):(f[0]=H,x[0]=q)}static interleaveWithECBytes(i,l,c,h){if(i.getSizeInBytes()!==c)throw new dn("Number of bits and data bytes does not match");let f=0,x=0,y=0;const j=new Array;for(let R=0;R<h;++R){const U=new Int32Array(1),H=new Int32Array(1);xn.getNumDataBytesAndNumECBytesForBlockID(l,c,h,R,U,H);const J=U[0],q=new Uint8Array(J);i.toBytes(8*f,q,0,J);const G=xn.generateECBytes(q,H[0]);j.push(new Ip(q,G)),x=Math.max(x,J),y=Math.max(y,G.length),f+=U[0]}if(c!==f)throw new dn("Data bytes does not match offset");const C=new P;for(let R=0;R<x;++R)for(const U of j){const H=U.getDataBytes();R<H.length&&C.appendBits(H[R],8)}for(let R=0;R<y;++R)for(const U of j){const H=U.getErrorCorrectionBytes();R<H.length&&C.appendBits(H[R],8)}if(l!==C.getSizeInBytes())throw new dn("Interleaving error: "+l+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(i,l){const c=i.length,h=new Int32Array(c+l);for(let x=0;x<c;x++)h[x]=i[x]&255;new Mo(Te.QR_CODE_FIELD_256).encode(h,l);const f=new Uint8Array(l);for(let x=0;x<l;x++)f[x]=h[c+x];return f}static appendModeInfo(i,l){l.appendBits(i.getBits(),4)}static appendLengthInfo(i,l,c,h){const f=c.getCharacterCountBits(l);if(i>=1<<f)throw new dn(i+" is bigger than "+((1<<f)-1));h.appendBits(i,f)}static appendBytes(i,l,c,h){switch(l){case pt.NUMERIC:xn.appendNumericBytes(i,c);break;case pt.ALPHANUMERIC:xn.appendAlphanumericBytes(i,c);break;case pt.BYTE:xn.append8BitBytes(i,c,h);break;case pt.KANJI:xn.appendKanjiBytes(i,c);break;default:throw new dn("Invalid mode: "+l)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const l=xn.getDigit(i);return l>=0&&l<=9}static appendNumericBytes(i,l){const c=i.length;let h=0;for(;h<c;){const f=xn.getDigit(i.charAt(h));if(h+2<c){const x=xn.getDigit(i.charAt(h+1)),y=xn.getDigit(i.charAt(h+2));l.appendBits(f*100+x*10+y,10),h+=3}else if(h+1<c){const x=xn.getDigit(i.charAt(h+1));l.appendBits(f*10+x,7),h+=2}else l.appendBits(f,4),h++}}static appendAlphanumericBytes(i,l){const c=i.length;let h=0;for(;h<c;){const f=xn.getAlphanumericCode(i.charCodeAt(h));if(f===-1)throw new dn;if(h+1<c){const x=xn.getAlphanumericCode(i.charCodeAt(h+1));if(x===-1)throw new dn;l.appendBits(f*45+x,11),h+=2}else l.appendBits(f,6),h++}}static append8BitBytes(i,l,c){let h;try{h=oe.encode(i,c)}catch(f){throw new dn(f)}for(let f=0,x=h.length;f!==x;f++){const y=h[f];l.appendBits(y,8)}}static appendKanjiBytes(i,l){let c;try{c=oe.encode(i,V.SJIS)}catch(f){throw new dn(f)}const h=c.length;for(let f=0;f<h;f+=2){const x=c[f]&255,y=c[f+1]&255,j=x<<8&4294967295|y;let C=-1;if(j>=33088&&j<=40956?C=j-33088:j>=57408&&j<=60351&&(C=j-49472),C===-1)throw new dn("Invalid byte sequence");const R=(C>>8)*192+(C&255);l.appendBits(R,13)}}static appendECI(i,l){l.appendBits(pt.ECI.getBits(),4),l.appendBits(i.getValue(),8)}}xn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),xn.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class Ya{write(i,l,c,h=null){if(i.length===0)throw new b("Found empty contents");if(l<0||c<0)throw new b("Requested dimensions are too small: "+l+"x"+c);let f=cn.L,x=Ya.QUIET_ZONE_SIZE;h!==null&&(h.get(Cn.ERROR_CORRECTION)!==void 0&&(f=cn.fromString(h.get(Cn.ERROR_CORRECTION).toString())),h.get(Cn.MARGIN)!==void 0&&(x=Number.parseInt(h.get(Cn.MARGIN).toString(),10)));const y=xn.encode(i,f,h);return this.renderResult(y,l,c,x)}writeToDom(i,l,c,h,f=null){typeof i=="string"&&(i=document.querySelector(i));const x=this.write(l,c,h,f);i&&i.appendChild(x)}renderResult(i,l,c,h){const f=i.getMatrix();if(f===null)throw new Ze;const x=f.getWidth(),y=f.getHeight(),j=x+h*2,C=y+h*2,R=Math.max(l,j),U=Math.max(c,C),H=Math.min(Math.floor(R/j),Math.floor(U/C)),J=Math.floor((R-x*H)/2),q=Math.floor((U-y*H)/2),G=this.createSVGElement(R,U);for(let K=0,le=q;K<y;K++,le+=H)for(let Ce=0,Me=J;Ce<x;Ce++,Me+=H)if(f.get(Ce,K)===1){const Re=this.createSvgRectElement(Me,le,H,H);G.appendChild(Re)}return G}createSVGElement(i,l){const c=document.createElementNS(Ya.SVG_NS,"svg");return c.setAttributeNS(null,"height",i.toString()),c.setAttributeNS(null,"width",l.toString()),c}createSvgRectElement(i,l,c,h){const f=document.createElementNS(Ya.SVG_NS,"rect");return f.setAttributeNS(null,"x",i.toString()),f.setAttributeNS(null,"y",l.toString()),f.setAttributeNS(null,"height",c.toString()),f.setAttributeNS(null,"width",h.toString()),f.setAttributeNS(null,"fill","#000000"),f}}Ya.QUIET_ZONE_SIZE=4,Ya.SVG_NS="http://www.w3.org/2000/svg";class Qa{encode(i,l,c,h,f){if(i.length===0)throw new b("Found empty contents");if(l!==Ae.QR_CODE)throw new b("Can only encode QR_CODE, but got "+l);if(c<0||h<0)throw new b(`Requested dimensions are too small: ${c}x${h}`);let x=cn.L,y=Qa.QUIET_ZONE_SIZE;f!==null&&(f.get(Cn.ERROR_CORRECTION)!==void 0&&(x=cn.fromString(f.get(Cn.ERROR_CORRECTION).toString())),f.get(Cn.MARGIN)!==void 0&&(y=Number.parseInt(f.get(Cn.MARGIN).toString(),10)));const j=xn.encode(i,x,f);return Qa.renderResult(j,c,h,y)}static renderResult(i,l,c,h){const f=i.getMatrix();if(f===null)throw new Ze;const x=f.getWidth(),y=f.getHeight(),j=x+h*2,C=y+h*2,R=Math.max(l,j),U=Math.max(c,C),H=Math.min(Math.floor(R/j),Math.floor(U/C)),J=Math.floor((R-x*H)/2),q=Math.floor((U-y*H)/2),G=new ve(R,U);for(let K=0,le=q;K<y;K++,le+=H)for(let Ce=0,Me=J;Ce<x;Ce++,Me+=H)f.get(Ce,K)===1&&G.setRegion(Me,le,H,H);return G}}Qa.QUIET_ZONE_SIZE=4;class Tl{encode(i,l,c,h,f){let x;switch(l){case Ae.QR_CODE:x=new Qa;break;default:throw new b("No encoder available for format "+l)}return x.encode(i,l,c,h,f)}}class yr extends fe{constructor(i,l,c,h,f,x,y,j){if(super(x,y),this.yuvData=i,this.dataWidth=l,this.dataHeight=c,this.left=h,this.top=f,h+x>l||f+y>c)throw new b("Crop rectangle does not fit within image data.");j&&this.reverseHorizontal(x,y)}getRow(i,l){if(i<0||i>=this.getHeight())throw new b("Requested row is outside the image: "+i);const c=this.getWidth();(l==null||l.length<c)&&(l=new Uint8ClampedArray(c));const h=(i+this.top)*this.dataWidth+this.left;return I.arraycopy(this.yuvData,h,l,0,c),l}getMatrix(){const i=this.getWidth(),l=this.getHeight();if(i===this.dataWidth&&l===this.dataHeight)return this.yuvData;const c=i*l,h=new Uint8ClampedArray(c);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return I.arraycopy(this.yuvData,f,h,0,c),h;for(let x=0;x<l;x++){const y=x*i;I.arraycopy(this.yuvData,f,h,y,i),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,l,c,h){return new yr(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+l,c,h,!1)}renderThumbnail(){const i=this.getWidth()/yr.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/yr.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(i*l),h=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let x=0;x<l;x++){const y=x*i;for(let j=0;j<i;j++){const C=h[f+j*yr.THUMBNAIL_SCALE_FACTOR]&255;c[y+j]=4278190080|C*65793}f+=this.dataWidth*yr.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/yr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/yr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,l){const c=this.yuvData;for(let h=0,f=this.top*this.dataWidth+this.left;h<l;h++,f+=this.dataWidth){const x=f+i/2;for(let y=f,j=f+i-1;y<x;y++,j--){const C=c[y];c[y]=c[j],c[j]=C}}}invert(){return new Ie(this)}}yr.THUMBNAIL_SCALE_FACTOR=2;class rd extends fe{constructor(i,l,c,h,f,x,y){if(super(l,c),this.dataWidth=h,this.dataHeight=f,this.left=x,this.top=y,i.BYTES_PER_ELEMENT===4){const j=l*c,C=new Uint8ClampedArray(j);for(let R=0;R<j;R++){const U=i[R],H=U>>16&255,J=U>>7&510,q=U&255;C[R]=(H+J+q)/4&255}this.luminances=C}else this.luminances=i;if(h===void 0&&(this.dataWidth=l),f===void 0&&(this.dataHeight=c),x===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+l>this.dataWidth||this.top+c>this.dataHeight)throw new b("Crop rectangle does not fit within image data.")}getRow(i,l){if(i<0||i>=this.getHeight())throw new b("Requested row is outside the image: "+i);const c=this.getWidth();(l==null||l.length<c)&&(l=new Uint8ClampedArray(c));const h=(i+this.top)*this.dataWidth+this.left;return I.arraycopy(this.luminances,h,l,0,c),l}getMatrix(){const i=this.getWidth(),l=this.getHeight();if(i===this.dataWidth&&l===this.dataHeight)return this.luminances;const c=i*l,h=new Uint8ClampedArray(c);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return I.arraycopy(this.luminances,f,h,0,c),h;for(let x=0;x<l;x++){const y=x*i;I.arraycopy(this.luminances,f,h,y,i),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,l,c,h){return new rd(this.luminances,c,h,this.dataWidth,this.dataHeight,this.left+i,this.top+l)}invert(){return new Ie(this)}}class sd extends V{static forName(i){return this.getCharacterSetECIByName(i)}}class Dl{}Dl.ISO_8859_1=V.ISO8859_1;class Il{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class Ml{static singletonList(i){return[i]}static min(i,l){return i.sort(l)[0]}}class Ju{constructor(i){this.previous=i}getPrevious(){return this.previous}}class Ri extends Ju{constructor(i,l,c){super(i),this.value=l,this.bitCount=c}appendTo(i,l){i.appendBits(this.value,this.bitCount)}add(i,l){return new Ri(this,i,l)}addBinaryShift(i,l){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ri(this,i,l)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+O.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Ro extends Ri{constructor(i,l,c){super(i,0,0),this.binaryShiftStart=l,this.binaryShiftByteCount=c}appendTo(i,l){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):c===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(l[this.binaryShiftStart+c],8)}addBinaryShift(i,l){return new Ro(this,i,l)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ad(B,i,l){return new Ro(B,i,l)}function Oo(B,i,l){return new Ri(B,i,l)}const e0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Fn=0,Oi=1,hr=2,id=3,xs=4,Mp=new Ri(null,0,0),od=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,917504+14336+928+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,655360+928+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,655360+992+28,655360+992+30,655360+992+29,0])];function Rp(B){for(let i of B)A.fill(i,-1);return B[Fn][xs]=0,B[Oi][xs]=0,B[Oi][Fn]=28,B[id][xs]=0,B[hr][xs]=0,B[hr][Fn]=15,B}const t0=Rp(A.createInt32Array(6,6));class Ls{constructor(i,l,c,h){this.token=i,this.mode=l,this.binaryShiftByteCount=c,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,l){let c=this.bitCount,h=this.token;if(i!==this.mode){let x=od[this.mode][i];h=Oo(h,x&65535,x>>16),c+=x>>16}let f=i===hr?4:5;return h=Oo(h,l,f),new Ls(h,i,0,c+f)}shiftAndAppend(i,l){let c=this.token,h=this.mode===hr?4:5;return c=Oo(c,t0[this.mode][i],h),c=Oo(c,l,5),new Ls(c,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(i){let l=this.token,c=this.mode,h=this.bitCount;if(this.mode===xs||this.mode===hr){let y=od[c][Fn];l=Oo(l,y&65535,y>>16),h+=y>>16,c=Fn}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,x=new Ls(l,c,this.binaryShiftByteCount+1,h+f);return x.binaryShiftByteCount===2047+31&&(x=x.endBinaryShift(i+1)),x}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let l=this.token;return l=ad(l,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new Ls(l,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let l=this.bitCount+(od[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?l+=Ls.calculateBinaryShiftCost(i)-Ls.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(l+=10),l<=i.bitCount}toBitArray(i){let l=[];for(let h=this.endBinaryShift(i.length).token;h!==null;h=h.getPrevious())l.unshift(h);let c=new P;for(const h of l)h.appendTo(c,i);return c}toString(){return ee.format("%s bits=%d bytes=%d",e0[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}Ls.INITIAL_STATE=new Ls(Mp,Fn,0,0);function Li(B){const i=ee.getCharCode(" "),l=ee.getCharCode("."),c=ee.getCharCode(",");B[Fn][i]=1;const h=ee.getCharCode("Z"),f=ee.getCharCode("A");for(let H=f;H<=h;H++)B[Fn][H]=H-f+2;B[Oi][i]=1;const x=ee.getCharCode("z"),y=ee.getCharCode("a");for(let H=y;H<=x;H++)B[Oi][H]=H-y+2;B[hr][i]=1;const j=ee.getCharCode("9"),C=ee.getCharCode("0");for(let H=C;H<=j;H++)B[hr][H]=H-C+2;B[hr][c]=12,B[hr][l]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let H=0;H<R.length;H++)B[id][ee.getCharCode(R[H])]=H;const U=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let H=0;H<U.length;H++)ee.getCharCode(U[H])>0&&(B[xs][ee.getCharCode(U[H])]=H);return B}const ld=Li(A.createInt32Array(5,256));class Lo{constructor(i){this.text=i}encode(){const i=ee.getCharCode(" "),l=ee.getCharCode(`
`);let c=Ml.singletonList(Ls.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let x,y=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case ee.getCharCode("\r"):x=y===l?2:0;break;case ee.getCharCode("."):x=y===i?3:0;break;case ee.getCharCode(","):x=y===i?4:0;break;case ee.getCharCode(":"):x=y===i?5:0;break;default:x=0}x>0?(c=Lo.updateStateListForPair(c,f,x),f++):c=this.updateStateListForChar(c,f)}return Ml.min(c,(f,x)=>f.getBitCount()-x.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,l){const c=[];for(let h of i)this.updateStateForChar(h,l,c);return Lo.simplifyStates(c)}updateStateForChar(i,l,c){let h=this.text[l]&255,f=ld[i.getMode()][h]>0,x=null;for(let y=0;y<=xs;y++){let j=ld[y][h];if(j>0){if(x==null&&(x=i.endBinaryShift(l)),!f||y===i.getMode()||y===hr){const C=x.latchAndAppend(y,j);c.push(C)}if(!f&&t0[i.getMode()][y]>=0){const C=x.shiftAndAppend(y,j);c.push(C)}}}if(i.getBinaryShiftByteCount()>0||ld[i.getMode()][h]===0){let y=i.addBinaryShiftChar(l);c.push(y)}}static updateStateListForPair(i,l,c){const h=[];for(let f of i)this.updateStateForPair(f,l,c,h);return this.simplifyStates(h)}static updateStateForPair(i,l,c,h){let f=i.endBinaryShift(l);if(h.push(f.latchAndAppend(xs,c)),i.getMode()!==xs&&h.push(f.shiftAndAppend(xs,c)),c===3||c===4){let x=f.latchAndAppend(hr,16-c).latchAndAppend(hr,1);h.push(x)}if(i.getBinaryShiftByteCount()>0){let x=i.addBinaryShiftChar(l).addBinaryShiftChar(l+1);h.push(x)}}static simplifyStates(i){let l=[];for(const c of i){let h=!0;for(const f of l){if(f.isBetterThanOrEqualTo(c)){h=!1;break}c.isBetterThanOrEqualTo(f)&&(l=l.filter(x=>x!==f))}h&&l.push(c)}return l}}class Bt{constructor(){}static encodeBytes(i){return Bt.encode(i,Bt.DEFAULT_EC_PERCENT,Bt.DEFAULT_AZTEC_LAYERS)}static encode(i,l,c){let h=new Lo(i).encode(),f=O.truncDivision(h.getSize()*l,100)+11,x=h.getSize()+f,y,j,C,R,U;if(c!==Bt.DEFAULT_AZTEC_LAYERS){if(y=c<0,j=Math.abs(c),j>(y?Bt.MAX_NB_BITS_COMPACT:Bt.MAX_NB_BITS))throw new b(ee.format("Illegal value %s for layers",c));C=Bt.totalBitsInLayer(j,y),R=Bt.WORD_SIZE[j];let Re=C-C%R;if(U=Bt.stuffBits(h,R),U.getSize()+f>Re)throw new b("Data to large for user specified layer");if(y&&U.getSize()>R*64)throw new b("Data to large for user specified layer")}else{R=0,U=null;for(let Re=0;;Re++){if(Re>Bt.MAX_NB_BITS)throw new b("Data too large for an Aztec code");if(y=Re<=3,j=y?Re+1:Re,C=Bt.totalBitsInLayer(j,y),x>C)continue;(U==null||R!==Bt.WORD_SIZE[j])&&(R=Bt.WORD_SIZE[j],U=Bt.stuffBits(h,R));let it=C-C%R;if(!(y&&U.getSize()>R*64)&&U.getSize()+f<=it)break}}let H=Bt.generateCheckWords(U,C,R),J=U.getSize()/R,q=Bt.generateModeMessage(y,j,J),G=(y?11:14)+j*4,K=new Int32Array(G),le;if(y){le=G;for(let Re=0;Re<K.length;Re++)K[Re]=Re}else{le=G+1+2*O.truncDivision(O.truncDivision(G,2)-1,15);let Re=O.truncDivision(G,2),it=O.truncDivision(le,2);for(let jt=0;jt<Re;jt++){let Ar=jt+O.truncDivision(jt,15);K[Re-jt-1]=it-Ar-1,K[Re+jt]=it+Ar+1}}let Ce=new ve(le);for(let Re=0,it=0;Re<j;Re++){let jt=(j-Re)*4+(y?9:12);for(let Ar=0;Ar<jt;Ar++){let _n=Ar*2;for(let ar=0;ar<2;ar++)H.get(it+_n+ar)&&Ce.set(K[Re*2+ar],K[Re*2+Ar]),H.get(it+jt*2+_n+ar)&&Ce.set(K[Re*2+Ar],K[G-1-Re*2-ar]),H.get(it+jt*4+_n+ar)&&Ce.set(K[G-1-Re*2-ar],K[G-1-Re*2-Ar]),H.get(it+jt*6+_n+ar)&&Ce.set(K[G-1-Re*2-Ar],K[Re*2+ar])}it+=jt*8}if(Bt.drawModeMessage(Ce,y,le,q),y)Bt.drawBullsEye(Ce,O.truncDivision(le,2),5);else{Bt.drawBullsEye(Ce,O.truncDivision(le,2),7);for(let Re=0,it=0;Re<O.truncDivision(G,2)-1;Re+=15,it+=16)for(let jt=O.truncDivision(le,2)&1;jt<le;jt+=2)Ce.set(O.truncDivision(le,2)-it,jt),Ce.set(O.truncDivision(le,2)+it,jt),Ce.set(jt,O.truncDivision(le,2)-it),Ce.set(jt,O.truncDivision(le,2)+it)}let Me=new Il;return Me.setCompact(y),Me.setSize(le),Me.setLayers(j),Me.setCodeWords(J),Me.setMatrix(Ce),Me}static drawBullsEye(i,l,c){for(let h=0;h<c;h+=2)for(let f=l-h;f<=l+h;f++)i.set(f,l-h),i.set(f,l+h),i.set(l-h,f),i.set(l+h,f);i.set(l-c,l-c),i.set(l-c+1,l-c),i.set(l-c,l-c+1),i.set(l+c,l-c),i.set(l+c,l-c+1),i.set(l+c,l+c-1)}static generateModeMessage(i,l,c){let h=new P;return i?(h.appendBits(l-1,2),h.appendBits(c-1,6),h=Bt.generateCheckWords(h,28,4)):(h.appendBits(l-1,5),h.appendBits(c-1,11),h=Bt.generateCheckWords(h,40,4)),h}static drawModeMessage(i,l,c,h){let f=O.truncDivision(c,2);if(l)for(let x=0;x<7;x++){let y=f-3+x;h.get(x)&&i.set(y,f-5),h.get(x+7)&&i.set(f+5,y),h.get(20-x)&&i.set(y,f+5),h.get(27-x)&&i.set(f-5,y)}else for(let x=0;x<10;x++){let y=f-5+x+O.truncDivision(x,5);h.get(x)&&i.set(y,f-7),h.get(x+10)&&i.set(f+7,y),h.get(29-x)&&i.set(y,f+7),h.get(39-x)&&i.set(f-7,y)}}static generateCheckWords(i,l,c){let h=i.getSize()/c,f=new Mo(Bt.getGF(c)),x=O.truncDivision(l,c),y=Bt.bitsToWords(i,c,x);f.encode(y,x-h);let j=l%c,C=new P;C.appendBits(0,j);for(const R of Array.from(y))C.appendBits(R,c);return C}static bitsToWords(i,l,c){let h=new Int32Array(c),f,x;for(f=0,x=i.getSize()/l;f<x;f++){let y=0;for(let j=0;j<l;j++)y|=i.get(f*l+j)?1<<l-j-1:0;h[f]=y}return h}static getGF(i){switch(i){case 4:return Te.AZTEC_PARAM;case 6:return Te.AZTEC_DATA_6;case 8:return Te.AZTEC_DATA_8;case 10:return Te.AZTEC_DATA_10;case 12:return Te.AZTEC_DATA_12;default:throw new b("Unsupported word size "+i)}}static stuffBits(i,l){let c=new P,h=i.getSize(),f=(1<<l)-2;for(let x=0;x<h;x+=l){let y=0;for(let j=0;j<l;j++)(x+j>=h||i.get(x+j))&&(y|=1<<l-1-j);(y&f)===f?(c.appendBits(y&f,l),x--):y&f?c.appendBits(y,l):(c.appendBits(y|1,l),x--)}return c}static totalBitsInLayer(i,l){return((l?88:112)+16*i)*i}}Bt.DEFAULT_EC_PERCENT=33,Bt.DEFAULT_AZTEC_LAYERS=0,Bt.MAX_NB_BITS=32,Bt.MAX_NB_BITS_COMPACT=4,Bt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Po{encode(i,l,c,h){return this.encodeWithHints(i,l,c,h,null)}encodeWithHints(i,l,c,h,f){let x=Dl.ISO_8859_1,y=Bt.DEFAULT_EC_PERCENT,j=Bt.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(Cn.CHARACTER_SET)&&(x=sd.forName(f.get(Cn.CHARACTER_SET).toString())),f.has(Cn.ERROR_CORRECTION)&&(y=O.parseInt(f.get(Cn.ERROR_CORRECTION).toString())),f.has(Cn.AZTEC_LAYERS)&&(j=O.parseInt(f.get(Cn.AZTEC_LAYERS).toString()))),Po.encodeLayers(i,l,c,h,x,y,j)}static encodeLayers(i,l,c,h,f,x,y){if(l!==Ae.AZTEC)throw new b("Can only encode AZTEC, but got "+l);let j=Bt.encode(ee.getBytes(i,f),x,y);return Po.renderResult(j,c,h)}static renderResult(i,l,c){let h=i.getMatrix();if(h==null)throw new Ze;let f=h.getWidth(),x=h.getHeight(),y=Math.max(l,f),j=Math.max(c,x),C=Math.min(y/f,j/x),R=(y-f*C)/2,U=(j-x*C)/2,H=new ve(y,j);for(let J=0,q=U;J<x;J++,q+=C)for(let G=0,K=R;G<f;G++,K+=C)h.get(G,J)&&H.setRegion(K,q,C,C);return H}}t.AbstractExpandedDecoder=Gc,t.ArgumentException=w,t.ArithmeticException=Tt,t.AztecCode=Il,t.AztecCodeReader=Br,t.AztecCodeWriter=Po,t.AztecDecoder=$e,t.AztecDetector=Cr,t.AztecDetectorResult=He,t.AztecEncoder=Bt,t.AztecHighLevelEncoder=Lo,t.AztecPoint=Rt,t.BarcodeFormat=Ae,t.Binarizer=T,t.BinaryBitmap=_,t.BitArray=P,t.BitMatrix=ve,t.BitSource=El,t.BrowserAztecCodeReader=Ts,t.BrowserBarcodeReader=Wu,t.BrowserCodeReader=Ve,t.BrowserDatamatrixCodeReader=Hu,t.BrowserMultiFormatReader=es,t.BrowserPDF417Reader=Dp,t.BrowserQRCodeReader=Zu,t.BrowserQRCodeSvgWriter=Ya,t.CharacterSetECI=V,t.ChecksumException=E,t.Code128Reader=te,t.Code39Reader=Je,t.DataMatrixDecodedBitStreamParser=Rs,t.DataMatrixReader=ps,t.DecodeHintType=L,t.DecoderResult=qt,t.DefaultGridSampler=Et,t.DetectorResult=ie,t.EAN13Reader=ya,t.EncodeHintType=Cn,t.Exception=g,t.FormatException=F,t.GenericGF=Te,t.GenericGFPoly=Pt,t.GlobalHistogramBinarizer=Q,t.GridSampler=Fe,t.GridSamplerInstance=en,t.HTMLCanvasElementLuminanceSource=ue,t.HybridBinarizer=me,t.ITFReader=ft,t.IllegalArgumentException=b,t.IllegalStateException=Ze,t.InvertedLuminanceSource=Ie,t.LuminanceSource=fe,t.MathUtils=Ge,t.MultiFormatOneDReader=Ha,t.MultiFormatReader=Ku,t.MultiFormatWriter=Tl,t.NotFoundException=ne,t.OneDReader=tn,t.PDF417DecodedBitStreamParser=je,t.PDF417DecoderErrorCorrection=$u,t.PDF417Reader=Jn,t.PDF417ResultMetadata=td,t.PerspectiveTransform=ht,t.PlanarYUVLuminanceSource=yr,t.QRCodeByteMatrix=ms,t.QRCodeDataMask=Sr,t.QRCodeDecodedBitStreamParser=gn,t.QRCodeDecoderErrorCorrectionLevel=cn,t.QRCodeDecoderFormatInformation=rr,t.QRCodeEncoder=xn,t.QRCodeEncoderQRCode=ea,t.QRCodeMaskUtil=Nt,t.QRCodeMatrixUtil=mt,t.QRCodeMode=pt,t.QRCodeReader=wa,t.QRCodeVersion=dt,t.QRCodeWriter=Qa,t.RGBLuminanceSource=rd,t.RSS14Reader=yn,t.RSSExpandedReader=Pe,t.ReaderException=ur,t.ReedSolomonDecoder=be,t.ReedSolomonEncoder=Mo,t.ReedSolomonException=Ne,t.Result=Be,t.ResultMetadataType=nt,t.ResultPoint=ye,t.StringUtils=ee,t.UnsupportedOperationException=re,t.VideoInputDevice=Ye,t.WhiteRectangleDetector=Ee,t.WriterException=dn,t.ZXingArrays=A,t.ZXingCharset=sd,t.ZXingInteger=O,t.ZXingStandardCharsets=Dl,t.ZXingStringBuilder=he,t.ZXingStringEncoding=oe,t.ZXingSystem=I,t.createAbstractExpandedDecoder=qu,Object.defineProperty(t,"__esModule",{value:!0})})})(zx,zx.exports);var bn=zx.exports;const RL=Rf(bn),OL=P3({__proto__:null,default:RL},[bn]);var Rb=function(){function e(n,t,r){if(this.formatMap=new Map([[rt.QR_CODE,bn.BarcodeFormat.QR_CODE],[rt.AZTEC,bn.BarcodeFormat.AZTEC],[rt.CODABAR,bn.BarcodeFormat.CODABAR],[rt.CODE_39,bn.BarcodeFormat.CODE_39],[rt.CODE_93,bn.BarcodeFormat.CODE_93],[rt.CODE_128,bn.BarcodeFormat.CODE_128],[rt.DATA_MATRIX,bn.BarcodeFormat.DATA_MATRIX],[rt.MAXICODE,bn.BarcodeFormat.MAXICODE],[rt.ITF,bn.BarcodeFormat.ITF],[rt.EAN_13,bn.BarcodeFormat.EAN_13],[rt.EAN_8,bn.BarcodeFormat.EAN_8],[rt.PDF_417,bn.BarcodeFormat.PDF_417],[rt.RSS_14,bn.BarcodeFormat.RSS_14],[rt.RSS_EXPANDED,bn.BarcodeFormat.RSS_EXPANDED],[rt.UPC_A,bn.BarcodeFormat.UPC_A],[rt.UPC_E,bn.BarcodeFormat.UPC_E],[rt.UPC_EAN_EXTENSION,bn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!OL)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var a=this.createZXingFormats(n),o=new Map;o.set(bn.DecodeHintType.POSSIBLE_FORMATS,a),o.set(bn.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(n){var t=this;return new Promise(function(r,a){try{r(t.decode(n))}catch(o){a(o)}})},e.prototype.decode=function(n){var t=new bn.MultiFormatReader(this.verbose,this.hints),r=new bn.HTMLCanvasElementLuminanceSource(n),a=new bn.BinaryBitmap(new bn.HybridBinarizer(r)),o=t.decode(a);return{text:o.text,format:DC.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(t,r,a){n.set(t,r)}),n},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createZXingFormats=function(n){for(var t=[],r=0,a=n;r<a.length;r++){var o=a[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),LL=globalThis&&globalThis.__awaiter||function(e,n,t,r){function a(o){return o instanceof t?o:new t(function(d){d(o)})}return new(t||(t=Promise))(function(o,d){function m(w){try{g(r.next(w))}catch(b){d(b)}}function v(w){try{g(r.throw(w))}catch(b){d(b)}}function g(w){w.done?o(w.value):a(w.value).then(m,v)}g((r=r.apply(e,n||[])).next())})},PL=globalThis&&globalThis.__generator||function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,a,o,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(g){return function(w){return v([g,w])}}function v(g){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(t=0)),t;)try{if(r=1,a&&(o=g[0]&2?a.return:g[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,g[1])).done)return o;switch(a=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,a=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=n.call(e,t)}catch(w){g=[6,w],a=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Ob=function(){function e(n,t,r){if(this.formatMap=new Map([[rt.QR_CODE,"qr_code"],[rt.AZTEC,"aztec"],[rt.CODABAR,"codabar"],[rt.CODE_39,"code_39"],[rt.CODE_93,"code_93"],[rt.CODE_128,"code_128"],[rt.DATA_MATRIX,"data_matrix"],[rt.ITF,"itf"],[rt.EAN_13,"ean_13"],[rt.EAN_8,"ean_8"],[rt.PDF_417,"pdf417"],[rt.UPC_A,"upc_a"],[rt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=r;var a=this.createBarcodeDetectorFormats(n);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var n=new BarcodeDetector({formats:["qr_code"]});return typeof n<"u"},e.prototype.decodeAsync=function(n){return LL(this,void 0,void 0,function(){var t,r;return PL(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(n)];case 1:if(t=a.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(t),[2,{text:r.rawValue,format:DC.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(n){for(var t=null,r=0,a=0,o=n;a<o.length;a++){var d=o[a],m=d.boundingBox.width*d.boundingBox.height;m>r&&(r=m,t=d)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(n){for(var t=[],r=0,a=n;r<a.length;r++){var o=a[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(t,r,a){n.set(t,r)}),n},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Lb=globalThis&&globalThis.__awaiter||function(e,n,t,r){function a(o){return o instanceof t?o:new t(function(d){d(o)})}return new(t||(t=Promise))(function(o,d){function m(w){try{g(r.next(w))}catch(b){d(b)}}function v(w){try{g(r.throw(w))}catch(b){d(b)}}function g(w){w.done?o(w.value):a(w.value).then(m,v)}g((r=r.apply(e,n||[])).next())})},Pb=globalThis&&globalThis.__generator||function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,a,o,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(g){return function(w){return v([g,w])}}function v(g){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(t=0)),t;)try{if(r=1,a&&(o=g[0]&2?a.return:g[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,g[1])).done)return o;switch(a=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,a=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=n.call(e,t)}catch(w){g=[6,w],a=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},FL=function(){function e(n,t,r,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&Ob.isSupported()?(this.primaryDecoder=new Ob(n,r,a),this.secondaryDecoder=new Rb(n,r,a)):this.primaryDecoder=new Rb(n,r,a)}return e.prototype.decodeAsync=function(n){return Lb(this,void 0,void 0,function(){var t;return Pb(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(n)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(n){return Lb(this,void 0,void 0,function(){var t,r;return Pb(this,function(a){switch(a.label){case 0:t=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(n)];case 2:return[2,a.sent()];case 3:if(r=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(n)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(n){if(this.verbose){var t=performance.now()-n;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var n=0,t=0,r=this.executionResults;t<r.length;t++){var a=r[t];n+=a}var o=n/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),j2=globalThis&&globalThis.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Nf=globalThis&&globalThis.__awaiter||function(e,n,t,r){function a(o){return o instanceof t?o:new t(function(d){d(o)})}return new(t||(t=Promise))(function(o,d){function m(w){try{g(r.next(w))}catch(b){d(b)}}function v(w){try{g(r.throw(w))}catch(b){d(b)}}function g(w){w.done?o(w.value):a(w.value).then(m,v)}g((r=r.apply(e,n||[])).next())})},jf=globalThis&&globalThis.__generator||function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,a,o,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(g){return function(w){return v([g,w])}}function v(g){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(t=0)),t;)try{if(r=1,a&&(o=g[0]&2?a.return:g[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,g[1])).done)return o;switch(a=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,a=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=n.call(e,t)}catch(w){g=[6,w],a=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},MC=function(){function e(n,t){this.name=n,this.track=t}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(n){var t={};t[this.name]=n;var r={advanced:[t]};return this.track.applyConstraints(r)},e.prototype.value=function(){var n=this.track.getSettings();if(this.name in n){var t=n[this.name];return t}return null},e}(),BL=function(e){j2(n,e);function n(t,r){return e.call(this,t,r)||this}return n.prototype.min=function(){return this.getCapabilities().min},n.prototype.max=function(){return this.getCapabilities().max},n.prototype.step=function(){return this.getCapabilities().step},n.prototype.apply=function(t){var r={};r[this.name]=t;var a={advanced:[r]};return this.track.applyConstraints(a)},n.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),r=t[this.name];return{min:r.min,max:r.max,step:r.step}},n.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},n}(MC),UL=function(e){j2(n,e);function n(t){return e.call(this,"zoom",t)||this}return n}(BL),zL=function(e){j2(n,e);function n(t){return e.call(this,"torch",t)||this}return n}(MC),qL=function(){function e(n){this.track=n}return e.prototype.zoomFeature=function(){return new UL(this.track)},e.prototype.torchFeature=function(){return new zL(this.track)},e}(),WL=function(){function e(n,t,r){this.isClosed=!1,this.parentElement=n,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),n.append(this.surface)}return e.prototype.createVideoElement=function(n){var t=document.createElement("video");return t.style.width="".concat(n,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var n=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=n.surface.clientWidth,a=n.surface.clientHeight;n.callbacks.onRenderSurfaceReady(r,a),n.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(n,t,r,a){return Nf(this,void 0,void 0,function(){var o,d;return jf(this,function(m){switch(m.label){case 0:return o=new e(n,t,a),r.aspectRatio?(d={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(d)]):[3,2];case 1:m.sent(),m.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(n){this.failIfClosed();var t=this,r=function(){setTimeout(n,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(n){return Nf(this,void 0,void 0,function(){return jf(this,function(t){if("aspectRatio"in n)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(n)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var n=this;return new Promise(function(t,r){var a=n.mediaStream.getVideoTracks(),o=a.length,d=0;n.mediaStream.getVideoTracks().forEach(function(m){n.mediaStream.removeTrack(m),m.stop(),++d,d>=o&&(n.isClosed=!0,n.parentElement.removeChild(n.surface),t())})})},e.prototype.getCapabilities=function(){return new qL(this.getFirstTrackOrFail())},e}(),HL=function(){function e(n){this.mediaStream=n}return e.prototype.render=function(n,t,r){return Nf(this,void 0,void 0,function(){return jf(this,function(a){return[2,WL.create(n,this.mediaStream,t,r)]})})},e.create=function(n){return Nf(this,void 0,void 0,function(){var t,r;return jf(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:n},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=a.sent(),[2,new e(r)]}})})},e}(),Fb=globalThis&&globalThis.__awaiter||function(e,n,t,r){function a(o){return o instanceof t?o:new t(function(d){d(o)})}return new(t||(t=Promise))(function(o,d){function m(w){try{g(r.next(w))}catch(b){d(b)}}function v(w){try{g(r.throw(w))}catch(b){d(b)}}function g(w){w.done?o(w.value):a(w.value).then(m,v)}g((r=r.apply(e,n||[])).next())})},Bb=globalThis&&globalThis.__generator||function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,a,o,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(g){return function(w){return v([g,w])}}function v(g){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(t=0)),t;)try{if(r=1,a&&(o=g[0]&2?a.return:g[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,g[1])).done)return o;switch(a=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,a=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=n.call(e,t)}catch(w){g=[6,w],a=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},VL=function(){function e(){}return e.failIfNotSupported=function(){return Fb(this,void 0,void 0,function(){return Bb(this,function(n){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(n){return Fb(this,void 0,void 0,function(){return Bb(this,function(t){return[2,HL.create(n)]})})},e}(),$L=globalThis&&globalThis.__awaiter||function(e,n,t,r){function a(o){return o instanceof t?o:new t(function(d){d(o)})}return new(t||(t=Promise))(function(o,d){function m(w){try{g(r.next(w))}catch(b){d(b)}}function v(w){try{g(r.throw(w))}catch(b){d(b)}}function g(w){w.done?o(w.value):a(w.value).then(m,v)}g((r=r.apply(e,n||[])).next())})},YL=globalThis&&globalThis.__generator||function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,a,o,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(g){return function(w){return v([g,w])}}function v(g){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(t=0)),t;)try{if(r=1,a&&(o=g[0]&2?a.return:g[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,g[1])).done)return o;switch(a=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,a=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=n.call(e,t)}catch(w){g=[6,w],a=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},QL=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var n=MediaStreamTrack;return MediaStreamTrack&&n.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var n=oc.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(n=oc.insecureContextCameraQueryError()),Promise.reject(n)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var n=location.host.split(":")[0];return n==="127.0.0.1"||n==="localhost"},e.getCamerasFromMediaDevices=function(){return $L(this,void 0,void 0,function(){var n,t,r,a,o,d,m;return YL(this,function(v){switch(v.label){case 0:return n=function(g){for(var w=g.getVideoTracks(),b=0,_=w;b<_.length;b++){var E=_[b];E.enabled=!1,E.stop(),g.removeTrack(E)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=v.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=v.sent(),a=[],o=0,d=r;o<d.length;o++)m=d[o],m.kind==="videoinput"&&a.push({id:m.deviceId,label:m.label});return n(t),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(n,t){var r=function(o){for(var d=[],m=0,v=o;m<v.length;m++){var g=v[m];g.kind==="video"&&d.push({id:g.id,label:g.label})}n(d)},a=MediaStreamTrack;a.getSources(r)})},e}(),Un;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Un||(Un={}));var GL=function(){function e(){this.state=Un.NOT_STARTED,this.onGoingTransactionNewState=Un.UNKNOWN}return e.prototype.directTransition=function(n){this.failIfTransitionOngoing(),this.validateTransition(n),this.state=n},e.prototype.startTransition=function(n){return this.failIfTransitionOngoing(),this.validateTransition(n),this.onGoingTransactionNewState=n,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Un.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var n=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Un.UNKNOWN,this.directTransition(n)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Un.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Un.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Un.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(n){switch(this.state){case Un.UNKNOWN:throw"Transition from unknown is not allowed";case Un.NOT_STARTED:this.failIfNewStateIs(n,[Un.PAUSED]);break;case Un.SCANNING:break;case Un.PAUSED:break}},e.prototype.failIfNewStateIs=function(n,t){for(var r=0,a=t;r<a.length;r++){var o=a[r];if(n===o)throw"Cannot transition from ".concat(this.state," to ").concat(n)}},e}(),XL=function(){function e(n){this.stateManager=n}return e.prototype.startTransition=function(n){return this.stateManager.startTransition(n)},e.prototype.directTransition=function(n){this.stateManager.directTransition(n)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Un.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Un.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Un.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Un.PAUSED},e}(),KL=function(){function e(){}return e.create=function(){return new XL(new GL)},e}(),ZL=globalThis&&globalThis.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bs=function(e){ZL(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.DEFAULT_WIDTH=300,n.DEFAULT_WIDTH_OFFSET=2,n.FILE_SCAN_MIN_HEIGHT=300,n.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,n.MIN_QR_BOX_SIZE=50,n.SHADED_LEFT=1,n.SHADED_RIGHT=2,n.SHADED_TOP=3,n.SHADED_BOTTOM=4,n.SHADED_REGION_ELEMENT_ID="qr-shaded-region",n.VERBOSE=!1,n.BORDER_SHADER_DEFAULT_COLOR="#ffffff",n.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",n}(DL),JL=function(){function e(n,t){this.logger=t,this.fps=bs.SCAN_DEFAULT_FPS,n?(n.fps&&(this.fps=n.fps),this.disableFlip=n.disableFlip===!0,this.qrbox=n.qrbox,this.aspectRatio=n.aspectRatio,this.videoConstraints=n.videoConstraints):this.disableFlip=bs.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?IC.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!ii(this.qrbox)},e.create=function(n,t){return new e(n,t)},e}(),eP=function(){function e(n,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.elementId=n,this.verbose=!1;var r;typeof t=="boolean"?this.verbose=t===!0:t&&(r=t,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new ML(this.verbose),this.qrcode=new FL(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=KL.create()}return e.prototype.start=function(n,t,r,a){var o=this;if(!n)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var d;a?d=a:d=this.verbose?this.logger.log:function(){};var m=JL.create(t,this.logger);this.clearElement();var v=!1;m.videoConstraints&&(m.isMediaStreamConstraintsValid()?v=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=v,w=document.getElementById(this.elementId);w.clientWidth?w.clientWidth:bs.DEFAULT_WIDTH,w.style.position="relative",this.shouldScan=!0,this.element=w;var b=this,_=this.stateManagerProxy.startTransition(Un.SCANNING);return new Promise(function(E,T){var I=g?m.videoConstraints:b.createVideoConstraints(n);if(!I){_.cancel(),T("videoConstraints should be defined");return}var k={};(!g||m.aspectRatio)&&(k.aspectRatio=m.aspectRatio);var S={onRenderSurfaceReady:function(A,O){b.setupUi(A,O,m),b.isScanning=!0,b.foreverScan(m,r,d)}};VL.failIfNotSupported().then(function(A){A.create(I).then(function(O){return O.render(o.element,k,S).then(function(P){b.renderedCamera=P,_.execute(),E(null)}).catch(function(P){_.cancel(),T(P)})}).catch(function(O){_.cancel(),T(oc.errorGettingUserMedia(O))})}).catch(function(A){_.cancel(),T(oc.cameraStreamingNotSupported())})})},e.prototype.pause=function(n){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Un.PAUSED),this.showPausedState(),(ii(n)||n!==!0)&&(n=!1),n&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var n=this,t=function(){n.stateManagerProxy.directTransition(Un.SCANNING),n.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var n=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Un.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(n.element){var o=document.getElementById(bs.SHADED_REGION_ELEMENT_ID);o&&n.element.removeChild(o)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),r(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),t.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(n,t){return this.scanFileV2(n,t).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(n,t){var r=this;if(!n||!(n instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ii(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(n);var d=new Image;d.onload=function(){var m=d.width,v=d.height,g=document.getElementById(r.elementId),w=g.clientWidth?g.clientWidth:bs.DEFAULT_WIDTH,b=Math.max(g.clientHeight?g.clientHeight:v,bs.FILE_SCAN_MIN_HEIGHT),_=r.computeCanvasDrawConfig(m,v,w,b);if(t){var E=r.createCanvasElement(w,b,"qr-canvas-visible");E.style.display="inline-block",g.appendChild(E);var T=E.getContext("2d");if(!T)throw"Unable to get 2d context from canvas";T.canvas.width=w,T.canvas.height=b,T.drawImage(d,0,0,m,v,_.x,_.y,_.width,_.height)}var I=bs.FILE_SCAN_HIDDEN_CANVAS_PADDING,k=Math.max(d.width,_.width),S=Math.max(d.height,_.height),A=k+2*I,O=S+2*I,P=r.createCanvasElement(A,O);g.appendChild(P);var $=P.getContext("2d");if(!$)throw"Unable to get 2d context from canvas";$.canvas.width=A,$.canvas.height=O,$.drawImage(d,0,0,m,v,I,I,k,S);try{r.qrcode.decodeRobustlyAsync(P).then(function(L){a(Mb.createFromQrcodeResult(L))}).catch(o)}catch(L){o("QR code parse error, error = ".concat(L))}},d.onerror=o,d.onabort=o,d.onstalled=o,d.onsuspend=o,d.src=URL.createObjectURL(n)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return QL.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(n){if(n){if(!IC.isMediaStreamConstraintsValid(n,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(n)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(n){var t=[rt.QR_CODE,rt.AZTEC,rt.CODABAR,rt.CODE_39,rt.CODE_93,rt.CODE_128,rt.DATA_MATRIX,rt.MAXICODE,rt.ITF,rt.EAN_13,rt.EAN_8,rt.PDF_417,rt.RSS_14,rt.RSS_EXPANDED,rt.UPC_A,rt.UPC_E,rt.UPC_EAN_EXTENSION];if(!n||typeof n=="boolean"||!n.formatsToSupport)return t;if(!Array.isArray(n.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(n.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],a=0,o=n.formatsToSupport;a<o.length;a++){var d=o[a];TL(d)?r.push(d):this.logger.warn("Invalid format: ".concat(d," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(n){if(ii(n))return!0;if(!ii(n.useBarCodeDetectorIfSupported))return n.useBarCodeDetectorIfSupported!==!1;if(ii(n.experimentalFeatures))return!0;var t=n.experimentalFeatures;return ii(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(n,t,r){var a=this,o=r.qrbox;this.validateQrboxConfig(o);var d=this.toQrdimensions(n,t,o),m=function(g){if(g<bs.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(bs.MIN_QR_BOX_SIZE,"px.")},v=function(g){return g>n&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=n),g};m(d.width),m(d.height),d.width=v(d.width)},e.prototype.validateQrboxConfig=function(n){if(typeof n!="number"&&typeof n!="function"&&(n.width===void 0||n.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(n,t,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(n,t)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return r},e.prototype.setupUi=function(n,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(n,t,r);var a=ii(r.qrbox)?{width:n,height:t}:r.qrbox;this.validateQrboxConfig(a);var o=this.toQrdimensions(n,t,a);o.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var d=r.isShadedBoxEnabled()&&o.height<=t,m={x:0,y:0,width:n,height:t},v=d?this.getShadedRegionBounds(n,t,o):m,g=this.createCanvasElement(v.width,v.height),w={willReadFrequently:!0},b=g.getContext("2d",w);b.canvas.width=v.width,b.canvas.height=v.height,this.element.append(g),d&&this.possiblyInsertShadingElement(this.element,n,t,o),this.createScannerPausedUiElement(this.element),this.qrRegion=v,this.context=b,this.canvasElement=g},e.prototype.createScannerPausedUiElement=function(n){var t=document.createElement("div");t.innerText=oc.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",n.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(n,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return n(a.text,Mb.createFromQrcodeResult(a)),r.possiblyUpdateShaders(!0),!0}).catch(function(a){r.possiblyUpdateShaders(!1);var o=oc.codeParseError(a);return t(o,IL.createFrom(o)),!1})},e.prototype.foreverScan=function(n,t,r){var a=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),d=o.videoWidth/o.clientWidth,m=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var v=this.qrRegion.width*d,g=this.qrRegion.height*m,w=this.qrRegion.x*d,b=this.qrRegion.y*m;this.context.drawImage(o,w,b,v,g,0,0,this.qrRegion.width,this.qrRegion.height);var _=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(n,t,r)},a.getTimeoutFps(n.fps))};this.scanContext(t,r).then(function(E){!E&&n.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(t,r).finally(function(){_()})):_()}).catch(function(E){a.logger.logError("Error happend while scanning context",E),_()})}},e.prototype.createVideoConstraints=function(n){if(typeof n=="string")return{deviceId:{exact:n}};if(typeof n=="object"){var t="facingMode",r="deviceId",a={user:!0,environment:!0},o="exact",d=function(T){if(T in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(T,"'")},m=Object.keys(n);if(m.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(m.length," keys");var v=Object.keys(n)[0];if(v!==t&&v!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(v===t){var g=n.facingMode;if(typeof g=="string"){if(d(g))return{facingMode:g}}else if(typeof g=="object")if(o in g){if(d(g["".concat(o)]))return{facingMode:{exact:g["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var w=typeof g;throw"Invalid type of 'facingMode' = ".concat(w)}}else{var b=n.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(o in b)return{deviceId:{exact:b["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var _=typeof b;throw"Invalid type of 'deviceId' = ".concat(_)}}}var E=typeof n;throw"Invalid type of 'cameraIdOrConfig' = ".concat(E)},e.prototype.computeCanvasDrawConfig=function(n,t,r,a){if(n<=r&&t<=a){var o=(r-n)/2,d=(a-t)/2;return{x:o,y:d,width:n,height:t}}else{var m=n,v=t;return n>r&&(t=r/n*t,n=r),t>a&&(n=a/t*n,t=a),this.logger.log("Image downsampled from "+"".concat(m,"X").concat(v)+" to ".concat(n,"X").concat(t,".")),this.computeCanvasDrawConfig(n,t,r,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var n=document.getElementById(this.elementId);n&&(n.innerHTML="")},e.prototype.possiblyUpdateShaders=function(n){this.qrMatch!==n&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=n?bs.BORDER_SHADER_MATCH_COLOR:bs.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=n)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(n,t,r){var a=n,o=t,d=document.createElement("canvas");return d.style.width="".concat(a,"px"),d.style.height="".concat(o,"px"),d.style.display="none",d.id=ii(r)?"qr-canvas":r,d},e.prototype.getShadedRegionBounds=function(n,t,r){if(r.width>n||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(n-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(n,t,r,a){if(!(t-a.width<1||r-a.height<1)){var o=document.createElement("div");o.style.position="absolute";var d=(t-a.width)/2,m=(r-a.height)/2;if(o.style.borderLeft="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(bs.SHADED_REGION_ELEMENT_ID),t-a.width<11||r-a.height<11)this.hasBorderShaders=!1;else{var v=5,g=40;this.insertShaderBorders(o,g,v,-v,null,0,!0),this.insertShaderBorders(o,g,v,-v,null,0,!1),this.insertShaderBorders(o,g,v,null,-v,0,!0),this.insertShaderBorders(o,g,v,null,-v,0,!1),this.insertShaderBorders(o,v,g+v,-v,null,-v,!0),this.insertShaderBorders(o,v,g+v,null,-v,-v,!0),this.insertShaderBorders(o,v,g+v,-v,null,-v,!1),this.insertShaderBorders(o,v,g+v,null,-v,-v,!1),this.hasBorderShaders=!0}n.append(o)}},e.prototype.insertShaderBorders=function(n,t,r,a,o,d,m){var v=document.createElement("div");v.style.position="absolute",v.style.backgroundColor=bs.BORDER_SHADER_DEFAULT_COLOR,v.style.width="".concat(t,"px"),v.style.height="".concat(r,"px"),a!==null&&(v.style.top="".concat(a,"px")),o!==null&&(v.style.bottom="".concat(o,"px")),m?v.style.left="".concat(d,"px"):v.style.right="".concat(d,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(v),n.appendChild(v)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(n){return 1e3/n},e}();globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;var Ub;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ub||(Ub={}));let tP={data:""},nP=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||tP,rP=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,sP=/\/\*[^]*?\*\/|  +/g,zb=/\n+/g,Xi=(e,n)=>{let t="",r="",a="";for(let o in e){let d=e[o];o[0]=="@"?o[1]=="i"?t=o+" "+d+";":r+=o[1]=="f"?Xi(d,o):o+"{"+Xi(d,o[1]=="k"?"":n)+"}":typeof d=="object"?r+=Xi(d,n?n.replace(/([^,])+/g,m=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,v=>/&/.test(v)?v.replace(/&/g,m):m?m+" "+v:v)):o):d!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Xi.p?Xi.p(o,d):o+":"+d+";")}return t+(n&&a?n+"{"+a+"}":a)+r},si={},RC=e=>{if(typeof e=="object"){let n="";for(let t in e)n+=t+RC(e[t]);return n}return e},aP=(e,n,t,r,a)=>{let o=RC(e),d=si[o]||(si[o]=(v=>{let g=0,w=11;for(;g<v.length;)w=101*w+v.charCodeAt(g++)>>>0;return"go"+w})(o));if(!si[d]){let v=o!==e?e:(g=>{let w,b,_=[{}];for(;w=rP.exec(g.replace(sP,""));)w[4]?_.shift():w[3]?(b=w[3].replace(zb," ").trim(),_.unshift(_[0][b]=_[0][b]||{})):_[0][w[1]]=w[2].replace(zb," ").trim();return _[0]})(e);si[d]=Xi(a?{["@keyframes "+d]:v}:v,t?"":"."+d)}let m=t&&si.g?si.g:null;return t&&(si.g=si[d]),((v,g,w,b)=>{b?g.data=g.data.replace(b,v):g.data.indexOf(v)===-1&&(g.data=w?v+g.data:g.data+v)})(si[d],n,r,m),d},iP=(e,n,t)=>e.reduce((r,a,o)=>{let d=n[o];if(d&&d.call){let m=d(t),v=m&&m.props&&m.props.className||/^go/.test(m)&&m;d=v?"."+v:m&&typeof m=="object"?m.props?"":Xi(m,""):m===!1?"":m}return r+a+(d??"")},"");function gp(e){let n=this||{},t=e.call?e(n.p):e;return aP(t.unshift?t.raw?iP(t,[].slice.call(arguments,1),n.p):t.reduce((r,a)=>Object.assign(r,a&&a.call?a(n.p):a),{}):t,nP(n.target),n.g,n.o,n.k)}let OC,qx,Wx;gp.bind({g:1});let Ci=gp.bind({k:1});function oP(e,n,t,r){Xi.p=n,OC=e,qx=t,Wx=r}function jo(e,n){let t=this||{};return function(){let r=arguments;function a(o,d){let m=Object.assign({},o),v=m.className||a.className;t.p=Object.assign({theme:qx&&qx()},m),t.o=/ *go\d+/.test(v),m.className=gp.apply(t,r)+(v?" "+v:""),n&&(m.ref=d);let g=e;return e[0]&&(g=m.as||e,delete m.as),Wx&&g[0]&&Wx(m),OC(g,m)}return n?n(a):a}}var lP=e=>typeof e=="function",Hx=(e,n)=>lP(e)?e(n):e,cP=(()=>{let e=0;return()=>(++e).toString()})(),dP=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let n=matchMedia("(prefers-reduced-motion: reduce)");e=!n||n.matches}return e}})(),uP=20,LC=(e,n)=>{switch(n.type){case 0:return{...e,toasts:[n.toast,...e.toasts].slice(0,uP)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===n.toast.id?{...o,...n.toast}:o)};case 2:let{toast:t}=n;return LC(e,{type:e.toasts.find(o=>o.id===t.id)?1:0,toast:t});case 3:let{toastId:r}=n;return{...e,toasts:e.toasts.map(o=>o.id===r||r===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return n.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==n.toastId)};case 5:return{...e,pausedAt:n.time};case 6:let a=n.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+a}))}}},hP=[],l1={toasts:[],pausedAt:void 0},C2=e=>{l1=LC(l1,e),hP.forEach(n=>{n(l1)})},fP=(e,n="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:n,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...t,id:(t==null?void 0:t.id)||cP()}),Ru=e=>(n,t)=>{let r=fP(n,e,t);return C2({type:2,toast:r}),r.id},ot=(e,n)=>Ru("blank")(e,n);ot.error=Ru("error");ot.success=Ru("success");ot.loading=Ru("loading");ot.custom=Ru("custom");ot.dismiss=e=>{C2({type:3,toastId:e})};ot.remove=e=>C2({type:4,toastId:e});ot.promise=(e,n,t)=>{let r=ot.loading(n.loading,{...t,...t==null?void 0:t.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let o=n.success?Hx(n.success,a):void 0;return o?ot.success(o,{id:r,...t,...t==null?void 0:t.success}):ot.dismiss(r),a}).catch(a=>{let o=n.error?Hx(n.error,a):void 0;o?ot.error(o,{id:r,...t,...t==null?void 0:t.error}):ot.dismiss(r)}),e};var pP=Ci`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,mP=Ci`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,xP=Ci`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,gP=jo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pP} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${mP} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${xP} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,vP=Ci`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,yP=jo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${vP} 1s linear infinite;
`,wP=Ci`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,bP=Ci`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,NP=jo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${wP} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${bP} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,jP=jo("div")`
  position: absolute;
`,CP=jo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,_P=Ci`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,EP=jo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${_P} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,SP=({toast:e})=>{let{icon:n,type:t,iconTheme:r}=e;return n!==void 0?typeof n=="string"?M.createElement(EP,null,n):n:t==="blank"?null:M.createElement(CP,null,M.createElement(yP,{...r}),t!=="loading"&&M.createElement(jP,null,t==="error"?M.createElement(gP,{...r}):M.createElement(NP,{...r})))},kP=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,AP=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,TP="0%{opacity:0;} 100%{opacity:1;}",DP="0%{opacity:1;} 100%{opacity:0;}",IP=jo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,MP=jo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,RP=(e,n)=>{let t=e.includes("top")?1:-1,[r,a]=dP()?[TP,DP]:[kP(t),AP(t)];return{animation:n?`${Ci(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ci(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};M.memo(({toast:e,position:n,style:t,children:r})=>{let a=e.height?RP(e.position||n||"top-center",e.visible):{opacity:0},o=M.createElement(SP,{toast:e}),d=M.createElement(MP,{...e.ariaProps},Hx(e.message,e));return M.createElement(IP,{className:e.className,style:{...a,...t,...e.style}},typeof r=="function"?r({icon:o,message:d}):M.createElement(M.Fragment,null,o,d))});oP(M.createElement);gp`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;const PC=({onScan:e,onError:n=a=>console.error(a),isOpen:t,onClose:r})=>{const[a,o]=M.useState(!1),[d,m]=M.useState(""),v=M.useRef(null),g=M.useRef(null);M.useEffect(()=>(t&&!a&&w(),()=>{b()}),[t]);const w=async()=>{if(v.current)try{const E=new eP("scanner");g.current=E;const T={fps:10,qrbox:{width:250,height:250},aspectRatio:1,formatsToSupport:[1,2,3,4,5,6,7,8,9,10,11,12]};await E.start({facingMode:"environment"},T,I=>{navigator.vibrate&&navigator.vibrate(200),ot.success(`Barcode scanned: ${I}`,{icon:""}),e(I),b(),r()},I=>{console.log(I)}),o(!0)}catch(E){console.error("Error starting scanner:",E);let T="",I="";E.name==="NotFoundError"||E.message&&E.message.includes("Requested device not found")?(T="No camera found. Please make sure your device has a camera and you have granted permission to use it.",I="No camera detected. You can manually enter the barcode value instead.",ot.error(I,{icon:""})):E.name==="NotAllowedError"||E.message&&E.message.includes("Permission denied")?(T="Camera access denied. Please grant permission to use your camera.",I="Camera access denied. Please check your browser permissions.",ot.error(I,{icon:""})):(T=E&&E.message?E.message:"Failed to start scanner",ot.error("Failed to start barcode scanner. Please try again later.")),m(T),n(T),r()}},b=async()=>{if(g.current&&a)try{await g.current.stop(),o(!1)}catch(E){console.error("Error stopping scanner:",E)}},_=()=>{b(),r()};return t?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",children:s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg w-full max-w-md mx-4 md:mx-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Scan Barcode"}),s.jsx("button",{onClick:_,className:"text-gray-500 hover:text-gray-700","aria-label":"Close",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"mb-4",children:s.jsx("div",{id:"scanner",ref:v,className:"w-full h-64 bg-gray-100 rounded flex items-center justify-center",children:d&&s.jsxs("div",{className:"text-center p-4",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-red-500 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("p",{className:"text-red-600 font-medium",children:d}),s.jsx("p",{className:"text-gray-600 mt-2",children:"You can manually enter the barcode value instead."})]})})}),s.jsx("div",{className:"text-sm text-gray-500 mb-4",children:d?"To use the barcode scanner, you need a device with a camera and permission to access it.":s.jsxs("div",{children:[s.jsxs("p",{className:"mb-2",children:[" ",s.jsx("strong",{children:"Mobile users:"})," Hold your phone steady and point the camera at the barcode."]}),s.jsxs("p",{children:[" ",s.jsx("strong",{children:"Desktop users:"})," Position the barcode within the scanner area."]}),s.jsx("p",{className:"mt-2 text-xs",children:"The scanner will automatically detect and process the code."})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:_,className:"btn btn-outline",children:"Cancel"})})]})}):null};PC.propTypes={onScan:ce.func.isRequired,onError:ce.func,isOpen:ce.bool.isRequired,onClose:ce.func.isRequired};const FC=({id:e="",onScan:n,buttonText:t="",className:r=""})=>{const[a,o]=M.useState(!1),d=()=>{o(!0)},m=()=>{o(!1)},v=g=>{console.error("Scan error:",g)};return s.jsxs(s.Fragment,{children:[s.jsxs("button",{id:e,type:"button",onClick:d,className:`flex items-center justify-center px-3 py-1.5 text-sm font-medium rounded-md
          bg-white text-primary-600 hover:bg-primary-50 border border-primary-500
          hover:border-primary-600 hover:shadow-sm transition-all ${r}`,title:"Scan Barcode",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),t&&s.jsx("span",{className:"ml-1 font-medium",children:t})]}),s.jsx(PC,{isOpen:a,onClose:m,onScan:n,onError:v})]})};FC.propTypes={id:ce.string,onScan:ce.func.isRequired,buttonText:ce.string,className:ce.string};const BC=({id:e,name:n,type:t="text",label:r,placeholder:a,value:o,onChange:d,onBlur:m,error:v,disabled:g=!1,required:w=!1,className:b="",onScan:_,...E})=>{const S=`
    rounded-l-md shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500
    ${v?"border-red-300 text-red-900 placeholder-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-300 text-slate-900 placeholder-slate-400"}
    ${g?"bg-slate-100 cursor-not-allowed opacity-75":"bg-white"}
    py-2 px-3 text-sm
    w-full
    ${b}
  `,A=`barcode-scan-button-${e}`;return s.jsxs("div",{className:"w-full",children:[r&&s.jsxs("label",{htmlFor:e,className:`block text-sm font-medium mb-1 ${v?"text-red-600":"text-slate-700"}`,children:[r,w&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"flex",style:{display:"flex",width:"100%"},children:[s.jsx("input",{id:e,name:n,type:t,value:o,onChange:d,onBlur:m,placeholder:a,disabled:g,required:w,className:S,style:{width:"calc(100% - 120px)"},...E}),s.jsxs("button",{type:"button",onClick:()=>{const O=document.getElementById(A);O&&O.click()},className:`w-[120px] bg-white text-primary-600 hover:bg-primary-50 border border-primary-500
            hover:border-primary-600 hover:shadow-sm transition-all font-medium flex items-center
            justify-center rounded-r-md border-l-0`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"Scan"]}),s.jsx("div",{style:{display:"none"},children:s.jsx(FC,{id:A,onScan:_})})]}),v&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:v})]})};BC.propTypes={id:ce.string.isRequired,name:ce.string.isRequired,type:ce.string,label:ce.string,placeholder:ce.string,value:ce.oneOfType([ce.string,ce.number]),onChange:ce.func,onBlur:ce.func,error:ce.string,disabled:ce.bool,required:ce.bool,className:ce.string,onScan:ce.func.isRequired};const lr=({id:e,name:n,label:t,value:r,onChange:a,onBlur:o,options:d=[],error:m,disabled:v=!1,required:g=!1,placeholder:w="Select an option",className:b="",helpText:_,...E})=>{const S=`
    w-full rounded-md shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 appearance-none
    ${m?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":"border-slate-300 text-slate-900"}
    ${v?"bg-slate-100 cursor-not-allowed opacity-75":"bg-white"}
    py-2 pl-3 pr-10 text-sm
    ${b}
  `;return s.jsxs("div",{className:"w-full",children:[t&&s.jsxs("label",{htmlFor:e,className:`block text-sm font-medium mb-1 ${m?"text-red-600":"text-slate-700"}`,children:[t,g&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{id:e,name:n,value:r,onChange:a,onBlur:o,disabled:v,required:g,className:S,...E,children:[s.jsx("option",{value:"",children:w}),d.map(A=>s.jsx("option",{value:A.value||A,children:A.label||A},A.value||A))]}),s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:s.jsx("svg",{className:"h-5 w-5 text-slate-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),m&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:m}),_&&!m&&s.jsx("p",{className:"mt-1 text-sm text-slate-500",children:_})]})};lr.propTypes={id:ce.string.isRequired,name:ce.string.isRequired,label:ce.string,value:ce.string,onChange:ce.func,onBlur:ce.func,options:ce.arrayOf(ce.oneOfType([ce.string,ce.shape({value:ce.string.isRequired,label:ce.string.isRequired})])),error:ce.string,disabled:ce.bool,required:ce.bool,placeholder:ce.string,className:ce.string,helpText:ce.string};const qe=({children:e,className:n="",...t})=>s.jsx("div",{className:`bg-white rounded-lg shadow-soft overflow-hidden ${n}`,...t,children:e}),UC=({children:e,className:n="",...t})=>s.jsx("div",{className:`px-6 py-4 border-b border-slate-200 ${n}`,...t,children:e}),zC=({children:e,className:n="",...t})=>s.jsx("h3",{className:`text-lg font-medium text-slate-800 ${n}`,...t,children:e}),qC=({children:e,className:n="",...t})=>s.jsx("div",{className:`p-6 ${n}`,...t,children:e}),WC=({children:e,className:n="",...t})=>s.jsx("div",{className:`px-6 py-4 bg-slate-50 border-t border-slate-200 ${n}`,...t,children:e});qe.Header=UC;qe.Title=zC;qe.Body=qC;qe.Footer=WC;qe.propTypes={children:ce.node.isRequired,className:ce.string};UC.propTypes={children:ce.node.isRequired,className:ce.string};zC.propTypes={children:ce.node.isRequired,className:ce.string};qC.propTypes={children:ce.node.isRequired,className:ce.string};WC.propTypes={children:ce.node.isRequired,className:ce.string};const js=({children:e,variant:n="primary",size:t="md",className:r="",...a})=>{const o="inline-flex items-center font-medium rounded-full",d={primary:"bg-primary-100 text-primary-800",secondary:"bg-slate-100 text-slate-800",success:"bg-green-100 text-green-800",danger:"bg-red-100 text-red-800",warning:"bg-yellow-100 text-yellow-800",info:"bg-blue-100 text-blue-800"},m={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-sm",lg:"px-3 py-1 text-base"},v=`
    ${o}
    ${d[n]||d.primary}
    ${m[t]||m.md}
    ${r}
  `;return s.jsx("span",{className:v,...a,children:e})};js.propTypes={children:ce.node.isRequired,variant:ce.oneOf(["primary","secondary","success","danger","warning","info"]),size:ce.oneOf(["sm","md","lg"]),className:ce.string};function vp(){return typeof window<"u"}function $c(e){return HC(e)?(e.nodeName||"").toLowerCase():"#document"}function Es(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function za(e){var n;return(n=(HC(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function HC(e){return vp()?e instanceof Node||e instanceof Es(e).Node:!1}function Gr(e){return vp()?e instanceof Element||e instanceof Es(e).Element:!1}function Ua(e){return vp()?e instanceof HTMLElement||e instanceof Es(e).HTMLElement:!1}function qb(e){return!vp()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Es(e).ShadowRoot}function Ou(e){const{overflow:n,overflowX:t,overflowY:r,display:a}=Zs(e);return/auto|scroll|overlay|hidden|clip/.test(n+r+t)&&!["inline","contents"].includes(a)}function OP(e){return["table","td","th"].includes($c(e))}function yp(e){return[":popover-open",":modal"].some(n=>{try{return e.matches(n)}catch{return!1}})}function _2(e){const n=E2(),t=Gr(e)?Zs(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!n&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!n&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function LP(e){let n=go(e);for(;Ua(n)&&!Ac(n);){if(_2(n))return n;if(yp(n))return null;n=go(n)}return null}function E2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ac(e){return["html","body","#document"].includes($c(e))}function Zs(e){return Es(e).getComputedStyle(e)}function wp(e){return Gr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function go(e){if($c(e)==="html")return e;const n=e.assignedSlot||e.parentNode||qb(e)&&e.host||za(e);return qb(n)?n.host:n}function VC(e){const n=go(e);return Ac(n)?e.ownerDocument?e.ownerDocument.body:e.body:Ua(n)&&Ou(n)?n:VC(n)}function ju(e,n,t){var r;n===void 0&&(n=[]),t===void 0&&(t=!0);const a=VC(e),o=a===((r=e.ownerDocument)==null?void 0:r.body),d=Es(a);if(o){const m=Vx(d);return n.concat(d,d.visualViewport||[],Ou(a)?a:[],m&&t?ju(m):[])}return n.concat(a,ju(a,[],t))}function Vx(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Tc=Math.min,ol=Math.max,Cf=Math.round,th=Math.floor,Ba=e=>({x:e,y:e}),PP={left:"right",right:"left",bottom:"top",top:"bottom"},FP={start:"end",end:"start"};function BP(e,n,t){return ol(e,Tc(n,t))}function bp(e,n){return typeof e=="function"?e(n):e}function Dc(e){return e.split("-")[0]}function Lu(e){return e.split("-")[1]}function UP(e){return e==="x"?"y":"x"}function S2(e){return e==="y"?"height":"width"}function tl(e){return["top","bottom"].includes(Dc(e))?"y":"x"}function k2(e){return UP(tl(e))}function zP(e,n,t){t===void 0&&(t=!1);const r=Lu(e),a=k2(e),o=S2(a);let d=a==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return n.reference[o]>n.floating[o]&&(d=_f(d)),[d,_f(d)]}function qP(e){const n=_f(e);return[$x(e),n,$x(n)]}function $x(e){return e.replace(/start|end/g,n=>FP[n])}function WP(e,n,t){const r=["left","right"],a=["right","left"],o=["top","bottom"],d=["bottom","top"];switch(e){case"top":case"bottom":return t?n?a:r:n?r:a;case"left":case"right":return n?o:d;default:return[]}}function HP(e,n,t,r){const a=Lu(e);let o=WP(Dc(e),t==="start",r);return a&&(o=o.map(d=>d+"-"+a),n&&(o=o.concat(o.map($x)))),o}function _f(e){return e.replace(/left|right|bottom|top/g,n=>PP[n])}function VP(e){return{top:0,right:0,bottom:0,left:0,...e}}function $C(e){return typeof e!="number"?VP(e):{top:e,right:e,bottom:e,left:e}}function Ef(e){const{x:n,y:t,width:r,height:a}=e;return{width:r,height:a,top:t,left:n,right:n+r,bottom:t+a,x:n,y:t}}var $P=typeof document<"u",YP=function(){},Sf=$P?M.useLayoutEffect:YP;const QP={...ag},GP=QP.useInsertionEffect,XP=GP||(e=>e());function KP(e){const n=M.useRef(()=>{});return XP(()=>{n.current=e}),M.useCallback(function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n.current==null?void 0:n.current(...r)},[])}function Wb(e,n,t){let{reference:r,floating:a}=e;const o=tl(n),d=k2(n),m=S2(d),v=Dc(n),g=o==="y",w=r.x+r.width/2-a.width/2,b=r.y+r.height/2-a.height/2,_=r[m]/2-a[m]/2;let E;switch(v){case"top":E={x:w,y:r.y-a.height};break;case"bottom":E={x:w,y:r.y+r.height};break;case"right":E={x:r.x+r.width,y:b};break;case"left":E={x:r.x-a.width,y:b};break;default:E={x:r.x,y:r.y}}switch(Lu(n)){case"start":E[d]-=_*(t&&g?-1:1);break;case"end":E[d]+=_*(t&&g?-1:1);break}return E}const ZP=async(e,n,t)=>{const{placement:r="bottom",strategy:a="absolute",middleware:o=[],platform:d}=t,m=o.filter(Boolean),v=await(d.isRTL==null?void 0:d.isRTL(n));let g=await d.getElementRects({reference:e,floating:n,strategy:a}),{x:w,y:b}=Wb(g,r,v),_=r,E={},T=0;for(let I=0;I<m.length;I++){const{name:k,fn:S}=m[I],{x:A,y:O,data:P,reset:$}=await S({x:w,y:b,initialPlacement:r,placement:_,strategy:a,middlewareData:E,rects:g,platform:d,elements:{reference:e,floating:n}});w=A??w,b=O??b,E={...E,[k]:{...E[k],...P}},$&&T<=50&&(T++,typeof $=="object"&&($.placement&&(_=$.placement),$.rects&&(g=$.rects===!0?await d.getElementRects({reference:e,floating:n,strategy:a}):$.rects),{x:w,y:b}=Wb(g,_,v)),I=-1)}return{x:w,y:b,placement:_,strategy:a,middlewareData:E}};async function JP(e,n){var t;n===void 0&&(n={});const{x:r,y:a,platform:o,rects:d,elements:m,strategy:v}=e,{boundary:g="clippingAncestors",rootBoundary:w="viewport",elementContext:b="floating",altBoundary:_=!1,padding:E=0}=bp(n,e),T=$C(E),k=m[_?b==="floating"?"reference":"floating":b],S=Ef(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(k)))==null||t?k:k.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(m.floating)),boundary:g,rootBoundary:w,strategy:v})),A=b==="floating"?{x:r,y:a,width:d.floating.width,height:d.floating.height}:d.reference,O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(m.floating)),P=await(o.isElement==null?void 0:o.isElement(O))?await(o.getScale==null?void 0:o.getScale(O))||{x:1,y:1}:{x:1,y:1},$=Ef(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:m,rect:A,offsetParent:O,strategy:v}):A);return{top:(S.top-$.top+T.top)/P.y,bottom:($.bottom-S.bottom+T.bottom)/P.y,left:(S.left-$.left+T.left)/P.x,right:($.right-S.right+T.right)/P.x}}const eF=e=>({name:"arrow",options:e,async fn(n){const{x:t,y:r,placement:a,rects:o,platform:d,elements:m,middlewareData:v}=n,{element:g,padding:w=0}=bp(e,n)||{};if(g==null)return{};const b=$C(w),_={x:t,y:r},E=k2(a),T=S2(E),I=await d.getDimensions(g),k=E==="y",S=k?"top":"left",A=k?"bottom":"right",O=k?"clientHeight":"clientWidth",P=o.reference[T]+o.reference[E]-_[E]-o.floating[T],$=_[E]-o.reference[E],L=await(d.getOffsetParent==null?void 0:d.getOffsetParent(g));let F=L?L[O]:0;(!F||!await(d.isElement==null?void 0:d.isElement(L)))&&(F=m.floating[O]||o.floating[T]);const W=P/2-$/2,V=F/2-I[T]/2-1,re=Tc(b[S],V),oe=Tc(b[A],V),ee=re,he=F-I[T]-oe,ve=F/2-I[T]/2+W,ne=BP(ee,ve,he),Q=!v.arrow&&Lu(a)!=null&&ve!==ne&&o.reference[T]/2-(ve<ee?re:oe)-I[T]/2<0,me=Q?ve<ee?ve-ee:ve-he:0;return{[E]:_[E]+me,data:{[E]:ne,centerOffset:ve-ne-me,...Q&&{alignmentOffset:me}},reset:Q}}}),tF=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var t,r;const{placement:a,middlewareData:o,rects:d,initialPlacement:m,platform:v,elements:g}=n,{mainAxis:w=!0,crossAxis:b=!0,fallbackPlacements:_,fallbackStrategy:E="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:I=!0,...k}=bp(e,n);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const S=Dc(a),A=tl(m),O=Dc(m)===m,P=await(v.isRTL==null?void 0:v.isRTL(g.floating)),$=_||(O||!I?[_f(m)]:qP(m)),L=T!=="none";!_&&L&&$.push(...HP(m,I,T,P));const F=[m,...$],W=await JP(n,k),V=[];let re=((r=o.flip)==null?void 0:r.overflows)||[];if(w&&V.push(W[S]),b){const ve=zP(a,d,P);V.push(W[ve[0]],W[ve[1]])}if(re=[...re,{placement:a,overflows:V}],!V.every(ve=>ve<=0)){var oe,ee;const ve=(((oe=o.flip)==null?void 0:oe.index)||0)+1,ne=F[ve];if(ne&&(!(b==="alignment"?A!==tl(ne):!1)||re.every(fe=>fe.overflows[0]>0&&tl(fe.placement)===A)))return{data:{index:ve,overflows:re},reset:{placement:ne}};let Q=(ee=re.filter(me=>me.overflows[0]<=0).sort((me,fe)=>me.overflows[1]-fe.overflows[1])[0])==null?void 0:ee.placement;if(!Q)switch(E){case"bestFit":{var he;const me=(he=re.filter(fe=>{if(L){const Ie=tl(fe.placement);return Ie===A||Ie==="y"}return!0}).map(fe=>[fe.placement,fe.overflows.filter(Ie=>Ie>0).reduce((Ie,ue)=>Ie+ue,0)]).sort((fe,Ie)=>fe[1]-Ie[1])[0])==null?void 0:he[0];me&&(Q=me);break}case"initialPlacement":Q=m;break}if(a!==Q)return{reset:{placement:Q}}}return{}}}};async function nF(e,n){const{placement:t,platform:r,elements:a}=e,o=await(r.isRTL==null?void 0:r.isRTL(a.floating)),d=Dc(t),m=Lu(t),v=tl(t)==="y",g=["left","top"].includes(d)?-1:1,w=o&&v?-1:1,b=bp(n,e);let{mainAxis:_,crossAxis:E,alignmentAxis:T}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:b.mainAxis||0,crossAxis:b.crossAxis||0,alignmentAxis:b.alignmentAxis};return m&&typeof T=="number"&&(E=m==="end"?T*-1:T),v?{x:E*w,y:_*g}:{x:_*g,y:E*w}}const rF=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var t,r;const{x:a,y:o,placement:d,middlewareData:m}=n,v=await nF(n,e);return d===((t=m.offset)==null?void 0:t.placement)&&(r=m.arrow)!=null&&r.alignmentOffset?{}:{x:a+v.x,y:o+v.y,data:{...v,placement:d}}}}};function YC(e){const n=Zs(e);let t=parseFloat(n.width)||0,r=parseFloat(n.height)||0;const a=Ua(e),o=a?e.offsetWidth:t,d=a?e.offsetHeight:r,m=Cf(t)!==o||Cf(r)!==d;return m&&(t=o,r=d),{width:t,height:r,$:m}}function A2(e){return Gr(e)?e:e.contextElement}function pc(e){const n=A2(e);if(!Ua(n))return Ba(1);const t=n.getBoundingClientRect(),{width:r,height:a,$:o}=YC(n);let d=(o?Cf(t.width):t.width)/r,m=(o?Cf(t.height):t.height)/a;return(!d||!Number.isFinite(d))&&(d=1),(!m||!Number.isFinite(m))&&(m=1),{x:d,y:m}}const sF=Ba(0);function QC(e){const n=Es(e);return!E2()||!n.visualViewport?sF:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function aF(e,n,t){return n===void 0&&(n=!1),!t||n&&t!==Es(e)?!1:n}function gl(e,n,t,r){n===void 0&&(n=!1),t===void 0&&(t=!1);const a=e.getBoundingClientRect(),o=A2(e);let d=Ba(1);n&&(r?Gr(r)&&(d=pc(r)):d=pc(e));const m=aF(o,t,r)?QC(o):Ba(0);let v=(a.left+m.x)/d.x,g=(a.top+m.y)/d.y,w=a.width/d.x,b=a.height/d.y;if(o){const _=Es(o),E=r&&Gr(r)?Es(r):r;let T=_,I=Vx(T);for(;I&&r&&E!==T;){const k=pc(I),S=I.getBoundingClientRect(),A=Zs(I),O=S.left+(I.clientLeft+parseFloat(A.paddingLeft))*k.x,P=S.top+(I.clientTop+parseFloat(A.paddingTop))*k.y;v*=k.x,g*=k.y,w*=k.x,b*=k.y,v+=O,g+=P,T=Es(I),I=Vx(T)}}return Ef({width:w,height:b,x:v,y:g})}function T2(e,n){const t=wp(e).scrollLeft;return n?n.left+t:gl(za(e)).left+t}function GC(e,n,t){t===void 0&&(t=!1);const r=e.getBoundingClientRect(),a=r.left+n.scrollLeft-(t?0:T2(e,r)),o=r.top+n.scrollTop;return{x:a,y:o}}function iF(e){let{elements:n,rect:t,offsetParent:r,strategy:a}=e;const o=a==="fixed",d=za(r),m=n?yp(n.floating):!1;if(r===d||m&&o)return t;let v={scrollLeft:0,scrollTop:0},g=Ba(1);const w=Ba(0),b=Ua(r);if((b||!b&&!o)&&(($c(r)!=="body"||Ou(d))&&(v=wp(r)),Ua(r))){const E=gl(r);g=pc(r),w.x=E.x+r.clientLeft,w.y=E.y+r.clientTop}const _=d&&!b&&!o?GC(d,v,!0):Ba(0);return{width:t.width*g.x,height:t.height*g.y,x:t.x*g.x-v.scrollLeft*g.x+w.x+_.x,y:t.y*g.y-v.scrollTop*g.y+w.y+_.y}}function oF(e){return Array.from(e.getClientRects())}function lF(e){const n=za(e),t=wp(e),r=e.ownerDocument.body,a=ol(n.scrollWidth,n.clientWidth,r.scrollWidth,r.clientWidth),o=ol(n.scrollHeight,n.clientHeight,r.scrollHeight,r.clientHeight);let d=-t.scrollLeft+T2(e);const m=-t.scrollTop;return Zs(r).direction==="rtl"&&(d+=ol(n.clientWidth,r.clientWidth)-a),{width:a,height:o,x:d,y:m}}function cF(e,n){const t=Es(e),r=za(e),a=t.visualViewport;let o=r.clientWidth,d=r.clientHeight,m=0,v=0;if(a){o=a.width,d=a.height;const g=E2();(!g||g&&n==="fixed")&&(m=a.offsetLeft,v=a.offsetTop)}return{width:o,height:d,x:m,y:v}}function dF(e,n){const t=gl(e,!0,n==="fixed"),r=t.top+e.clientTop,a=t.left+e.clientLeft,o=Ua(e)?pc(e):Ba(1),d=e.clientWidth*o.x,m=e.clientHeight*o.y,v=a*o.x,g=r*o.y;return{width:d,height:m,x:v,y:g}}function Hb(e,n,t){let r;if(n==="viewport")r=cF(e,t);else if(n==="document")r=lF(za(e));else if(Gr(n))r=dF(n,t);else{const a=QC(e);r={x:n.x-a.x,y:n.y-a.y,width:n.width,height:n.height}}return Ef(r)}function XC(e,n){const t=go(e);return t===n||!Gr(t)||Ac(t)?!1:Zs(t).position==="fixed"||XC(t,n)}function uF(e,n){const t=n.get(e);if(t)return t;let r=ju(e,[],!1).filter(m=>Gr(m)&&$c(m)!=="body"),a=null;const o=Zs(e).position==="fixed";let d=o?go(e):e;for(;Gr(d)&&!Ac(d);){const m=Zs(d),v=_2(d);!v&&m.position==="fixed"&&(a=null),(o?!v&&!a:!v&&m.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Ou(d)&&!v&&XC(e,d))?r=r.filter(w=>w!==d):a=m,d=go(d)}return n.set(e,r),r}function hF(e){let{element:n,boundary:t,rootBoundary:r,strategy:a}=e;const d=[...t==="clippingAncestors"?yp(n)?[]:uF(n,this._c):[].concat(t),r],m=d[0],v=d.reduce((g,w)=>{const b=Hb(n,w,a);return g.top=ol(b.top,g.top),g.right=Tc(b.right,g.right),g.bottom=Tc(b.bottom,g.bottom),g.left=ol(b.left,g.left),g},Hb(n,m,a));return{width:v.right-v.left,height:v.bottom-v.top,x:v.left,y:v.top}}function fF(e){const{width:n,height:t}=YC(e);return{width:n,height:t}}function pF(e,n,t){const r=Ua(n),a=za(n),o=t==="fixed",d=gl(e,!0,o,n);let m={scrollLeft:0,scrollTop:0};const v=Ba(0);function g(){v.x=T2(a)}if(r||!r&&!o)if(($c(n)!=="body"||Ou(a))&&(m=wp(n)),r){const E=gl(n,!0,o,n);v.x=E.x+n.clientLeft,v.y=E.y+n.clientTop}else a&&g();o&&!r&&a&&g();const w=a&&!r&&!o?GC(a,m):Ba(0),b=d.left+m.scrollLeft-v.x-w.x,_=d.top+m.scrollTop-v.y-w.y;return{x:b,y:_,width:d.width,height:d.height}}function c1(e){return Zs(e).position==="static"}function Vb(e,n){if(!Ua(e)||Zs(e).position==="fixed")return null;if(n)return n(e);let t=e.offsetParent;return za(e)===t&&(t=t.ownerDocument.body),t}function KC(e,n){const t=Es(e);if(yp(e))return t;if(!Ua(e)){let a=go(e);for(;a&&!Ac(a);){if(Gr(a)&&!c1(a))return a;a=go(a)}return t}let r=Vb(e,n);for(;r&&OP(r)&&c1(r);)r=Vb(r,n);return r&&Ac(r)&&c1(r)&&!_2(r)?t:r||LP(e)||t}const mF=async function(e){const n=this.getOffsetParent||KC,t=this.getDimensions,r=await t(e.floating);return{reference:pF(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function xF(e){return Zs(e).direction==="rtl"}const gF={convertOffsetParentRelativeRectToViewportRelativeRect:iF,getDocumentElement:za,getClippingRect:hF,getOffsetParent:KC,getElementRects:mF,getClientRects:oF,getDimensions:fF,getScale:pc,isElement:Gr,isRTL:xF};function ZC(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function vF(e,n){let t=null,r;const a=za(e);function o(){var m;clearTimeout(r),(m=t)==null||m.disconnect(),t=null}function d(m,v){m===void 0&&(m=!1),v===void 0&&(v=1),o();const g=e.getBoundingClientRect(),{left:w,top:b,width:_,height:E}=g;if(m||n(),!_||!E)return;const T=th(b),I=th(a.clientWidth-(w+_)),k=th(a.clientHeight-(b+E)),S=th(w),O={rootMargin:-T+"px "+-I+"px "+-k+"px "+-S+"px",threshold:ol(0,Tc(1,v))||1};let P=!0;function $(L){const F=L[0].intersectionRatio;if(F!==v){if(!P)return d();F?d(!1,F):r=setTimeout(()=>{d(!1,1e-7)},1e3)}F===1&&!ZC(g,e.getBoundingClientRect())&&d(),P=!1}try{t=new IntersectionObserver($,{...O,root:a.ownerDocument})}catch{t=new IntersectionObserver($,O)}t.observe(e)}return d(!0),o}function yF(e,n,t,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:m=typeof IntersectionObserver=="function",animationFrame:v=!1}=r,g=A2(e),w=a||o?[...g?ju(g):[],...ju(n)]:[];w.forEach(S=>{a&&S.addEventListener("scroll",t,{passive:!0}),o&&S.addEventListener("resize",t)});const b=g&&m?vF(g,t):null;let _=-1,E=null;d&&(E=new ResizeObserver(S=>{let[A]=S;A&&A.target===g&&E&&(E.unobserve(n),cancelAnimationFrame(_),_=requestAnimationFrame(()=>{var O;(O=E)==null||O.observe(n)})),t()}),g&&!v&&E.observe(g),E.observe(n));let T,I=v?gl(e):null;v&&k();function k(){const S=gl(e);I&&!ZC(I,S)&&t(),I=S,T=requestAnimationFrame(k)}return t(),()=>{var S;w.forEach(A=>{a&&A.removeEventListener("scroll",t),o&&A.removeEventListener("resize",t)}),b==null||b(),(S=E)==null||S.disconnect(),E=null,v&&cancelAnimationFrame(T)}}const wF=rF,bF=tF,$b=eF,NF=(e,n,t)=>{const r=new Map,a={platform:gF,...t},o={...a.platform,_c:r};return ZP(e,n,{...a,platform:o})};var jF=typeof document<"u",CF=function(){},Dh=jF?M.useLayoutEffect:CF;function kf(e,n){if(e===n)return!0;if(typeof e!=typeof n)return!1;if(typeof e=="function"&&e.toString()===n.toString())return!0;let t,r,a;if(e&&n&&typeof e=="object"){if(Array.isArray(e)){if(t=e.length,t!==n.length)return!1;for(r=t;r--!==0;)if(!kf(e[r],n[r]))return!1;return!0}if(a=Object.keys(e),t=a.length,t!==Object.keys(n).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(n,a[r]))return!1;for(r=t;r--!==0;){const o=a[r];if(!(o==="_owner"&&e.$$typeof)&&!kf(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}function JC(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Yb(e,n){const t=JC(e);return Math.round(n*t)/t}function d1(e){const n=M.useRef(e);return Dh(()=>{n.current=e}),n}function _F(e){e===void 0&&(e={});const{placement:n="bottom",strategy:t="absolute",middleware:r=[],platform:a,elements:{reference:o,floating:d}={},transform:m=!0,whileElementsMounted:v,open:g}=e,[w,b]=M.useState({x:0,y:0,strategy:t,placement:n,middlewareData:{},isPositioned:!1}),[_,E]=M.useState(r);kf(_,r)||E(r);const[T,I]=M.useState(null),[k,S]=M.useState(null),A=M.useCallback(fe=>{fe!==L.current&&(L.current=fe,I(fe))},[]),O=M.useCallback(fe=>{fe!==F.current&&(F.current=fe,S(fe))},[]),P=o||T,$=d||k,L=M.useRef(null),F=M.useRef(null),W=M.useRef(w),V=v!=null,re=d1(v),oe=d1(a),ee=d1(g),he=M.useCallback(()=>{if(!L.current||!F.current)return;const fe={placement:n,strategy:t,middleware:_};oe.current&&(fe.platform=oe.current),NF(L.current,F.current,fe).then(Ie=>{const ue={...Ie,isPositioned:ee.current!==!1};ve.current&&!kf(W.current,ue)&&(W.current=ue,Xg.flushSync(()=>{b(ue)}))})},[_,n,t,oe,ee]);Dh(()=>{g===!1&&W.current.isPositioned&&(W.current.isPositioned=!1,b(fe=>({...fe,isPositioned:!1})))},[g]);const ve=M.useRef(!1);Dh(()=>(ve.current=!0,()=>{ve.current=!1}),[]),Dh(()=>{if(P&&(L.current=P),$&&(F.current=$),P&&$){if(re.current)return re.current(P,$,he);he()}},[P,$,he,re,V]);const ne=M.useMemo(()=>({reference:L,floating:F,setReference:A,setFloating:O}),[A,O]),Q=M.useMemo(()=>({reference:P,floating:$}),[P,$]),me=M.useMemo(()=>{const fe={position:t,left:0,top:0};if(!Q.floating)return fe;const Ie=Yb(Q.floating,w.x),ue=Yb(Q.floating,w.y);return m?{...fe,transform:"translate("+Ie+"px, "+ue+"px)",...JC(Q.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Ie,top:ue}},[t,m,Q.floating,w.x,w.y]);return M.useMemo(()=>({...w,update:he,refs:ne,elements:Q,floatingStyles:me}),[w,he,ne,Q,me])}const EF=e=>{function n(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:e,fn(t){const{element:r,padding:a}=typeof e=="function"?e(t):e;return r&&n(r)?r.current!=null?$b({element:r.current,padding:a}).fn(t):{}:r?$b({element:r,padding:a}).fn(t):{}}}},SF=(e,n)=>({...wF(e),options:[e,n]}),kF=(e,n)=>({...bF(e),options:[e,n]}),AF=(e,n)=>({...EF(e),options:[e,n]}),TF={...ag};let Qb=!1,DF=0;const Gb=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+DF++;function IF(){const[e,n]=M.useState(()=>Qb?Gb():void 0);return Sf(()=>{e==null&&n(Gb())},[]),M.useEffect(()=>{Qb=!0},[]),e}const MF=TF.useId,e5=MF||IF,RF=M.forwardRef(function(n,t){const{context:{placement:r,elements:{floating:a},middlewareData:{arrow:o,shift:d}},width:m=14,height:v=7,tipRadius:g=0,strokeWidth:w=0,staticOffset:b,stroke:_,d:E,style:{transform:T,...I}={},...k}=n,S=e5(),[A,O]=M.useState(!1);if(Sf(()=>{if(!a)return;Zs(a).direction==="rtl"&&O(!0)},[a]),!a)return null;const[P,$]=r.split("-"),L=P==="top"||P==="bottom";let F=b;(L&&d!=null&&d.x||!L&&d!=null&&d.y)&&(F=null);const W=w*2,V=W/2,re=m/2*(g/-8+1),oe=v/2*g/4,ee=!!E,he=F&&$==="end"?"bottom":"top";let ve=F&&$==="end"?"right":"left";F&&A&&(ve=$==="end"?"left":"right");const ne=(o==null?void 0:o.x)!=null?F||o.x:"",Q=(o==null?void 0:o.y)!=null?F||o.y:"",me=E||"M0,0"+(" H"+m)+(" L"+(m-re)+","+(v-oe))+(" Q"+m/2+","+v+" "+re+","+(v-oe))+" Z",fe={top:ee?"rotate(180deg)":"",left:ee?"rotate(90deg)":"rotate(-90deg)",bottom:ee?"":"rotate(180deg)",right:ee?"rotate(-90deg)":"rotate(90deg)"}[P];return s.jsxs("svg",{...k,"aria-hidden":!0,ref:t,width:ee?m:m+W,height:m,viewBox:"0 0 "+m+" "+(v>m?v:m),style:{position:"absolute",pointerEvents:"none",[ve]:ne,[he]:Q,[P]:L||ee?"100%":"calc(100% - "+W/2+"px)",transform:[fe,T].filter(Ie=>!!Ie).join(" "),...I},children:[W>0&&s.jsx("path",{clipPath:"url(#"+S+")",fill:"none",stroke:_,strokeWidth:W+(E?0:1),d:me}),s.jsx("path",{stroke:W&&!E?k.fill:"none",d:me}),s.jsx("clipPath",{id:S,children:s.jsx("rect",{x:-V,y:V*(ee?-1:1),width:m+W,height:m})})]})});function OF(){const e=new Map;return{emit(n,t){var r;(r=e.get(n))==null||r.forEach(a=>a(t))},on(n,t){e.has(n)||e.set(n,new Set),e.get(n).add(t)},off(n,t){var r;(r=e.get(n))==null||r.delete(t)}}}const LF=M.createContext(null),PF=M.createContext(null),FF=()=>{var e;return((e=M.useContext(LF))==null?void 0:e.id)||null},BF=()=>M.useContext(PF);function UF(e){const{open:n=!1,onOpenChange:t,elements:r}=e,a=e5(),o=M.useRef({}),[d]=M.useState(()=>OF()),m=FF()!=null,[v,g]=M.useState(r.reference),w=KP((E,T,I)=>{o.current.openEvent=E?T:void 0,d.emit("openchange",{open:E,event:T,reason:I,nested:m}),t==null||t(E,T,I)}),b=M.useMemo(()=>({setPositionReference:g}),[]),_=M.useMemo(()=>({reference:v||r.reference||null,floating:r.floating||null,domReference:r.reference}),[v,r.reference,r.floating]);return M.useMemo(()=>({dataRef:o,open:n,onOpenChange:w,elements:_,events:d,floatingId:a,refs:b}),[n,w,_,d,a,b])}function zF(e){e===void 0&&(e={});const{nodeId:n}=e,t=UF({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||t,a=r.elements,[o,d]=M.useState(null),[m,v]=M.useState(null),w=(a==null?void 0:a.domReference)||o,b=M.useRef(null),_=BF();Sf(()=>{w&&(b.current=w)},[w]);const E=_F({...e,elements:{...a,...m&&{reference:m}}}),T=M.useCallback(O=>{const P=Gr(O)?{getBoundingClientRect:()=>O.getBoundingClientRect(),getClientRects:()=>O.getClientRects(),contextElement:O}:O;v(P),E.refs.setReference(P)},[E.refs]),I=M.useCallback(O=>{(Gr(O)||O===null)&&(b.current=O,d(O)),(Gr(E.refs.reference.current)||E.refs.reference.current===null||O!==null&&!Gr(O))&&E.refs.setReference(O)},[E.refs]),k=M.useMemo(()=>({...E.refs,setReference:I,setPositionReference:T,domReference:b}),[E.refs,I,T]),S=M.useMemo(()=>({...E.elements,domReference:w}),[E.elements,w]),A=M.useMemo(()=>({...E,...r,refs:k,elements:S,nodeId:n}),[E,k,S,n,r]);return Sf(()=>{r.dataRef.current.floatingContext=A;const O=_==null?void 0:_.nodesRef.current.find(P=>P.id===n);O&&(O.context=A)}),M.useMemo(()=>({...E,context:A,refs:k,elements:S}),[E,k,S,A])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var Yx=function(n,t){return Yx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},Yx(n,t)};function gr(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Yx(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var Gt=function(){return Gt=Object.assign||function(t){for(var r,a=1,o=arguments.length;a<o;a++){r=arguments[a];for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(t[d]=r[d])}return t},Gt.apply(this,arguments)};function La(e,n,t){if(t||arguments.length===2)for(var r=0,a=n.length,o;r<a;r++)(o||!(r in n))&&(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return e.concat(o||Array.prototype.slice.call(n))}var qF=function(e){var n=e.showTimeSelectOnly,t=n===void 0?!1:n,r=e.showTime,a=r===void 0?!1:r,o=e.className,d=e.children,m=t?"Choose Time":"Choose Date".concat(a?" and Time":"");return ge.createElement("div",{className:o,role:"dialog","aria-label":m,"aria-modal":"true"},d)},WF=function(e,n){var t=M.useRef(null),r=M.useRef(e);r.current=e;var a=M.useCallback(function(o){var d,m=o.composed&&o.composedPath&&o.composedPath().find(function(v){return v instanceof Node})||o.target;t.current&&!t.current.contains(m)&&(n&&m instanceof HTMLElement&&m.classList.contains(n)||(d=r.current)===null||d===void 0||d.call(r,o))},[n]);return M.useEffect(function(){return document.addEventListener("mousedown",a),function(){document.removeEventListener("mousedown",a)}},[a]),t},Np=function(e){var n=e.children,t=e.onClickOutside,r=e.className,a=e.containerRef,o=e.style,d=e.ignoreClass,m=WF(t,d);return ge.createElement("div",{className:r,style:o,ref:function(v){m.current=v,a&&(a.current=v)}},n)},Ke;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(Ke||(Ke={}));function t5(){var e=typeof window<"u"?window:globalThis;return e}var Pu=12;function sn(e){if(e==null)return new Date;var n=typeof e=="string"?lL(e):at(e);return jp(n)?n:new Date}function u1(e,n,t,r,a){a===void 0&&(a=sn());for(var o=Ic(t)||Ic(D2()),d=Array.isArray(n)?n:[n],m=0,v=d;m<v.length;m++){var g=v[m],w=nL(e,g,a,{locale:o,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});if(jp(w)&&(!r||e===An(w,g,t)))return w}return null}function jp(e,n){return gf(e)&&!xl(e,new Date("1/1/1800"))}function An(e,n,t){if(t==="en")return bu(e,n,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=t?Ic(t):void 0;return t&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(t,'"].')),r=r||Ic(D2()),bu(e,n,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Ws(e,n){var t=n.dateFormat,r=n.locale,a=Array.isArray(t)&&t.length>0?t[0]:t;return e&&An(e,a,r)||""}var n5=" - ";function HF(e,n,t){if(!e)return"";var r=Ws(e,t),a=n?Ws(n,t):"";return"".concat(r).concat(n5).concat(a)}function VF(e,n){if(!(e!=null&&e.length))return"";var t=e[0]?Ws(e[0],n):"";if(e.length===1)return t;if(e.length===2&&e[1]){var r=Ws(e[1],n);return"".concat(t,", ").concat(r)}var a=e.length-1;return"".concat(t," (+").concat(a,")")}function h1(e,n){var t=n.hour,r=t===void 0?0:t,a=n.minute,o=a===void 0?0:a,d=n.second,m=d===void 0?0:d;return kh(Ah(Th(e,m),o),r)}function $F(e){return y2(e)}function YF(e,n){return An(e,"ddd",n)}function Ih(e){return ml(e)}function ho(e,n,t){var r=Ic(n||D2());return ji(e,{locale:r,weekStartsOn:t})}function gi(e){return fC(e)}function Ud(e){return xp(e)}function Xb(e){return Lx(e)}function Kb(){return ml(sn())}function Zb(e){return x2(e)}function QF(e){return c9(e)}function GF(e){return g2(e)}function Ta(e,n){return e&&n?iL(e,n):!e&&!n}function Yr(e,n){return e&&n?sL(e,n):!e&&!n}function Af(e,n){return e&&n?aL(e,n):!e&&!n}function Qt(e,n){return e&&n?n9(e,n):!e&&!n}function nl(e,n){return e&&n?oO(e,n):!e&&!n}function zd(e,n,t){var r,a=ml(n),o=x2(t);try{r=Nu(e,{start:a,end:o})}catch{r=!1}return r}function D2(){var e=t5();return e.__localeId__}function Ic(e){if(typeof e=="string"){var n=t5();return n.__localeData__?n.__localeData__[e]:void 0}else return e}function XF(e,n,t){return n(An(e,"EEEE",t))}function KF(e,n){return An(e,"EEEEEE",n)}function ZF(e,n){return An(e,"EEE",n)}function I2(e,n){return An(Hs(sn(),e),"LLLL",n)}function r5(e,n){return An(Hs(sn(),e),"LLL",n)}function JF(e,n){return An(Vl(sn(),e),"QQQ",n)}function Ys(e,n){var t=n===void 0?{}:n,r=t.minDate,a=t.maxDate,o=t.excludeDates,d=t.excludeDateIntervals,m=t.includeDates,v=t.includeDateIntervals,g=t.filterDate;return Fu(e,{minDate:r,maxDate:a})||o&&o.some(function(w){return w instanceof Date?Qt(e,w):Qt(e,w.date)})||d&&d.some(function(w){var b=w.start,_=w.end;return Nu(e,{start:b,end:_})})||m&&!m.some(function(w){return Qt(e,w)})||v&&!v.some(function(w){var b=w.start,_=w.end;return Nu(e,{start:b,end:_})})||g&&!g(sn(e))||!1}function M2(e,n){var t=n===void 0?{}:n,r=t.excludeDates,a=t.excludeDateIntervals;return a&&a.length>0?a.some(function(o){var d=o.start,m=o.end;return Nu(e,{start:d,end:m})}):r&&r.some(function(o){var d;return o instanceof Date?Qt(e,o):Qt(e,(d=o.date)!==null&&d!==void 0?d:new Date)})||!1}function s5(e,n){var t=n===void 0?{}:n,r=t.minDate,a=t.maxDate,o=t.excludeDates,d=t.includeDates,m=t.filterDate;return Fu(e,{minDate:r?fC(r):void 0,maxDate:a?g2(a):void 0})||(o==null?void 0:o.some(function(v){return Yr(e,v instanceof Date?v:v.date)}))||d&&!d.some(function(v){return Yr(e,v)})||m&&!m(sn(e))||!1}function nh(e,n,t,r){var a=Lt(e),o=Pr(e),d=Lt(n),m=Pr(n),v=Lt(r);return a===d&&a===v?o<=t&&t<=m:a<d?v===a&&o<=t||v===d&&m>=t||v<d&&v>a:!1}function eB(e,n){var t=n===void 0?{}:n,r=t.minDate,a=t.maxDate,o=t.excludeDates,d=t.includeDates;return Fu(e,{minDate:r,maxDate:a})||o&&o.some(function(m){return Yr(m instanceof Date?m:m.date,e)})||d&&!d.some(function(m){return Yr(m,e)})||!1}function rh(e,n){var t=n===void 0?{}:n,r=t.minDate,a=t.maxDate,o=t.excludeDates,d=t.includeDates,m=t.filterDate;return Fu(e,{minDate:r,maxDate:a})||(o==null?void 0:o.some(function(v){return Af(e,v instanceof Date?v:v.date)}))||d&&!d.some(function(v){return Af(e,v)})||m&&!m(sn(e))||!1}function sh(e,n,t){if(!n||!t||!gf(n)||!gf(t))return!1;var r=Lt(n),a=Lt(t);return r<=e&&a>=e}function Mh(e,n){var t=n===void 0?{}:n,r=t.minDate,a=t.maxDate,o=t.excludeDates,d=t.includeDates,m=t.filterDate,v=new Date(e,0,1);return Fu(v,{minDate:r?xp(r):void 0,maxDate:a?pC(a):void 0})||(o==null?void 0:o.some(function(g){return Ta(v,g instanceof Date?g:g.date)}))||d&&!d.some(function(g){return Ta(v,g)})||m&&!m(sn(v))||!1}function ah(e,n,t,r){var a=Lt(e),o=al(e),d=Lt(n),m=al(n),v=Lt(r);return a===d&&a===v?o<=t&&t<=m:a<d?v===a&&o<=t||v===d&&m>=t||v<d&&v>a:!1}function Fu(e,n){var t,r=n===void 0?{}:n,a=r.minDate,o=r.maxDate;return(t=a&&Sc(e,a)<0||o&&Sc(e,o)>0)!==null&&t!==void 0?t:!1}function Jb(e,n){return n.some(function(t){return pi(t)===pi(e)&&mi(t)===mi(e)&&uo(t)===uo(e)})}function e3(e,n){var t=n===void 0?{}:n,r=t.excludeTimes,a=t.includeTimes,o=t.filterTime;return r&&Jb(e,r)||a&&!Jb(e,a)||o&&!o(e)||!1}function t3(e,n){var t=n.minTime,r=n.maxTime;if(!t||!r)throw new Error("Both minTime and maxTime props required");var a=sn();a=kh(a,pi(e)),a=Ah(a,mi(e)),a=Th(a,uo(e));var o=sn();o=kh(o,pi(t)),o=Ah(o,mi(t)),o=Th(o,uo(t));var d=sn();d=kh(d,pi(r)),d=Ah(d,mi(r)),d=Th(d,uo(r));var m;try{m=!Nu(a,{start:o,end:d})}catch{m=!1}return m}function n3(e,n){var t=n===void 0?{}:n,r=t.minDate,a=t.includeDates,o=il(e,1);return r&&wu(r,o)>0||a&&a.every(function(d){return wu(d,o)>0})||!1}function r3(e,n){var t=n===void 0?{}:n,r=t.maxDate,a=t.includeDates,o=xa(e,1);return r&&wu(o,r)>0||a&&a.every(function(d){return wu(o,d)>0})||!1}function tB(e,n){var t=n===void 0?{}:n,r=t.minDate,a=t.includeDates,o=xp(e),d=CC(o,1);return r&&vf(r,d)>0||a&&a.every(function(m){return vf(m,d)>0})||!1}function nB(e,n){var t=n===void 0?{}:n,r=t.maxDate,a=t.includeDates,o=pC(e),d=m2(o,1);return r&&vf(d,r)>0||a&&a.every(function(m){return vf(d,m)>0})||!1}function s3(e,n){var t=n===void 0?{}:n,r=t.minDate,a=t.includeDates,o=kc(e,1);return r&&yf(r,o)>0||a&&a.every(function(d){return yf(d,o)>0})||!1}function rB(e,n){var t=n===void 0?{}:n,r=t.minDate,a=t.yearItemNumber,o=a===void 0?Pu:a,d=Ud(kc(e,o)),m=eo(d,o).endPeriod,v=r&&Lt(r);return v&&v>m||!1}function a3(e,n){var t=n===void 0?{}:n,r=t.maxDate,a=t.includeDates,o=hi(e,1);return r&&yf(o,r)>0||a&&a.every(function(d){return yf(o,d)>0})||!1}function sB(e,n){var t=n===void 0?{}:n,r=t.maxDate,a=t.yearItemNumber,o=a===void 0?Pu:a,d=hi(e,o),m=eo(d,o).startPeriod,v=r&&Lt(r);return v&&v<m||!1}function a5(e){var n=e.minDate,t=e.includeDates;if(t&&n){var r=t.filter(function(a){return Sc(a,n)>=0});return jb(r)}else return t?jb(t):n}function i5(e){var n=e.maxDate,t=e.includeDates;if(t&&n){var r=t.filter(function(a){return Sc(a,n)<=0});return Nb(r)}else return t?Nb(t):n}function i3(e,n){var t;e===void 0&&(e=[]),n===void 0&&(n="react-datepicker__day--highlighted");for(var r=new Map,a=0,o=e.length;a<o;a++){var d=e[a];if(fi(d)){var m=An(d,"MM.dd.yyyy"),v=r.get(m)||[];v.includes(n)||(v.push(n),r.set(m,v))}else if(typeof d=="object"){var g=Object.keys(d),w=(t=g[0])!==null&&t!==void 0?t:"",b=d[w];if(typeof w=="string"&&Array.isArray(b))for(var _=0,E=b.length;_<E;_++){var T=b[_];if(T){var m=An(T,"MM.dd.yyyy"),v=r.get(m)||[];v.includes(w)||(v.push(w),r.set(m,v))}}}}return r}function aB(e,n){return e.length!==n.length?!1:e.every(function(t,r){return t===n[r]})}function iB(e,n){e===void 0&&(e=[]),n===void 0&&(n="react-datepicker__day--holidays");var t=new Map;return e.forEach(function(r){var a=r.date,o=r.holidayName;if(fi(a)){var d=An(a,"MM.dd.yyyy"),m=t.get(d)||{className:"",holidayNames:[]};if(!("className"in m&&m.className===n&&aB(m.holidayNames,[o]))){m.className=n;var v=m.holidayNames;m.holidayNames=v?La(La([],v,!0),[o],!1):[o],t.set(d,m)}}}),t}function oB(e,n,t,r,a){for(var o=a.length,d=[],m=0;m<o;m++){var v=e,g=a[m];g&&(v=KR(v,pi(g)),v=Ox(v,mi(g)),v=e9(v,uo(g)));var w=Ox(e,(t+1)*r);xo(v,n)&&xl(v,w)&&g!=null&&d.push(g)}return d}function o3(e){return e<10?"0".concat(e):"".concat(e)}function eo(e,n){n===void 0&&(n=Pu);var t=Math.ceil(Lt(e)/n)*n,r=t-(n-1);return{startPeriod:r,endPeriod:t}}function lB(e){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+t-+n)/36e5)}function l3(e){var n=e.getSeconds(),t=e.getMilliseconds();return at(e.getTime()-n*1e3-t)}function cB(e,n){return l3(e).getTime()===l3(n).getTime()}function c3(e){if(!fi(e))throw new Error("Invalid date");var n=new Date(e);return n.setHours(0,0,0,0),n}function d3(e,n){if(!fi(e)||!fi(n))throw new Error("Invalid date received");var t=c3(e),r=c3(n);return xl(t,r)}function o5(e){return e.key===Ke.Space}var dB=function(e){gr(n,e);function n(t){var r=e.call(this,t)||this;return r.inputRef=ge.createRef(),r.onTimeChange=function(a){var o,d;r.setState({time:a});var m=r.props.date,v=m instanceof Date&&!isNaN(+m),g=v?m:new Date;if(a!=null&&a.includes(":")){var w=a.split(":"),b=w[0],_=w[1];g.setHours(Number(b)),g.setMinutes(Number(_))}(d=(o=r.props).onChange)===null||d===void 0||d.call(o,g)},r.renderTimeInput=function(){var a=r.state.time,o=r.props,d=o.date,m=o.timeString,v=o.customTimeInput;return v?M.cloneElement(v,{date:d,value:a,onChange:r.onTimeChange}):ge.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:r.inputRef,onClick:function(){var g;(g=r.inputRef.current)===null||g===void 0||g.focus()},required:!0,value:a,onChange:function(g){r.onTimeChange(g.target.value||m)}})},r.state={time:r.props.timeString},r}return n.getDerivedStateFromProps=function(t,r){return t.timeString!==r.time?{time:t.timeString}:null},n.prototype.render=function(){return ge.createElement("div",{className:"react-datepicker__input-time-container"},ge.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),ge.createElement("div",{className:"react-datepicker-time__input-container"},ge.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},n}(M.Component),uB=function(e){gr(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.dayEl=M.createRef(),t.handleClick=function(r){!t.isDisabled()&&t.props.onClick&&t.props.onClick(r)},t.handleMouseEnter=function(r){!t.isDisabled()&&t.props.onMouseEnter&&t.props.onMouseEnter(r)},t.handleOnKeyDown=function(r){var a,o,d=r.key;d===Ke.Space&&(r.preventDefault(),r.key=Ke.Enter),(o=(a=t.props).handleOnKeyDown)===null||o===void 0||o.call(a,r)},t.isSameDay=function(r){return Qt(t.props.day,r)},t.isKeyboardSelected=function(){var r;if(t.props.disabledKeyboardNavigation)return!1;var a=t.props.selectsMultiple?(r=t.props.selectedDates)===null||r===void 0?void 0:r.some(function(d){return t.isSameDayOrWeek(d)}):t.isSameDayOrWeek(t.props.selected),o=t.props.preSelection&&t.isDisabled(t.props.preSelection);return!a&&t.isSameDayOrWeek(t.props.preSelection)&&!o},t.isDisabled=function(r){return r===void 0&&(r=t.props.day),Ys(r,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(){return M2(t.props.day,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.isStartOfWeek=function(){return Qt(t.props.day,ho(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameWeek=function(r){return t.props.showWeekPicker&&Qt(r,ho(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameDayOrWeek=function(r){return t.isSameDay(r)||t.isSameWeek(r)},t.getHighLightedClass=function(){var r=t.props,a=r.day,o=r.highlightDates;if(!o)return!1;var d=An(a,"MM.dd.yyyy");return o.get(d)},t.getHolidaysClass=function(){var r,a=t.props,o=a.day,d=a.holidays;if(!d)return[void 0];var m=An(o,"MM.dd.yyyy");return d.has(m)?[(r=d.get(m))===null||r===void 0?void 0:r.className]:[void 0]},t.isInRange=function(){var r=t.props,a=r.day,o=r.startDate,d=r.endDate;return!o||!d?!1:zd(a,o,d)},t.isInSelectingRange=function(){var r,a=t.props,o=a.day,d=a.selectsStart,m=a.selectsEnd,v=a.selectsRange,g=a.selectsDisabledDaysInRange,w=a.startDate,b=a.endDate,_=(r=t.props.selectingDate)!==null&&r!==void 0?r:t.props.preSelection;return!(d||m||v)||!_||!g&&t.isDisabled()?!1:d&&b&&(xl(_,b)||nl(_,b))?zd(o,_,b):m&&w&&(xo(_,w)||nl(_,w))||v&&w&&!b&&(xo(_,w)||nl(_,w))?zd(o,w,_):!1},t.isSelectingRangeStart=function(){var r;if(!t.isInSelectingRange())return!1;var a=t.props,o=a.day,d=a.startDate,m=a.selectsStart,v=(r=t.props.selectingDate)!==null&&r!==void 0?r:t.props.preSelection;return m?Qt(o,v):Qt(o,d)},t.isSelectingRangeEnd=function(){var r;if(!t.isInSelectingRange())return!1;var a=t.props,o=a.day,d=a.endDate,m=a.selectsEnd,v=a.selectsRange,g=(r=t.props.selectingDate)!==null&&r!==void 0?r:t.props.preSelection;return m||v?Qt(o,g):Qt(o,d)},t.isRangeStart=function(){var r=t.props,a=r.day,o=r.startDate,d=r.endDate;return!o||!d?!1:Qt(o,a)},t.isRangeEnd=function(){var r=t.props,a=r.day,o=r.startDate,d=r.endDate;return!o||!d?!1:Qt(d,a)},t.isWeekend=function(){var r=rO(t.props.day);return r===0||r===6},t.isAfterMonth=function(){return t.props.month!==void 0&&(t.props.month+1)%12===Pr(t.props.day)},t.isBeforeMonth=function(){return t.props.month!==void 0&&(Pr(t.props.day)+1)%12===t.props.month},t.isCurrentDay=function(){return t.isSameDay(sn())},t.isSelected=function(){var r;return t.props.selectsMultiple?(r=t.props.selectedDates)===null||r===void 0?void 0:r.some(function(a){return t.isSameDayOrWeek(a)}):t.isSameDayOrWeek(t.props.selected)},t.getClassNames=function(r){var a=t.props.dayClassName?t.props.dayClassName(r):void 0;return kn("react-datepicker__day",a,"react-datepicker__day--"+YF(t.props.day),{"react-datepicker__day--disabled":t.isDisabled(),"react-datepicker__day--excluded":t.isExcluded(),"react-datepicker__day--selected":t.isSelected(),"react-datepicker__day--keyboard-selected":t.isKeyboardSelected(),"react-datepicker__day--range-start":t.isRangeStart(),"react-datepicker__day--range-end":t.isRangeEnd(),"react-datepicker__day--in-range":t.isInRange(),"react-datepicker__day--in-selecting-range":t.isInSelectingRange(),"react-datepicker__day--selecting-range-start":t.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":t.isSelectingRangeEnd(),"react-datepicker__day--today":t.isCurrentDay(),"react-datepicker__day--weekend":t.isWeekend(),"react-datepicker__day--outside-month":t.isAfterMonth()||t.isBeforeMonth()},t.getHighLightedClass(),t.getHolidaysClass())},t.getAriaLabel=function(){var r=t.props,a=r.day,o=r.ariaLabelPrefixWhenEnabled,d=o===void 0?"Choose":o,m=r.ariaLabelPrefixWhenDisabled,v=m===void 0?"Not available":m,g=t.isDisabled()||t.isExcluded()?v:d;return"".concat(g," ").concat(An(a,"PPPP",t.props.locale))},t.getTitle=function(){var r=t.props,a=r.day,o=r.holidays,d=o===void 0?new Map:o,m=r.excludeDates,v=An(a,"MM.dd.yyyy"),g=[];return d.has(v)&&g.push.apply(g,d.get(v).holidayNames),t.isExcluded()&&g.push(m==null?void 0:m.filter(function(w){return w instanceof Date?Qt(w,a):Qt(w==null?void 0:w.date,a)}).map(function(w){if(!(w instanceof Date))return w==null?void 0:w.message})),g.join(", ")},t.getTabIndex=function(){var r=t.props.selected,a=t.props.preSelection,o=!(t.props.showWeekPicker&&(t.props.showWeekNumber||!t.isStartOfWeek()))&&(t.isKeyboardSelected()||t.isSameDay(r)&&Qt(a,r))?0:-1;return o},t.handleFocusDay=function(){var r;t.shouldFocusDay()&&((r=t.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},t.renderDayContents=function(){return t.props.monthShowsDuplicateDaysEnd&&t.isAfterMonth()||t.props.monthShowsDuplicateDaysStart&&t.isBeforeMonth()?null:t.props.renderDayContents?t.props.renderDayContents(Ab(t.props.day),t.props.day):Ab(t.props.day)},t.render=function(){return ge.createElement("div",{ref:t.dayEl,className:t.getClassNames(t.props.day),onKeyDown:t.handleOnKeyDown,onClick:t.handleClick,onMouseEnter:t.props.usePointerEvent?void 0:t.handleMouseEnter,onPointerEnter:t.props.usePointerEvent?t.handleMouseEnter:void 0,tabIndex:t.getTabIndex(),"aria-label":t.getAriaLabel(),role:"option",title:t.getTitle(),"aria-disabled":t.isDisabled(),"aria-current":t.isCurrentDay()?"date":void 0,"aria-selected":t.isSelected()||t.isInRange()},t.renderDayContents(),t.getTitle()!==""&&ge.createElement("span",{className:"overlay"},t.getTitle()))},t}return n.prototype.componentDidMount=function(){this.handleFocusDay()},n.prototype.componentDidUpdate=function(){this.handleFocusDay()},n.prototype.shouldFocusDay=function(){var t=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(t=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(t=!1),this.isDayActiveElement()&&(t=!0),this.isDuplicateDay()&&(t=!1)),t},n.prototype.isDayActiveElement=function(){var t,r,a;return((r=(t=this.props.containerRef)===null||t===void 0?void 0:t.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((a=document.activeElement)===null||a===void 0?void 0:a.classList.contains("react-datepicker__day"))},n.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},n}(M.Component),hB=function(e){gr(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.weekNumberEl=M.createRef(),t.handleClick=function(r){t.props.onClick&&t.props.onClick(r)},t.handleOnKeyDown=function(r){var a,o,d=r.key;d===Ke.Space&&(r.preventDefault(),r.key=Ke.Enter),(o=(a=t.props).handleOnKeyDown)===null||o===void 0||o.call(a,r)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Qt(t.props.date,t.props.selected)&&Qt(t.props.date,t.props.preSelection)},t.getTabIndex=function(){return t.props.showWeekPicker&&t.props.showWeekNumber&&(t.isKeyboardSelected()||Qt(t.props.date,t.props.selected)&&Qt(t.props.preSelection,t.props.selected))?0:-1},t.handleFocusWeekNumber=function(r){var a=!1;t.getTabIndex()===0&&!(r!=null&&r.isInputFocused)&&Qt(t.props.date,t.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(a=!0),t.props.inline&&!t.props.shouldFocusDayInline&&(a=!1),t.props.containerRef&&t.props.containerRef.current&&t.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(a=!0)),a&&t.weekNumberEl.current&&t.weekNumberEl.current.focus({preventScroll:!0})},t}return Object.defineProperty(n,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),n.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},n.prototype.componentDidUpdate=function(t){this.handleFocusWeekNumber(t)},n.prototype.render=function(){var t=this.props,r=t.weekNumber,a=t.isWeekDisabled,o=t.ariaLabelPrefix,d=o===void 0?n.defaultProps.ariaLabelPrefix:o,m=t.onClick,v={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!m&&!a,"react-datepicker__week-number--selected":!!m&&Qt(this.props.date,this.props.selected)};return ge.createElement("div",{ref:this.weekNumberEl,className:kn(v),"aria-label":"".concat(d," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},r)},n}(M.Component),fB=function(e){gr(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.isDisabled=function(r){return Ys(r,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.handleDayClick=function(r,a){t.props.onDayClick&&t.props.onDayClick(r,a)},t.handleDayMouseEnter=function(r){t.props.onDayMouseEnter&&t.props.onDayMouseEnter(r)},t.handleWeekClick=function(r,a,o){for(var d,m,v,g=new Date(r),w=0;w<7;w++){var b=new Date(r);b.setDate(b.getDate()+w);var _=!t.isDisabled(b);if(_){g=b;break}}typeof t.props.onWeekSelect=="function"&&t.props.onWeekSelect(g,a,o),t.props.showWeekPicker&&t.handleDayClick(g,o),((d=t.props.shouldCloseOnSelect)!==null&&d!==void 0?d:n.defaultProps.shouldCloseOnSelect)&&((v=(m=t.props).setOpen)===null||v===void 0||v.call(m,!1))},t.formatWeekNumber=function(r){return t.props.formatWeekNumber?t.props.formatWeekNumber(r):$F(r)},t.isWeekDisabled=function(){for(var r=t.startOfWeek(),a=pa(r,6),o=new Date(r);o<=a;){if(!t.isDisabled(o))return!1;o=pa(o,1)}return!0},t.renderDays=function(){var r=t.startOfWeek(),a=[],o=t.formatWeekNumber(r);if(t.props.showWeekNumber){var d=t.props.onWeekSelect||t.props.showWeekPicker?t.handleWeekClick.bind(t,r,o):void 0;a.push(ge.createElement(hB,Gt({key:"W"},n.defaultProps,t.props,{weekNumber:o,isWeekDisabled:t.isWeekDisabled(),date:r,onClick:d})))}return a.concat([0,1,2,3,4,5,6].map(function(m){var v=pa(r,m);return ge.createElement(uB,Gt({},n.defaultProps,t.props,{ariaLabelPrefixWhenEnabled:t.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:t.props.disabledDayAriaLabelPrefix,key:v.valueOf(),day:v,onClick:t.handleDayClick.bind(t,v),onMouseEnter:t.handleDayMouseEnter.bind(t,v)}))}))},t.startOfWeek=function(){return ho(t.props.day,t.props.locale,t.props.calendarStartDay)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Qt(t.startOfWeek(),t.props.selected)&&Qt(t.startOfWeek(),t.props.preSelection)},t}return Object.defineProperty(n,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),n.prototype.render=function(){var t={"react-datepicker__week":!0,"react-datepicker__week--selected":Qt(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return ge.createElement("div",{className:kn(t)},this.renderDays())},n}(M.Component),Od,pB=6,mc={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},f1=(Od={},Od[mc.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},Od[mc.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},Od[mc.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},Od),ih=1;function u3(e,n){return e?mc.FOUR_COLUMNS:n?mc.TWO_COLUMNS:mc.THREE_COLUMNS}var mB=function(e){gr(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.MONTH_REFS=La([],Array(12),!0).map(function(){return M.createRef()}),t.QUARTER_REFS=La([],Array(4),!0).map(function(){return M.createRef()}),t.isDisabled=function(r){return Ys(r,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(r){return M2(r,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.handleDayClick=function(r,a){var o,d;(d=(o=t.props).onDayClick)===null||d===void 0||d.call(o,r,a,t.props.orderInDisplay)},t.handleDayMouseEnter=function(r){var a,o;(o=(a=t.props).onDayMouseEnter)===null||o===void 0||o.call(a,r)},t.handleMouseLeave=function(){var r,a;(a=(r=t.props).onMouseLeave)===null||a===void 0||a.call(r)},t.isRangeStartMonth=function(r){var a=t.props,o=a.day,d=a.startDate,m=a.endDate;return!d||!m?!1:Yr(Hs(o,r),d)},t.isRangeStartQuarter=function(r){var a=t.props,o=a.day,d=a.startDate,m=a.endDate;return!d||!m?!1:Af(Vl(o,r),d)},t.isRangeEndMonth=function(r){var a=t.props,o=a.day,d=a.startDate,m=a.endDate;return!d||!m?!1:Yr(Hs(o,r),m)},t.isRangeEndQuarter=function(r){var a=t.props,o=a.day,d=a.startDate,m=a.endDate;return!d||!m?!1:Af(Vl(o,r),m)},t.isInSelectingRangeMonth=function(r){var a,o=t.props,d=o.day,m=o.selectsStart,v=o.selectsEnd,g=o.selectsRange,w=o.startDate,b=o.endDate,_=(a=t.props.selectingDate)!==null&&a!==void 0?a:t.props.preSelection;return!(m||v||g)||!_?!1:m&&b?nh(_,b,r,d):v&&w||g&&w&&!b?nh(w,_,r,d):!1},t.isSelectingMonthRangeStart=function(r){var a;if(!t.isInSelectingRangeMonth(r))return!1;var o=t.props,d=o.day,m=o.startDate,v=o.selectsStart,g=Hs(d,r),w=(a=t.props.selectingDate)!==null&&a!==void 0?a:t.props.preSelection;return v?Yr(g,w):Yr(g,m)},t.isSelectingMonthRangeEnd=function(r){var a;if(!t.isInSelectingRangeMonth(r))return!1;var o=t.props,d=o.day,m=o.endDate,v=o.selectsEnd,g=o.selectsRange,w=Hs(d,r),b=(a=t.props.selectingDate)!==null&&a!==void 0?a:t.props.preSelection;return v||g?Yr(w,b):Yr(w,m)},t.isInSelectingRangeQuarter=function(r){var a,o=t.props,d=o.day,m=o.selectsStart,v=o.selectsEnd,g=o.selectsRange,w=o.startDate,b=o.endDate,_=(a=t.props.selectingDate)!==null&&a!==void 0?a:t.props.preSelection;return!(m||v||g)||!_?!1:m&&b?ah(_,b,r,d):v&&w||g&&w&&!b?ah(w,_,r,d):!1},t.isWeekInMonth=function(r){var a=t.props.day,o=pa(r,6);return Yr(r,a)||Yr(o,a)},t.isCurrentMonth=function(r,a){return Lt(r)===Lt(sn())&&a===Pr(sn())},t.isCurrentQuarter=function(r,a){return Lt(r)===Lt(sn())&&a===al(sn())},t.isSelectedMonth=function(r,a,o){return Pr(o)===a&&Lt(r)===Lt(o)},t.isSelectMonthInList=function(r,a,o){return o.some(function(d){return t.isSelectedMonth(r,a,d)})},t.isSelectedQuarter=function(r,a,o){return al(r)===a&&Lt(r)===Lt(o)},t.isMonthSelected=function(){var r=t.props,a=r.day,o=r.selected,d=r.selectedDates,m=r.selectsMultiple,v=Pr(a);return m?d==null?void 0:d.some(function(g){return t.isSelectedMonth(a,v,g)}):!!o&&t.isSelectedMonth(a,v,o)},t.renderWeeks=function(){for(var r=[],a=t.props.fixedHeight,o=0,d=!1,m=ho(gi(t.props.day),t.props.locale,t.props.calendarStartDay),v=function(T){return t.props.showWeekPicker?ho(T,t.props.locale,t.props.calendarStartDay):t.props.preSelection},g=function(T){return t.props.showWeekPicker?ho(T,t.props.locale,t.props.calendarStartDay):t.props.selected},w=t.props.selected?g(t.props.selected):void 0,b=t.props.preSelection?v(t.props.preSelection):void 0;r.push(ge.createElement(fB,Gt({},t.props,{ariaLabelPrefix:t.props.weekAriaLabelPrefix,key:o,day:m,month:Pr(t.props.day),onDayClick:t.handleDayClick,onDayMouseEnter:t.handleDayMouseEnter,selected:w,preSelection:b,showWeekNumber:t.props.showWeekNumbers}))),!d;){o++,m=xf(m,1);var _=a&&o>=pB,E=!a&&!t.isWeekInMonth(m);if(_||E)if(t.props.peekNextMonth)d=!0;else break}return r},t.onMonthClick=function(r,a){var o=t.isMonthDisabledForLabelDate(a),d=o.isDisabled,m=o.labelDate;d||t.handleDayClick(gi(m),r)},t.onMonthMouseEnter=function(r){var a=t.isMonthDisabledForLabelDate(r),o=a.isDisabled,d=a.labelDate;o||t.handleDayMouseEnter(gi(d))},t.handleMonthNavigation=function(r,a){var o,d,m,v;(d=(o=t.props).setPreSelection)===null||d===void 0||d.call(o,a),(v=(m=t.MONTH_REFS[r])===null||m===void 0?void 0:m.current)===null||v===void 0||v.focus()},t.handleKeyboardNavigation=function(r,a,o){var d,m=t.props,v=m.selected,g=m.preSelection,w=m.setPreSelection,b=m.minDate,_=m.maxDate,E=m.showFourColumnMonthYearPicker,T=m.showTwoColumnMonthYearPicker;if(g){var I=u3(E,T),k=t.getVerticalOffset(I),S=(d=f1[I])===null||d===void 0?void 0:d.grid,A=function(F,W,V){var re,oe,ee=W,he=V;switch(F){case Ke.ArrowRight:ee=xa(W,ih),he=V===11?0:V+ih;break;case Ke.ArrowLeft:ee=il(W,ih),he=V===0?11:V-ih;break;case Ke.ArrowUp:ee=il(W,k),he=!((re=S==null?void 0:S[0])===null||re===void 0)&&re.includes(V)?V+12-k:V-k;break;case Ke.ArrowDown:ee=xa(W,k),he=!((oe=S==null?void 0:S[S.length-1])===null||oe===void 0)&&oe.includes(V)?V-12+k:V+k;break}return{newCalculatedDate:ee,newCalculatedMonth:he}},O=function(F,W,V){for(var re=40,oe=F,ee=!1,he=0,ve=A(oe,W,V),ne=ve.newCalculatedDate,Q=ve.newCalculatedMonth;!ee;){if(he>=re){ne=W,Q=V;break}if(b&&ne<b){oe=Ke.ArrowRight;var me=A(oe,ne,Q);ne=me.newCalculatedDate,Q=me.newCalculatedMonth}if(_&&ne>_){oe=Ke.ArrowLeft;var me=A(oe,ne,Q);ne=me.newCalculatedDate,Q=me.newCalculatedMonth}if(eB(ne,t.props)){var me=A(oe,ne,Q);ne=me.newCalculatedDate,Q=me.newCalculatedMonth}else ee=!0;he++}return{newCalculatedDate:ne,newCalculatedMonth:Q}};if(a===Ke.Enter){t.isMonthDisabled(o)||(t.onMonthClick(r,o),w==null||w(v));return}var P=O(a,g,o),$=P.newCalculatedDate,L=P.newCalculatedMonth;switch(a){case Ke.ArrowRight:case Ke.ArrowLeft:case Ke.ArrowUp:case Ke.ArrowDown:t.handleMonthNavigation(L,$);break}}},t.getVerticalOffset=function(r){var a,o;return(o=(a=f1[r])===null||a===void 0?void 0:a.verticalNavigationOffset)!==null&&o!==void 0?o:0},t.onMonthKeyDown=function(r,a){var o=t.props,d=o.disabledKeyboardNavigation,m=o.handleOnMonthKeyDown,v=r.key;v!==Ke.Tab&&r.preventDefault(),d||t.handleKeyboardNavigation(r,v,a),m&&m(r)},t.onQuarterClick=function(r,a){var o=Vl(t.props.day,a);rh(o,t.props)||t.handleDayClick(Xb(o),r)},t.onQuarterMouseEnter=function(r){var a=Vl(t.props.day,r);rh(a,t.props)||t.handleDayMouseEnter(Xb(a))},t.handleQuarterNavigation=function(r,a){var o,d,m,v;t.isDisabled(a)||t.isExcluded(a)||((d=(o=t.props).setPreSelection)===null||d===void 0||d.call(o,a),(v=(m=t.QUARTER_REFS[r-1])===null||m===void 0?void 0:m.current)===null||v===void 0||v.focus())},t.onQuarterKeyDown=function(r,a){var o,d,m=r.key;if(!t.props.disabledKeyboardNavigation)switch(m){case Ke.Enter:t.onQuarterClick(r,a),(d=(o=t.props).setPreSelection)===null||d===void 0||d.call(o,t.props.selected);break;case Ke.ArrowRight:if(!t.props.preSelection)break;t.handleQuarterNavigation(a===4?1:a+1,m2(t.props.preSelection,1));break;case Ke.ArrowLeft:if(!t.props.preSelection)break;t.handleQuarterNavigation(a===1?4:a-1,CC(t.props.preSelection,1));break}},t.isMonthDisabledForLabelDate=function(r){var a,o=t.props,d=o.day,m=o.minDate,v=o.maxDate,g=o.excludeDates,w=o.includeDates,b=Hs(d,r);return{isDisabled:(a=(m||v||g||w)&&s5(b,t.props))!==null&&a!==void 0?a:!1,labelDate:b}},t.isMonthDisabled=function(r){var a=t.isMonthDisabledForLabelDate(r).isDisabled;return a},t.getMonthClassNames=function(r){var a=t.props,o=a.day,d=a.startDate,m=a.endDate,v=a.preSelection,g=a.monthClassName,w=g?g(Hs(o,r)):void 0,b=t.getSelection();return kn("react-datepicker__month-text","react-datepicker__month-".concat(r),w,{"react-datepicker__month-text--disabled":t.isMonthDisabled(r),"react-datepicker__month-text--selected":b?t.isSelectMonthInList(o,r,b):void 0,"react-datepicker__month-text--keyboard-selected":!t.props.disabledKeyboardNavigation&&v&&t.isSelectedMonth(o,r,v)&&!t.isMonthSelected()&&!t.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":t.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":d&&m?nh(d,m,r,o):void 0,"react-datepicker__month-text--range-start":t.isRangeStartMonth(r),"react-datepicker__month-text--range-end":t.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":t.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":t.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":t.isCurrentMonth(o,r)})},t.getTabIndex=function(r){if(t.props.preSelection==null)return"-1";var a=Pr(t.props.preSelection),o=t.isMonthDisabledForLabelDate(a).isDisabled,d=r===a&&!(o||t.props.disabledKeyboardNavigation)?"0":"-1";return d},t.getQuarterTabIndex=function(r){if(t.props.preSelection==null)return"-1";var a=al(t.props.preSelection),o=rh(t.props.day,t.props),d=r===a&&!(o||t.props.disabledKeyboardNavigation)?"0":"-1";return d},t.getAriaLabel=function(r){var a=t.props,o=a.chooseDayAriaLabelPrefix,d=o===void 0?"Choose":o,m=a.disabledDayAriaLabelPrefix,v=m===void 0?"Not available":m,g=a.day,w=a.locale,b=Hs(g,r),_=t.isDisabled(b)||t.isExcluded(b)?v:d;return"".concat(_," ").concat(An(b,"MMMM yyyy",w))},t.getQuarterClassNames=function(r){var a=t.props,o=a.day,d=a.startDate,m=a.endDate,v=a.selected,g=a.minDate,w=a.maxDate,b=a.excludeDates,_=a.includeDates,E=a.filterDate,T=a.preSelection,I=a.disabledKeyboardNavigation,k=(g||w||b||_||E)&&rh(Vl(o,r),t.props);return kn("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":k,"react-datepicker__quarter-text--selected":v?t.isSelectedQuarter(o,r,v):void 0,"react-datepicker__quarter-text--keyboard-selected":!I&&T&&t.isSelectedQuarter(o,r,T)&&!k,"react-datepicker__quarter-text--in-selecting-range":t.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":d&&m?ah(d,m,r,o):void 0,"react-datepicker__quarter-text--range-start":t.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":t.isRangeEndQuarter(r),"react-datepicker__quarter-text--today":t.isCurrentQuarter(o,r)})},t.getMonthContent=function(r){var a=t.props,o=a.showFullMonthYearPicker,d=a.renderMonthContent,m=a.locale,v=a.day,g=r5(r,m),w=I2(r,m);return d?d(r,g,w,v):o?w:g},t.getQuarterContent=function(r){var a,o=t.props,d=o.renderQuarterContent,m=o.locale,v=JF(r,m);return(a=d==null?void 0:d(r,v))!==null&&a!==void 0?a:v},t.renderMonths=function(){var r,a=t.props,o=a.showTwoColumnMonthYearPicker,d=a.showFourColumnMonthYearPicker,m=a.day,v=a.selected,g=(r=f1[u3(d,o)])===null||r===void 0?void 0:r.grid;return g==null?void 0:g.map(function(w,b){return ge.createElement("div",{className:"react-datepicker__month-wrapper",key:b},w.map(function(_,E){return ge.createElement("div",{ref:t.MONTH_REFS[_],key:E,onClick:function(T){t.onMonthClick(T,_)},onKeyDown:function(T){o5(T)&&(T.preventDefault(),T.key=Ke.Enter),t.onMonthKeyDown(T,_)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onMonthMouseEnter(_)},onPointerEnter:t.props.usePointerEvent?function(){return t.onMonthMouseEnter(_)}:void 0,tabIndex:Number(t.getTabIndex(_)),className:t.getMonthClassNames(_),"aria-disabled":t.isMonthDisabled(_),role:"option","aria-label":t.getAriaLabel(_),"aria-current":t.isCurrentMonth(m,_)?"date":void 0,"aria-selected":v?t.isSelectedMonth(m,_,v):void 0},t.getMonthContent(_))}))})},t.renderQuarters=function(){var r=t.props,a=r.day,o=r.selected,d=[1,2,3,4];return ge.createElement("div",{className:"react-datepicker__quarter-wrapper"},d.map(function(m,v){return ge.createElement("div",{key:v,ref:t.QUARTER_REFS[v],role:"option",onClick:function(g){t.onQuarterClick(g,m)},onKeyDown:function(g){t.onQuarterKeyDown(g,m)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onQuarterMouseEnter(m)},onPointerEnter:t.props.usePointerEvent?function(){return t.onQuarterMouseEnter(m)}:void 0,className:t.getQuarterClassNames(m),"aria-selected":o?t.isSelectedQuarter(a,m,o):void 0,tabIndex:Number(t.getQuarterTabIndex(m)),"aria-current":t.isCurrentQuarter(a,m)?"date":void 0},t.getQuarterContent(m))}))},t.getClassNames=function(){var r=t.props,a=r.selectingDate,o=r.selectsStart,d=r.selectsEnd,m=r.showMonthYearPicker,v=r.showQuarterYearPicker,g=r.showWeekPicker;return kn("react-datepicker__month",{"react-datepicker__month--selecting-range":a&&(o||d)},{"react-datepicker__monthPicker":m},{"react-datepicker__quarterPicker":v},{"react-datepicker__weekPicker":g})},t}return n.prototype.getSelection=function(){var t=this.props,r=t.selected,a=t.selectedDates,o=t.selectsMultiple;if(o)return a;if(r)return[r]},n.prototype.render=function(){var t=this.props,r=t.showMonthYearPicker,a=t.showQuarterYearPicker,o=t.day,d=t.ariaLabelPrefix,m=d===void 0?"Month ":d,v=m?m.trim()+" ":"";return ge.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(v).concat(An(o,"MMMM, yyyy",this.props.locale)),role:"listbox"},r?this.renderMonths():a?this.renderQuarters():this.renderWeeks())},n}(M.Component),xB=function(e){gr(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.isSelectedMonth=function(r){return t.props.month===r},t.renderOptions=function(){return t.props.monthNames.map(function(r,a){return ge.createElement("div",{className:t.isSelectedMonth(a)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:t.onChange.bind(t,a),"aria-selected":t.isSelectedMonth(a)?"true":void 0},t.isSelectedMonth(a)?ge.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",r)})},t.onChange=function(r){return t.props.onChange(r)},t.handleClickOutside=function(){return t.props.onCancel()},t}return n.prototype.render=function(){return ge.createElement(Np,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},n}(M.Component),gB=function(e){gr(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(r){return r.map(function(a,o){return ge.createElement("option",{key:a,value:o},a)})},t.renderSelectMode=function(r){return ge.createElement("select",{value:t.props.month,className:"react-datepicker__month-select",onChange:function(a){return t.onChange(parseInt(a.target.value))}},t.renderSelectOptions(r))},t.renderReadView=function(r,a){return ge.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:t.toggleDropdown},ge.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),ge.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},a[t.props.month]))},t.renderDropdown=function(r){return ge.createElement(xB,Gt({key:"dropdown"},t.props,{monthNames:r,onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(r){var a=t.state.dropdownVisible,o=[t.renderReadView(!a,r)];return a&&o.unshift(t.renderDropdown(r)),o},t.onChange=function(r){t.toggleDropdown(),r!==t.props.month&&t.props.onChange(r)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return n.prototype.render=function(){var t=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(o){return r5(o,t.props.locale)}:function(o){return I2(o,t.props.locale)}),a;switch(this.props.dropdownMode){case"scroll":a=this.renderScrollMode(r);break;case"select":a=this.renderSelectMode(r);break}return ge.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},a)},n}(M.Component);function vB(e,n){for(var t=[],r=gi(e),a=gi(n);!xo(r,a);)t.push(sn(r)),r=xa(r,1);return t}var yB=function(e){gr(n,e);function n(t){var r=e.call(this,t)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(a){var o=Bx(a),d=Ta(r.props.date,a)&&Yr(r.props.date,a);return ge.createElement("div",{className:d?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:o,onClick:r.onChange.bind(r,o),"aria-selected":d?"true":void 0},d?ge.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",An(a,r.props.dateFormat,r.props.locale))})},r.onChange=function(a){return r.props.onChange(a)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:vB(r.props.minDate,r.props.maxDate)},r}return n.prototype.render=function(){var t=kn({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return ge.createElement(Np,{className:t,onClickOutside:this.handleClickOutside},this.renderOptions())},n}(M.Component),wB=function(e){gr(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var r=gi(t.props.minDate),a=gi(t.props.maxDate),o=[];!xo(r,a);){var d=Bx(r);o.push(ge.createElement("option",{key:d,value:d},An(r,t.props.dateFormat,t.props.locale))),r=xa(r,1)}return o},t.onSelectChange=function(r){t.onChange(parseInt(r.target.value))},t.renderSelectMode=function(){return ge.createElement("select",{value:Bx(gi(t.props.date)),className:"react-datepicker__month-year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(r){var a=An(t.props.date,t.props.dateFormat,t.props.locale);return ge.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:t.toggleDropdown},ge.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),ge.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},a))},t.renderDropdown=function(){return ge.createElement(yB,Gt({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var r=t.state.dropdownVisible,a=[t.renderReadView(!r)];return r&&a.unshift(t.renderDropdown()),a},t.onChange=function(r){t.toggleDropdown();var a=sn(r);Ta(t.props.date,a)&&Yr(t.props.date,a)||t.props.onChange(a)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return n.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return ge.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},t)},n}(M.Component),bB=function(e){gr(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.state={height:null},t.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,a,o;t.list&&(t.list.scrollTop=(o=t.centerLi&&n.calcCenterPosition(t.props.monthRef?t.props.monthRef.clientHeight-((a=(r=t.header)===null||r===void 0?void 0:r.clientHeight)!==null&&a!==void 0?a:0):t.list.clientHeight,t.centerLi))!==null&&o!==void 0?o:0)})},t.handleClick=function(r){var a,o;(t.props.minTime||t.props.maxTime)&&t3(r,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&e3(r,t.props)||(o=(a=t.props).onChange)===null||o===void 0||o.call(a,r)},t.isSelectedTime=function(r){return t.props.selected&&cB(t.props.selected,r)},t.isDisabledTime=function(r){return(t.props.minTime||t.props.maxTime)&&t3(r,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&e3(r,t.props)},t.liClasses=function(r){var a,o=["react-datepicker__time-list-item",t.props.timeClassName?t.props.timeClassName(r):void 0];return t.isSelectedTime(r)&&o.push("react-datepicker__time-list-item--selected"),t.isDisabledTime(r)&&o.push("react-datepicker__time-list-item--disabled"),t.props.injectTimes&&(pi(r)*3600+mi(r)*60+uo(r))%(((a=t.props.intervals)!==null&&a!==void 0?a:n.defaultProps.intervals)*60)!==0&&o.push("react-datepicker__time-list-item--injected"),o.join(" ")},t.handleOnKeyDown=function(r,a){var o,d;r.key===Ke.Space&&(r.preventDefault(),r.key=Ke.Enter),(r.key===Ke.ArrowUp||r.key===Ke.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===Ke.ArrowDown||r.key===Ke.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===Ke.Enter&&t.handleClick(a),(d=(o=t.props).handleOnKeyDown)===null||d===void 0||d.call(o,r)},t.renderTimes=function(){for(var r,a=[],o=typeof t.props.format=="string"?t.props.format:"p",d=(r=t.props.intervals)!==null&&r!==void 0?r:n.defaultProps.intervals,m=t.props.selected||t.props.openToDate||sn(),v=Ih(m),g=t.props.injectTimes&&t.props.injectTimes.sort(function(k,S){return k.getTime()-S.getTime()}),w=60*lB(m),b=w/d,_=0;_<b;_++){var E=Ox(v,_*d);if(a.push(E),g){var T=oB(v,E,_,d,g);a=a.concat(T)}}var I=a.reduce(function(k,S){return S.getTime()<=m.getTime()?S:k},a[0]);return a.map(function(k){return ge.createElement("li",{key:k.valueOf(),onClick:t.handleClick.bind(t,k),className:t.liClasses(k),ref:function(S){k===I&&(t.centerLi=S)},onKeyDown:function(S){t.handleOnKeyDown(S,k)},tabIndex:k===I?0:-1,role:"option","aria-selected":t.isSelectedTime(k)?"true":void 0,"aria-disabled":t.isDisabledTime(k)?"true":void 0},An(k,o,t.props.locale))})},t.renderTimeCaption=function(){return t.props.showTimeCaption===!1?ge.createElement(ge.Fragment,null):ge.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(t.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(r){t.header=r}},ge.createElement("div",{className:"react-datepicker-time__header"},t.props.timeCaption))},t}return Object.defineProperty(n,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),n.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},n.prototype.componentWillUnmount=function(){var t;(t=this.resizeObserver)===null||t===void 0||t.disconnect()},n.prototype.observeDatePickerHeightChanges=function(){var t=this,r=this.props.monthRef;this.updateContainerHeight(),r&&(this.resizeObserver=new ResizeObserver(function(){t.updateContainerHeight()}),this.resizeObserver.observe(r))},n.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},n.prototype.render=function(){var t=this,r,a=this.state.height;return ge.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:n.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),ge.createElement("div",{className:"react-datepicker__time"},ge.createElement("div",{className:"react-datepicker__time-box"},ge.createElement("ul",{className:"react-datepicker__time-list",ref:function(o){t.list=o},style:a?{height:a}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},n.calcCenterPosition=function(t,r){return r.offsetTop-(t/2-r.clientHeight/2)},n}(M.Component),h3=3,NB=function(e){gr(n,e);function n(t){var r=e.call(this,t)||this;return r.YEAR_REFS=La([],Array(r.props.yearItemNumber),!0).map(function(){return M.createRef()}),r.isDisabled=function(a){return Ys(a,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(a){return M2(a,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var a;return(a=r.props.selectingDate)!==null&&a!==void 0?a:r.props.preSelection},r.updateFocusOnPaginate=function(a){var o=function(){var d,m;(m=(d=r.YEAR_REFS[a])===null||d===void 0?void 0:d.current)===null||m===void 0||m.focus()};window.requestAnimationFrame(o)},r.handleYearClick=function(a,o){r.props.onDayClick&&r.props.onDayClick(a,o)},r.handleYearNavigation=function(a,o){var d,m,v,g,w=r.props,b=w.date,_=w.yearItemNumber;if(!(b===void 0||_===void 0)){var E=eo(b,_).startPeriod;r.isDisabled(o)||r.isExcluded(o)||((m=(d=r.props).setPreSelection)===null||m===void 0||m.call(d,o),a-E<0?r.updateFocusOnPaginate(_-(E-a)):a-E>=_?r.updateFocusOnPaginate(Math.abs(_-(a-E))):(g=(v=r.YEAR_REFS[a-E])===null||v===void 0?void 0:v.current)===null||g===void 0||g.focus())}},r.isSameDay=function(a,o){return Qt(a,o)},r.isCurrentYear=function(a){return a===Lt(sn())},r.isRangeStart=function(a){return r.props.startDate&&r.props.endDate&&Ta(Aa(sn(),a),r.props.startDate)},r.isRangeEnd=function(a){return r.props.startDate&&r.props.endDate&&Ta(Aa(sn(),a),r.props.endDate)},r.isInRange=function(a){return sh(a,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(a){var o=r.props,d=o.selectsStart,m=o.selectsEnd,v=o.selectsRange,g=o.startDate,w=o.endDate;return!(d||m||v)||!r.selectingDate()?!1:d&&w?sh(a,r.selectingDate(),w):m&&g||v&&g&&!w?sh(a,g,r.selectingDate()):!1},r.isSelectingRangeStart=function(a){var o;if(!r.isInSelectingRange(a))return!1;var d=r.props,m=d.startDate,v=d.selectsStart,g=Aa(sn(),a);return v?Ta(g,(o=r.selectingDate())!==null&&o!==void 0?o:null):Ta(g,m??null)},r.isSelectingRangeEnd=function(a){var o;if(!r.isInSelectingRange(a))return!1;var d=r.props,m=d.endDate,v=d.selectsEnd,g=d.selectsRange,w=Aa(sn(),a);return v||g?Ta(w,(o=r.selectingDate())!==null&&o!==void 0?o:null):Ta(w,m??null)},r.isKeyboardSelected=function(a){if(!(r.props.date===void 0||r.props.selected==null||r.props.preSelection==null)){var o=r.props,d=o.minDate,m=o.maxDate,v=o.excludeDates,g=o.includeDates,w=o.filterDate,b=Ud(Aa(r.props.date,a)),_=(d||m||v||g||w)&&Mh(a,r.props);return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!Qt(b,Ud(r.props.selected))&&Qt(b,Ud(r.props.preSelection))&&!_}},r.isSelectedYear=function(a){var o=r.props,d=o.selectsMultiple,m=o.selected,v=o.selectedDates;return d?v==null?void 0:v.some(function(g){return a===Lt(g)}):!!m&&a===Lt(m)},r.onYearClick=function(a,o){var d=r.props.date;d!==void 0&&r.handleYearClick(Ud(Aa(d,o)),a)},r.onYearKeyDown=function(a,o){var d,m,v=a.key,g=r.props,w=g.date,b=g.yearItemNumber,_=g.handleOnKeyDown;if(v!==Ke.Tab&&a.preventDefault(),!r.props.disabledKeyboardNavigation)switch(v){case Ke.Enter:if(r.props.selected==null)break;r.onYearClick(a,o),(m=(d=r.props).setPreSelection)===null||m===void 0||m.call(d,r.props.selected);break;case Ke.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(o+1,hi(r.props.preSelection,1));break;case Ke.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(o-1,kc(r.props.preSelection,1));break;case Ke.ArrowUp:{if(w===void 0||b===void 0||r.props.preSelection==null)break;var E=eo(w,b).startPeriod,T=h3,I=o-T;if(I<E){var k=b%T;o>=E&&o<E+k?T=k:T+=k,I=o-T}r.handleYearNavigation(I,kc(r.props.preSelection,T));break}case Ke.ArrowDown:{if(w===void 0||b===void 0||r.props.preSelection==null)break;var S=eo(w,b).endPeriod,T=h3,I=o+T;if(I>S){var k=b%T;o<=S&&o>S-k?T=k:T+=k,I=o+T}r.handleYearNavigation(I,hi(r.props.preSelection,T));break}}_&&_(a)},r.getYearClassNames=function(a){var o=r.props,d=o.date,m=o.minDate,v=o.maxDate,g=o.excludeDates,w=o.includeDates,b=o.filterDate,_=o.yearClassName;return kn("react-datepicker__year-text","react-datepicker__year-".concat(a),d?_==null?void 0:_(Aa(d,a)):void 0,{"react-datepicker__year-text--selected":r.isSelectedYear(a),"react-datepicker__year-text--disabled":(m||v||g||w||b)&&Mh(a,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(a),"react-datepicker__year-text--range-start":r.isRangeStart(a),"react-datepicker__year-text--range-end":r.isRangeEnd(a),"react-datepicker__year-text--in-range":r.isInRange(a),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(a),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(a),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(a),"react-datepicker__year-text--today":r.isCurrentYear(a)})},r.getYearTabIndex=function(a){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var o=Lt(r.props.preSelection),d=Mh(a,r.props);return a===o&&!d?"0":"-1"},r.getYearContent=function(a){return r.props.renderYearContent?r.props.renderYearContent(a):a},r}return n.prototype.render=function(){var t=this,r=[],a=this.props,o=a.date,d=a.yearItemNumber,m=a.onYearMouseEnter,v=a.onYearMouseLeave;if(o===void 0)return null;for(var g=eo(o,d),w=g.startPeriod,b=g.endPeriod,_=function(I){r.push(ge.createElement("div",{ref:E.YEAR_REFS[I-w],onClick:function(k){t.onYearClick(k,I)},onKeyDown:function(k){o5(k)&&(k.preventDefault(),k.key=Ke.Enter),t.onYearKeyDown(k,I)},tabIndex:Number(E.getYearTabIndex(I)),className:E.getYearClassNames(I),onMouseEnter:E.props.usePointerEvent?void 0:function(k){return m(k,I)},onPointerEnter:E.props.usePointerEvent?function(k){return m(k,I)}:void 0,onMouseLeave:E.props.usePointerEvent?void 0:function(k){return v(k,I)},onPointerLeave:E.props.usePointerEvent?function(k){return v(k,I)}:void 0,key:I,"aria-current":E.isCurrentYear(I)?"date":void 0},E.getYearContent(I)))},E=this,T=w;T<=b;T++)_(T);return ge.createElement("div",{className:"react-datepicker__year"},ge.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},n}(M.Component);function jB(e,n,t,r){for(var a=[],o=0;o<2*n+1;o++){var d=e+n-o,m=!0;t&&(m=Lt(t)<=d),r&&m&&(m=Lt(r)>=d),m&&a.push(d)}return a}var CB=function(e){gr(n,e);function n(t){var r=e.call(this,t)||this;r.renderOptions=function(){var m=r.props.year,v=r.state.yearsList.map(function(b){return ge.createElement("div",{className:m===b?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:b,onClick:r.onChange.bind(r,b),"aria-selected":m===b?"true":void 0},m===b?ge.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",b)}),g=r.props.minDate?Lt(r.props.minDate):null,w=r.props.maxDate?Lt(r.props.maxDate):null;return(!w||!r.state.yearsList.find(function(b){return b===w}))&&v.unshift(ge.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},ge.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!g||!r.state.yearsList.find(function(b){return b===g}))&&v.push(ge.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},ge.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),v},r.onChange=function(m){r.props.onChange(m)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(m){var v=r.state.yearsList.map(function(g){return g+m});r.setState({yearsList:v})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var a=t.yearDropdownItemNumber,o=t.scrollableYearDropdown,d=a||(o?10:5);return r.state={yearsList:jB(r.props.year,d,r.props.minDate,r.props.maxDate)},r.dropdownRef=M.createRef(),r}return n.prototype.componentDidMount=function(){var t=this.dropdownRef.current;if(t){var r=t.children?Array.from(t.children):null,a=r?r.find(function(o){return o.ariaSelected}):null;t.scrollTop=a&&a instanceof HTMLElement?a.offsetTop+(a.clientHeight-t.clientHeight)/2:(t.scrollHeight-t.clientHeight)/2}},n.prototype.render=function(){var t=kn({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return ge.createElement(Np,{className:t,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},n}(M.Component),_B=function(e){gr(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var r=t.props.minDate?Lt(t.props.minDate):1900,a=t.props.maxDate?Lt(t.props.maxDate):2100,o=[],d=r;d<=a;d++)o.push(ge.createElement("option",{key:d,value:d},d));return o},t.onSelectChange=function(r){t.onChange(parseInt(r.target.value))},t.renderSelectMode=function(){return ge.createElement("select",{value:t.props.year,className:"react-datepicker__year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(r){return ge.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(a){return t.toggleDropdown(a)}},ge.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),ge.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},t.props.year))},t.renderDropdown=function(){return ge.createElement(CB,Gt({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var r=t.state.dropdownVisible,a=[t.renderReadView(!r)];return r&&a.unshift(t.renderDropdown()),a},t.onChange=function(r){t.toggleDropdown(),r!==t.props.year&&t.props.onChange(r)},t.toggleDropdown=function(r){t.setState({dropdownVisible:!t.state.dropdownVisible},function(){t.props.adjustDateOnChange&&t.handleYearChange(t.props.date,r)})},t.handleYearChange=function(r,a){var o;(o=t.onSelect)===null||o===void 0||o.call(t,r,a),t.setOpen()},t.onSelect=function(r,a){var o,d;(d=(o=t.props).onSelect)===null||d===void 0||d.call(o,r,a)},t.setOpen=function(){var r,a;(a=(r=t.props).setOpen)===null||a===void 0||a.call(r,!0)},t}return n.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return ge.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},t)},n}(M.Component),EB=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],SB=function(e){var n=(e.className||"").split(/\s+/);return EB.some(function(t){return n.indexOf(t)>=0})},kB=function(e){gr(n,e);function n(t){var r=e.call(this,t)||this;return r.monthContainer=void 0,r.handleClickOutside=function(a){r.props.onClickOutside(a)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(a){var o,d;SB(a.target)&&((d=(o=r.props).onDropdownFocus)===null||d===void 0||d.call(o,a))},r.getDateInView=function(){var a=r.props,o=a.preSelection,d=a.selected,m=a.openToDate,v=a5(r.props),g=i5(r.props),w=sn(),b=m||d||o;return b||(v&&xl(w,v)?v:g&&xo(w,g)?g:w)},r.increaseMonth=function(){r.setState(function(a){var o=a.date;return{date:xa(o,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(a){var o=a.date;return{date:il(o,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(a,o,d){r.props.onSelect(a,o,d),r.props.setPreSelection&&r.props.setPreSelection(a)},r.handleDayMouseEnter=function(a){r.setState({selectingDate:a}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(a)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(a,o){r.setState({selectingDate:Aa(sn(),o)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(a,o)},r.handleYearMouseLeave=function(a,o){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(a,o)},r.handleYearChange=function(a){var o,d,m,v;(d=(o=r.props).onYearChange)===null||d===void 0||d.call(o,a),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(a),(v=(m=r.props).setOpen)===null||v===void 0||v.call(m,!0)),r.props.setPreSelection&&r.props.setPreSelection(a)},r.getEnabledPreSelectionDateForMonth=function(a){if(!Ys(a,r.props))return a;for(var o=gi(a),d=GF(a),m=r9(d,o),v=null,g=0;g<=m;g++){var w=pa(o,g);if(!Ys(w,r.props)){v=w;break}}return v},r.handleMonthChange=function(a){var o,d,m,v=(o=r.getEnabledPreSelectionDateForMonth(a))!==null&&o!==void 0?o:a;r.handleCustomMonthChange(v),r.props.adjustDateOnChange&&(r.props.onSelect(v),(m=(d=r.props).setOpen)===null||m===void 0||m.call(d,!0)),r.props.setPreSelection&&r.props.setPreSelection(v)},r.handleCustomMonthChange=function(a){var o,d;(d=(o=r.props).onMonthChange)===null||d===void 0||d.call(o,a),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(a){r.handleYearChange(a),r.handleMonthChange(a)},r.changeYear=function(a){r.setState(function(o){var d=o.date;return{date:Aa(d,Number(a))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(a){r.setState(function(o){var d=o.date;return{date:Hs(d,Number(a))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(a){r.setState(function(o){var d=o.date;return{date:Aa(Hs(d,Pr(a)),Lt(a))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(a){a===void 0&&(a=r.state.date);var o=ho(a,r.props.locale,r.props.calendarStartDay),d=[];return r.props.showWeekNumbers&&d.push(ge.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),d.concat([0,1,2,3,4,5,6].map(function(m){var v=pa(o,m),g=r.formatWeekday(v,r.props.locale),w=r.props.weekDayClassName?r.props.weekDayClassName(v):void 0;return ge.createElement("div",{key:m,"aria-label":An(v,"EEEE",r.props.locale),className:kn("react-datepicker__day-name",w)},g)}))},r.formatWeekday=function(a,o){return r.props.formatWeekDay?XF(a,r.props.formatWeekDay,o):r.props.useWeekdaysShort?ZF(a,o):KF(a,o)},r.decreaseYear=function(){r.setState(function(a){var o,d=a.date;return{date:kc(d,r.props.showYearPicker?(o=r.props.yearItemNumber)!==null&&o!==void 0?o:n.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var a,o,d;if(!r.props.renderCustomHeader){var m=(a=r.props.monthsShown)!==null&&a!==void 0?a:n.defaultProps.monthsShown,v=r.props.showPreviousMonths?m-1:0,g=(o=r.props.monthSelectedIn)!==null&&o!==void 0?o:v,w=il(r.state.date,g),b;switch(!0){case r.props.showMonthYearPicker:b=s3(r.state.date,r.props);break;case r.props.showYearPicker:b=rB(r.state.date,r.props);break;case r.props.showQuarterYearPicker:b=tB(r.state.date,r.props);break;default:b=n3(w,r.props);break}if(!(!((d=r.props.forceShowMonthNavigation)!==null&&d!==void 0?d:n.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&b||r.props.showTimeSelectOnly)){var _=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],E=["react-datepicker__navigation","react-datepicker__navigation--previous"],T=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(T=r.decreaseYear),b&&r.props.showDisabledMonthNavigation&&(E.push("react-datepicker__navigation--previous--disabled"),T=void 0);var I=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,k=r.props,S=k.previousMonthButtonLabel,A=S===void 0?n.defaultProps.previousMonthButtonLabel:S,O=k.previousYearButtonLabel,P=O===void 0?n.defaultProps.previousYearButtonLabel:O,$=r.props,L=$.previousMonthAriaLabel,F=L===void 0?typeof A=="string"?A:"Previous Month":L,W=$.previousYearAriaLabel,V=W===void 0?typeof P=="string"?P:"Previous Year":W;return ge.createElement("button",{type:"button",className:E.join(" "),onClick:T,onKeyDown:r.props.handleOnKeyDown,"aria-label":I?V:F},ge.createElement("span",{className:_.join(" ")},I?P:A))}}},r.increaseYear=function(){r.setState(function(a){var o,d=a.date;return{date:hi(d,r.props.showYearPicker?(o=r.props.yearItemNumber)!==null&&o!==void 0?o:n.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var a;if(!r.props.renderCustomHeader){var o;switch(!0){case r.props.showMonthYearPicker:o=a3(r.state.date,r.props);break;case r.props.showYearPicker:o=sB(r.state.date,r.props);break;case r.props.showQuarterYearPicker:o=nB(r.state.date,r.props);break;default:o=r3(r.state.date,r.props);break}if(!(!((a=r.props.forceShowMonthNavigation)!==null&&a!==void 0?a:n.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&o||r.props.showTimeSelectOnly)){var d=["react-datepicker__navigation","react-datepicker__navigation--next"],m=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&d.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&d.push("react-datepicker__navigation--next--with-today-button");var v=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(v=r.increaseYear),o&&r.props.showDisabledMonthNavigation&&(d.push("react-datepicker__navigation--next--disabled"),v=void 0);var g=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,w=r.props,b=w.nextMonthButtonLabel,_=b===void 0?n.defaultProps.nextMonthButtonLabel:b,E=w.nextYearButtonLabel,T=E===void 0?n.defaultProps.nextYearButtonLabel:E,I=r.props,k=I.nextMonthAriaLabel,S=k===void 0?typeof _=="string"?_:"Next Month":k,A=I.nextYearAriaLabel,O=A===void 0?typeof T=="string"?T:"Next Year":A;return ge.createElement("button",{type:"button",className:d.join(" "),onClick:v,onKeyDown:r.props.handleOnKeyDown,"aria-label":g?O:S},ge.createElement("span",{className:m.join(" ")},g?T:_))}}},r.renderCurrentMonth=function(a){a===void 0&&(a=r.state.date);var o=["react-datepicker__current-month"];return r.props.showYearDropdown&&o.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&o.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&o.push("react-datepicker__current-month--hasMonthYearDropdown"),ge.createElement("h2",{className:o.join(" ")},An(a,r.props.dateFormat,r.props.locale))},r.renderYearDropdown=function(a){if(a===void 0&&(a=!1),!(!r.props.showYearDropdown||a))return ge.createElement(_B,Gt({},n.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:Lt(r.state.date)}))},r.renderMonthDropdown=function(a){if(a===void 0&&(a=!1),!(!r.props.showMonthDropdown||a))return ge.createElement(gB,Gt({},n.defaultProps,r.props,{month:Pr(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(a){if(a===void 0&&(a=!1),!(!r.props.showMonthYearDropdown||a))return ge.createElement(wB,Gt({},n.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(a){r.props.onSelect(Kb(),a),r.props.setPreSelection&&r.props.setPreSelection(Kb())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return ge.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDefaultHeader=function(a){var o=a.monthDate,d=a.i;return ge.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(o),ge.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(d!==0),r.renderMonthYearDropdown(d!==0),r.renderYearDropdown(d!==0)),ge.createElement("div",{className:"react-datepicker__day-names"},r.header(o)))},r.renderCustomHeader=function(a){var o,d,m=a.monthDate,v=a.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var g=n3(r.state.date,r.props),w=r3(r.state.date,r.props),b=s3(r.state.date,r.props),_=a3(r.state.date,r.props),E=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return ge.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(d=(o=r.props).renderCustomHeader)===null||d===void 0?void 0:d.call(o,Gt(Gt({},r.state),{customHeaderCount:v,monthDate:m,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:g,nextMonthButtonDisabled:w,prevYearButtonDisabled:b,nextYearButtonDisabled:_})),E&&ge.createElement("div",{className:"react-datepicker__day-names"},r.header(m)))},r.renderYearHeader=function(a){var o=a.monthDate,d=r.props,m=d.showYearPicker,v=d.yearItemNumber,g=v===void 0?n.defaultProps.yearItemNumber:v,w=eo(o,g),b=w.startPeriod,_=w.endPeriod;return ge.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},m?"".concat(b," - ").concat(_):Lt(o))},r.renderHeader=function(a){var o=a.monthDate,d=a.i,m=d===void 0?0:d,v={monthDate:o,i:m};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(v);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(v);default:return r.renderDefaultHeader(v)}},r.renderMonths=function(){var a,o;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var d=[],m=(a=r.props.monthsShown)!==null&&a!==void 0?a:n.defaultProps.monthsShown,v=r.props.showPreviousMonths?m-1:0,g=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?hi(r.state.date,v):il(r.state.date,v),w=(o=r.props.monthSelectedIn)!==null&&o!==void 0?o:v,b=0;b<m;++b){var _=b-w+v,E=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?hi(g,_):xa(g,_),T="month-".concat(b),I=b<m-1,k=b>0;d.push(ge.createElement("div",{key:T,ref:function(S){r.monthContainer=S??void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:E,i:b}),ge.createElement(mB,Gt({},n.defaultProps,r.props,{containerRef:r.containerRef,ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:E,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:b,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:I,monthShowsDuplicateDaysStart:k}))))}return d}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return ge.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),ge.createElement(NB,Gt({},n.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return ge.createElement(bB,Gt({},n.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var a=r.props.selected?new Date(r.props.selected):void 0,o=a&&jp(a)&&!!r.props.selected,d=o?"".concat(o3(a.getHours()),":").concat(o3(a.getMinutes())):"";if(r.props.showTimeInput)return ge.createElement(dB,Gt({},n.defaultProps,r.props,{date:a,timeString:d,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var a,o=eo(r.state.date,(a=r.props.yearItemNumber)!==null&&a!==void 0?a:n.defaultProps.yearItemNumber),d=o.startPeriod,m=o.endPeriod,v;return r.props.showYearPicker?v="".concat(d," - ").concat(m):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?v=Lt(r.state.date):v="".concat(I2(Pr(r.state.date),r.props.locale)," ").concat(Lt(r.state.date)),ge.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&v)},r.renderChildren=function(){if(r.props.children)return ge.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=M.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(n,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Pu}},enumerable:!1,configurable:!0}),n.prototype.componentDidMount=function(){var t=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){t.setState({monthContainer:t.monthContainer})}())},n.prototype.componentDidUpdate=function(t){var r=this;if(this.props.preSelection&&(!Qt(this.props.preSelection,t.preSelection)||this.props.monthSelectedIn!==t.monthSelectedIn)){var a=!Yr(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return a&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!Qt(this.props.openToDate,t.openToDate)&&this.setState({date:this.props.openToDate})},n.prototype.render=function(){var t=this.props.container||qF;return ge.createElement(Np,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},ge.createElement("div",{style:{display:"contents"},ref:this.containerRef},ge.createElement(t,{className:kn("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},n}(M.Component),AB=function(e){var n=e.icon,t=e.className,r=t===void 0?"":t,a=e.onClick,o="react-datepicker__calendar-icon";if(typeof n=="string")return ge.createElement("i",{className:"".concat(o," ").concat(n," ").concat(r),"aria-hidden":"true",onClick:a});if(ge.isValidElement(n)){var d=n;return ge.cloneElement(d,{className:"".concat(d.props.className||""," ").concat(o," ").concat(r),onClick:function(m){typeof d.props.onClick=="function"&&d.props.onClick(m),typeof a=="function"&&a(m)}})}return ge.createElement("svg",{className:"".concat(o," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:a},ge.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},l5=function(e){gr(n,e);function n(t){var r=e.call(this,t)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return n.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},n.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},n.prototype.render=function(){return xT.createPortal(this.props.children,this.el)},n}(M.Component),TB="[tabindex], a, button, input, select, textarea",DB=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},c5=function(e){gr(n,e);function n(t){var r=e.call(this,t)||this;return r.getTabChildren=function(){var a;return Array.prototype.slice.call((a=r.tabLoopRef.current)===null||a===void 0?void 0:a.querySelectorAll(TB),1,-1).filter(DB)},r.handleFocusStart=function(){var a=r.getTabChildren();a&&a.length>1&&a[a.length-1].focus()},r.handleFocusEnd=function(){var a=r.getTabChildren();a&&a.length>1&&a[0].focus()},r.tabLoopRef=M.createRef(),r}return n.prototype.render=function(){var t;return((t=this.props.enableTabLoop)!==null&&t!==void 0?t:n.defaultProps.enableTabLoop)?ge.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},ge.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,ge.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},n.defaultProps={enableTabLoop:!0},n}(M.Component);function IB(e){var n=function(t){var r,a=typeof t.hidePopper=="boolean"?t.hidePopper:!0,o=M.useRef(null),d=zF(Gt({open:!a,whileElementsMounted:yF,placement:t.popperPlacement,middleware:La([kF({padding:15}),SF(10),AF({element:o})],(r=t.popperModifiers)!==null&&r!==void 0?r:[],!0)},t.popperProps)),m=Gt(Gt({},t),{hidePopper:a,popperProps:Gt(Gt({},d),{arrowRef:o})});return ge.createElement(e,Gt({},m))};return n}var MB=function(e){gr(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(n,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),n.prototype.render=function(){var t=this.props,r=t.className,a=t.wrapperClassName,o=t.hidePopper,d=o===void 0?n.defaultProps.hidePopper:o,m=t.popperComponent,v=t.targetComponent,g=t.enableTabLoop,w=t.popperOnKeyDown,b=t.portalId,_=t.portalHost,E=t.popperProps,T=t.showArrow,I=void 0;if(!d){var k=kn("react-datepicker-popper",r);I=ge.createElement(c5,{enableTabLoop:g},ge.createElement("div",{ref:E.refs.setFloating,style:E.floatingStyles,className:k,"data-placement":E.placement,onKeyDown:w},m,T&&ge.createElement(RF,{ref:E.arrowRef,context:E.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(I=M.createElement(this.props.popperContainer,{},I)),b&&!d&&(I=ge.createElement(l5,{portalId:b,portalHost:_},I));var S=kn("react-datepicker-wrapper",a);return ge.createElement(ge.Fragment,null,ge.createElement("div",{ref:E.refs.setReference,className:S},v),I)},n}(M.Component),RB=IB(MB),f3="react-datepicker-ignore-onclickoutside";function OB(e,n){return e&&n?Pr(e)!==Pr(n)||Lt(e)!==Lt(n):e!==n}var p1="Date input not valid.",d5=function(e){gr(n,e);function n(t){var r=e.call(this,t)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:sn()},r.modifyHolidays=function(){var a;return(a=r.props.holidays)===null||a===void 0?void 0:a.reduce(function(o,d){var m=new Date(d.date);return jp(m)?La(La([],o,!0),[Gt(Gt({},d),{date:m})],!1):o},[])},r.calcInitialState=function(){var a,o=r.getPreSelection(),d=a5(r.props),m=i5(r.props),v=d&&xl(o,Ih(d))?d:m&&xo(o,Zb(m))?m:o;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(a=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&a!==void 0?a:v,highlightDates:i3(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.resetHiddenStatus=function(){r.setState(Gt(Gt({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(Gt(Gt({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.setFocus=function(){var a,o;(o=(a=r.input)===null||a===void 0?void 0:a.focus)===null||o===void 0||o.call(a,{preventScroll:!0})},r.setBlur=function(){var a,o;(o=(a=r.input)===null||a===void 0?void 0:a.blur)===null||o===void 0||o.call(a),r.cancelFocusInput()},r.deferBlur=function(){requestAnimationFrame(function(){r.setBlur()})},r.setOpen=function(a,o){o===void 0&&(o=!1),r.setState({open:a,preSelection:a&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:m1},function(){a||r.setState(function(d){return{focused:o?d.focused:!1}},function(){!o&&r.deferBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return fi(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(a){var o,d,m=r.state.wasHidden,v=m?r.state.open:!0;m&&r.resetHiddenStatus(),r.state.preventFocus||((d=(o=r.props).onFocus)===null||d===void 0||d.call(o,a),v&&!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.handleBlur=function(a){var o,d;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((d=(o=r.props).onBlur)===null||d===void 0||d.call(o,a)),r.state.open&&r.props.open===!1&&r.setOpen(!1),r.setState({focused:!1})},r.handleCalendarClickOutside=function(a){var o,d;r.props.inline||r.setOpen(!1),(d=(o=r.props).onClickOutside)===null||d===void 0||d.call(o,a),r.props.withPortal&&a.preventDefault()},r.handleChange=function(){for(var a,o,d,m,v,g=[],w=0;w<arguments.length;w++)g[w]=arguments[w];var b=g[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,g),!b||typeof b.isDefaultPrevented!="function"||b.isDefaultPrevented()))){r.setState({inputValue:(b==null?void 0:b.target)instanceof HTMLInputElement?b.target.value:null,lastPreSelectChange:LB});var _=r.props,E=_.selectsRange,T=_.startDate,I=_.endDate,k=(a=r.props.dateFormat)!==null&&a!==void 0?a:n.defaultProps.dateFormat,S=(o=r.props.strictParsing)!==null&&o!==void 0?o:n.defaultProps.strictParsing,A=(b==null?void 0:b.target)instanceof HTMLInputElement?b.target.value:"";if(E){var O=A.split(k.includes("-")?n5:"-",2).map(function(oe){return oe.trim()}),P=O[0],$=O[1],L=u1(P??"",k,r.props.locale,S),F=u1($??"",k,r.props.locale,S),W=(T==null?void 0:T.getTime())!==(L==null?void 0:L.getTime()),V=(I==null?void 0:I.getTime())!==(F==null?void 0:F.getTime());if(!W&&!V||L&&Ys(L,r.props)||F&&Ys(F,r.props))return;(m=(d=r.props).onChange)===null||m===void 0||m.call(d,[L,F],b)}else{var re=u1(A,k,r.props.locale,S,(v=r.props.selected)!==null&&v!==void 0?v:void 0);(re||!A)&&r.setSelected(re,b,!0)}}},r.handleSelect=function(a,o,d){if(!r.props.readOnly){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(o),r.setSelected(a,o,!1,d),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(a);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var m=r.props,v=m.startDate,g=m.endDate;v&&!g&&(r.props.swapRange||!d3(a,v))&&r.setOpen(!1)}}},r.setSelected=function(a,o,d,m){var v,g,w=a;if(r.props.showYearPicker){if(w!==null&&Mh(Lt(w),r.props))return}else if(r.props.showMonthYearPicker){if(w!==null&&s5(w,r.props))return}else if(w!==null&&Ys(w,r.props))return;var b=r.props,_=b.onChange,E=b.selectsRange,T=b.startDate,I=b.endDate,k=b.selectsMultiple,S=b.selectedDates,A=b.minTime,O=b.swapRange;if(!nl(r.props.selected,w)||r.props.allowSameDay||E||k)if(w!==null&&(r.props.selected&&(!d||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(w=h1(w,{hour:pi(r.props.selected),minute:mi(r.props.selected),second:uo(r.props.selected)})),!d&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&A&&(w=h1(w,{hour:A.getHours(),minute:A.getMinutes(),second:A.getSeconds()})),r.props.inline||r.setState({preSelection:w}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:m})),E){var P=!T&&!I,$=T&&!I,L=T&&I;P?_==null||_([w,null],o):$&&(w===null?_==null||_([null,null],o):d3(w,T)?O?_==null||_([w,T],o):_==null||_([w,null],o):_==null||_([T,w],o)),L&&(_==null||_([w,null],o))}else if(k){if(w!==null)if(!(S!=null&&S.length))_==null||_([w],o);else{var F=S.some(function(V){return Qt(V,w)});if(F){var W=S.filter(function(V){return!Qt(V,w)});_==null||_(W,o)}else _==null||_(La(La([],S,!0),[w],!1),o)}}else _==null||_(w,o);d||((g=(v=r.props).onSelect)===null||g===void 0||g.call(v,w,o),r.setState({inputValue:null}))},r.setPreSelection=function(a){if(!r.props.readOnly){var o=fi(r.props.minDate),d=fi(r.props.maxDate),m=!0;if(a){var v=Ih(a);if(o&&d)m=zd(a,r.props.minDate,r.props.maxDate);else if(o){var g=Ih(r.props.minDate);m=xo(a,g)||nl(v,g)}else if(d){var w=Zb(r.props.maxDate);m=xl(a,w)||nl(v,w)}}m&&r.setState({preSelection:a})}},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(a){var o,d;if(!(r.props.selectsRange||r.props.selectsMultiple)){var m=r.props.selected?r.props.selected:r.getPreSelection(),v=r.props.selected?a:h1(m,{hour:pi(a),minute:mi(a)});r.setState({preSelection:v}),(d=(o=r.props).onChange)===null||d===void 0||d.call(o,v),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var a,o;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(o=(a=r.props).onInputClick)===null||o===void 0||o.call(a)},r.onInputKeyDown=function(a){var o,d,m,v,g,w;(d=(o=r.props).onKeyDown)===null||d===void 0||d.call(o,a);var b=a.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(b===Ke.ArrowDown||b===Ke.ArrowUp||b===Ke.Enter)&&((m=r.onInputClick)===null||m===void 0||m.call(r));return}if(r.state.open){if(b===Ke.ArrowDown||b===Ke.ArrowUp){a.preventDefault();var _=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',E=((v=r.calendar)===null||v===void 0?void 0:v.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(_);E instanceof HTMLElement&&E.focus({preventScroll:!0});return}var T=sn(r.state.preSelection);b===Ke.Enter?(a.preventDefault(),a.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===m1?(r.handleSelect(T,a),!r.props.shouldCloseOnSelect&&r.setPreSelection(T)):r.setOpen(!1)):b===Ke.Escape?(a.preventDefault(),a.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):b===Ke.Tab&&r.setOpen(!1),r.inputOk()||(w=(g=r.props).onInputError)===null||w===void 0||w.call(g,{code:1,msg:p1})}},r.onPortalKeyDown=function(a){var o=a.key;o===Ke.Escape&&(a.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(a){var o,d,m,v,g,w,b=r.props,_=b.minDate,E=b.maxDate,T=b.disabledKeyboardNavigation,I=b.showWeekPicker,k=b.shouldCloseOnSelect,S=b.locale,A=b.calendarStartDay,O=b.adjustDateOnChange,P=b.inline;if((d=(o=r.props).onKeyDown)===null||d===void 0||d.call(o,a),!T){var $=a.key,L=a.shiftKey,F=sn(r.state.preSelection),W=function(ne,Q){var me=Q;switch(ne){case Ke.ArrowRight:me=I?xf(Q,1):pa(Q,1);break;case Ke.ArrowLeft:me=I?Tb(Q,1):oL(Q,1);break;case Ke.ArrowUp:me=Tb(Q,1);break;case Ke.ArrowDown:me=xf(Q,1);break;case Ke.PageUp:me=L?kc(Q,1):il(Q,1);break;case Ke.PageDown:me=L?hi(Q,1):xa(Q,1);break;case Ke.Home:me=ho(Q,S,A);break;case Ke.End:me=QF(Q);break}return me},V=function(ne,Q){for(var me=40,fe=ne,Ie=!1,ue=0,Ye=W(ne,Q);!Ie;){if(ue>=me){Ye=Q;break}_&&Ye<_&&(fe=Ke.ArrowRight,Ye=Ys(_,r.props)?W(fe,Ye):_),E&&Ye>E&&(fe=Ke.ArrowLeft,Ye=Ys(E,r.props)?W(fe,Ye):E),Ys(Ye,r.props)?((fe===Ke.PageUp||fe===Ke.Home)&&(fe=Ke.ArrowRight),(fe===Ke.PageDown||fe===Ke.End)&&(fe=Ke.ArrowLeft),Ye=W(fe,Ye)):Ie=!0,ue++}return Ye};if($===Ke.Enter){a.preventDefault(),r.handleSelect(F,a),!k&&r.setPreSelection(F);return}else if($===Ke.Escape){a.preventDefault(),r.setOpen(!1),r.inputOk()||(v=(m=r.props).onInputError)===null||v===void 0||v.call(m,{code:1,msg:p1});return}var re=null;switch($){case Ke.ArrowLeft:case Ke.ArrowRight:case Ke.ArrowUp:case Ke.ArrowDown:case Ke.PageUp:case Ke.PageDown:case Ke.Home:case Ke.End:re=V($,F);break}if(!re){(w=(g=r.props).onInputError)===null||w===void 0||w.call(g,{code:1,msg:p1});return}if(a.preventDefault(),r.setState({lastPreSelectChange:m1}),O&&r.setSelected(re),r.setPreSelection(re),P){var oe=Pr(F),ee=Pr(re),he=Lt(F),ve=Lt(re);oe!==ee||he!==ve?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}},r.onPopperKeyDown=function(a){var o=a.key;o===Ke.Escape&&(a.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1))},r.onClearClick=function(a){a&&a.preventDefault&&a.preventDefault(),r.sendFocusBackToInput();var o=r.props,d=o.selectsRange,m=o.onChange;d?m==null||m([null,null],a):m==null||m(null,a),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(a){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(a.target===document||a.target===document.documentElement||a.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(a)&&r.setOpen(!1)},r.renderCalendar=function(){var a,o;return!r.props.inline&&!r.isCalendarOpen()?null:ge.createElement(kB,Gt({showMonthYearDropdown:void 0,ref:function(d){r.calendar=d}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(a=r.props.dateFormatCalendar)!==null&&a!==void 0?a:n.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:iB(r.modifyHolidays()),outsideClickIgnoreClass:f3,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(o=r.props.dropdownMode)!==null&&o!==void 0?o:n.defaultProps.dropdownMode}),r.props.children)},r.renderAriaLiveRegion=function(){var a=r.props,o=a.dateFormat,d=o===void 0?n.defaultProps.dateFormat:o,m=a.locale,v=r.props.showTimeInput||r.props.showTimeSelect,g=v?"PPPPp":"PPPP",w;return r.props.selectsRange?w="Selected start date: ".concat(Ws(r.props.startDate,{dateFormat:g,locale:m}),". ").concat(r.props.endDate?"End date: "+Ws(r.props.endDate,{dateFormat:g,locale:m}):""):r.props.showTimeSelectOnly?w="Selected time: ".concat(Ws(r.props.selected,{dateFormat:d,locale:m})):r.props.showYearPicker?w="Selected year: ".concat(Ws(r.props.selected,{dateFormat:"yyyy",locale:m})):r.props.showMonthYearPicker?w="Selected month: ".concat(Ws(r.props.selected,{dateFormat:"MMMM yyyy",locale:m})):r.props.showQuarterYearPicker?w="Selected quarter: ".concat(Ws(r.props.selected,{dateFormat:"yyyy, QQQ",locale:m})):w="Selected date: ".concat(Ws(r.props.selected,{dateFormat:g,locale:m})),ge.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},w)},r.renderDateInput=function(){var a,o,d,m=kn(r.props.className,(a={},a[f3]=r.state.open,a)),v=r.props.customInput||ge.createElement("input",{type:"text"}),g=r.props.customInputRef||"ref",w=r.props,b=w.dateFormat,_=b===void 0?n.defaultProps.dateFormat:b,E=w.locale,T=typeof r.props.value=="string"?r.props.value:typeof r.state.inputValue=="string"?r.state.inputValue:r.props.selectsRange?HF(r.props.startDate,r.props.endDate,{dateFormat:_,locale:E}):r.props.selectsMultiple?VF((d=r.props.selectedDates)!==null&&d!==void 0?d:[],{dateFormat:_,locale:E}):Ws(r.props.selected,{dateFormat:_,locale:E});return M.cloneElement(v,(o={},o[g]=function(I){r.input=I},o.value=T,o.onBlur=r.handleBlur,o.onChange=r.handleChange,o.onClick=r.onInputClick,o.onFocus=r.handleFocus,o.onKeyDown=r.onInputKeyDown,o.id=r.props.id,o.name=r.props.name,o.form=r.props.form,o.autoFocus=r.props.autoFocus,o.placeholder=r.props.placeholderText,o.disabled=r.props.disabled,o.autoComplete=r.props.autoComplete,o.className=kn(v.props.className,m),o.title=r.props.title,o.readOnly=r.props.readOnly,o.required=r.props.required,o.tabIndex=r.props.tabIndex,o["aria-describedby"]=r.props.ariaDescribedBy,o["aria-invalid"]=r.props.ariaInvalid,o["aria-labelledby"]=r.props.ariaLabelledBy,o["aria-required"]=r.props.ariaRequired,o))},r.renderClearButton=function(){var a=r.props,o=a.isClearable,d=a.disabled,m=a.selected,v=a.startDate,g=a.endDate,w=a.clearButtonTitle,b=a.clearButtonClassName,_=b===void 0?"":b,E=a.ariaLabelClose,T=E===void 0?"Close":E,I=a.selectedDates,k=a.readOnly;return o&&!k&&(m!=null||v!=null||g!=null||I!=null&&I.length)?ge.createElement("button",{type:"button",className:kn("react-datepicker__close-icon",_,{"react-datepicker__close-icon--disabled":d}),disabled:d,"aria-label":T,onClick:r.onClearClick,title:w,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(n,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Pu,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),n.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},n.prototype.componentDidUpdate=function(t,r){var a,o,d,m;t.inline&&OB(t.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&t.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),t.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:i3(this.props.highlightDates)}),!r.focused&&!nl(t.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((o=(a=this.props).onCalendarOpen)===null||o===void 0||o.call(a)),r.open===!0&&this.state.open===!1&&((m=(d=this.props).onCalendarClose)===null||m===void 0||m.call(d)))},n.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},n.prototype.renderInputContainer=function(){var t=this.props,r=t.showIcon,a=t.icon,o=t.calendarIconClassname,d=t.calendarIconClassName,m=t.toggleCalendarOnIconClick,v=this.state.open;return o&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),ge.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&ge.createElement(AB,Gt({icon:a,className:kn(d,!d&&o,v&&"react-datepicker-ignore-onclickoutside")},m?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},n.prototype.render=function(){var t=this.renderCalendar();if(this.props.inline)return t;if(this.props.withPortal){var r=this.state.open?ge.createElement(c5,{enableTabLoop:this.props.enableTabLoop},ge.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},t)):null;return this.state.open&&this.props.portalId&&(r=ge.createElement(l5,Gt({portalId:this.props.portalId},this.props),r)),ge.createElement("div",null,this.renderInputContainer(),r)}return ge.createElement(RB,Gt({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:t,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},n}(M.Component),LB="input",m1="navigate";var Tf={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Tf.exports;(function(e,n){(function(){var t,r="4.17.21",a=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",d="Expected a function",m="Invalid `variable` option passed into `_.template`",v="__lodash_hash_undefined__",g=500,w="__lodash_placeholder__",b=1,_=2,E=4,T=1,I=2,k=1,S=2,A=4,O=8,P=16,$=32,L=64,F=128,W=256,V=512,re=30,oe="...",ee=800,he=16,ve=1,ne=2,Q=3,me=1/0,fe=9007199254740991,Ie=17976931348623157e292,ue=0/0,Ye=4294967295,we=Ye-1,Ve=Ye>>>1,Be=[["ary",F],["bind",k],["bindKey",S],["curry",O],["curryRight",P],["flip",V],["partial",$],["partialRight",L],["rearg",W]],ct="[object Arguments]",Ae="[object Array]",Se="[object AsyncFunction]",nt="[object Boolean]",qt="[object Date]",bt="[object DOMException]",Pt="[object Error]",Tt="[object Function]",Te="[object GeneratorFunction]",Ne="[object Map]",Ze="[object Number]",be="[object Null]",De="[object Object]",$e="[object Promise]",Ge="[object Proxy]",ae="[object RegExp]",ye="[object Set]",ie="[object String]",He="[object Symbol]",Ee="[object Undefined]",Fe="[object WeakMap]",ht="[object WeakSet]",Et="[object ArrayBuffer]",en="[object DataView]",Rt="[object Float32Array]",Cr="[object Float64Array]",Br="[object Int8Array]",Ts="[object Int16Array]",tn="[object Int32Array]",te="[object Uint8Array]",Je="[object Uint8ClampedArray]",ft="[object Uint16Array]",It="[object Uint32Array]",on=/\b__p \+= '';/g,Ur=/\b(__p \+=) '' \+/g,Co=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Wt=/&(?:amp|lt|gt|quot|#39);/g,ya=/[&<>"']/g,Uu=RegExp(Wt.source),zu=RegExp(ya.source),hs=/<%-([\s\S]+?)%>/g,Yc=/<%([\s\S]+?)%>/g,nr=/<%=([\s\S]+?)%>/g,Ai=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jl=/^\w*$/,Ds=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qc=/[\\^$.*+?()[\]{}|]/g,qa=RegExp(Qc.source),_o=/^\s+/,_r=/\s/,Wa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Jr=/\{\n\/\* \[wrapped with (.+)\] \*/,et=/,? & /,Ti=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Gc=/[()=,{}\[\]\/\s]/,Er=/\\(\\)?/g,Di=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Eo=/\w*$/,Cl=/^[-+]0x[0-9a-f]+$/i,Is=/^0b[01]+$/i,Cp=/^\[object .+?Constructor\]$/,_p=/^0o[0-7]+$/i,Ms=/^(?:0|[1-9]\d*)$/,vr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ln=/($^)/,qu=/['\n\r\u2028\u2029\\]/g,fs="\\ud800-\\udfff",Xc="\\u0300-\\u036f",Pe="\\ufe20-\\ufe2f",Ep="\\u20d0-\\u20ff",yn=Xc+Pe+Ep,Ha="\\u2700-\\u27bf",Wu="a-z\\xdf-\\xf6\\xf8-\\xff",Kt="\\xac\\xb1\\xd7\\xf7",Yt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ft="\\u2000-\\u206f",Kc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_l="A-Z\\xc0-\\xd6\\xd8-\\xde",El="\\ufe0e\\ufe0f",Ln=Kt+Yt+Ft+Kc,Rs="[']",Sp="["+fs+"]",jn="["+Ln+"]",ps="["+yn+"]",Hu="\\d+",Ii="["+Ha+"]",cn="["+Wu+"]",rr="[^"+fs+Ln+Hu+Ha+Wu+_l+"]",xe="\\ud83c[\\udffb-\\udfff]",Z="(?:"+ps+"|"+xe+")",dt="[^"+fs+"]",Pn="(?:\\ud83c[\\udde6-\\uddff]){2}",Sr="[\\ud800-\\udbff][\\udc00-\\udfff]",Mi="["+_l+"]",Sl="\\u200d",zr="(?:"+cn+"|"+rr+")",pt="(?:"+Mi+"|"+rr+")",gn="(?:"+Rs+"(?:d|ll|m|re|s|t|ve))?",Zc="(?:"+Rs+"(?:D|LL|M|RE|S|T|VE))?",Vu=Z+"?",kl="["+El+"]?",Al="(?:"+Sl+"(?:"+[dt,Pn,Sr].join("|")+")"+kl+Vu+")*",Jc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kp="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Vn=kl+Vu+Al,So="(?:"+[Ii,Pn,Sr].join("|")+")"+Vn,wa="(?:"+[dt+ps+"?",ps,Pn,Sr,Sp].join("|")+")",gt=RegExp(Rs,"g"),Ap=RegExp(ps,"g"),Ct=RegExp(xe+"(?="+xe+")|"+wa+Vn,"g"),sr=RegExp([Mi+"?"+cn+"+"+gn+"(?="+[jn,Mi,"$"].join("|")+")",pt+"+"+Zc+"(?="+[jn,Mi+zr,"$"].join("|")+")",Mi+"?"+zr+"+"+gn,Mi+"+"+Zc,kp,Jc,Hu,So].join("|"),"g"),Tp=RegExp("["+Sl+fs+yn+El+"]"),ed=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$u=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Va=-1,mn={};mn[Rt]=mn[Cr]=mn[Br]=mn[Ts]=mn[tn]=mn[te]=mn[Je]=mn[ft]=mn[It]=!0,mn[ct]=mn[Ae]=mn[Et]=mn[nt]=mn[en]=mn[qt]=mn[Pt]=mn[Tt]=mn[Ne]=mn[Ze]=mn[De]=mn[ae]=mn[ye]=mn[ie]=mn[Fe]=!1;var Zt={};Zt[ct]=Zt[Ae]=Zt[Et]=Zt[en]=Zt[nt]=Zt[qt]=Zt[Rt]=Zt[Cr]=Zt[Br]=Zt[Ts]=Zt[tn]=Zt[Ne]=Zt[Ze]=Zt[De]=Zt[ae]=Zt[ye]=Zt[ie]=Zt[He]=Zt[te]=Zt[Je]=Zt[ft]=Zt[It]=!0,Zt[Pt]=Zt[Tt]=Zt[Fe]=!1;var ko={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Ao={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Yu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},To={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Do=parseFloat,kr=parseInt,td=typeof Da=="object"&&Da&&Da.Object===Object&&Da,Qu=typeof self=="object"&&self&&self.Object===Object&&self,Zn=td||Qu||Function("return this")(),nd=n&&!n.nodeType&&n,$a=nd&&!0&&e&&!e.nodeType&&e,Gu=$a&&$a.exports===nd,Jt=Gu&&td.process,qr=function(){try{var q=$a&&$a.require&&$a.require("util").types;return q||Jt&&Jt.binding&&Jt.binding("util")}catch{}}(),Io=qr&&qr.isArrayBuffer,Js=qr&&qr.isDate,Xu=qr&&qr.isMap,je=qr&&qr.isRegExp,kt=qr&&qr.isSet,Jn=qr&&qr.isTypedArray;function ur(q,G,K){switch(K.length){case 0:return q.call(G);case 1:return q.call(G,K[0]);case 2:return q.call(G,K[0],K[1]);case 3:return q.call(G,K[0],K[1],K[2])}return q.apply(G,K)}function Ku(q,G,K,le){for(var Ce=-1,Me=q==null?0:q.length;++Ce<Me;){var Re=q[Ce];G(le,Re,K(Re),q)}return le}function es(q,G){for(var K=-1,le=q==null?0:q.length;++K<le&&G(q[K],K,q)!==!1;);return q}function Dp(q,G){for(var K=q==null?0:q.length;K--&&G(q[K],K,q)!==!1;);return q}function Zu(q,G){for(var K=-1,le=q==null?0:q.length;++K<le;)if(!G(q[K],K,q))return!1;return!0}function Os(q,G){for(var K=-1,le=q==null?0:q.length,Ce=0,Me=[];++K<le;){var Re=q[K];G(Re,K,q)&&(Me[Ce++]=Re)}return Me}function Cn(q,G){var K=q==null?0:q.length;return!!K&&yr(q,G,0)>-1}function Mo(q,G,K){for(var le=-1,Ce=q==null?0:q.length;++le<Ce;)if(K(G,q[le]))return!0;return!1}function Nt(q,G){for(var K=-1,le=q==null?0:q.length,Ce=Array(le);++K<le;)Ce[K]=G(q[K],K,q);return Ce}function ms(q,G){for(var K=-1,le=G.length,Ce=q.length;++K<le;)q[Ce+K]=G[K];return q}function ea(q,G,K,le){var Ce=-1,Me=q==null?0:q.length;for(le&&Me&&(K=q[++Ce]);++Ce<Me;)K=G(K,q[Ce],Ce,q);return K}function dn(q,G,K,le){var Ce=q==null?0:q.length;for(le&&Ce&&(K=q[--Ce]);Ce--;)K=G(K,q[Ce],Ce,q);return K}function mt(q,G){for(var K=-1,le=q==null?0:q.length;++K<le;)if(G(q[K],K,q))return!0;return!1}var Ip=Il("length");function xn(q){return q.split("")}function Ya(q){return q.match(Ti)||[]}function Qa(q,G,K){var le;return K(q,function(Ce,Me,Re){if(G(Ce,Me,Re))return le=Me,!1}),le}function Tl(q,G,K,le){for(var Ce=q.length,Me=K+(le?1:-1);le?Me--:++Me<Ce;)if(G(q[Me],Me,q))return Me;return-1}function yr(q,G,K){return G===G?c(q,G,K):Tl(q,sd,K)}function rd(q,G,K,le){for(var Ce=K-1,Me=q.length;++Ce<Me;)if(le(q[Ce],G))return Ce;return-1}function sd(q){return q!==q}function Dl(q,G){var K=q==null?0:q.length;return K?Ro(q,G)/K:ue}function Il(q){return function(G){return G==null?t:G[q]}}function Ml(q){return function(G){return q==null?t:q[G]}}function Ju(q,G,K,le,Ce){return Ce(q,function(Me,Re,it){K=le?(le=!1,Me):G(K,Me,Re,it)}),K}function Ri(q,G){var K=q.length;for(q.sort(G);K--;)q[K]=q[K].value;return q}function Ro(q,G){for(var K,le=-1,Ce=q.length;++le<Ce;){var Me=G(q[le]);Me!==t&&(K=K===t?Me:K+Me)}return K}function ad(q,G){for(var K=-1,le=Array(q);++K<q;)le[K]=G(K);return le}function Oo(q,G){return Nt(G,function(K){return[K,q[K]]})}function e0(q){return q&&q.slice(0,y(q)+1).replace(_o,"")}function Fn(q){return function(G){return q(G)}}function Oi(q,G){return Nt(G,function(K){return q[K]})}function hr(q,G){return q.has(G)}function id(q,G){for(var K=-1,le=q.length;++K<le&&yr(G,q[K],0)>-1;);return K}function xs(q,G){for(var K=q.length;K--&&yr(G,q[K],0)>-1;);return K}function Mp(q,G){for(var K=q.length,le=0;K--;)q[K]===G&&++le;return le}var od=Ml(ko),Rp=Ml(Ao);function t0(q){return"\\"+To[q]}function Ls(q,G){return q==null?t:q[G]}function Li(q){return Tp.test(q)}function ld(q){return ed.test(q)}function Lo(q){for(var G,K=[];!(G=q.next()).done;)K.push(G.value);return K}function Bt(q){var G=-1,K=Array(q.size);return q.forEach(function(le,Ce){K[++G]=[Ce,le]}),K}function Po(q,G){return function(K){return q(G(K))}}function B(q,G){for(var K=-1,le=q.length,Ce=0,Me=[];++K<le;){var Re=q[K];(Re===G||Re===w)&&(q[K]=w,Me[Ce++]=K)}return Me}function i(q){var G=-1,K=Array(q.size);return q.forEach(function(le){K[++G]=le}),K}function l(q){var G=-1,K=Array(q.size);return q.forEach(function(le){K[++G]=[le,le]}),K}function c(q,G,K){for(var le=K-1,Ce=q.length;++le<Ce;)if(q[le]===G)return le;return-1}function h(q,G,K){for(var le=K+1;le--;)if(q[le]===G)return le;return le}function f(q){return Li(q)?C(q):Ip(q)}function x(q){return Li(q)?R(q):xn(q)}function y(q){for(var G=q.length;G--&&_r.test(q.charAt(G)););return G}var j=Ml(Yu);function C(q){for(var G=Ct.lastIndex=0;Ct.test(q);)++G;return G}function R(q){return q.match(Ct)||[]}function U(q){return q.match(sr)||[]}var H=function q(G){G=G==null?Zn:J.defaults(Zn.Object(),G,J.pick(Zn,$u));var K=G.Array,le=G.Date,Ce=G.Error,Me=G.Function,Re=G.Math,it=G.Object,jt=G.RegExp,Ar=G.String,_n=G.TypeError,ar=K.prototype,un=Me.prototype,En=it.prototype,fr=G["__core-js_shared__"],ta=un.toString,Ht=En.hasOwnProperty,Op=0,n0=function(){var u=/[^.]+$/.exec(fr&&fr.keys&&fr.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),r0=En.toString,B5=ta.call(it),U5=Zn._,z5=jt("^"+ta.call(Ht).replace(Qc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),s0=Gu?G.Buffer:t,Pi=G.Symbol,a0=G.Uint8Array,q2=s0?s0.allocUnsafe:t,i0=Po(it.getPrototypeOf,it),W2=it.create,H2=En.propertyIsEnumerable,o0=ar.splice,V2=Pi?Pi.isConcatSpreadable:t,cd=Pi?Pi.iterator:t,Fo=Pi?Pi.toStringTag:t,l0=function(){try{var u=Wo(it,"defineProperty");return u({},"",{}),u}catch{}}(),q5=G.clearTimeout!==Zn.clearTimeout&&G.clearTimeout,W5=le&&le.now!==Zn.Date.now&&le.now,H5=G.setTimeout!==Zn.setTimeout&&G.setTimeout,c0=Re.ceil,d0=Re.floor,Lp=it.getOwnPropertySymbols,V5=s0?s0.isBuffer:t,$2=G.isFinite,$5=ar.join,Y5=Po(it.keys,it),ir=Re.max,Tr=Re.min,Q5=le.now,G5=G.parseInt,Y2=Re.random,X5=ar.reverse,Pp=Wo(G,"DataView"),dd=Wo(G,"Map"),Fp=Wo(G,"Promise"),Rl=Wo(G,"Set"),ud=Wo(G,"WeakMap"),hd=Wo(it,"create"),u0=ud&&new ud,Ol={},K5=Ho(Pp),Z5=Ho(dd),J5=Ho(Fp),e6=Ho(Rl),t6=Ho(ud),h0=Pi?Pi.prototype:t,fd=h0?h0.valueOf:t,Q2=h0?h0.toString:t;function Y(u){if(Bn(u)&&!St(u)&&!(u instanceof Vt)){if(u instanceof Ps)return u;if(Ht.call(u,"__wrapped__"))return Gv(u)}return new Ps(u)}var Ll=function(){function u(){}return function(p){if(!Tn(p))return{};if(W2)return W2(p);u.prototype=p;var N=new u;return u.prototype=t,N}}();function f0(){}function Ps(u,p){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=t}Y.templateSettings={escape:hs,evaluate:Yc,interpolate:nr,variable:"",imports:{_:Y}},Y.prototype=f0.prototype,Y.prototype.constructor=Y,Ps.prototype=Ll(f0.prototype),Ps.prototype.constructor=Ps;function Vt(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ye,this.__views__=[]}function n6(){var u=new Vt(this.__wrapped__);return u.__actions__=ts(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=ts(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=ts(this.__views__),u}function r6(){if(this.__filtered__){var u=new Vt(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function s6(){var u=this.__wrapped__.value(),p=this.__dir__,N=St(u),D=p<0,z=N?u.length:0,X=x_(0,z,this.__views__),se=X.start,de=X.end,pe=de-se,Oe=D?de:se-1,Le=this.__iteratees__,Ue=Le.length,Xe=0,lt=Tr(pe,this.__takeCount__);if(!N||!D&&z==pe&&lt==pe)return vv(u,this.__actions__);var yt=[];e:for(;pe--&&Xe<lt;){Oe+=p;for(var Mt=-1,wt=u[Oe];++Mt<Ue;){var Ut=Le[Mt],$t=Ut.iteratee,ys=Ut.type,Vr=$t(wt);if(ys==ne)wt=Vr;else if(!Vr){if(ys==ve)continue e;break e}}yt[Xe++]=wt}return yt}Vt.prototype=Ll(f0.prototype),Vt.prototype.constructor=Vt;function Bo(u){var p=-1,N=u==null?0:u.length;for(this.clear();++p<N;){var D=u[p];this.set(D[0],D[1])}}function a6(){this.__data__=hd?hd(null):{},this.size=0}function i6(u){var p=this.has(u)&&delete this.__data__[u];return this.size-=p?1:0,p}function o6(u){var p=this.__data__;if(hd){var N=p[u];return N===v?t:N}return Ht.call(p,u)?p[u]:t}function l6(u){var p=this.__data__;return hd?p[u]!==t:Ht.call(p,u)}function c6(u,p){var N=this.__data__;return this.size+=this.has(u)?0:1,N[u]=hd&&p===t?v:p,this}Bo.prototype.clear=a6,Bo.prototype.delete=i6,Bo.prototype.get=o6,Bo.prototype.has=l6,Bo.prototype.set=c6;function Ga(u){var p=-1,N=u==null?0:u.length;for(this.clear();++p<N;){var D=u[p];this.set(D[0],D[1])}}function d6(){this.__data__=[],this.size=0}function u6(u){var p=this.__data__,N=p0(p,u);if(N<0)return!1;var D=p.length-1;return N==D?p.pop():o0.call(p,N,1),--this.size,!0}function h6(u){var p=this.__data__,N=p0(p,u);return N<0?t:p[N][1]}function f6(u){return p0(this.__data__,u)>-1}function p6(u,p){var N=this.__data__,D=p0(N,u);return D<0?(++this.size,N.push([u,p])):N[D][1]=p,this}Ga.prototype.clear=d6,Ga.prototype.delete=u6,Ga.prototype.get=h6,Ga.prototype.has=f6,Ga.prototype.set=p6;function Xa(u){var p=-1,N=u==null?0:u.length;for(this.clear();++p<N;){var D=u[p];this.set(D[0],D[1])}}function m6(){this.size=0,this.__data__={hash:new Bo,map:new(dd||Ga),string:new Bo}}function x6(u){var p=E0(this,u).delete(u);return this.size-=p?1:0,p}function g6(u){return E0(this,u).get(u)}function v6(u){return E0(this,u).has(u)}function y6(u,p){var N=E0(this,u),D=N.size;return N.set(u,p),this.size+=N.size==D?0:1,this}Xa.prototype.clear=m6,Xa.prototype.delete=x6,Xa.prototype.get=g6,Xa.prototype.has=v6,Xa.prototype.set=y6;function Uo(u){var p=-1,N=u==null?0:u.length;for(this.__data__=new Xa;++p<N;)this.add(u[p])}function w6(u){return this.__data__.set(u,v),this}function b6(u){return this.__data__.has(u)}Uo.prototype.add=Uo.prototype.push=w6,Uo.prototype.has=b6;function na(u){var p=this.__data__=new Ga(u);this.size=p.size}function N6(){this.__data__=new Ga,this.size=0}function j6(u){var p=this.__data__,N=p.delete(u);return this.size=p.size,N}function C6(u){return this.__data__.get(u)}function _6(u){return this.__data__.has(u)}function E6(u,p){var N=this.__data__;if(N instanceof Ga){var D=N.__data__;if(!dd||D.length<a-1)return D.push([u,p]),this.size=++N.size,this;N=this.__data__=new Xa(D)}return N.set(u,p),this.size=N.size,this}na.prototype.clear=N6,na.prototype.delete=j6,na.prototype.get=C6,na.prototype.has=_6,na.prototype.set=E6;function G2(u,p){var N=St(u),D=!N&&Vo(u),z=!N&&!D&&qi(u),X=!N&&!D&&!z&&Ul(u),se=N||D||z||X,de=se?ad(u.length,Ar):[],pe=de.length;for(var Oe in u)(p||Ht.call(u,Oe))&&!(se&&(Oe=="length"||z&&(Oe=="offset"||Oe=="parent")||X&&(Oe=="buffer"||Oe=="byteLength"||Oe=="byteOffset")||ei(Oe,pe)))&&de.push(Oe);return de}function X2(u){var p=u.length;return p?u[Gp(0,p-1)]:t}function S6(u,p){return S0(ts(u),zo(p,0,u.length))}function k6(u){return S0(ts(u))}function Bp(u,p,N){(N!==t&&!ra(u[p],N)||N===t&&!(p in u))&&Ka(u,p,N)}function pd(u,p,N){var D=u[p];(!(Ht.call(u,p)&&ra(D,N))||N===t&&!(p in u))&&Ka(u,p,N)}function p0(u,p){for(var N=u.length;N--;)if(ra(u[N][0],p))return N;return-1}function A6(u,p,N,D){return Fi(u,function(z,X,se){p(D,z,N(z),se)}),D}function K2(u,p){return u&&Na(p,pr(p),u)}function T6(u,p){return u&&Na(p,rs(p),u)}function Ka(u,p,N){p=="__proto__"&&l0?l0(u,p,{configurable:!0,enumerable:!0,value:N,writable:!0}):u[p]=N}function Up(u,p){for(var N=-1,D=p.length,z=K(D),X=u==null;++N<D;)z[N]=X?t:wm(u,p[N]);return z}function zo(u,p,N){return u===u&&(N!==t&&(u=u<=N?u:N),p!==t&&(u=u>=p?u:p)),u}function Fs(u,p,N,D,z,X){var se,de=p&b,pe=p&_,Oe=p&E;if(N&&(se=z?N(u,D,z,X):N(u)),se!==t)return se;if(!Tn(u))return u;var Le=St(u);if(Le){if(se=v_(u),!de)return ts(u,se)}else{var Ue=Dr(u),Xe=Ue==Tt||Ue==Te;if(qi(u))return bv(u,de);if(Ue==De||Ue==ct||Xe&&!z){if(se=pe||Xe?{}:Uv(u),!de)return pe?o_(u,T6(se,u)):i_(u,K2(se,u))}else{if(!Zt[Ue])return z?u:{};se=y_(u,Ue,de)}}X||(X=new na);var lt=X.get(u);if(lt)return lt;X.set(u,se),my(u)?u.forEach(function(wt){se.add(Fs(wt,p,N,wt,u,X))}):fy(u)&&u.forEach(function(wt,Ut){se.set(Ut,Fs(wt,p,N,Ut,u,X))});var yt=Oe?pe?im:am:pe?rs:pr,Mt=Le?t:yt(u);return es(Mt||u,function(wt,Ut){Mt&&(Ut=wt,wt=u[Ut]),pd(se,Ut,Fs(wt,p,N,Ut,u,X))}),se}function D6(u){var p=pr(u);return function(N){return Z2(N,u,p)}}function Z2(u,p,N){var D=N.length;if(u==null)return!D;for(u=it(u);D--;){var z=N[D],X=p[z],se=u[z];if(se===t&&!(z in u)||!X(se))return!1}return!0}function J2(u,p,N){if(typeof u!="function")throw new _n(d);return bd(function(){u.apply(t,N)},p)}function md(u,p,N,D){var z=-1,X=Cn,se=!0,de=u.length,pe=[],Oe=p.length;if(!de)return pe;N&&(p=Nt(p,Fn(N))),D?(X=Mo,se=!1):p.length>=a&&(X=hr,se=!1,p=new Uo(p));e:for(;++z<de;){var Le=u[z],Ue=N==null?Le:N(Le);if(Le=D||Le!==0?Le:0,se&&Ue===Ue){for(var Xe=Oe;Xe--;)if(p[Xe]===Ue)continue e;pe.push(Le)}else X(p,Ue,D)||pe.push(Le)}return pe}var Fi=Ev(ba),ev=Ev(qp,!0);function I6(u,p){var N=!0;return Fi(u,function(D,z,X){return N=!!p(D,z,X),N}),N}function m0(u,p,N){for(var D=-1,z=u.length;++D<z;){var X=u[D],se=p(X);if(se!=null&&(de===t?se===se&&!vs(se):N(se,de)))var de=se,pe=X}return pe}function M6(u,p,N,D){var z=u.length;for(N=Dt(N),N<0&&(N=-N>z?0:z+N),D=D===t||D>z?z:Dt(D),D<0&&(D+=z),D=N>D?0:gy(D);N<D;)u[N++]=p;return u}function tv(u,p){var N=[];return Fi(u,function(D,z,X){p(D,z,X)&&N.push(D)}),N}function wr(u,p,N,D,z){var X=-1,se=u.length;for(N||(N=b_),z||(z=[]);++X<se;){var de=u[X];p>0&&N(de)?p>1?wr(de,p-1,N,D,z):ms(z,de):D||(z[z.length]=de)}return z}var zp=Sv(),nv=Sv(!0);function ba(u,p){return u&&zp(u,p,pr)}function qp(u,p){return u&&nv(u,p,pr)}function x0(u,p){return Os(p,function(N){return ti(u[N])})}function qo(u,p){p=Ui(p,u);for(var N=0,D=p.length;u!=null&&N<D;)u=u[ja(p[N++])];return N&&N==D?u:t}function rv(u,p,N){var D=p(u);return St(u)?D:ms(D,N(u))}function Wr(u){return u==null?u===t?Ee:be:Fo&&Fo in it(u)?m_(u):k_(u)}function Wp(u,p){return u>p}function R6(u,p){return u!=null&&Ht.call(u,p)}function O6(u,p){return u!=null&&p in it(u)}function L6(u,p,N){return u>=Tr(p,N)&&u<ir(p,N)}function Hp(u,p,N){for(var D=N?Mo:Cn,z=u[0].length,X=u.length,se=X,de=K(X),pe=1/0,Oe=[];se--;){var Le=u[se];se&&p&&(Le=Nt(Le,Fn(p))),pe=Tr(Le.length,pe),de[se]=!N&&(p||z>=120&&Le.length>=120)?new Uo(se&&Le):t}Le=u[0];var Ue=-1,Xe=de[0];e:for(;++Ue<z&&Oe.length<pe;){var lt=Le[Ue],yt=p?p(lt):lt;if(lt=N||lt!==0?lt:0,!(Xe?hr(Xe,yt):D(Oe,yt,N))){for(se=X;--se;){var Mt=de[se];if(!(Mt?hr(Mt,yt):D(u[se],yt,N)))continue e}Xe&&Xe.push(yt),Oe.push(lt)}}return Oe}function P6(u,p,N,D){return ba(u,function(z,X,se){p(D,N(z),X,se)}),D}function xd(u,p,N){p=Ui(p,u),u=Hv(u,p);var D=u==null?u:u[ja(Us(p))];return D==null?t:ur(D,u,N)}function sv(u){return Bn(u)&&Wr(u)==ct}function F6(u){return Bn(u)&&Wr(u)==Et}function B6(u){return Bn(u)&&Wr(u)==qt}function gd(u,p,N,D,z){return u===p?!0:u==null||p==null||!Bn(u)&&!Bn(p)?u!==u&&p!==p:U6(u,p,N,D,gd,z)}function U6(u,p,N,D,z,X){var se=St(u),de=St(p),pe=se?Ae:Dr(u),Oe=de?Ae:Dr(p);pe=pe==ct?De:pe,Oe=Oe==ct?De:Oe;var Le=pe==De,Ue=Oe==De,Xe=pe==Oe;if(Xe&&qi(u)){if(!qi(p))return!1;se=!0,Le=!1}if(Xe&&!Le)return X||(X=new na),se||Ul(u)?Pv(u,p,N,D,z,X):f_(u,p,pe,N,D,z,X);if(!(N&T)){var lt=Le&&Ht.call(u,"__wrapped__"),yt=Ue&&Ht.call(p,"__wrapped__");if(lt||yt){var Mt=lt?u.value():u,wt=yt?p.value():p;return X||(X=new na),z(Mt,wt,N,D,X)}}return Xe?(X||(X=new na),p_(u,p,N,D,z,X)):!1}function z6(u){return Bn(u)&&Dr(u)==Ne}function Vp(u,p,N,D){var z=N.length,X=z,se=!D;if(u==null)return!X;for(u=it(u);z--;){var de=N[z];if(se&&de[2]?de[1]!==u[de[0]]:!(de[0]in u))return!1}for(;++z<X;){de=N[z];var pe=de[0],Oe=u[pe],Le=de[1];if(se&&de[2]){if(Oe===t&&!(pe in u))return!1}else{var Ue=new na;if(D)var Xe=D(Oe,Le,pe,u,p,Ue);if(!(Xe===t?gd(Le,Oe,T|I,D,Ue):Xe))return!1}}return!0}function av(u){if(!Tn(u)||j_(u))return!1;var p=ti(u)?z5:Cp;return p.test(Ho(u))}function q6(u){return Bn(u)&&Wr(u)==ae}function W6(u){return Bn(u)&&Dr(u)==ye}function H6(u){return Bn(u)&&M0(u.length)&&!!mn[Wr(u)]}function iv(u){return typeof u=="function"?u:u==null?ss:typeof u=="object"?St(u)?cv(u[0],u[1]):lv(u):ky(u)}function $p(u){if(!wd(u))return Y5(u);var p=[];for(var N in it(u))Ht.call(u,N)&&N!="constructor"&&p.push(N);return p}function V6(u){if(!Tn(u))return S_(u);var p=wd(u),N=[];for(var D in u)D=="constructor"&&(p||!Ht.call(u,D))||N.push(D);return N}function Yp(u,p){return u<p}function ov(u,p){var N=-1,D=ns(u)?K(u.length):[];return Fi(u,function(z,X,se){D[++N]=p(z,X,se)}),D}function lv(u){var p=lm(u);return p.length==1&&p[0][2]?qv(p[0][0],p[0][1]):function(N){return N===u||Vp(N,u,p)}}function cv(u,p){return dm(u)&&zv(p)?qv(ja(u),p):function(N){var D=wm(N,u);return D===t&&D===p?bm(N,u):gd(p,D,T|I)}}function g0(u,p,N,D,z){u!==p&&zp(p,function(X,se){if(z||(z=new na),Tn(X))$6(u,p,se,N,g0,D,z);else{var de=D?D(hm(u,se),X,se+"",u,p,z):t;de===t&&(de=X),Bp(u,se,de)}},rs)}function $6(u,p,N,D,z,X,se){var de=hm(u,N),pe=hm(p,N),Oe=se.get(pe);if(Oe){Bp(u,N,Oe);return}var Le=X?X(de,pe,N+"",u,p,se):t,Ue=Le===t;if(Ue){var Xe=St(pe),lt=!Xe&&qi(pe),yt=!Xe&&!lt&&Ul(pe);Le=pe,Xe||lt||yt?St(de)?Le=de:$n(de)?Le=ts(de):lt?(Ue=!1,Le=bv(pe,!0)):yt?(Ue=!1,Le=Nv(pe,!0)):Le=[]:Nd(pe)||Vo(pe)?(Le=de,Vo(de)?Le=vy(de):(!Tn(de)||ti(de))&&(Le=Uv(pe))):Ue=!1}Ue&&(se.set(pe,Le),z(Le,pe,D,X,se),se.delete(pe)),Bp(u,N,Le)}function dv(u,p){var N=u.length;if(N)return p+=p<0?N:0,ei(p,N)?u[p]:t}function uv(u,p,N){p.length?p=Nt(p,function(X){return St(X)?function(se){return qo(se,X.length===1?X[0]:X)}:X}):p=[ss];var D=-1;p=Nt(p,Fn(vt()));var z=ov(u,function(X,se,de){var pe=Nt(p,function(Oe){return Oe(X)});return{criteria:pe,index:++D,value:X}});return Ri(z,function(X,se){return a_(X,se,N)})}function Y6(u,p){return hv(u,p,function(N,D){return bm(u,D)})}function hv(u,p,N){for(var D=-1,z=p.length,X={};++D<z;){var se=p[D],de=qo(u,se);N(de,se)&&vd(X,Ui(se,u),de)}return X}function Q6(u){return function(p){return qo(p,u)}}function Qp(u,p,N,D){var z=D?rd:yr,X=-1,se=p.length,de=u;for(u===p&&(p=ts(p)),N&&(de=Nt(u,Fn(N)));++X<se;)for(var pe=0,Oe=p[X],Le=N?N(Oe):Oe;(pe=z(de,Le,pe,D))>-1;)de!==u&&o0.call(de,pe,1),o0.call(u,pe,1);return u}function fv(u,p){for(var N=u?p.length:0,D=N-1;N--;){var z=p[N];if(N==D||z!==X){var X=z;ei(z)?o0.call(u,z,1):Zp(u,z)}}return u}function Gp(u,p){return u+d0(Y2()*(p-u+1))}function G6(u,p,N,D){for(var z=-1,X=ir(c0((p-u)/(N||1)),0),se=K(X);X--;)se[D?X:++z]=u,u+=N;return se}function Xp(u,p){var N="";if(!u||p<1||p>fe)return N;do p%2&&(N+=u),p=d0(p/2),p&&(u+=u);while(p);return N}function Ot(u,p){return fm(Wv(u,p,ss),u+"")}function X6(u){return X2(zl(u))}function K6(u,p){var N=zl(u);return S0(N,zo(p,0,N.length))}function vd(u,p,N,D){if(!Tn(u))return u;p=Ui(p,u);for(var z=-1,X=p.length,se=X-1,de=u;de!=null&&++z<X;){var pe=ja(p[z]),Oe=N;if(pe==="__proto__"||pe==="constructor"||pe==="prototype")return u;if(z!=se){var Le=de[pe];Oe=D?D(Le,pe,de):t,Oe===t&&(Oe=Tn(Le)?Le:ei(p[z+1])?[]:{})}pd(de,pe,Oe),de=de[pe]}return u}var pv=u0?function(u,p){return u0.set(u,p),u}:ss,Z6=l0?function(u,p){return l0(u,"toString",{configurable:!0,enumerable:!1,value:jm(p),writable:!0})}:ss;function J6(u){return S0(zl(u))}function Bs(u,p,N){var D=-1,z=u.length;p<0&&(p=-p>z?0:z+p),N=N>z?z:N,N<0&&(N+=z),z=p>N?0:N-p>>>0,p>>>=0;for(var X=K(z);++D<z;)X[D]=u[D+p];return X}function e_(u,p){var N;return Fi(u,function(D,z,X){return N=p(D,z,X),!N}),!!N}function v0(u,p,N){var D=0,z=u==null?D:u.length;if(typeof p=="number"&&p===p&&z<=Ve){for(;D<z;){var X=D+z>>>1,se=u[X];se!==null&&!vs(se)&&(N?se<=p:se<p)?D=X+1:z=X}return z}return Kp(u,p,ss,N)}function Kp(u,p,N,D){var z=0,X=u==null?0:u.length;if(X===0)return 0;p=N(p);for(var se=p!==p,de=p===null,pe=vs(p),Oe=p===t;z<X;){var Le=d0((z+X)/2),Ue=N(u[Le]),Xe=Ue!==t,lt=Ue===null,yt=Ue===Ue,Mt=vs(Ue);if(se)var wt=D||yt;else Oe?wt=yt&&(D||Xe):de?wt=yt&&Xe&&(D||!lt):pe?wt=yt&&Xe&&!lt&&(D||!Mt):lt||Mt?wt=!1:wt=D?Ue<=p:Ue<p;wt?z=Le+1:X=Le}return Tr(X,we)}function mv(u,p){for(var N=-1,D=u.length,z=0,X=[];++N<D;){var se=u[N],de=p?p(se):se;if(!N||!ra(de,pe)){var pe=de;X[z++]=se===0?0:se}}return X}function xv(u){return typeof u=="number"?u:vs(u)?ue:+u}function gs(u){if(typeof u=="string")return u;if(St(u))return Nt(u,gs)+"";if(vs(u))return Q2?Q2.call(u):"";var p=u+"";return p=="0"&&1/u==-me?"-0":p}function Bi(u,p,N){var D=-1,z=Cn,X=u.length,se=!0,de=[],pe=de;if(N)se=!1,z=Mo;else if(X>=a){var Oe=p?null:u_(u);if(Oe)return i(Oe);se=!1,z=hr,pe=new Uo}else pe=p?[]:de;e:for(;++D<X;){var Le=u[D],Ue=p?p(Le):Le;if(Le=N||Le!==0?Le:0,se&&Ue===Ue){for(var Xe=pe.length;Xe--;)if(pe[Xe]===Ue)continue e;p&&pe.push(Ue),de.push(Le)}else z(pe,Ue,N)||(pe!==de&&pe.push(Ue),de.push(Le))}return de}function Zp(u,p){return p=Ui(p,u),u=Hv(u,p),u==null||delete u[ja(Us(p))]}function gv(u,p,N,D){return vd(u,p,N(qo(u,p)),D)}function y0(u,p,N,D){for(var z=u.length,X=D?z:-1;(D?X--:++X<z)&&p(u[X],X,u););return N?Bs(u,D?0:X,D?X+1:z):Bs(u,D?X+1:0,D?z:X)}function vv(u,p){var N=u;return N instanceof Vt&&(N=N.value()),ea(p,function(D,z){return z.func.apply(z.thisArg,ms([D],z.args))},N)}function Jp(u,p,N){var D=u.length;if(D<2)return D?Bi(u[0]):[];for(var z=-1,X=K(D);++z<D;)for(var se=u[z],de=-1;++de<D;)de!=z&&(X[z]=md(X[z]||se,u[de],p,N));return Bi(wr(X,1),p,N)}function yv(u,p,N){for(var D=-1,z=u.length,X=p.length,se={};++D<z;){var de=D<X?p[D]:t;N(se,u[D],de)}return se}function em(u){return $n(u)?u:[]}function tm(u){return typeof u=="function"?u:ss}function Ui(u,p){return St(u)?u:dm(u,p)?[u]:Qv(rn(u))}var t_=Ot;function zi(u,p,N){var D=u.length;return N=N===t?D:N,!p&&N>=D?u:Bs(u,p,N)}var wv=q5||function(u){return Zn.clearTimeout(u)};function bv(u,p){if(p)return u.slice();var N=u.length,D=q2?q2(N):new u.constructor(N);return u.copy(D),D}function nm(u){var p=new u.constructor(u.byteLength);return new a0(p).set(new a0(u)),p}function n_(u,p){var N=p?nm(u.buffer):u.buffer;return new u.constructor(N,u.byteOffset,u.byteLength)}function r_(u){var p=new u.constructor(u.source,Eo.exec(u));return p.lastIndex=u.lastIndex,p}function s_(u){return fd?it(fd.call(u)):{}}function Nv(u,p){var N=p?nm(u.buffer):u.buffer;return new u.constructor(N,u.byteOffset,u.length)}function jv(u,p){if(u!==p){var N=u!==t,D=u===null,z=u===u,X=vs(u),se=p!==t,de=p===null,pe=p===p,Oe=vs(p);if(!de&&!Oe&&!X&&u>p||X&&se&&pe&&!de&&!Oe||D&&se&&pe||!N&&pe||!z)return 1;if(!D&&!X&&!Oe&&u<p||Oe&&N&&z&&!D&&!X||de&&N&&z||!se&&z||!pe)return-1}return 0}function a_(u,p,N){for(var D=-1,z=u.criteria,X=p.criteria,se=z.length,de=N.length;++D<se;){var pe=jv(z[D],X[D]);if(pe){if(D>=de)return pe;var Oe=N[D];return pe*(Oe=="desc"?-1:1)}}return u.index-p.index}function Cv(u,p,N,D){for(var z=-1,X=u.length,se=N.length,de=-1,pe=p.length,Oe=ir(X-se,0),Le=K(pe+Oe),Ue=!D;++de<pe;)Le[de]=p[de];for(;++z<se;)(Ue||z<X)&&(Le[N[z]]=u[z]);for(;Oe--;)Le[de++]=u[z++];return Le}function _v(u,p,N,D){for(var z=-1,X=u.length,se=-1,de=N.length,pe=-1,Oe=p.length,Le=ir(X-de,0),Ue=K(Le+Oe),Xe=!D;++z<Le;)Ue[z]=u[z];for(var lt=z;++pe<Oe;)Ue[lt+pe]=p[pe];for(;++se<de;)(Xe||z<X)&&(Ue[lt+N[se]]=u[z++]);return Ue}function ts(u,p){var N=-1,D=u.length;for(p||(p=K(D));++N<D;)p[N]=u[N];return p}function Na(u,p,N,D){var z=!N;N||(N={});for(var X=-1,se=p.length;++X<se;){var de=p[X],pe=D?D(N[de],u[de],de,N,u):t;pe===t&&(pe=u[de]),z?Ka(N,de,pe):pd(N,de,pe)}return N}function i_(u,p){return Na(u,cm(u),p)}function o_(u,p){return Na(u,Fv(u),p)}function w0(u,p){return function(N,D){var z=St(N)?Ku:A6,X=p?p():{};return z(N,u,vt(D,2),X)}}function Pl(u){return Ot(function(p,N){var D=-1,z=N.length,X=z>1?N[z-1]:t,se=z>2?N[2]:t;for(X=u.length>3&&typeof X=="function"?(z--,X):t,se&&Hr(N[0],N[1],se)&&(X=z<3?t:X,z=1),p=it(p);++D<z;){var de=N[D];de&&u(p,de,D,X)}return p})}function Ev(u,p){return function(N,D){if(N==null)return N;if(!ns(N))return u(N,D);for(var z=N.length,X=p?z:-1,se=it(N);(p?X--:++X<z)&&D(se[X],X,se)!==!1;);return N}}function Sv(u){return function(p,N,D){for(var z=-1,X=it(p),se=D(p),de=se.length;de--;){var pe=se[u?de:++z];if(N(X[pe],pe,X)===!1)break}return p}}function l_(u,p,N){var D=p&k,z=yd(u);function X(){var se=this&&this!==Zn&&this instanceof X?z:u;return se.apply(D?N:this,arguments)}return X}function kv(u){return function(p){p=rn(p);var N=Li(p)?x(p):t,D=N?N[0]:p.charAt(0),z=N?zi(N,1).join(""):p.slice(1);return D[u]()+z}}function Fl(u){return function(p){return ea(Ey(_y(p).replace(gt,"")),u,"")}}function yd(u){return function(){var p=arguments;switch(p.length){case 0:return new u;case 1:return new u(p[0]);case 2:return new u(p[0],p[1]);case 3:return new u(p[0],p[1],p[2]);case 4:return new u(p[0],p[1],p[2],p[3]);case 5:return new u(p[0],p[1],p[2],p[3],p[4]);case 6:return new u(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new u(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var N=Ll(u.prototype),D=u.apply(N,p);return Tn(D)?D:N}}function c_(u,p,N){var D=yd(u);function z(){for(var X=arguments.length,se=K(X),de=X,pe=Bl(z);de--;)se[de]=arguments[de];var Oe=X<3&&se[0]!==pe&&se[X-1]!==pe?[]:B(se,pe);if(X-=Oe.length,X<N)return Mv(u,p,b0,z.placeholder,t,se,Oe,t,t,N-X);var Le=this&&this!==Zn&&this instanceof z?D:u;return ur(Le,this,se)}return z}function Av(u){return function(p,N,D){var z=it(p);if(!ns(p)){var X=vt(N,3);p=pr(p),N=function(de){return X(z[de],de,z)}}var se=u(p,N,D);return se>-1?z[X?p[se]:se]:t}}function Tv(u){return Ja(function(p){var N=p.length,D=N,z=Ps.prototype.thru;for(u&&p.reverse();D--;){var X=p[D];if(typeof X!="function")throw new _n(d);if(z&&!se&&_0(X)=="wrapper")var se=new Ps([],!0)}for(D=se?D:N;++D<N;){X=p[D];var de=_0(X),pe=de=="wrapper"?om(X):t;pe&&um(pe[0])&&pe[1]==(F|O|$|W)&&!pe[4].length&&pe[9]==1?se=se[_0(pe[0])].apply(se,pe[3]):se=X.length==1&&um(X)?se[de]():se.thru(X)}return function(){var Oe=arguments,Le=Oe[0];if(se&&Oe.length==1&&St(Le))return se.plant(Le).value();for(var Ue=0,Xe=N?p[Ue].apply(this,Oe):Le;++Ue<N;)Xe=p[Ue].call(this,Xe);return Xe}})}function b0(u,p,N,D,z,X,se,de,pe,Oe){var Le=p&F,Ue=p&k,Xe=p&S,lt=p&(O|P),yt=p&V,Mt=Xe?t:yd(u);function wt(){for(var Ut=arguments.length,$t=K(Ut),ys=Ut;ys--;)$t[ys]=arguments[ys];if(lt)var Vr=Bl(wt),ws=Mp($t,Vr);if(D&&($t=Cv($t,D,z,lt)),X&&($t=_v($t,X,se,lt)),Ut-=ws,lt&&Ut<Oe){var Yn=B($t,Vr);return Mv(u,p,b0,wt.placeholder,N,$t,Yn,de,pe,Oe-Ut)}var sa=Ue?N:this,ri=Xe?sa[u]:u;return Ut=$t.length,de?$t=A_($t,de):yt&&Ut>1&&$t.reverse(),Le&&pe<Ut&&($t.length=pe),this&&this!==Zn&&this instanceof wt&&(ri=Mt||yd(ri)),ri.apply(sa,$t)}return wt}function Dv(u,p){return function(N,D){return P6(N,u,p(D),{})}}function N0(u,p){return function(N,D){var z;if(N===t&&D===t)return p;if(N!==t&&(z=N),D!==t){if(z===t)return D;typeof N=="string"||typeof D=="string"?(N=gs(N),D=gs(D)):(N=xv(N),D=xv(D)),z=u(N,D)}return z}}function rm(u){return Ja(function(p){return p=Nt(p,Fn(vt())),Ot(function(N){var D=this;return u(p,function(z){return ur(z,D,N)})})})}function j0(u,p){p=p===t?" ":gs(p);var N=p.length;if(N<2)return N?Xp(p,u):p;var D=Xp(p,c0(u/f(p)));return Li(p)?zi(x(D),0,u).join(""):D.slice(0,u)}function d_(u,p,N,D){var z=p&k,X=yd(u);function se(){for(var de=-1,pe=arguments.length,Oe=-1,Le=D.length,Ue=K(Le+pe),Xe=this&&this!==Zn&&this instanceof se?X:u;++Oe<Le;)Ue[Oe]=D[Oe];for(;pe--;)Ue[Oe++]=arguments[++de];return ur(Xe,z?N:this,Ue)}return se}function Iv(u){return function(p,N,D){return D&&typeof D!="number"&&Hr(p,N,D)&&(N=D=t),p=ni(p),N===t?(N=p,p=0):N=ni(N),D=D===t?p<N?1:-1:ni(D),G6(p,N,D,u)}}function C0(u){return function(p,N){return typeof p=="string"&&typeof N=="string"||(p=zs(p),N=zs(N)),u(p,N)}}function Mv(u,p,N,D,z,X,se,de,pe,Oe){var Le=p&O,Ue=Le?se:t,Xe=Le?t:se,lt=Le?X:t,yt=Le?t:X;p|=Le?$:L,p&=~(Le?L:$),p&A||(p&=~(k|S));var Mt=[u,p,z,lt,Ue,yt,Xe,de,pe,Oe],wt=N.apply(t,Mt);return um(u)&&Vv(wt,Mt),wt.placeholder=D,$v(wt,u,p)}function sm(u){var p=Re[u];return function(N,D){if(N=zs(N),D=D==null?0:Tr(Dt(D),292),D&&$2(N)){var z=(rn(N)+"e").split("e"),X=p(z[0]+"e"+(+z[1]+D));return z=(rn(X)+"e").split("e"),+(z[0]+"e"+(+z[1]-D))}return p(N)}}var u_=Rl&&1/i(new Rl([,-0]))[1]==me?function(u){return new Rl(u)}:Em;function Rv(u){return function(p){var N=Dr(p);return N==Ne?Bt(p):N==ye?l(p):Oo(p,u(p))}}function Za(u,p,N,D,z,X,se,de){var pe=p&S;if(!pe&&typeof u!="function")throw new _n(d);var Oe=D?D.length:0;if(Oe||(p&=~($|L),D=z=t),se=se===t?se:ir(Dt(se),0),de=de===t?de:Dt(de),Oe-=z?z.length:0,p&L){var Le=D,Ue=z;D=z=t}var Xe=pe?t:om(u),lt=[u,p,N,D,z,Le,Ue,X,se,de];if(Xe&&E_(lt,Xe),u=lt[0],p=lt[1],N=lt[2],D=lt[3],z=lt[4],de=lt[9]=lt[9]===t?pe?0:u.length:ir(lt[9]-Oe,0),!de&&p&(O|P)&&(p&=~(O|P)),!p||p==k)var yt=l_(u,p,N);else p==O||p==P?yt=c_(u,p,de):(p==$||p==(k|$))&&!z.length?yt=d_(u,p,N,D):yt=b0.apply(t,lt);var Mt=Xe?pv:Vv;return $v(Mt(yt,lt),u,p)}function Ov(u,p,N,D){return u===t||ra(u,En[N])&&!Ht.call(D,N)?p:u}function Lv(u,p,N,D,z,X){return Tn(u)&&Tn(p)&&(X.set(p,u),g0(u,p,t,Lv,X),X.delete(p)),u}function h_(u){return Nd(u)?t:u}function Pv(u,p,N,D,z,X){var se=N&T,de=u.length,pe=p.length;if(de!=pe&&!(se&&pe>de))return!1;var Oe=X.get(u),Le=X.get(p);if(Oe&&Le)return Oe==p&&Le==u;var Ue=-1,Xe=!0,lt=N&I?new Uo:t;for(X.set(u,p),X.set(p,u);++Ue<de;){var yt=u[Ue],Mt=p[Ue];if(D)var wt=se?D(Mt,yt,Ue,p,u,X):D(yt,Mt,Ue,u,p,X);if(wt!==t){if(wt)continue;Xe=!1;break}if(lt){if(!mt(p,function(Ut,$t){if(!hr(lt,$t)&&(yt===Ut||z(yt,Ut,N,D,X)))return lt.push($t)})){Xe=!1;break}}else if(!(yt===Mt||z(yt,Mt,N,D,X))){Xe=!1;break}}return X.delete(u),X.delete(p),Xe}function f_(u,p,N,D,z,X,se){switch(N){case en:if(u.byteLength!=p.byteLength||u.byteOffset!=p.byteOffset)return!1;u=u.buffer,p=p.buffer;case Et:return!(u.byteLength!=p.byteLength||!X(new a0(u),new a0(p)));case nt:case qt:case Ze:return ra(+u,+p);case Pt:return u.name==p.name&&u.message==p.message;case ae:case ie:return u==p+"";case Ne:var de=Bt;case ye:var pe=D&T;if(de||(de=i),u.size!=p.size&&!pe)return!1;var Oe=se.get(u);if(Oe)return Oe==p;D|=I,se.set(u,p);var Le=Pv(de(u),de(p),D,z,X,se);return se.delete(u),Le;case He:if(fd)return fd.call(u)==fd.call(p)}return!1}function p_(u,p,N,D,z,X){var se=N&T,de=am(u),pe=de.length,Oe=am(p),Le=Oe.length;if(pe!=Le&&!se)return!1;for(var Ue=pe;Ue--;){var Xe=de[Ue];if(!(se?Xe in p:Ht.call(p,Xe)))return!1}var lt=X.get(u),yt=X.get(p);if(lt&&yt)return lt==p&&yt==u;var Mt=!0;X.set(u,p),X.set(p,u);for(var wt=se;++Ue<pe;){Xe=de[Ue];var Ut=u[Xe],$t=p[Xe];if(D)var ys=se?D($t,Ut,Xe,p,u,X):D(Ut,$t,Xe,u,p,X);if(!(ys===t?Ut===$t||z(Ut,$t,N,D,X):ys)){Mt=!1;break}wt||(wt=Xe=="constructor")}if(Mt&&!wt){var Vr=u.constructor,ws=p.constructor;Vr!=ws&&"constructor"in u&&"constructor"in p&&!(typeof Vr=="function"&&Vr instanceof Vr&&typeof ws=="function"&&ws instanceof ws)&&(Mt=!1)}return X.delete(u),X.delete(p),Mt}function Ja(u){return fm(Wv(u,t,Zv),u+"")}function am(u){return rv(u,pr,cm)}function im(u){return rv(u,rs,Fv)}var om=u0?function(u){return u0.get(u)}:Em;function _0(u){for(var p=u.name+"",N=Ol[p],D=Ht.call(Ol,p)?N.length:0;D--;){var z=N[D],X=z.func;if(X==null||X==u)return z.name}return p}function Bl(u){var p=Ht.call(Y,"placeholder")?Y:u;return p.placeholder}function vt(){var u=Y.iteratee||Cm;return u=u===Cm?iv:u,arguments.length?u(arguments[0],arguments[1]):u}function E0(u,p){var N=u.__data__;return N_(p)?N[typeof p=="string"?"string":"hash"]:N.map}function lm(u){for(var p=pr(u),N=p.length;N--;){var D=p[N],z=u[D];p[N]=[D,z,zv(z)]}return p}function Wo(u,p){var N=Ls(u,p);return av(N)?N:t}function m_(u){var p=Ht.call(u,Fo),N=u[Fo];try{u[Fo]=t;var D=!0}catch{}var z=r0.call(u);return D&&(p?u[Fo]=N:delete u[Fo]),z}var cm=Lp?function(u){return u==null?[]:(u=it(u),Os(Lp(u),function(p){return H2.call(u,p)}))}:Sm,Fv=Lp?function(u){for(var p=[];u;)ms(p,cm(u)),u=i0(u);return p}:Sm,Dr=Wr;(Pp&&Dr(new Pp(new ArrayBuffer(1)))!=en||dd&&Dr(new dd)!=Ne||Fp&&Dr(Fp.resolve())!=$e||Rl&&Dr(new Rl)!=ye||ud&&Dr(new ud)!=Fe)&&(Dr=function(u){var p=Wr(u),N=p==De?u.constructor:t,D=N?Ho(N):"";if(D)switch(D){case K5:return en;case Z5:return Ne;case J5:return $e;case e6:return ye;case t6:return Fe}return p});function x_(u,p,N){for(var D=-1,z=N.length;++D<z;){var X=N[D],se=X.size;switch(X.type){case"drop":u+=se;break;case"dropRight":p-=se;break;case"take":p=Tr(p,u+se);break;case"takeRight":u=ir(u,p-se);break}}return{start:u,end:p}}function g_(u){var p=u.match(Jr);return p?p[1].split(et):[]}function Bv(u,p,N){p=Ui(p,u);for(var D=-1,z=p.length,X=!1;++D<z;){var se=ja(p[D]);if(!(X=u!=null&&N(u,se)))break;u=u[se]}return X||++D!=z?X:(z=u==null?0:u.length,!!z&&M0(z)&&ei(se,z)&&(St(u)||Vo(u)))}function v_(u){var p=u.length,N=new u.constructor(p);return p&&typeof u[0]=="string"&&Ht.call(u,"index")&&(N.index=u.index,N.input=u.input),N}function Uv(u){return typeof u.constructor=="function"&&!wd(u)?Ll(i0(u)):{}}function y_(u,p,N){var D=u.constructor;switch(p){case Et:return nm(u);case nt:case qt:return new D(+u);case en:return n_(u,N);case Rt:case Cr:case Br:case Ts:case tn:case te:case Je:case ft:case It:return Nv(u,N);case Ne:return new D;case Ze:case ie:return new D(u);case ae:return r_(u);case ye:return new D;case He:return s_(u)}}function w_(u,p){var N=p.length;if(!N)return u;var D=N-1;return p[D]=(N>1?"& ":"")+p[D],p=p.join(N>2?", ":" "),u.replace(Wa,`{
/* [wrapped with `+p+`] */
`)}function b_(u){return St(u)||Vo(u)||!!(V2&&u&&u[V2])}function ei(u,p){var N=typeof u;return p=p??fe,!!p&&(N=="number"||N!="symbol"&&Ms.test(u))&&u>-1&&u%1==0&&u<p}function Hr(u,p,N){if(!Tn(N))return!1;var D=typeof p;return(D=="number"?ns(N)&&ei(p,N.length):D=="string"&&p in N)?ra(N[p],u):!1}function dm(u,p){if(St(u))return!1;var N=typeof u;return N=="number"||N=="symbol"||N=="boolean"||u==null||vs(u)?!0:jl.test(u)||!Ai.test(u)||p!=null&&u in it(p)}function N_(u){var p=typeof u;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?u!=="__proto__":u===null}function um(u){var p=_0(u),N=Y[p];if(typeof N!="function"||!(p in Vt.prototype))return!1;if(u===N)return!0;var D=om(N);return!!D&&u===D[0]}function j_(u){return!!n0&&n0 in u}var C_=fr?ti:km;function wd(u){var p=u&&u.constructor,N=typeof p=="function"&&p.prototype||En;return u===N}function zv(u){return u===u&&!Tn(u)}function qv(u,p){return function(N){return N==null?!1:N[u]===p&&(p!==t||u in it(N))}}function __(u){var p=D0(u,function(D){return N.size===g&&N.clear(),D}),N=p.cache;return p}function E_(u,p){var N=u[1],D=p[1],z=N|D,X=z<(k|S|F),se=D==F&&N==O||D==F&&N==W&&u[7].length<=p[8]||D==(F|W)&&p[7].length<=p[8]&&N==O;if(!(X||se))return u;D&k&&(u[2]=p[2],z|=N&k?0:A);var de=p[3];if(de){var pe=u[3];u[3]=pe?Cv(pe,de,p[4]):de,u[4]=pe?B(u[3],w):p[4]}return de=p[5],de&&(pe=u[5],u[5]=pe?_v(pe,de,p[6]):de,u[6]=pe?B(u[5],w):p[6]),de=p[7],de&&(u[7]=de),D&F&&(u[8]=u[8]==null?p[8]:Tr(u[8],p[8])),u[9]==null&&(u[9]=p[9]),u[0]=p[0],u[1]=z,u}function S_(u){var p=[];if(u!=null)for(var N in it(u))p.push(N);return p}function k_(u){return r0.call(u)}function Wv(u,p,N){return p=ir(p===t?u.length-1:p,0),function(){for(var D=arguments,z=-1,X=ir(D.length-p,0),se=K(X);++z<X;)se[z]=D[p+z];z=-1;for(var de=K(p+1);++z<p;)de[z]=D[z];return de[p]=N(se),ur(u,this,de)}}function Hv(u,p){return p.length<2?u:qo(u,Bs(p,0,-1))}function A_(u,p){for(var N=u.length,D=Tr(p.length,N),z=ts(u);D--;){var X=p[D];u[D]=ei(X,N)?z[X]:t}return u}function hm(u,p){if(!(p==="constructor"&&typeof u[p]=="function")&&p!="__proto__")return u[p]}var Vv=Yv(pv),bd=H5||function(u,p){return Zn.setTimeout(u,p)},fm=Yv(Z6);function $v(u,p,N){var D=p+"";return fm(u,w_(D,T_(g_(D),N)))}function Yv(u){var p=0,N=0;return function(){var D=Q5(),z=he-(D-N);if(N=D,z>0){if(++p>=ee)return arguments[0]}else p=0;return u.apply(t,arguments)}}function S0(u,p){var N=-1,D=u.length,z=D-1;for(p=p===t?D:p;++N<p;){var X=Gp(N,z),se=u[X];u[X]=u[N],u[N]=se}return u.length=p,u}var Qv=__(function(u){var p=[];return u.charCodeAt(0)===46&&p.push(""),u.replace(Ds,function(N,D,z,X){p.push(z?X.replace(Er,"$1"):D||N)}),p});function ja(u){if(typeof u=="string"||vs(u))return u;var p=u+"";return p=="0"&&1/u==-me?"-0":p}function Ho(u){if(u!=null){try{return ta.call(u)}catch{}try{return u+""}catch{}}return""}function T_(u,p){return es(Be,function(N){var D="_."+N[0];p&N[1]&&!Cn(u,D)&&u.push(D)}),u.sort()}function Gv(u){if(u instanceof Vt)return u.clone();var p=new Ps(u.__wrapped__,u.__chain__);return p.__actions__=ts(u.__actions__),p.__index__=u.__index__,p.__values__=u.__values__,p}function D_(u,p,N){(N?Hr(u,p,N):p===t)?p=1:p=ir(Dt(p),0);var D=u==null?0:u.length;if(!D||p<1)return[];for(var z=0,X=0,se=K(c0(D/p));z<D;)se[X++]=Bs(u,z,z+=p);return se}function I_(u){for(var p=-1,N=u==null?0:u.length,D=0,z=[];++p<N;){var X=u[p];X&&(z[D++]=X)}return z}function M_(){var u=arguments.length;if(!u)return[];for(var p=K(u-1),N=arguments[0],D=u;D--;)p[D-1]=arguments[D];return ms(St(N)?ts(N):[N],wr(p,1))}var R_=Ot(function(u,p){return $n(u)?md(u,wr(p,1,$n,!0)):[]}),O_=Ot(function(u,p){var N=Us(p);return $n(N)&&(N=t),$n(u)?md(u,wr(p,1,$n,!0),vt(N,2)):[]}),L_=Ot(function(u,p){var N=Us(p);return $n(N)&&(N=t),$n(u)?md(u,wr(p,1,$n,!0),t,N):[]});function P_(u,p,N){var D=u==null?0:u.length;return D?(p=N||p===t?1:Dt(p),Bs(u,p<0?0:p,D)):[]}function F_(u,p,N){var D=u==null?0:u.length;return D?(p=N||p===t?1:Dt(p),p=D-p,Bs(u,0,p<0?0:p)):[]}function B_(u,p){return u&&u.length?y0(u,vt(p,3),!0,!0):[]}function U_(u,p){return u&&u.length?y0(u,vt(p,3),!0):[]}function z_(u,p,N,D){var z=u==null?0:u.length;return z?(N&&typeof N!="number"&&Hr(u,p,N)&&(N=0,D=z),M6(u,p,N,D)):[]}function Xv(u,p,N){var D=u==null?0:u.length;if(!D)return-1;var z=N==null?0:Dt(N);return z<0&&(z=ir(D+z,0)),Tl(u,vt(p,3),z)}function Kv(u,p,N){var D=u==null?0:u.length;if(!D)return-1;var z=D-1;return N!==t&&(z=Dt(N),z=N<0?ir(D+z,0):Tr(z,D-1)),Tl(u,vt(p,3),z,!0)}function Zv(u){var p=u==null?0:u.length;return p?wr(u,1):[]}function q_(u){var p=u==null?0:u.length;return p?wr(u,me):[]}function W_(u,p){var N=u==null?0:u.length;return N?(p=p===t?1:Dt(p),wr(u,p)):[]}function H_(u){for(var p=-1,N=u==null?0:u.length,D={};++p<N;){var z=u[p];D[z[0]]=z[1]}return D}function Jv(u){return u&&u.length?u[0]:t}function V_(u,p,N){var D=u==null?0:u.length;if(!D)return-1;var z=N==null?0:Dt(N);return z<0&&(z=ir(D+z,0)),yr(u,p,z)}function $_(u){var p=u==null?0:u.length;return p?Bs(u,0,-1):[]}var Y_=Ot(function(u){var p=Nt(u,em);return p.length&&p[0]===u[0]?Hp(p):[]}),Q_=Ot(function(u){var p=Us(u),N=Nt(u,em);return p===Us(N)?p=t:N.pop(),N.length&&N[0]===u[0]?Hp(N,vt(p,2)):[]}),G_=Ot(function(u){var p=Us(u),N=Nt(u,em);return p=typeof p=="function"?p:t,p&&N.pop(),N.length&&N[0]===u[0]?Hp(N,t,p):[]});function X_(u,p){return u==null?"":$5.call(u,p)}function Us(u){var p=u==null?0:u.length;return p?u[p-1]:t}function K_(u,p,N){var D=u==null?0:u.length;if(!D)return-1;var z=D;return N!==t&&(z=Dt(N),z=z<0?ir(D+z,0):Tr(z,D-1)),p===p?h(u,p,z):Tl(u,sd,z,!0)}function Z_(u,p){return u&&u.length?dv(u,Dt(p)):t}var J_=Ot(ey);function ey(u,p){return u&&u.length&&p&&p.length?Qp(u,p):u}function eE(u,p,N){return u&&u.length&&p&&p.length?Qp(u,p,vt(N,2)):u}function tE(u,p,N){return u&&u.length&&p&&p.length?Qp(u,p,t,N):u}var nE=Ja(function(u,p){var N=u==null?0:u.length,D=Up(u,p);return fv(u,Nt(p,function(z){return ei(z,N)?+z:z}).sort(jv)),D});function rE(u,p){var N=[];if(!(u&&u.length))return N;var D=-1,z=[],X=u.length;for(p=vt(p,3);++D<X;){var se=u[D];p(se,D,u)&&(N.push(se),z.push(D))}return fv(u,z),N}function pm(u){return u==null?u:X5.call(u)}function sE(u,p,N){var D=u==null?0:u.length;return D?(N&&typeof N!="number"&&Hr(u,p,N)?(p=0,N=D):(p=p==null?0:Dt(p),N=N===t?D:Dt(N)),Bs(u,p,N)):[]}function aE(u,p){return v0(u,p)}function iE(u,p,N){return Kp(u,p,vt(N,2))}function oE(u,p){var N=u==null?0:u.length;if(N){var D=v0(u,p);if(D<N&&ra(u[D],p))return D}return-1}function lE(u,p){return v0(u,p,!0)}function cE(u,p,N){return Kp(u,p,vt(N,2),!0)}function dE(u,p){var N=u==null?0:u.length;if(N){var D=v0(u,p,!0)-1;if(ra(u[D],p))return D}return-1}function uE(u){return u&&u.length?mv(u):[]}function hE(u,p){return u&&u.length?mv(u,vt(p,2)):[]}function fE(u){var p=u==null?0:u.length;return p?Bs(u,1,p):[]}function pE(u,p,N){return u&&u.length?(p=N||p===t?1:Dt(p),Bs(u,0,p<0?0:p)):[]}function mE(u,p,N){var D=u==null?0:u.length;return D?(p=N||p===t?1:Dt(p),p=D-p,Bs(u,p<0?0:p,D)):[]}function xE(u,p){return u&&u.length?y0(u,vt(p,3),!1,!0):[]}function gE(u,p){return u&&u.length?y0(u,vt(p,3)):[]}var vE=Ot(function(u){return Bi(wr(u,1,$n,!0))}),yE=Ot(function(u){var p=Us(u);return $n(p)&&(p=t),Bi(wr(u,1,$n,!0),vt(p,2))}),wE=Ot(function(u){var p=Us(u);return p=typeof p=="function"?p:t,Bi(wr(u,1,$n,!0),t,p)});function bE(u){return u&&u.length?Bi(u):[]}function NE(u,p){return u&&u.length?Bi(u,vt(p,2)):[]}function jE(u,p){return p=typeof p=="function"?p:t,u&&u.length?Bi(u,t,p):[]}function mm(u){if(!(u&&u.length))return[];var p=0;return u=Os(u,function(N){if($n(N))return p=ir(N.length,p),!0}),ad(p,function(N){return Nt(u,Il(N))})}function ty(u,p){if(!(u&&u.length))return[];var N=mm(u);return p==null?N:Nt(N,function(D){return ur(p,t,D)})}var CE=Ot(function(u,p){return $n(u)?md(u,p):[]}),_E=Ot(function(u){return Jp(Os(u,$n))}),EE=Ot(function(u){var p=Us(u);return $n(p)&&(p=t),Jp(Os(u,$n),vt(p,2))}),SE=Ot(function(u){var p=Us(u);return p=typeof p=="function"?p:t,Jp(Os(u,$n),t,p)}),kE=Ot(mm);function AE(u,p){return yv(u||[],p||[],pd)}function TE(u,p){return yv(u||[],p||[],vd)}var DE=Ot(function(u){var p=u.length,N=p>1?u[p-1]:t;return N=typeof N=="function"?(u.pop(),N):t,ty(u,N)});function ny(u){var p=Y(u);return p.__chain__=!0,p}function IE(u,p){return p(u),u}function k0(u,p){return p(u)}var ME=Ja(function(u){var p=u.length,N=p?u[0]:0,D=this.__wrapped__,z=function(X){return Up(X,u)};return p>1||this.__actions__.length||!(D instanceof Vt)||!ei(N)?this.thru(z):(D=D.slice(N,+N+(p?1:0)),D.__actions__.push({func:k0,args:[z],thisArg:t}),new Ps(D,this.__chain__).thru(function(X){return p&&!X.length&&X.push(t),X}))});function RE(){return ny(this)}function OE(){return new Ps(this.value(),this.__chain__)}function LE(){this.__values__===t&&(this.__values__=xy(this.value()));var u=this.__index__>=this.__values__.length,p=u?t:this.__values__[this.__index__++];return{done:u,value:p}}function PE(){return this}function FE(u){for(var p,N=this;N instanceof f0;){var D=Gv(N);D.__index__=0,D.__values__=t,p?z.__wrapped__=D:p=D;var z=D;N=N.__wrapped__}return z.__wrapped__=u,p}function BE(){var u=this.__wrapped__;if(u instanceof Vt){var p=u;return this.__actions__.length&&(p=new Vt(this)),p=p.reverse(),p.__actions__.push({func:k0,args:[pm],thisArg:t}),new Ps(p,this.__chain__)}return this.thru(pm)}function UE(){return vv(this.__wrapped__,this.__actions__)}var zE=w0(function(u,p,N){Ht.call(u,N)?++u[N]:Ka(u,N,1)});function qE(u,p,N){var D=St(u)?Zu:I6;return N&&Hr(u,p,N)&&(p=t),D(u,vt(p,3))}function WE(u,p){var N=St(u)?Os:tv;return N(u,vt(p,3))}var HE=Av(Xv),VE=Av(Kv);function $E(u,p){return wr(A0(u,p),1)}function YE(u,p){return wr(A0(u,p),me)}function QE(u,p,N){return N=N===t?1:Dt(N),wr(A0(u,p),N)}function ry(u,p){var N=St(u)?es:Fi;return N(u,vt(p,3))}function sy(u,p){var N=St(u)?Dp:ev;return N(u,vt(p,3))}var GE=w0(function(u,p,N){Ht.call(u,N)?u[N].push(p):Ka(u,N,[p])});function XE(u,p,N,D){u=ns(u)?u:zl(u),N=N&&!D?Dt(N):0;var z=u.length;return N<0&&(N=ir(z+N,0)),R0(u)?N<=z&&u.indexOf(p,N)>-1:!!z&&yr(u,p,N)>-1}var KE=Ot(function(u,p,N){var D=-1,z=typeof p=="function",X=ns(u)?K(u.length):[];return Fi(u,function(se){X[++D]=z?ur(p,se,N):xd(se,p,N)}),X}),ZE=w0(function(u,p,N){Ka(u,N,p)});function A0(u,p){var N=St(u)?Nt:ov;return N(u,vt(p,3))}function JE(u,p,N,D){return u==null?[]:(St(p)||(p=p==null?[]:[p]),N=D?t:N,St(N)||(N=N==null?[]:[N]),uv(u,p,N))}var eS=w0(function(u,p,N){u[N?0:1].push(p)},function(){return[[],[]]});function tS(u,p,N){var D=St(u)?ea:Ju,z=arguments.length<3;return D(u,vt(p,4),N,z,Fi)}function nS(u,p,N){var D=St(u)?dn:Ju,z=arguments.length<3;return D(u,vt(p,4),N,z,ev)}function rS(u,p){var N=St(u)?Os:tv;return N(u,I0(vt(p,3)))}function sS(u){var p=St(u)?X2:X6;return p(u)}function aS(u,p,N){(N?Hr(u,p,N):p===t)?p=1:p=Dt(p);var D=St(u)?S6:K6;return D(u,p)}function iS(u){var p=St(u)?k6:J6;return p(u)}function oS(u){if(u==null)return 0;if(ns(u))return R0(u)?f(u):u.length;var p=Dr(u);return p==Ne||p==ye?u.size:$p(u).length}function lS(u,p,N){var D=St(u)?mt:e_;return N&&Hr(u,p,N)&&(p=t),D(u,vt(p,3))}var cS=Ot(function(u,p){if(u==null)return[];var N=p.length;return N>1&&Hr(u,p[0],p[1])?p=[]:N>2&&Hr(p[0],p[1],p[2])&&(p=[p[0]]),uv(u,wr(p,1),[])}),T0=W5||function(){return Zn.Date.now()};function dS(u,p){if(typeof p!="function")throw new _n(d);return u=Dt(u),function(){if(--u<1)return p.apply(this,arguments)}}function ay(u,p,N){return p=N?t:p,p=u&&p==null?u.length:p,Za(u,F,t,t,t,t,p)}function iy(u,p){var N;if(typeof p!="function")throw new _n(d);return u=Dt(u),function(){return--u>0&&(N=p.apply(this,arguments)),u<=1&&(p=t),N}}var xm=Ot(function(u,p,N){var D=k;if(N.length){var z=B(N,Bl(xm));D|=$}return Za(u,D,p,N,z)}),oy=Ot(function(u,p,N){var D=k|S;if(N.length){var z=B(N,Bl(oy));D|=$}return Za(p,D,u,N,z)});function ly(u,p,N){p=N?t:p;var D=Za(u,O,t,t,t,t,t,p);return D.placeholder=ly.placeholder,D}function cy(u,p,N){p=N?t:p;var D=Za(u,P,t,t,t,t,t,p);return D.placeholder=cy.placeholder,D}function dy(u,p,N){var D,z,X,se,de,pe,Oe=0,Le=!1,Ue=!1,Xe=!0;if(typeof u!="function")throw new _n(d);p=zs(p)||0,Tn(N)&&(Le=!!N.leading,Ue="maxWait"in N,X=Ue?ir(zs(N.maxWait)||0,p):X,Xe="trailing"in N?!!N.trailing:Xe);function lt(Yn){var sa=D,ri=z;return D=z=t,Oe=Yn,se=u.apply(ri,sa),se}function yt(Yn){return Oe=Yn,de=bd(Ut,p),Le?lt(Yn):se}function Mt(Yn){var sa=Yn-pe,ri=Yn-Oe,Ay=p-sa;return Ue?Tr(Ay,X-ri):Ay}function wt(Yn){var sa=Yn-pe,ri=Yn-Oe;return pe===t||sa>=p||sa<0||Ue&&ri>=X}function Ut(){var Yn=T0();if(wt(Yn))return $t(Yn);de=bd(Ut,Mt(Yn))}function $t(Yn){return de=t,Xe&&D?lt(Yn):(D=z=t,se)}function ys(){de!==t&&wv(de),Oe=0,D=pe=z=de=t}function Vr(){return de===t?se:$t(T0())}function ws(){var Yn=T0(),sa=wt(Yn);if(D=arguments,z=this,pe=Yn,sa){if(de===t)return yt(pe);if(Ue)return wv(de),de=bd(Ut,p),lt(pe)}return de===t&&(de=bd(Ut,p)),se}return ws.cancel=ys,ws.flush=Vr,ws}var uS=Ot(function(u,p){return J2(u,1,p)}),hS=Ot(function(u,p,N){return J2(u,zs(p)||0,N)});function fS(u){return Za(u,V)}function D0(u,p){if(typeof u!="function"||p!=null&&typeof p!="function")throw new _n(d);var N=function(){var D=arguments,z=p?p.apply(this,D):D[0],X=N.cache;if(X.has(z))return X.get(z);var se=u.apply(this,D);return N.cache=X.set(z,se)||X,se};return N.cache=new(D0.Cache||Xa),N}D0.Cache=Xa;function I0(u){if(typeof u!="function")throw new _n(d);return function(){var p=arguments;switch(p.length){case 0:return!u.call(this);case 1:return!u.call(this,p[0]);case 2:return!u.call(this,p[0],p[1]);case 3:return!u.call(this,p[0],p[1],p[2])}return!u.apply(this,p)}}function pS(u){return iy(2,u)}var mS=t_(function(u,p){p=p.length==1&&St(p[0])?Nt(p[0],Fn(vt())):Nt(wr(p,1),Fn(vt()));var N=p.length;return Ot(function(D){for(var z=-1,X=Tr(D.length,N);++z<X;)D[z]=p[z].call(this,D[z]);return ur(u,this,D)})}),gm=Ot(function(u,p){var N=B(p,Bl(gm));return Za(u,$,t,p,N)}),uy=Ot(function(u,p){var N=B(p,Bl(uy));return Za(u,L,t,p,N)}),xS=Ja(function(u,p){return Za(u,W,t,t,t,p)});function gS(u,p){if(typeof u!="function")throw new _n(d);return p=p===t?p:Dt(p),Ot(u,p)}function vS(u,p){if(typeof u!="function")throw new _n(d);return p=p==null?0:ir(Dt(p),0),Ot(function(N){var D=N[p],z=zi(N,0,p);return D&&ms(z,D),ur(u,this,z)})}function yS(u,p,N){var D=!0,z=!0;if(typeof u!="function")throw new _n(d);return Tn(N)&&(D="leading"in N?!!N.leading:D,z="trailing"in N?!!N.trailing:z),dy(u,p,{leading:D,maxWait:p,trailing:z})}function wS(u){return ay(u,1)}function bS(u,p){return gm(tm(p),u)}function NS(){if(!arguments.length)return[];var u=arguments[0];return St(u)?u:[u]}function jS(u){return Fs(u,E)}function CS(u,p){return p=typeof p=="function"?p:t,Fs(u,E,p)}function _S(u){return Fs(u,b|E)}function ES(u,p){return p=typeof p=="function"?p:t,Fs(u,b|E,p)}function SS(u,p){return p==null||Z2(u,p,pr(p))}function ra(u,p){return u===p||u!==u&&p!==p}var kS=C0(Wp),AS=C0(function(u,p){return u>=p}),Vo=sv(function(){return arguments}())?sv:function(u){return Bn(u)&&Ht.call(u,"callee")&&!H2.call(u,"callee")},St=K.isArray,TS=Io?Fn(Io):F6;function ns(u){return u!=null&&M0(u.length)&&!ti(u)}function $n(u){return Bn(u)&&ns(u)}function DS(u){return u===!0||u===!1||Bn(u)&&Wr(u)==nt}var qi=V5||km,IS=Js?Fn(Js):B6;function MS(u){return Bn(u)&&u.nodeType===1&&!Nd(u)}function RS(u){if(u==null)return!0;if(ns(u)&&(St(u)||typeof u=="string"||typeof u.splice=="function"||qi(u)||Ul(u)||Vo(u)))return!u.length;var p=Dr(u);if(p==Ne||p==ye)return!u.size;if(wd(u))return!$p(u).length;for(var N in u)if(Ht.call(u,N))return!1;return!0}function OS(u,p){return gd(u,p)}function LS(u,p,N){N=typeof N=="function"?N:t;var D=N?N(u,p):t;return D===t?gd(u,p,t,N):!!D}function vm(u){if(!Bn(u))return!1;var p=Wr(u);return p==Pt||p==bt||typeof u.message=="string"&&typeof u.name=="string"&&!Nd(u)}function PS(u){return typeof u=="number"&&$2(u)}function ti(u){if(!Tn(u))return!1;var p=Wr(u);return p==Tt||p==Te||p==Se||p==Ge}function hy(u){return typeof u=="number"&&u==Dt(u)}function M0(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=fe}function Tn(u){var p=typeof u;return u!=null&&(p=="object"||p=="function")}function Bn(u){return u!=null&&typeof u=="object"}var fy=Xu?Fn(Xu):z6;function FS(u,p){return u===p||Vp(u,p,lm(p))}function BS(u,p,N){return N=typeof N=="function"?N:t,Vp(u,p,lm(p),N)}function US(u){return py(u)&&u!=+u}function zS(u){if(C_(u))throw new Ce(o);return av(u)}function qS(u){return u===null}function WS(u){return u==null}function py(u){return typeof u=="number"||Bn(u)&&Wr(u)==Ze}function Nd(u){if(!Bn(u)||Wr(u)!=De)return!1;var p=i0(u);if(p===null)return!0;var N=Ht.call(p,"constructor")&&p.constructor;return typeof N=="function"&&N instanceof N&&ta.call(N)==B5}var ym=je?Fn(je):q6;function HS(u){return hy(u)&&u>=-fe&&u<=fe}var my=kt?Fn(kt):W6;function R0(u){return typeof u=="string"||!St(u)&&Bn(u)&&Wr(u)==ie}function vs(u){return typeof u=="symbol"||Bn(u)&&Wr(u)==He}var Ul=Jn?Fn(Jn):H6;function VS(u){return u===t}function $S(u){return Bn(u)&&Dr(u)==Fe}function YS(u){return Bn(u)&&Wr(u)==ht}var QS=C0(Yp),GS=C0(function(u,p){return u<=p});function xy(u){if(!u)return[];if(ns(u))return R0(u)?x(u):ts(u);if(cd&&u[cd])return Lo(u[cd]());var p=Dr(u),N=p==Ne?Bt:p==ye?i:zl;return N(u)}function ni(u){if(!u)return u===0?u:0;if(u=zs(u),u===me||u===-me){var p=u<0?-1:1;return p*Ie}return u===u?u:0}function Dt(u){var p=ni(u),N=p%1;return p===p?N?p-N:p:0}function gy(u){return u?zo(Dt(u),0,Ye):0}function zs(u){if(typeof u=="number")return u;if(vs(u))return ue;if(Tn(u)){var p=typeof u.valueOf=="function"?u.valueOf():u;u=Tn(p)?p+"":p}if(typeof u!="string")return u===0?u:+u;u=e0(u);var N=Is.test(u);return N||_p.test(u)?kr(u.slice(2),N?2:8):Cl.test(u)?ue:+u}function vy(u){return Na(u,rs(u))}function XS(u){return u?zo(Dt(u),-fe,fe):u===0?u:0}function rn(u){return u==null?"":gs(u)}var KS=Pl(function(u,p){if(wd(p)||ns(p)){Na(p,pr(p),u);return}for(var N in p)Ht.call(p,N)&&pd(u,N,p[N])}),yy=Pl(function(u,p){Na(p,rs(p),u)}),O0=Pl(function(u,p,N,D){Na(p,rs(p),u,D)}),ZS=Pl(function(u,p,N,D){Na(p,pr(p),u,D)}),JS=Ja(Up);function e8(u,p){var N=Ll(u);return p==null?N:K2(N,p)}var t8=Ot(function(u,p){u=it(u);var N=-1,D=p.length,z=D>2?p[2]:t;for(z&&Hr(p[0],p[1],z)&&(D=1);++N<D;)for(var X=p[N],se=rs(X),de=-1,pe=se.length;++de<pe;){var Oe=se[de],Le=u[Oe];(Le===t||ra(Le,En[Oe])&&!Ht.call(u,Oe))&&(u[Oe]=X[Oe])}return u}),n8=Ot(function(u){return u.push(t,Lv),ur(wy,t,u)});function r8(u,p){return Qa(u,vt(p,3),ba)}function s8(u,p){return Qa(u,vt(p,3),qp)}function a8(u,p){return u==null?u:zp(u,vt(p,3),rs)}function i8(u,p){return u==null?u:nv(u,vt(p,3),rs)}function o8(u,p){return u&&ba(u,vt(p,3))}function l8(u,p){return u&&qp(u,vt(p,3))}function c8(u){return u==null?[]:x0(u,pr(u))}function d8(u){return u==null?[]:x0(u,rs(u))}function wm(u,p,N){var D=u==null?t:qo(u,p);return D===t?N:D}function u8(u,p){return u!=null&&Bv(u,p,R6)}function bm(u,p){return u!=null&&Bv(u,p,O6)}var h8=Dv(function(u,p,N){p!=null&&typeof p.toString!="function"&&(p=r0.call(p)),u[p]=N},jm(ss)),f8=Dv(function(u,p,N){p!=null&&typeof p.toString!="function"&&(p=r0.call(p)),Ht.call(u,p)?u[p].push(N):u[p]=[N]},vt),p8=Ot(xd);function pr(u){return ns(u)?G2(u):$p(u)}function rs(u){return ns(u)?G2(u,!0):V6(u)}function m8(u,p){var N={};return p=vt(p,3),ba(u,function(D,z,X){Ka(N,p(D,z,X),D)}),N}function x8(u,p){var N={};return p=vt(p,3),ba(u,function(D,z,X){Ka(N,z,p(D,z,X))}),N}var g8=Pl(function(u,p,N){g0(u,p,N)}),wy=Pl(function(u,p,N,D){g0(u,p,N,D)}),v8=Ja(function(u,p){var N={};if(u==null)return N;var D=!1;p=Nt(p,function(X){return X=Ui(X,u),D||(D=X.length>1),X}),Na(u,im(u),N),D&&(N=Fs(N,b|_|E,h_));for(var z=p.length;z--;)Zp(N,p[z]);return N});function y8(u,p){return by(u,I0(vt(p)))}var w8=Ja(function(u,p){return u==null?{}:Y6(u,p)});function by(u,p){if(u==null)return{};var N=Nt(im(u),function(D){return[D]});return p=vt(p),hv(u,N,function(D,z){return p(D,z[0])})}function b8(u,p,N){p=Ui(p,u);var D=-1,z=p.length;for(z||(z=1,u=t);++D<z;){var X=u==null?t:u[ja(p[D])];X===t&&(D=z,X=N),u=ti(X)?X.call(u):X}return u}function N8(u,p,N){return u==null?u:vd(u,p,N)}function j8(u,p,N,D){return D=typeof D=="function"?D:t,u==null?u:vd(u,p,N,D)}var Ny=Rv(pr),jy=Rv(rs);function C8(u,p,N){var D=St(u),z=D||qi(u)||Ul(u);if(p=vt(p,4),N==null){var X=u&&u.constructor;z?N=D?new X:[]:Tn(u)?N=ti(X)?Ll(i0(u)):{}:N={}}return(z?es:ba)(u,function(se,de,pe){return p(N,se,de,pe)}),N}function _8(u,p){return u==null?!0:Zp(u,p)}function E8(u,p,N){return u==null?u:gv(u,p,tm(N))}function S8(u,p,N,D){return D=typeof D=="function"?D:t,u==null?u:gv(u,p,tm(N),D)}function zl(u){return u==null?[]:Oi(u,pr(u))}function k8(u){return u==null?[]:Oi(u,rs(u))}function A8(u,p,N){return N===t&&(N=p,p=t),N!==t&&(N=zs(N),N=N===N?N:0),p!==t&&(p=zs(p),p=p===p?p:0),zo(zs(u),p,N)}function T8(u,p,N){return p=ni(p),N===t?(N=p,p=0):N=ni(N),u=zs(u),L6(u,p,N)}function D8(u,p,N){if(N&&typeof N!="boolean"&&Hr(u,p,N)&&(p=N=t),N===t&&(typeof p=="boolean"?(N=p,p=t):typeof u=="boolean"&&(N=u,u=t)),u===t&&p===t?(u=0,p=1):(u=ni(u),p===t?(p=u,u=0):p=ni(p)),u>p){var D=u;u=p,p=D}if(N||u%1||p%1){var z=Y2();return Tr(u+z*(p-u+Do("1e-"+((z+"").length-1))),p)}return Gp(u,p)}var I8=Fl(function(u,p,N){return p=p.toLowerCase(),u+(N?Cy(p):p)});function Cy(u){return Nm(rn(u).toLowerCase())}function _y(u){return u=rn(u),u&&u.replace(vr,od).replace(Ap,"")}function M8(u,p,N){u=rn(u),p=gs(p);var D=u.length;N=N===t?D:zo(Dt(N),0,D);var z=N;return N-=p.length,N>=0&&u.slice(N,z)==p}function R8(u){return u=rn(u),u&&zu.test(u)?u.replace(ya,Rp):u}function O8(u){return u=rn(u),u&&qa.test(u)?u.replace(Qc,"\\$&"):u}var L8=Fl(function(u,p,N){return u+(N?"-":"")+p.toLowerCase()}),P8=Fl(function(u,p,N){return u+(N?" ":"")+p.toLowerCase()}),F8=kv("toLowerCase");function B8(u,p,N){u=rn(u),p=Dt(p);var D=p?f(u):0;if(!p||D>=p)return u;var z=(p-D)/2;return j0(d0(z),N)+u+j0(c0(z),N)}function U8(u,p,N){u=rn(u),p=Dt(p);var D=p?f(u):0;return p&&D<p?u+j0(p-D,N):u}function z8(u,p,N){u=rn(u),p=Dt(p);var D=p?f(u):0;return p&&D<p?j0(p-D,N)+u:u}function q8(u,p,N){return N||p==null?p=0:p&&(p=+p),G5(rn(u).replace(_o,""),p||0)}function W8(u,p,N){return(N?Hr(u,p,N):p===t)?p=1:p=Dt(p),Xp(rn(u),p)}function H8(){var u=arguments,p=rn(u[0]);return u.length<3?p:p.replace(u[1],u[2])}var V8=Fl(function(u,p,N){return u+(N?"_":"")+p.toLowerCase()});function $8(u,p,N){return N&&typeof N!="number"&&Hr(u,p,N)&&(p=N=t),N=N===t?Ye:N>>>0,N?(u=rn(u),u&&(typeof p=="string"||p!=null&&!ym(p))&&(p=gs(p),!p&&Li(u))?zi(x(u),0,N):u.split(p,N)):[]}var Y8=Fl(function(u,p,N){return u+(N?" ":"")+Nm(p)});function Q8(u,p,N){return u=rn(u),N=N==null?0:zo(Dt(N),0,u.length),p=gs(p),u.slice(N,N+p.length)==p}function G8(u,p,N){var D=Y.templateSettings;N&&Hr(u,p,N)&&(p=t),u=rn(u),p=O0({},p,D,Ov);var z=O0({},p.imports,D.imports,Ov),X=pr(z),se=Oi(z,X),de,pe,Oe=0,Le=p.interpolate||ln,Ue="__p += '",Xe=jt((p.escape||ln).source+"|"+Le.source+"|"+(Le===nr?Di:ln).source+"|"+(p.evaluate||ln).source+"|$","g"),lt="//# sourceURL="+(Ht.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Va+"]")+`
`;u.replace(Xe,function(wt,Ut,$t,ys,Vr,ws){return $t||($t=ys),Ue+=u.slice(Oe,ws).replace(qu,t0),Ut&&(de=!0,Ue+=`' +
__e(`+Ut+`) +
'`),Vr&&(pe=!0,Ue+=`';
`+Vr+`;
__p += '`),$t&&(Ue+=`' +
((__t = (`+$t+`)) == null ? '' : __t) +
'`),Oe=ws+wt.length,wt}),Ue+=`';
`;var yt=Ht.call(p,"variable")&&p.variable;if(!yt)Ue=`with (obj) {
`+Ue+`
}
`;else if(Gc.test(yt))throw new Ce(m);Ue=(pe?Ue.replace(on,""):Ue).replace(Ur,"$1").replace(Co,"$1;"),Ue="function("+(yt||"obj")+`) {
`+(yt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(de?", __e = _.escape":"")+(pe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ue+`return __p
}`;var Mt=Sy(function(){return Me(X,lt+"return "+Ue).apply(t,se)});if(Mt.source=Ue,vm(Mt))throw Mt;return Mt}function X8(u){return rn(u).toLowerCase()}function K8(u){return rn(u).toUpperCase()}function Z8(u,p,N){if(u=rn(u),u&&(N||p===t))return e0(u);if(!u||!(p=gs(p)))return u;var D=x(u),z=x(p),X=id(D,z),se=xs(D,z)+1;return zi(D,X,se).join("")}function J8(u,p,N){if(u=rn(u),u&&(N||p===t))return u.slice(0,y(u)+1);if(!u||!(p=gs(p)))return u;var D=x(u),z=xs(D,x(p))+1;return zi(D,0,z).join("")}function ek(u,p,N){if(u=rn(u),u&&(N||p===t))return u.replace(_o,"");if(!u||!(p=gs(p)))return u;var D=x(u),z=id(D,x(p));return zi(D,z).join("")}function tk(u,p){var N=re,D=oe;if(Tn(p)){var z="separator"in p?p.separator:z;N="length"in p?Dt(p.length):N,D="omission"in p?gs(p.omission):D}u=rn(u);var X=u.length;if(Li(u)){var se=x(u);X=se.length}if(N>=X)return u;var de=N-f(D);if(de<1)return D;var pe=se?zi(se,0,de).join(""):u.slice(0,de);if(z===t)return pe+D;if(se&&(de+=pe.length-de),ym(z)){if(u.slice(de).search(z)){var Oe,Le=pe;for(z.global||(z=jt(z.source,rn(Eo.exec(z))+"g")),z.lastIndex=0;Oe=z.exec(Le);)var Ue=Oe.index;pe=pe.slice(0,Ue===t?de:Ue)}}else if(u.indexOf(gs(z),de)!=de){var Xe=pe.lastIndexOf(z);Xe>-1&&(pe=pe.slice(0,Xe))}return pe+D}function nk(u){return u=rn(u),u&&Uu.test(u)?u.replace(Wt,j):u}var rk=Fl(function(u,p,N){return u+(N?" ":"")+p.toUpperCase()}),Nm=kv("toUpperCase");function Ey(u,p,N){return u=rn(u),p=N?t:p,p===t?ld(u)?U(u):Ya(u):u.match(p)||[]}var Sy=Ot(function(u,p){try{return ur(u,t,p)}catch(N){return vm(N)?N:new Ce(N)}}),sk=Ja(function(u,p){return es(p,function(N){N=ja(N),Ka(u,N,xm(u[N],u))}),u});function ak(u){var p=u==null?0:u.length,N=vt();return u=p?Nt(u,function(D){if(typeof D[1]!="function")throw new _n(d);return[N(D[0]),D[1]]}):[],Ot(function(D){for(var z=-1;++z<p;){var X=u[z];if(ur(X[0],this,D))return ur(X[1],this,D)}})}function ik(u){return D6(Fs(u,b))}function jm(u){return function(){return u}}function ok(u,p){return u==null||u!==u?p:u}var lk=Tv(),ck=Tv(!0);function ss(u){return u}function Cm(u){return iv(typeof u=="function"?u:Fs(u,b))}function dk(u){return lv(Fs(u,b))}function uk(u,p){return cv(u,Fs(p,b))}var hk=Ot(function(u,p){return function(N){return xd(N,u,p)}}),fk=Ot(function(u,p){return function(N){return xd(u,N,p)}});function _m(u,p,N){var D=pr(p),z=x0(p,D);N==null&&!(Tn(p)&&(z.length||!D.length))&&(N=p,p=u,u=this,z=x0(p,pr(p)));var X=!(Tn(N)&&"chain"in N)||!!N.chain,se=ti(u);return es(z,function(de){var pe=p[de];u[de]=pe,se&&(u.prototype[de]=function(){var Oe=this.__chain__;if(X||Oe){var Le=u(this.__wrapped__),Ue=Le.__actions__=ts(this.__actions__);return Ue.push({func:pe,args:arguments,thisArg:u}),Le.__chain__=Oe,Le}return pe.apply(u,ms([this.value()],arguments))})}),u}function pk(){return Zn._===this&&(Zn._=U5),this}function Em(){}function mk(u){return u=Dt(u),Ot(function(p){return dv(p,u)})}var xk=rm(Nt),gk=rm(Zu),vk=rm(mt);function ky(u){return dm(u)?Il(ja(u)):Q6(u)}function yk(u){return function(p){return u==null?t:qo(u,p)}}var wk=Iv(),bk=Iv(!0);function Sm(){return[]}function km(){return!1}function Nk(){return{}}function jk(){return""}function Ck(){return!0}function _k(u,p){if(u=Dt(u),u<1||u>fe)return[];var N=Ye,D=Tr(u,Ye);p=vt(p),u-=Ye;for(var z=ad(D,p);++N<u;)p(N);return z}function Ek(u){return St(u)?Nt(u,ja):vs(u)?[u]:ts(Qv(rn(u)))}function Sk(u){var p=++Op;return rn(u)+p}var kk=N0(function(u,p){return u+p},0),Ak=sm("ceil"),Tk=N0(function(u,p){return u/p},1),Dk=sm("floor");function Ik(u){return u&&u.length?m0(u,ss,Wp):t}function Mk(u,p){return u&&u.length?m0(u,vt(p,2),Wp):t}function Rk(u){return Dl(u,ss)}function Ok(u,p){return Dl(u,vt(p,2))}function Lk(u){return u&&u.length?m0(u,ss,Yp):t}function Pk(u,p){return u&&u.length?m0(u,vt(p,2),Yp):t}var Fk=N0(function(u,p){return u*p},1),Bk=sm("round"),Uk=N0(function(u,p){return u-p},0);function zk(u){return u&&u.length?Ro(u,ss):0}function qk(u,p){return u&&u.length?Ro(u,vt(p,2)):0}return Y.after=dS,Y.ary=ay,Y.assign=KS,Y.assignIn=yy,Y.assignInWith=O0,Y.assignWith=ZS,Y.at=JS,Y.before=iy,Y.bind=xm,Y.bindAll=sk,Y.bindKey=oy,Y.castArray=NS,Y.chain=ny,Y.chunk=D_,Y.compact=I_,Y.concat=M_,Y.cond=ak,Y.conforms=ik,Y.constant=jm,Y.countBy=zE,Y.create=e8,Y.curry=ly,Y.curryRight=cy,Y.debounce=dy,Y.defaults=t8,Y.defaultsDeep=n8,Y.defer=uS,Y.delay=hS,Y.difference=R_,Y.differenceBy=O_,Y.differenceWith=L_,Y.drop=P_,Y.dropRight=F_,Y.dropRightWhile=B_,Y.dropWhile=U_,Y.fill=z_,Y.filter=WE,Y.flatMap=$E,Y.flatMapDeep=YE,Y.flatMapDepth=QE,Y.flatten=Zv,Y.flattenDeep=q_,Y.flattenDepth=W_,Y.flip=fS,Y.flow=lk,Y.flowRight=ck,Y.fromPairs=H_,Y.functions=c8,Y.functionsIn=d8,Y.groupBy=GE,Y.initial=$_,Y.intersection=Y_,Y.intersectionBy=Q_,Y.intersectionWith=G_,Y.invert=h8,Y.invertBy=f8,Y.invokeMap=KE,Y.iteratee=Cm,Y.keyBy=ZE,Y.keys=pr,Y.keysIn=rs,Y.map=A0,Y.mapKeys=m8,Y.mapValues=x8,Y.matches=dk,Y.matchesProperty=uk,Y.memoize=D0,Y.merge=g8,Y.mergeWith=wy,Y.method=hk,Y.methodOf=fk,Y.mixin=_m,Y.negate=I0,Y.nthArg=mk,Y.omit=v8,Y.omitBy=y8,Y.once=pS,Y.orderBy=JE,Y.over=xk,Y.overArgs=mS,Y.overEvery=gk,Y.overSome=vk,Y.partial=gm,Y.partialRight=uy,Y.partition=eS,Y.pick=w8,Y.pickBy=by,Y.property=ky,Y.propertyOf=yk,Y.pull=J_,Y.pullAll=ey,Y.pullAllBy=eE,Y.pullAllWith=tE,Y.pullAt=nE,Y.range=wk,Y.rangeRight=bk,Y.rearg=xS,Y.reject=rS,Y.remove=rE,Y.rest=gS,Y.reverse=pm,Y.sampleSize=aS,Y.set=N8,Y.setWith=j8,Y.shuffle=iS,Y.slice=sE,Y.sortBy=cS,Y.sortedUniq=uE,Y.sortedUniqBy=hE,Y.split=$8,Y.spread=vS,Y.tail=fE,Y.take=pE,Y.takeRight=mE,Y.takeRightWhile=xE,Y.takeWhile=gE,Y.tap=IE,Y.throttle=yS,Y.thru=k0,Y.toArray=xy,Y.toPairs=Ny,Y.toPairsIn=jy,Y.toPath=Ek,Y.toPlainObject=vy,Y.transform=C8,Y.unary=wS,Y.union=vE,Y.unionBy=yE,Y.unionWith=wE,Y.uniq=bE,Y.uniqBy=NE,Y.uniqWith=jE,Y.unset=_8,Y.unzip=mm,Y.unzipWith=ty,Y.update=E8,Y.updateWith=S8,Y.values=zl,Y.valuesIn=k8,Y.without=CE,Y.words=Ey,Y.wrap=bS,Y.xor=_E,Y.xorBy=EE,Y.xorWith=SE,Y.zip=kE,Y.zipObject=AE,Y.zipObjectDeep=TE,Y.zipWith=DE,Y.entries=Ny,Y.entriesIn=jy,Y.extend=yy,Y.extendWith=O0,_m(Y,Y),Y.add=kk,Y.attempt=Sy,Y.camelCase=I8,Y.capitalize=Cy,Y.ceil=Ak,Y.clamp=A8,Y.clone=jS,Y.cloneDeep=_S,Y.cloneDeepWith=ES,Y.cloneWith=CS,Y.conformsTo=SS,Y.deburr=_y,Y.defaultTo=ok,Y.divide=Tk,Y.endsWith=M8,Y.eq=ra,Y.escape=R8,Y.escapeRegExp=O8,Y.every=qE,Y.find=HE,Y.findIndex=Xv,Y.findKey=r8,Y.findLast=VE,Y.findLastIndex=Kv,Y.findLastKey=s8,Y.floor=Dk,Y.forEach=ry,Y.forEachRight=sy,Y.forIn=a8,Y.forInRight=i8,Y.forOwn=o8,Y.forOwnRight=l8,Y.get=wm,Y.gt=kS,Y.gte=AS,Y.has=u8,Y.hasIn=bm,Y.head=Jv,Y.identity=ss,Y.includes=XE,Y.indexOf=V_,Y.inRange=T8,Y.invoke=p8,Y.isArguments=Vo,Y.isArray=St,Y.isArrayBuffer=TS,Y.isArrayLike=ns,Y.isArrayLikeObject=$n,Y.isBoolean=DS,Y.isBuffer=qi,Y.isDate=IS,Y.isElement=MS,Y.isEmpty=RS,Y.isEqual=OS,Y.isEqualWith=LS,Y.isError=vm,Y.isFinite=PS,Y.isFunction=ti,Y.isInteger=hy,Y.isLength=M0,Y.isMap=fy,Y.isMatch=FS,Y.isMatchWith=BS,Y.isNaN=US,Y.isNative=zS,Y.isNil=WS,Y.isNull=qS,Y.isNumber=py,Y.isObject=Tn,Y.isObjectLike=Bn,Y.isPlainObject=Nd,Y.isRegExp=ym,Y.isSafeInteger=HS,Y.isSet=my,Y.isString=R0,Y.isSymbol=vs,Y.isTypedArray=Ul,Y.isUndefined=VS,Y.isWeakMap=$S,Y.isWeakSet=YS,Y.join=X_,Y.kebabCase=L8,Y.last=Us,Y.lastIndexOf=K_,Y.lowerCase=P8,Y.lowerFirst=F8,Y.lt=QS,Y.lte=GS,Y.max=Ik,Y.maxBy=Mk,Y.mean=Rk,Y.meanBy=Ok,Y.min=Lk,Y.minBy=Pk,Y.stubArray=Sm,Y.stubFalse=km,Y.stubObject=Nk,Y.stubString=jk,Y.stubTrue=Ck,Y.multiply=Fk,Y.nth=Z_,Y.noConflict=pk,Y.noop=Em,Y.now=T0,Y.pad=B8,Y.padEnd=U8,Y.padStart=z8,Y.parseInt=q8,Y.random=D8,Y.reduce=tS,Y.reduceRight=nS,Y.repeat=W8,Y.replace=H8,Y.result=b8,Y.round=Bk,Y.runInContext=q,Y.sample=sS,Y.size=oS,Y.snakeCase=V8,Y.some=lS,Y.sortedIndex=aE,Y.sortedIndexBy=iE,Y.sortedIndexOf=oE,Y.sortedLastIndex=lE,Y.sortedLastIndexBy=cE,Y.sortedLastIndexOf=dE,Y.startCase=Y8,Y.startsWith=Q8,Y.subtract=Uk,Y.sum=zk,Y.sumBy=qk,Y.template=G8,Y.times=_k,Y.toFinite=ni,Y.toInteger=Dt,Y.toLength=gy,Y.toLower=X8,Y.toNumber=zs,Y.toSafeInteger=XS,Y.toString=rn,Y.toUpper=K8,Y.trim=Z8,Y.trimEnd=J8,Y.trimStart=ek,Y.truncate=tk,Y.unescape=nk,Y.uniqueId=Sk,Y.upperCase=rk,Y.upperFirst=Nm,Y.each=ry,Y.eachRight=sy,Y.first=Jv,_m(Y,function(){var u={};return ba(Y,function(p,N){Ht.call(Y.prototype,N)||(u[N]=p)}),u}(),{chain:!1}),Y.VERSION=r,es(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){Y[u].placeholder=Y}),es(["drop","take"],function(u,p){Vt.prototype[u]=function(N){N=N===t?1:ir(Dt(N),0);var D=this.__filtered__&&!p?new Vt(this):this.clone();return D.__filtered__?D.__takeCount__=Tr(N,D.__takeCount__):D.__views__.push({size:Tr(N,Ye),type:u+(D.__dir__<0?"Right":"")}),D},Vt.prototype[u+"Right"]=function(N){return this.reverse()[u](N).reverse()}}),es(["filter","map","takeWhile"],function(u,p){var N=p+1,D=N==ve||N==Q;Vt.prototype[u]=function(z){var X=this.clone();return X.__iteratees__.push({iteratee:vt(z,3),type:N}),X.__filtered__=X.__filtered__||D,X}}),es(["head","last"],function(u,p){var N="take"+(p?"Right":"");Vt.prototype[u]=function(){return this[N](1).value()[0]}}),es(["initial","tail"],function(u,p){var N="drop"+(p?"":"Right");Vt.prototype[u]=function(){return this.__filtered__?new Vt(this):this[N](1)}}),Vt.prototype.compact=function(){return this.filter(ss)},Vt.prototype.find=function(u){return this.filter(u).head()},Vt.prototype.findLast=function(u){return this.reverse().find(u)},Vt.prototype.invokeMap=Ot(function(u,p){return typeof u=="function"?new Vt(this):this.map(function(N){return xd(N,u,p)})}),Vt.prototype.reject=function(u){return this.filter(I0(vt(u)))},Vt.prototype.slice=function(u,p){u=Dt(u);var N=this;return N.__filtered__&&(u>0||p<0)?new Vt(N):(u<0?N=N.takeRight(-u):u&&(N=N.drop(u)),p!==t&&(p=Dt(p),N=p<0?N.dropRight(-p):N.take(p-u)),N)},Vt.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},Vt.prototype.toArray=function(){return this.take(Ye)},ba(Vt.prototype,function(u,p){var N=/^(?:filter|find|map|reject)|While$/.test(p),D=/^(?:head|last)$/.test(p),z=Y[D?"take"+(p=="last"?"Right":""):p],X=D||/^find/.test(p);z&&(Y.prototype[p]=function(){var se=this.__wrapped__,de=D?[1]:arguments,pe=se instanceof Vt,Oe=de[0],Le=pe||St(se),Ue=function(Ut){var $t=z.apply(Y,ms([Ut],de));return D&&Xe?$t[0]:$t};Le&&N&&typeof Oe=="function"&&Oe.length!=1&&(pe=Le=!1);var Xe=this.__chain__,lt=!!this.__actions__.length,yt=X&&!Xe,Mt=pe&&!lt;if(!X&&Le){se=Mt?se:new Vt(this);var wt=u.apply(se,de);return wt.__actions__.push({func:k0,args:[Ue],thisArg:t}),new Ps(wt,Xe)}return yt&&Mt?u.apply(this,de):(wt=this.thru(Ue),yt?D?wt.value()[0]:wt.value():wt)})}),es(["pop","push","shift","sort","splice","unshift"],function(u){var p=ar[u],N=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",D=/^(?:pop|shift)$/.test(u);Y.prototype[u]=function(){var z=arguments;if(D&&!this.__chain__){var X=this.value();return p.apply(St(X)?X:[],z)}return this[N](function(se){return p.apply(St(se)?se:[],z)})}}),ba(Vt.prototype,function(u,p){var N=Y[p];if(N){var D=N.name+"";Ht.call(Ol,D)||(Ol[D]=[]),Ol[D].push({name:p,func:N})}}),Ol[b0(t,S).name]=[{name:"wrapper",func:t}],Vt.prototype.clone=n6,Vt.prototype.reverse=r6,Vt.prototype.value=s6,Y.prototype.at=ME,Y.prototype.chain=RE,Y.prototype.commit=OE,Y.prototype.next=LE,Y.prototype.plant=FE,Y.prototype.reverse=BE,Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=UE,Y.prototype.first=Y.prototype.head,cd&&(Y.prototype[cd]=PE),Y},J=H();$a?(($a.exports=J)._=J,nd._=J):Zn._=J}).call(Da)})(Tf,Tf.exports);var u5=Tf.exports;const PB=({search:e,onApply:n,onDelete:t})=>s.jsxs("div",{className:"inline-flex items-center bg-primary-50 text-primary-700 rounded-full px-3 py-1 text-sm mr-2 mb-2",children:[s.jsx("button",{onClick:()=>n(e),className:"mr-1 hover:text-primary-900","aria-label":`Apply saved search: ${e.name}`,children:e.name}),s.jsx("button",{onClick:()=>t(e.id),className:"ml-1 text-primary-400 hover:text-primary-700","aria-label":`Delete saved search: ${e.name}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),x1=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"})}),p3=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"})}),FB=({equipmentData:e,onFilterChange:n,currentFilters:t,isLoading:r})=>{const o=(()=>{if(!e||e.length===0)return{total:0,available:0,inUse:0,maintenance:0,categories:{},types:{},locations:{},brands:{},recentlyAdded:0};const v={total:e.length,available:0,inUse:0,maintenance:0,categories:{},types:{},locations:{},brands:{},recentlyAdded:0},g=new Date;return g.setDate(g.getDate()-7),e.forEach(w=>{w.status==="available"?v.available++:w.status==="in-use"?v.inUse++:w.status==="maintenance"&&v.maintenance++;const b=w.category||"Uncategorized";v.categories[b]=(v.categories[b]||0)+1;const _=w.type||"Unknown";v.types[_]=(v.types[_]||0)+1;const E=w.location||"No Location";v.locations[E]=(v.locations[E]||0)+1;const T=w.brand||"Unknown";v.brands[T]=(v.brands[T]||0)+1,new Date(w.created_at)>g&&v.recentlyAdded++}),v})(),d=[{title:"Total Equipment",value:o.total,icon:s.jsx(p3,{}),color:"blue",filter:{status:""},description:"All equipment in system"},{title:"Available",value:o.available,icon:s.jsx(x1,{}),color:"green",filter:{status:"available"},description:"Ready for use"},{title:"In Use",value:o.inUse,icon:s.jsx(x1,{}),color:"yellow",filter:{status:"in-use"},description:"Currently deployed"},{title:"Maintenance",value:o.maintenance,icon:s.jsx(x1,{}),color:"red",filter:{status:"maintenance"},description:"Under repair"}],m=(v,g=!1)=>{const w={blue:{bg:g?"bg-blue-100 border-blue-500":"bg-blue-50 hover:bg-blue-100",text:"text-blue-700",border:"border-l-4 border-blue-500",icon:"text-blue-600"},green:{bg:g?"bg-green-100 border-green-500":"bg-green-50 hover:bg-green-100",text:"text-green-700",border:"border-l-4 border-green-500",icon:"text-green-600"},yellow:{bg:g?"bg-yellow-100 border-yellow-500":"bg-yellow-50 hover:bg-yellow-100",text:"text-yellow-700",border:"border-l-4 border-yellow-500",icon:"text-yellow-600"},red:{bg:g?"bg-red-100 border-red-500":"bg-red-50 hover:bg-red-100",text:"text-red-700",border:"border-l-4 border-red-500",icon:"text-red-600"}};return w[v]||w.blue};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[s.jsx(p3,{}),"Equipment Analytics"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:d.map((v,g)=>{const w=t.status===v.filter.status,b=m(v.color,w);return s.jsx("button",{onClick:()=>n(v.filter),className:`${b.bg} ${b.border} p-4 rounded-lg transition-all duration-200 hover:shadow-md cursor-pointer text-left group ${w?"ring-2 ring-offset-2 ring-blue-500":""}`,title:`Filter by ${v.title.toLowerCase()}: ${v.description}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:`text-sm font-medium ${b.text} mb-1`,children:v.title}),s.jsx("p",{className:`text-2xl font-bold ${b.text}`,children:r?"...":v.value.toLocaleString()}),s.jsx("p",{className:`text-xs ${b.text} opacity-75 mt-1`,children:v.description})]}),s.jsx("div",{className:`${b.icon} group-hover:scale-110 transition-transform`,children:v.icon})]})},g)})})]}),s.jsx("div",{className:"bg-gradient-to-r from-primary-50 to-blue-50 rounded-lg p-4",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-primary-700",children:Object.keys(o.brands).length}),s.jsx("p",{className:"text-sm text-primary-600",children:"Brands"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-primary-700",children:Object.keys(o.types).length}),s.jsx("p",{className:"text-sm text-primary-600",children:"Types"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-primary-700",children:Object.keys(o.locations).length}),s.jsx("p",{className:"text-sm text-primary-600",children:"Locations"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-700",children:o.recentlyAdded}),s.jsx("p",{className:"text-sm text-green-600",children:"Added This Week"})]})]})})]})},BB=()=>{var Pt,Tt;const{user:e,canEditEquipment:n}=dr(),t=pn(),r=M.useRef(null),[a,o]=M.useState({search:"",type:"",brand:"",status:"",location:"",dateRange:{startDate:null,endDate:null}}),[d,m]=M.useState("updated_at"),[v,g]=M.useState("desc"),[w,b]=M.useState(""),[_,E]=M.useState(!1),[T,I]=M.useState(!1),[k,S]=M.useState(!1),[A,O]=M.useState(""),[P,$]=M.useState(!1),{data:L,isLoading:F}=ut(["equipment-summary"],()=>Oa({limit:1e3}));(()=>{if(!(L!=null&&L.equipment))return{total:0,available:0,inUse:0,maintenance:0};const Te={total:L.equipment.length,available:0,inUse:0,maintenance:0,types:{}};return L.equipment.forEach(Ne=>{Ne.status==="available"?Te.available++:Ne.status==="in-use"?Te.inUse++:Ne.status==="maintenance"&&Te.maintenance++,Te.types[Ne.type]?Te.types[Ne.type]++:Te.types[Ne.type]=1}),Te})();const{data:V,fetchNextPage:re,hasNextPage:oe,isFetchingNextPage:ee,isLoading:he,isError:ve,error:ne}=s2(["equipment",a,d,v],async({pageParam:Te=1})=>{const Ne={page:Te,limit:20,...a,sortBy:d,sortOrder:v};return a.dateRange.startDate&&a.dateRange.endDate&&(Ne.startDate=a.dateRange.startDate.toISOString(),Ne.endDate=a.dateRange.endDate.toISOString()),Oa(Ne)},{getNextPageParam:Te=>{if(Te.page<Te.totalPages)return Te.page+1},keepPreviousData:!0}),{data:Q,isLoading:me}=ut(["equipment-suggestions",w],()=>Oa({search:w,limit:5}),{enabled:!!w&&w.length>2,keepPreviousData:!0}),{data:fe}=ut(["saved-searches"],kC,{enabled:n()}),{data:Ie}=ut({queryKey:["equipment-types"],queryFn:ki,staleTime:3e5});ut({queryKey:["categories"],queryFn:Vc});const{data:ue}=ut(["equipment-analytics"],()=>Oa({limit:1e4}),{keepPreviousData:!0}),Ye=M.useCallback(u5.debounce(Te=>{b(Te)},300),[]),we=Te=>{const Ne=Te.target.value,Ze={...a,search:Ne};o(Ze),Ye(Ne),Ne.length>2?E(!0):E(!1);const be=Object.values(Ze).some(De=>De!==""&&De!==null&&(typeof De!="object"||Ze.dateRange.startDate||Ze.dateRange.endDate));I(be)},Ve=Te=>{const{name:Ne,value:Ze}=Te.target,be={...a,[Ne]:Ze};o(be);const De=Object.values(be).some($e=>$e!==""&&$e!==null&&(typeof $e!="object"||$e.startDate||$e.endDate));I(De)},Be=Te=>{const Ne={...a,...Te};o(Ne),I(!0),$(!0)},ct=()=>{o({search:"",status:"",type:"",brand:"",location:"",dateRange:{startDate:null,endDate:null}}),I(!1),$(!1)},Ae=Te=>{const[Ne,Ze]=Te,be={...a,dateRange:{startDate:Ne,endDate:Ze}};o(be);const De=Object.values(be).some($e=>$e!==""&&$e!==null&&(typeof $e!="object"||be.dateRange.startDate||be.dateRange.endDate));I(De)},Se=async()=>{if(!A.trim()){Qe.error("Please enter a name for your saved search");return}try{await AC({name:A,filters:JSON.stringify(a),sortBy:d,sortOrder:v}),t.invalidateQueries(["saved-searches"]),O(""),S(!1),Qe.success("Search saved successfully")}catch(Te){Qe.error("Failed to save search"),console.error("Save search error:",Te)}},nt=Te=>{try{const Ne=JSON.parse(Te.filters);o(Ne),m(Te.sortBy||"updated_at"),g(Te.sortOrder||"desc"),I(!0),Qe.info(`Applied saved search: ${Te.name}`)}catch(Ne){Qe.error("Failed to apply saved search"),console.error("Apply saved search error:",Ne)}},qt=async Te=>{try{await TC(Te),t.invalidateQueries(["saved-searches"]),Qe.success("Search deleted successfully")}catch(Ne){Qe.error("Failed to delete search"),console.error("Delete saved search error:",Ne)}};M.useEffect(()=>{const Te=new IntersectionObserver(Ne=>{Ne[0].isIntersecting&&oe&&!ee&&re()},{threshold:.5});return r.current&&Te.observe(r.current),()=>{r.current&&Te.unobserve(r.current)}},[r,re,oe,ee]);const bt=(V==null?void 0:V.pages.flatMap(Te=>Te.equipment))||[];return s.jsxs("div",{className:"space-y-6",children:[s.jsx(up,{position:"top-right",autoClose:3e3}),s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Dashboard"}),s.jsx(qn,{to:"/equipment/new",className:"btn btn-primary",children:"Add New Equipment"})]}),s.jsxs("div",{className:"sticky top-16 z-20 bg-slate-50 pt-4 pb-2 shadow-sm",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"search",name:"search",placeholder:"Search equipment by brand, model, serial number...",value:a.search,onChange:we,className:"w-full px-4 py-3 pl-10 rounded-full shadow-md border border-slate-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","aria-label":"Search equipment catalog"}),s.jsx(u2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),_&&((Pt=Q==null?void 0:Q.equipment)==null?void 0:Pt.length)>0&&s.jsx("div",{className:"absolute z-30 left-0 right-0 mt-1 bg-white rounded-lg shadow-lg border border-slate-200 max-h-80 overflow-y-auto",children:Q.equipment.map(Te=>s.jsxs(qn,{to:`/equipment/${Te.id}`,className:"block px-4 py-2 hover:bg-slate-50 border-b border-slate-100 last:border-0",children:[s.jsxs("div",{className:"font-medium",children:[Te.brand," ",Te.model]}),s.jsxs("div",{className:"text-sm text-slate-500",children:[Te.type,"  SN: ",Te.serial_number]})]},Te.id))})]}),s.jsx("div",{className:"flex justify-between mt-2",children:s.jsxs("button",{onClick:()=>$(!P),className:"flex items-center text-sm text-slate-600 hover:text-primary-600",children:[s.jsx(h2,{className:"w-4 h-4 mr-1"}),P?"Hide Filters":"Show Advanced Filters"]})})]}),n()&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"Saved Searches"}),k?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{id:"savedSearchName",name:"savedSearchName",placeholder:"Enter search name",value:A,onChange:Te=>O(Te.target.value),className:"w-48 px-3 py-1 text-sm border border-slate-300 rounded-lg"}),s.jsx("button",{className:"px-3 py-1 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700",onClick:Se,children:"Save"}),s.jsx("button",{className:"px-3 py-1 text-sm border border-slate-300 rounded-lg hover:bg-slate-50",onClick:()=>{S(!1),O("")},children:"Cancel"})]}):s.jsxs("button",{className:"flex items-center gap-1 px-3 py-1 text-sm border border-slate-300 rounded-lg hover:bg-slate-50",onClick:()=>S(!0),children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),s.jsx("span",{children:"Save Current Search"})]})]}),s.jsx("div",{className:"flex flex-wrap",children:((Tt=fe==null?void 0:fe.searches)==null?void 0:Tt.length)>0?fe.searches.map(Te=>s.jsx(PB,{search:Te,onApply:nt,onDelete:qt},Te.id)):s.jsx("p",{className:"text-slate-500 text-sm",children:"No saved searches yet. Save your current search to access it quickly later."})})]}),s.jsx("div",{id:"filter-panel",className:`bg-white rounded-lg shadow-md border border-slate-200 overflow-hidden transition-all duration-300 ${P?"max-h-96 opacity-100 mb-6":"max-h-0 opacity-0 mb-0"}`,children:s.jsxs("div",{className:"p-4",children:[s.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-4",children:"Advanced Filters"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Equipment Type"}),s.jsxs("select",{name:"type",value:a.type,onChange:Ve,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white shadow-sm",children:[s.jsx("option",{value:"",children:"All Types"}),Ie!=null&&Ie.types&&Ie.types.length>0?Ie.types.map(Te=>s.jsx("option",{value:Te.name.toLowerCase(),children:Te.name},Te.id)):s.jsx("option",{value:"",disabled:!0,children:"Loading types..."})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Brand"}),s.jsx("input",{type:"text",name:"brand",value:a.brand,onChange:Ve,placeholder:"Filter by brand",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white shadow-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),s.jsxs("select",{name:"status",value:a.status,onChange:Ve,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white shadow-sm",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"available",children:"Available"}),s.jsx("option",{value:"in-use",children:"In Use"}),s.jsx("option",{value:"maintenance",children:"Maintenance"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Location"}),s.jsx("input",{type:"text",name:"location",value:a.location,onChange:Ve,placeholder:"Filter by location",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white shadow-sm"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date Range"}),s.jsx(d5,{selectsRange:!0,startDate:a.dateRange.startDate,endDate:a.dateRange.endDate,onChange:Ae,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white shadow-sm",placeholderText:"Select date range",isClearable:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sort By"}),s.jsxs("select",{value:d,onChange:Te=>m(Te.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white shadow-sm",children:[s.jsx("option",{value:"updated_at",children:"Last Updated"}),s.jsx("option",{value:"brand",children:"Brand"}),s.jsx("option",{value:"model",children:"Model"}),s.jsx("option",{value:"type",children:"Type"}),s.jsx("option",{value:"status",children:"Status"}),s.jsx("option",{value:"location",children:"Location"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sort Order"}),s.jsxs("select",{value:v,onChange:Te=>g(Te.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white shadow-sm",children:[s.jsx("option",{value:"asc",children:"Ascending"}),s.jsx("option",{value:"desc",children:"Descending"})]})]})]})]})}),T?s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-slate-200 overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-slate-200 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"Search Results"}),s.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[bt.length," items found"]})]}),s.jsxs("button",{onClick:ct,className:"px-3 py-2 text-sm bg-white border border-slate-300 rounded-lg hover:bg-slate-50 flex items-center",title:"Clear all filters and return to dashboard",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear Filters"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 text-left",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Brand"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Model"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Serial Number"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Location"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:he?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-slate-500",children:s.jsxs("div",{className:"flex justify-center items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600 mr-2"}),"Loading..."]})})}):ve?s.jsx("tr",{children:s.jsxs("td",{colSpan:"7",className:"px-6 py-4 text-center text-red-500",children:["Error loading equipment: ",ne.message]})}):bt.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-slate-500",children:"No equipment found matching your search criteria"})}):bt.map(Te=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:Te.type}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:Te.brand}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:Te.model}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:Te.serial_number}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Te.status==="available"?"bg-green-100 text-green-800":Te.status==="in-use"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:Te.status})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:Te.location||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(qn,{to:`/equipment/${Te.id}`,className:"text-primary-600 hover:text-primary-900",title:"View details",children:s.jsx(ic,{className:"w-5 h-5"})}),n()&&s.jsx(s.Fragment,{children:s.jsx(qn,{to:`/equipment/${Te.id}/edit`,className:"text-slate-600 hover:text-slate-900",title:"Edit equipment",children:s.jsx(fa,{className:"w-5 h-5"})})})]})})]},Te.id))})]})}),s.jsx("div",{ref:r,className:"py-4 text-center",children:ee?s.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"}),s.jsx("span",{className:"text-slate-500",children:"Loading more..."})]}):oe?s.jsx("span",{className:"text-sm text-slate-500",children:"Scroll to load more"}):s.jsx("span",{className:"text-sm text-slate-500",children:"No more equipment to load"})})]}):s.jsx("div",{className:"grid grid-cols-1 gap-6",children:s.jsx(FB,{equipmentData:(ue==null?void 0:ue.equipment)||[],onFilterChange:Be,currentFilters:a,isLoading:F})})]})},UB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),zB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z",clipRule:"evenodd"})}),qB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})}),WB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),HB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),VB=()=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[s.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),s.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),$B=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),g1=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"})}),Kd=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"})}),YB=({equipmentData:e,onFilterChange:n,currentFilters:t,isLoading:r})=>{const o=(()=>{if(!e||e.length===0)return{total:0,available:0,inUse:0,maintenance:0,categories:{},types:{},locations:{},brands:{},recentlyAdded:0};const v={total:e.length,available:0,inUse:0,maintenance:0,categories:{},types:{},locations:{},brands:{},recentlyAdded:0},g=new Date;return g.setDate(g.getDate()-7),e.forEach(w=>{w.status==="available"?v.available++:w.status==="in-use"?v.inUse++:w.status==="maintenance"&&v.maintenance++;const b=w.category||"Uncategorized";v.categories[b]=(v.categories[b]||0)+1;const _=w.type||"Unknown";v.types[_]=(v.types[_]||0)+1;const E=w.location||"No Location";v.locations[E]=(v.locations[E]||0)+1;const T=w.brand||"Unknown";v.brands[T]=(v.brands[T]||0)+1,new Date(w.created_at)>g&&v.recentlyAdded++}),v})(),d=[{title:"Total Equipment",value:o.total,icon:s.jsx(Kd,{}),color:"blue",filter:{status:""},description:"All equipment in system"},{title:"Available",value:o.available,icon:s.jsx(g1,{}),color:"green",filter:{status:"available"},description:"Ready for use"},{title:"In Use",value:o.inUse,icon:s.jsx(g1,{}),color:"yellow",filter:{status:"in-use"},description:"Currently deployed"},{title:"Maintenance",value:o.maintenance,icon:s.jsx(g1,{}),color:"red",filter:{status:"maintenance"},description:"Under repair"}],m=(v,g=!1)=>{const w={blue:{bg:g?"bg-blue-100 border-blue-500":"bg-blue-50 hover:bg-blue-100",text:"text-blue-700",border:"border-l-4 border-blue-500",icon:"text-blue-600"},green:{bg:g?"bg-green-100 border-green-500":"bg-green-50 hover:bg-green-100",text:"text-green-700",border:"border-l-4 border-green-500",icon:"text-green-600"},yellow:{bg:g?"bg-yellow-100 border-yellow-500":"bg-yellow-50 hover:bg-yellow-100",text:"text-yellow-700",border:"border-l-4 border-yellow-500",icon:"text-yellow-600"},red:{bg:g?"bg-red-100 border-red-500":"bg-red-50 hover:bg-red-100",text:"text-red-700",border:"border-l-4 border-red-500",icon:"text-red-600"}};return w[v]||w.blue};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[s.jsx(Kd,{}),"Equipment Analytics"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:d.map((v,g)=>{const w=t.status===v.filter.status,b=m(v.color,w);return s.jsx("button",{onClick:()=>n(v.filter),className:`${b.bg} ${b.border} p-4 rounded-lg transition-all duration-200 hover:shadow-md cursor-pointer text-left group ${w?"ring-2 ring-offset-2 ring-blue-500":""}`,title:`Filter by ${v.title.toLowerCase()}: ${v.description}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:`text-sm font-medium ${b.text} mb-1`,children:v.title}),s.jsx("p",{className:`text-2xl font-bold ${b.text}`,children:r?"...":v.value.toLocaleString()}),s.jsx("p",{className:`text-xs ${b.text} opacity-75 mt-1`,children:v.description})]}),s.jsx("div",{className:`${b.icon} group-hover:scale-110 transition-transform`,children:v.icon})]})},g)})})]}),s.jsx("div",{className:"bg-gradient-to-r from-primary-50 to-blue-50 rounded-lg p-4",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-primary-700",children:Object.keys(o.brands).length}),s.jsx("p",{className:"text-sm text-primary-600",children:"Brands"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-primary-700",children:Object.keys(o.types).length}),s.jsx("p",{className:"text-sm text-primary-600",children:"Types"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-primary-700",children:Object.keys(o.locations).length}),s.jsx("p",{className:"text-sm text-primary-600",children:"Locations"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-700",children:o.recentlyAdded}),s.jsx("p",{className:"text-sm text-green-600",children:"Added This Week"})]})]})})]})},QB=({equipment:e,canEdit:n,searchTerm:t})=>{const[r,a]=M.useState(!1);let o=null;if(e.reference_image_id)o=mf(e.reference_image_id,!0);else if(e.files&&e.files.length>0){const v=e.files.find(g=>g.file_type==="image");v&&(o=mf(v.id,!0))}const d=v=>{switch(v){case"available":return s.jsx(js,{variant:"success",children:v});case"in-use":return s.jsx(js,{variant:"info",children:v});case"maintenance":return s.jsx(js,{variant:"warning",children:v});case"unavailable":return s.jsx(js,{variant:"secondary",children:v});case"broken":return s.jsx(js,{variant:"danger",children:v});default:return s.jsx(js,{children:v})}},m=(v,g)=>{if(!g||!v)return v;const w=new RegExp(`(${g})`,"gi");return v.split(w).map((_,E)=>w.test(_)?s.jsx("span",{className:"bg-yellow-200 font-medium",children:_},E):_)};return s.jsxs(qe,{className:"h-full transition-all duration-300 hover:shadow-lg hover:scale-[1.02] relative",children:[s.jsxs("div",{className:"relative h-40 bg-slate-100 rounded-t-lg overflow-hidden",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[o?s.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",children:s.jsx("img",{src:o,alt:`${e.brand} ${e.model}`,className:"w-full h-full object-contain",style:{objectFit:"contain",objectPosition:"center"}})}):s.jsx("div",{className:"flex items-center justify-center h-full bg-slate-200",children:s.jsx("span",{className:"text-slate-400 text-lg",children:"No image"})}),r&&s.jsxs("div",{className:"absolute inset-0 bg-slate-900 bg-opacity-80 p-4 text-white overflow-y-auto",children:[s.jsxs("h4",{className:"font-medium",children:[e.brand," ",e.model]}),s.jsx("p",{className:"text-sm mt-1",children:e.description||"No description available"}),s.jsxs("p",{className:"text-sm mt-2",children:["Serial: ",e.serial_number]}),s.jsxs("p",{className:"text-sm",children:["Location: ",e.location||"Not specified"]})]})]}),s.jsxs(qe.Body,{children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-slate-800 capitalize",children:e.type}),e.category&&s.jsxs("p",{className:"text-xs text-slate-500",children:["Category: ",e.category]})]}),d(e.status)]}),s.jsx("h2",{className:"text-lg font-semibold mb-1",children:t?s.jsxs(s.Fragment,{children:[m(e.brand,t)," ",m(e.model,t)]}):`${e.brand} ${e.model}`}),s.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["SN: ",t?m(e.serial_number,t):e.serial_number]}),s.jsxs("div",{className:"flex justify-between mt-auto pt-2 border-t border-slate-100",children:[s.jsxs(qn,{to:`/equipment/${e.id}`,className:"text-primary-600 hover:text-primary-800 flex items-center gap-1",children:[s.jsx(VB,{})," View"]}),n&&s.jsxs(qn,{to:`/equipment/${e.id}/edit`,className:"text-slate-600 hover:text-slate-800 flex items-center gap-1",children:[s.jsx(HB,{})," Edit"]})]})]})]})},GB=({equipment:e,canEdit:n,navigate:t})=>{const r=(a,o)=>{o.target.closest("button")||o.target.closest("a")||t(`/equipment/${a}`)};return s.jsxs("tr",{className:"table-row hover:bg-slate-50 cursor-pointer",onClick:a=>r(e.id,a),children:[s.jsx("td",{className:"table-cell",children:s.jsxs("span",{className:"font-medium text-slate-800",children:[e.brand," ",e.model]})}),s.jsx("td",{className:"table-cell",children:e.type}),s.jsx("td",{className:"table-cell",children:e.category||"-"}),s.jsx("td",{className:"table-cell",children:e.serial_number}),s.jsx("td",{className:"table-cell",children:s.jsx("span",{className:`badge ${e.status==="available"?"badge-success":e.status==="in-use"?"badge-info":e.status==="maintenance"?"badge-warning":e.status==="unavailable"?"badge-secondary":e.status==="broken"?"badge-danger":"badge-secondary"}`,children:e.status})}),s.jsx("td",{className:"table-cell",children:e.location||"-"}),s.jsx("td",{className:"table-cell",children:e.quantity||1}),s.jsx("td",{className:"table-cell",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qn,{to:`/equipment/${e.id}`,className:"text-primary-600 hover:text-primary-700 text-sm font-medium",onClick:a=>a.stopPropagation(),children:"View"}),n?s.jsx(qn,{to:`/equipment/${e.id}/edit`,className:"text-blue-600 hover:text-blue-700 text-sm font-medium underline",onClick:a=>{a.stopPropagation(),console.log("Edit link clicked for equipment:",e.id)},children:"Edit"}):s.jsx("span",{className:"text-gray-400 text-sm",children:"Edit"})]})})]})},XB=()=>s.jsxs("div",{className:"bg-white rounded-lg shadow-soft overflow-hidden h-full animate-pulse",children:[s.jsx("div",{className:"h-40 bg-slate-200"}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/4 mb-2"}),s.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/4 mb-2"})]}),s.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2 mb-4"}),s.jsxs("div",{className:"border-t border-slate-100 pt-2 flex justify-between",children:[s.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/4"}),s.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/4"})]})]})]}),KB=({search:e,onApply:n,onDelete:t})=>s.jsxs("div",{className:"inline-flex items-center bg-primary-50 text-primary-700 rounded-full px-3 py-1 text-sm mr-2 mb-2",children:[s.jsx("button",{onClick:()=>n(e),className:"mr-1 hover:text-primary-900","aria-label":`Apply saved search: ${e.name}`,children:e.name}),s.jsx("button",{onClick:()=>t(e.id),className:"ml-1 text-primary-400 hover:text-primary-700","aria-label":`Delete saved search: ${e.name}`,children:s.jsx(WB,{className:"w-4 h-4"})})]}),m3=()=>{var Ne,Ze;const{user:e,canEditEquipment:n}=dr(),t=pn(),r=us(),a=M.useRef(null),[o,d]=M.useState({search:"",type:"",category:"",status:"",location:"",dateRange:{startDate:null,endDate:null}}),[m,v]=M.useState(""),[g,w]=M.useState(!1),[b,_]=M.useState(!1),[E,T]=M.useState("updated_at"),[I,k]=M.useState("desc"),[S,A]=M.useState(""),[O,P]=M.useState(!1),[$,L]=M.useState("list"),{data:F,fetchNextPage:W,hasNextPage:V,isFetchingNextPage:re,isLoading:oe,isError:ee,error:he}=s2(["equipment",o,E,I],async({pageParam:be=1})=>{const De={page:be,limit:20,...o,sortBy:E,sortOrder:I};return o.dateRange.startDate&&o.dateRange.endDate&&(De.startDate=o.dateRange.startDate.toISOString(),De.endDate=o.dateRange.endDate.toISOString()),Oa(De)},{getNextPageParam:be=>{if(be.page<be.totalPages)return be.page+1},keepPreviousData:!0}),{data:ve,isLoading:ne}=ut(["equipment-suggestions",m],()=>Oa({search:m,limit:5}),{enabled:!!m&&m.length>2,keepPreviousData:!0}),{data:Q}=ut(["saved-searches"],kC,{enabled:n()}),{data:me=[]}=ut({queryKey:["equipmentTypes"],queryFn:ki}),fe=Array.isArray(me)?me:me.types||[],{data:Ie={categories:[]}}=ut({queryKey:["categories"],queryFn:Vc}),ue=Ie.categories||[],Ye=M.useCallback(u5.debounce(be=>{v(be)},300),[]),we=be=>{const De=be.target.value;d($e=>({...$e,search:De})),Ye(De),De.length>2?w(!0):w(!1)},Ve=be=>{const{name:De,value:$e}=be.target;d(Ge=>({...Ge,[De]:$e}))},Be=be=>{const[De,$e]=be;d(Ge=>({...Ge,dateRange:{startDate:De,endDate:$e}}))},ct=()=>{d({search:"",type:"",category:"",status:"",location:"",dateRange:{startDate:null,endDate:null}}),v(""),w(!1)},Ae=async()=>{if(!S.trim()){Qe.error("Please enter a name for your saved search");return}try{await AC({name:S,filters:JSON.stringify(o),sortBy:E,sortOrder:I}),t.invalidateQueries(["saved-searches"]),A(""),P(!1),Qe.success("Search saved successfully")}catch(be){Qe.error("Failed to save search"),console.error("Save search error:",be)}},Se=be=>{try{const De=JSON.parse(be.filters);d(De),T(be.sortBy||"updated_at"),k(be.sortOrder||"desc"),Qe.info(`Applied saved search: ${be.name}`)}catch(De){Qe.error("Failed to apply saved search"),console.error("Apply saved search error:",De)}},nt=async be=>{try{await TC(be),t.invalidateQueries(["saved-searches"]),Qe.success("Search deleted successfully")}catch(De){Qe.error("Failed to delete search"),console.error("Delete saved search error:",De)}};M.useEffect(()=>{const be=new IntersectionObserver($e=>{$e[0].isIntersecting&&V&&!re&&W()},{threshold:.5}),De=a.current;return De&&be.observe(De),()=>{De&&be.unobserve(De)}},[a,W,V,re]);const qt=(F==null?void 0:F.pages.flatMap(be=>be.equipment))||[],{data:bt}=ut(["equipment-analytics"],()=>Oa({limit:1e4}),{keepPreviousData:!0}),Tt=(()=>{const be=(bt==null?void 0:bt.equipment)||[];if(!be||be.length===0)return{total:0,available:0,inUse:0,maintenance:0,categories:{},types:{},locations:{},brands:{},recentlyAdded:0};const De={total:be.length,available:0,inUse:0,maintenance:0,categories:{},types:{},locations:{},brands:{},recentlyAdded:0},$e=new Date;return $e.setDate($e.getDate()-7),be.forEach(Ge=>{Ge.status==="available"?De.available++:Ge.status==="in-use"?De.inUse++:Ge.status==="maintenance"&&De.maintenance++;const ae=Ge.category||"Uncategorized";De.categories[ae]=(De.categories[ae]||0)+1;const ye=Ge.type||"Unknown";De.types[ye]=(De.types[ye]||0)+1;const ie=Ge.location||"No Location";De.locations[ie]=(De.locations[ie]||0)+1;const He=Ge.brand||"Unknown";De.brands[He]=(De.brands[He]||0)+1,new Date(Ge.created_at)>$e&&De.recentlyAdded++}),De})(),Te=be=>{d(De=>({...De,...be}))};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(up,{position:"top-right",autoClose:3e3}),s.jsx("div",{className:"flex justify-between items-center mb-4",children:s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Equipment Dashboard"})}),s.jsx(YB,{equipmentData:(bt==null?void 0:bt.equipment)||[],onFilterChange:Te,currentFilters:o,isLoading:oe}),s.jsx("div",{className:"sticky top-16 z-20 bg-slate-50 pt-4 pb-2 shadow-sm",children:s.jsxs("div",{className:"relative",children:[s.jsx(xt,{id:"search",name:"search",placeholder:"Search equipment by brand, model, serial number...",value:o.search,onChange:we,icon:s.jsx(UB,{}),className:"rounded-full shadow-md","aria-label":"Search equipment catalog"}),g&&((Ne=ve==null?void 0:ve.equipment)==null?void 0:Ne.length)>0&&s.jsx("div",{className:"absolute z-30 left-0 right-0 mt-1 bg-white rounded-lg shadow-lg border border-slate-200 max-h-80 overflow-y-auto",children:ve.equipment.map(be=>s.jsxs(qn,{to:`/equipment/${be.id}`,className:"block px-4 py-2 hover:bg-slate-50 border-b border-slate-100 last:border-0",children:[s.jsxs("div",{className:"font-medium",children:[be.brand," ",be.model]}),s.jsxs("div",{className:"text-sm text-slate-500",children:[be.type,"  SN: ",be.serial_number]})]},be.id))}),s.jsxs("div",{className:"flex mt-2 gap-2",children:[s.jsxs(ke,{variant:"outline",size:"sm",onClick:()=>_(!b),className:"flex items-center gap-1","aria-expanded":b,"aria-controls":"filter-panel",children:[s.jsx(zB,{}),s.jsx("span",{children:b?"Hide Filters":"Show Filters"})]}),Object.values(o).some(be=>be&&(typeof be=="string"?be.trim()!=="":!0))&&s.jsxs(ke,{variant:"outline",size:"sm",onClick:ct,className:"flex items-center gap-1 text-slate-600",children:[s.jsx($B,{}),s.jsx("span",{children:"Clear Filters"})]}),s.jsx("div",{className:"ml-auto",children:s.jsx(lr,{id:"sort",name:"sort",value:`${E}-${I}`,onChange:be=>{const[De,$e]=be.target.value.split("-");T(De),k($e)},options:[{value:"updated_at-desc",label:"Newest First"},{value:"updated_at-asc",label:"Oldest First"},{value:"brand-asc",label:"Brand (A-Z)"},{value:"brand-desc",label:"Brand (Z-A)"},{value:"model-asc",label:"Model (A-Z)"},{value:"model-desc",label:"Model (Z-A)"}],className:"w-40"})})]})]})}),n()&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"Saved Searches"}),O?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xt,{id:"savedSearchName",name:"savedSearchName",placeholder:"Enter search name",value:S,onChange:be=>A(be.target.value),className:"w-48"}),s.jsx(ke,{variant:"primary",size:"sm",onClick:Ae,children:"Save"}),s.jsx(ke,{variant:"outline",size:"sm",onClick:()=>{P(!1),A("")},children:"Cancel"})]}):s.jsxs(ke,{variant:"outline",size:"sm",onClick:()=>P(!0),className:"flex items-center gap-1",children:[s.jsx(qB,{}),s.jsx("span",{children:"Save Current Search"})]})]}),s.jsx("div",{className:"flex flex-wrap",children:((Ze=Q==null?void 0:Q.searches)==null?void 0:Ze.length)>0?Q.searches.map(be=>s.jsx(KB,{search:be,onApply:Se,onDelete:nt},be.id)):s.jsx("p",{className:"text-slate-500 text-sm",children:"No saved searches yet. Save your current search to access it quickly later."})})]}),s.jsx("div",{id:"filter-panel",className:`bg-white rounded-lg shadow-md border border-slate-200 overflow-hidden transition-all duration-300 ${b?"max-h-[800px] opacity-100 mb-6":"max-h-0 opacity-0 mb-0"}`,children:s.jsxs("div",{className:"p-4",children:[s.jsx("h2",{className:"text-lg font-medium text-slate-800 mb-4",children:"Advanced Filters"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[s.jsxs(qe,{className:"h-fit",children:[s.jsx(qe.Header,{children:s.jsxs(qe.Title,{className:"flex items-center gap-2",children:[s.jsx(Kd,{}),"Equipment Types"]})}),s.jsx(qe.Body,{className:"p-4",children:oe?s.jsx("div",{className:"space-y-2",children:[...Array(3)].map((be,De)=>s.jsx("div",{className:"h-4 bg-slate-200 rounded animate-pulse"},De))}):Object.keys(Tt.types).length>0?s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:Object.entries(Tt.types).sort(([,be],[,De])=>De-be).slice(0,10).map(([be,De])=>{const $e=o.type===be;return s.jsxs("button",{onClick:()=>d(Ge=>({...Ge,type:$e?"":be})),className:`flex justify-between items-center w-full px-3 py-2 rounded-md transition-colors text-left ${$e?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"hover:bg-slate-50"}`,title:`Filter by ${be} equipment`,children:[s.jsx("span",{className:"capitalize font-medium",children:be}),s.jsx(js,{variant:$e?"primary":"secondary",size:"sm",children:De})]},be)})}):s.jsx("p",{className:"text-slate-500 text-sm",children:"No equipment types available"})})]}),s.jsxs(qe,{className:"h-fit",children:[s.jsx(qe.Header,{children:s.jsxs(qe.Title,{className:"flex items-center gap-2",children:[s.jsx(Kd,{}),"Categories"]})}),s.jsx(qe.Body,{className:"p-4",children:oe?s.jsx("div",{className:"space-y-2",children:[...Array(3)].map((be,De)=>s.jsx("div",{className:"h-4 bg-slate-200 rounded animate-pulse"},De))}):Object.keys(Tt.categories).length>0?s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:Object.entries(Tt.categories).sort(([,be],[,De])=>De-be).slice(0,10).map(([be,De])=>{const $e=o.category===be;return s.jsxs("button",{onClick:()=>d(Ge=>({...Ge,category:$e?"":be})),className:`flex justify-between items-center w-full px-3 py-2 rounded-md transition-colors text-left ${$e?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"hover:bg-slate-50"}`,title:`Filter by ${be} category`,children:[s.jsx("span",{className:"font-medium",children:be}),s.jsx(js,{variant:$e?"primary":"secondary",size:"sm",children:De})]},be)})}):s.jsx("p",{className:"text-slate-500 text-sm",children:"No categories available"})})]}),s.jsxs(qe,{className:"h-fit",children:[s.jsx(qe.Header,{children:s.jsxs(qe.Title,{className:"flex items-center gap-2",children:[s.jsx(Kd,{}),"Top Locations"]})}),s.jsx(qe.Body,{className:"p-4",children:oe?s.jsx("div",{className:"space-y-2",children:[...Array(3)].map((be,De)=>s.jsx("div",{className:"h-4 bg-slate-200 rounded animate-pulse"},De))}):Object.keys(Tt.locations).length>0?s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:Object.entries(Tt.locations).sort(([,be],[,De])=>De-be).slice(0,10).map(([be,De])=>{const $e=o.location===be;return s.jsxs("button",{onClick:()=>d(Ge=>({...Ge,location:$e?"":be})),className:`flex justify-between items-center w-full px-3 py-2 rounded-md transition-colors text-left ${$e?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"hover:bg-slate-50"}`,title:`Filter by ${be} location`,children:[s.jsx("span",{className:"font-medium truncate",children:be}),s.jsx(js,{variant:$e?"primary":"secondary",size:"sm",children:De})]},be)})}):s.jsx("p",{className:"text-slate-500 text-sm",children:"No locations available"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(lr,{id:"category",name:"category",label:"Category",value:o.category,onChange:Ve,options:[{value:"",label:"All Categories"},...(ue||[]).map(be=>({value:be.name,label:be.name}))]}),s.jsx(lr,{id:"type",name:"type",label:"Equipment Type",value:o.type,onChange:Ve,options:[{value:"",label:"All Types"},...(fe||[]).map(be=>({value:be.name,label:be.name}))]}),s.jsx(lr,{id:"status",name:"status",label:"Status",value:o.status,onChange:Ve,options:[{value:"",label:"All Statuses"},{value:"available",label:"Available"},{value:"in-use",label:"In Use"},{value:"maintenance",label:"Maintenance"},{value:"unavailable",label:"Unavailable"},{value:"broken",label:"Broken"}]}),s.jsx(xt,{id:"location",name:"location",label:"Location",placeholder:"Filter by location",value:o.location,onChange:Ve}),s.jsxs("div",{className:"md:col-span-3",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date Range"}),s.jsx(d5,{selectsRange:!0,startDate:o.dateRange.startDate,endDate:o.dateRange.endDate,onChange:Be,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white shadow-sm",placeholderText:"Select date range",isClearable:!0})]})]})]})}),s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-800",children:["Equipment Results (",qt.length," items)"]}),s.jsxs("div",{className:"flex border border-slate-200 rounded-lg overflow-hidden bg-white shadow-sm",children:[s.jsxs("button",{onClick:()=>L("list"),className:`px-4 py-2 text-sm font-medium transition-all flex items-center gap-2 ${$==="list"?"bg-primary-600 text-white":"bg-white text-slate-600 hover:bg-slate-50"}`,title:"List view",children:[s.jsx(Wc,{className:"h-4 w-4"}),s.jsx("span",{children:"List"})]}),s.jsxs("button",{onClick:()=>L("card"),className:`px-4 py-2 text-sm font-medium transition-all flex items-center gap-2 ${$==="card"?"bg-primary-600 text-white":"bg-white text-slate-600 hover:bg-slate-50"}`,title:"Card view",children:[s.jsx(Hc,{className:"h-4 w-4"}),s.jsx("span",{children:"Cards"})]})]})]}),s.jsx("div",{children:oe?s.jsxs(s.Fragment,{children:[$==="card"&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((be,De)=>s.jsx(XB,{},De))}),$==="list"&&s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{className:"table-header",children:s.jsxs("tr",{children:[s.jsx("th",{className:"table-header-cell",children:"Equipment"}),s.jsx("th",{className:"table-header-cell",children:"Type"}),s.jsx("th",{className:"table-header-cell",children:"Category"}),s.jsx("th",{className:"table-header-cell",children:"Serial Number"}),s.jsx("th",{className:"table-header-cell",children:"Status"}),s.jsx("th",{className:"table-header-cell",children:"Location"}),s.jsx("th",{className:"table-header-cell",children:"Quantity"}),s.jsx("th",{className:"table-header-cell",children:"Actions"})]})}),s.jsx("tbody",{className:"table-body",children:Array.from({length:6}).map((be,De)=>s.jsxs("tr",{className:"table-row animate-pulse",children:[s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"})}),s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2"})}),s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2"})}),s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-2/3"})}),s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"h-6 bg-slate-200 rounded-full w-16"})}),s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2"})}),s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"h-4 bg-slate-200 rounded w-8"})}),s.jsx("td",{className:"table-cell",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"h-4 bg-slate-200 rounded w-12"}),s.jsx("div",{className:"h-4 bg-slate-200 rounded w-8"})]})})]},De))})]})})})]}):ee?s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading equipment"}),s.jsx("div",{className:"mt-2 text-sm text-red-700",children:s.jsx("p",{children:(he==null?void 0:he.message)||"Failed to load equipment data. Please try again."})})]})]})}):qt.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-slate-800",children:"No equipment found"}),s.jsx("p",{className:"mt-2 text-slate-500",children:"Try adjusting your search or filter criteria to find what you're looking for."}),s.jsx(ke,{variant:"outline",className:"mt-4",onClick:ct,children:"Clear All Filters"})]}):s.jsxs(s.Fragment,{children:[$==="card"&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:qt.map(be=>s.jsx(QB,{equipment:be,canEdit:n(),searchTerm:o.search},be.id))}),$==="list"&&s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table-wide",children:[s.jsx("thead",{className:"table-header",children:s.jsxs("tr",{children:[s.jsx("th",{className:"table-header-cell",children:"Equipment"}),s.jsx("th",{className:"table-header-cell",children:"Type"}),s.jsx("th",{className:"table-header-cell",children:"Category"}),s.jsx("th",{className:"table-header-cell",children:"Serial Number"}),s.jsx("th",{className:"table-header-cell",children:"Status"}),s.jsx("th",{className:"table-header-cell",children:"Location"}),s.jsx("th",{className:"table-header-cell",children:"Quantity"}),s.jsx("th",{className:"table-header-cell",children:"Actions"})]})}),s.jsx("tbody",{className:"table-body",children:qt.map(be=>s.jsx(GB,{equipment:be,canEdit:n(),navigate:r},be.id))})]})})}),s.jsx("div",{ref:a,className:"py-4 text-center",children:re?s.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"}),s.jsx("span",{className:"text-slate-500",children:"Loading more..."})]}):V?s.jsx("span",{className:"text-sm text-slate-500",children:"Scroll to load more"}):s.jsx("span",{className:"text-sm text-slate-500",children:"No more equipment to load"})})]})})]})},ZB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),JB=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),eU=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),tU=()=>{const{isAdmin:e}=dr(),n=pn(),[t,r]=M.useState(""),[a,o]=M.useState(null),[d,m]=M.useState(""),[v,g]=M.useState(""),{data:w,isLoading:b,isError:_}=ut({queryKey:["equipmentTypes"],queryFn:ki}),E=(w==null?void 0:w.types)||[],T=_t({mutationFn:IR,onSuccess:()=>{n.invalidateQueries(["equipmentTypes"]),r(""),g("")},onError:L=>{var F,W;g(((W=(F=L.response)==null?void 0:F.data)==null?void 0:W.message)||"Failed to create equipment type")}}),I=_t({mutationFn:({id:L,name:F})=>MR(L,F),onSuccess:()=>{n.invalidateQueries(["equipmentTypes"]),o(null),m(""),g("")},onError:L=>{var F,W;g(((W=(F=L.response)==null?void 0:F.data)==null?void 0:W.message)||"Failed to update equipment type")}}),k=_t({mutationFn:RR,onSuccess:()=>{n.invalidateQueries(["equipmentTypes"]),g("")},onError:L=>{var F,W;g(((W=(F=L.response)==null?void 0:F.data)==null?void 0:W.message)||"Failed to delete equipment type")}}),S=L=>{if(L.preventDefault(),!t.trim()){g("Type name is required");return}T.mutate(t),document.getElementById("addTypeModal").style.display="none"},A=L=>{o(L),m(L.name)},O=()=>{if(!d.trim()){g("Type name is required");return}I.mutate({id:a.id,name:d})},P=()=>{o(null),m("")},$=L=>{window.confirm("Are you sure you want to delete this equipment type?")&&k.mutate(L)};return e()?s.jsxs("div",{className:"space-y-6",children:[v&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-4 rounded",children:s.jsx("span",{children:v})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Equipment Types"}),s.jsxs(ke,{variant:"primary",onClick:()=>{r(""),document.getElementById("addTypeModal").style.display="block"},className:"flex items-center gap-2",children:[s.jsx(eU,{}),"Add Type"]})]}),s.jsx(qe,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{className:"table-header",children:s.jsxs("tr",{children:[s.jsx("th",{className:"table-header-cell",children:"Name"}),s.jsx("th",{className:"table-header-cell text-right",children:"Actions"})]})}),s.jsx("tbody",{className:"table-body",children:b?s.jsx("tr",{children:s.jsx("td",{colSpan:"2",className:"table-cell text-center py-4",children:s.jsx("div",{className:"flex justify-center items-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-500"})})})}):_?s.jsx("tr",{children:s.jsx("td",{colSpan:"2",className:"table-cell text-center py-4 text-red-600",children:"Error loading equipment types. Please try again."})}):E&&E.length>0?E.map(L=>s.jsxs("tr",{className:"table-row",children:[s.jsx("td",{className:"table-cell",children:L.name}),s.jsx("td",{className:"table-cell text-right",children:s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsxs(ke,{onClick:()=>A(L),variant:"outline",size:"sm",className:"flex items-center gap-1",children:[s.jsx(ZB,{}),"Edit"]}),s.jsxs(ke,{onClick:()=>$(L.id),variant:"danger",size:"sm",disabled:k.isLoading&&k.variables===L.id,className:"flex items-center gap-1",children:[s.jsx(JB,{}),k.isLoading&&k.variables===L.id?"Deleting...":"Delete"]})]})})]},L.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:"2",className:"table-cell text-center py-4 text-slate-500",children:"No equipment types found"})})})]})})}),s.jsx("div",{className:"modal-backdrop",id:"addTypeModal",style:{display:"none"},children:s.jsxs("div",{className:"modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{className:"modal-title",children:"Add Equipment Type"}),s.jsx("button",{className:"modal-close",onClick:()=>document.getElementById("addTypeModal").style.display="none",children:""})]}),s.jsxs("form",{onSubmit:S,children:[s.jsx("div",{className:"modal-body",children:s.jsx("div",{className:"space-y-4",children:s.jsx(xt,{id:"newTypeName",name:"newTypeName",type:"text",label:"Type Name",value:t,onChange:L=>r(L.target.value),placeholder:"Enter equipment type name",required:!0})})}),s.jsxs("div",{className:"modal-footer",children:[s.jsx(ke,{type:"button",variant:"secondary",onClick:()=>document.getElementById("addTypeModal").style.display="none",children:"Cancel"}),s.jsx(ke,{type:"submit",variant:"primary",disabled:T.isLoading,className:"flex items-center gap-2",children:T.isLoading?"Adding...":"Add Type"})]})]})]})}),a&&s.jsx("div",{className:"modal-backdrop",style:{display:"block"},children:s.jsxs("div",{className:"modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{className:"modal-title",children:"Edit Equipment Type"}),s.jsx("button",{className:"modal-close",onClick:P,children:""})]}),s.jsxs("form",{onSubmit:L=>{L.preventDefault(),O()},children:[s.jsx("div",{className:"modal-body",children:s.jsx("div",{className:"space-y-4",children:s.jsx(xt,{id:"editTypeName",name:"editTypeName",type:"text",label:"Type Name",value:d,onChange:L=>m(L.target.value),required:!0})})}),s.jsxs("div",{className:"modal-footer",children:[s.jsx(ke,{type:"button",variant:"secondary",onClick:P,children:"Cancel"}),s.jsx(ke,{type:"submit",variant:"primary",disabled:I.isLoading,className:"flex items-center gap-2",children:I.isLoading?"Saving...":"Save Changes"})]})]})]})})]}):s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4 rounded",children:s.jsx("p",{children:"Only administrators can manage equipment types."})})},nU=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),rU=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),sU=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),aU=()=>{const{isAdmin:e}=dr(),n=pn(),[t,r]=M.useState(""),[a,o]=M.useState(""),[d,m]=M.useState(null),[v,g]=M.useState(""),[w,b]=M.useState(""),[_,E]=M.useState(""),{data:T,isLoading:I,isError:k}=ut({queryKey:["categories"],queryFn:Vc}),S=(T==null?void 0:T.categories)||[],A=_t({mutationFn:({name:re,description:oe})=>SL(re,oe),onSuccess:()=>{n.invalidateQueries(["categories"]),r(""),o(""),E("")},onError:re=>{var oe,ee;E(((ee=(oe=re.response)==null?void 0:oe.data)==null?void 0:ee.message)||"Failed to create category")}}),O=_t({mutationFn:({id:re,name:oe,description:ee})=>kL(re,oe,ee),onSuccess:()=>{n.invalidateQueries(["categories"]),m(null),g(""),b(""),E("")},onError:re=>{var oe,ee;E(((ee=(oe=re.response)==null?void 0:oe.data)==null?void 0:ee.message)||"Failed to update category")}}),P=_t({mutationFn:AL,onSuccess:()=>{n.invalidateQueries(["categories"]),E("")},onError:re=>{var oe,ee;E(((ee=(oe=re.response)==null?void 0:oe.data)==null?void 0:ee.message)||"Failed to delete category")}}),$=re=>{if(re.preventDefault(),!t.trim()){E("Category name is required");return}A.mutate({name:t,description:a}),document.getElementById("addCategoryModal").style.display="none"},L=re=>{m(re),g(re.name),b(re.description||"")},F=()=>{if(!v.trim()){E("Category name is required");return}O.mutate({id:d.id,name:v,description:w})},W=()=>{m(null),g(""),b("")},V=re=>{window.confirm("Are you sure you want to delete this category?")&&P.mutate(re)};return e()?s.jsxs("div",{className:"space-y-6",children:[_&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-4 rounded",children:s.jsx("p",{children:_})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Equipment Categories"}),s.jsxs(ke,{variant:"primary",onClick:()=>{r(""),o(""),document.getElementById("addCategoryModal").style.display="block"},className:"flex items-center gap-2",children:[s.jsx(sU,{}),"Add Category"]})]}),s.jsx(qe,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{className:"table-header",children:s.jsxs("tr",{children:[s.jsx("th",{className:"table-header-cell",children:"Name"}),s.jsx("th",{className:"table-header-cell",children:"Description"}),s.jsx("th",{className:"table-header-cell text-right",children:"Actions"})]})}),s.jsx("tbody",{className:"table-body",children:I?s.jsx("tr",{children:s.jsx("td",{colSpan:"3",className:"table-cell text-center py-4",children:s.jsx("div",{className:"flex justify-center items-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-500"})})})}):k?s.jsx("tr",{children:s.jsx("td",{colSpan:"3",className:"table-cell text-center py-4 text-red-600",children:"Error loading categories. Please try again."})}):S&&S.length>0?S.map(re=>s.jsxs("tr",{className:"table-row",children:[s.jsx("td",{className:"table-cell",children:re.name}),s.jsx("td",{className:"table-cell",children:re.description||"-"}),s.jsx("td",{className:"table-cell text-right",children:s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsxs(ke,{onClick:()=>L(re),variant:"outline",size:"sm",className:"flex items-center gap-1",children:[s.jsx(nU,{}),"Edit"]}),s.jsxs(ke,{onClick:()=>V(re.id),variant:"danger",size:"sm",disabled:P.isLoading&&P.variables===re.id,className:"flex items-center gap-1",children:[s.jsx(rU,{}),P.isLoading&&P.variables===re.id?"Deleting...":"Delete"]})]})})]},re.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:"3",className:"table-cell text-center py-4 text-slate-500",children:"No categories found"})})})]})})}),s.jsx("div",{className:"modal-backdrop",id:"addCategoryModal",style:{display:"none"},children:s.jsxs("div",{className:"modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{className:"modal-title",children:"Add Category"}),s.jsx("button",{className:"modal-close",onClick:()=>document.getElementById("addCategoryModal").style.display="none",children:""})]}),s.jsxs("form",{onSubmit:$,children:[s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(xt,{id:"newCategoryName",name:"newCategoryName",type:"text",label:"Category Name",value:t,onChange:re=>r(re.target.value),placeholder:"Enter category name",required:!0}),s.jsx(xt,{id:"newCategoryDescription",name:"newCategoryDescription",type:"text",label:"Description (optional)",value:a,onChange:re=>o(re.target.value),placeholder:"Enter category description"})]})}),s.jsxs("div",{className:"modal-footer",children:[s.jsx(ke,{type:"button",variant:"secondary",onClick:()=>document.getElementById("addCategoryModal").style.display="none",children:"Cancel"}),s.jsx(ke,{type:"submit",variant:"primary",disabled:A.isLoading,className:"flex items-center gap-2",children:A.isLoading?"Adding...":"Add Category"})]})]})]})}),d&&s.jsx("div",{className:"modal-backdrop",style:{display:"block"},children:s.jsxs("div",{className:"modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{className:"modal-title",children:"Edit Category"}),s.jsx("button",{className:"modal-close",onClick:W,children:""})]}),s.jsxs("form",{onSubmit:re=>{re.preventDefault(),F()},children:[s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(xt,{id:"editCategoryName",name:"editCategoryName",type:"text",label:"Category Name",value:v,onChange:re=>g(re.target.value),required:!0}),s.jsx(xt,{id:"editCategoryDescription",name:"editCategoryDescription",type:"text",label:"Description (optional)",value:w,onChange:re=>b(re.target.value),placeholder:"Enter category description"})]})}),s.jsxs("div",{className:"modal-footer",children:[s.jsx(ke,{type:"button",variant:"secondary",onClick:W,children:"Cancel"}),s.jsx(ke,{type:"submit",variant:"primary",disabled:O.isLoading,className:"flex items-center gap-2",children:O.isLoading?"Saving...":"Save Changes"})]})]})]})})]}):s.jsx("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4",children:s.jsx("p",{children:"Only administrators can manage equipment categories."})})},wl=async()=>(await ze.get("/api/locations")).data,iU=async e=>(await ze.post("/api/locations",e)).data,oU=async(e,n)=>(await ze.put(`/api/locations/${e}`,n)).data,lU=async e=>(await ze.delete(`/api/locations/${e}`)).data,cU=()=>{var W;const{isAdmin:e}=dr(),n=pn(),[t,r]=M.useState(!1),[a,o]=M.useState(!1),[d,m]=M.useState(!1),[v,g]=M.useState(null),[w,b]=M.useState({name:"",street:"",postal_code:"",city:"",region:"",country:""}),{data:_,isLoading:E,isError:T}=ut(["locations"],wl),I=_t(iU,{onSuccess:()=>{n.invalidateQueries(["locations"]),r(!1),b({name:"",street:"",postal_code:"",city:"",region:"",country:""}),alert("Location created successfully")},onError:V=>{var re,oe;alert(`Error creating location: ${((oe=(re=V.response)==null?void 0:re.data)==null?void 0:oe.message)||V.message}`)}}),k=_t(V=>oU(V.id,V.locationData),{onSuccess:()=>{n.invalidateQueries(["locations"]),o(!1),g(null),alert("Location updated successfully")},onError:V=>{var re,oe;alert(`Error updating location: ${((oe=(re=V.response)==null?void 0:re.data)==null?void 0:oe.message)||V.message}`)}}),S=_t(lU,{onSuccess:()=>{n.invalidateQueries(["locations"]),m(!1),g(null),alert("Location deleted successfully")},onError:V=>{var re,oe;alert(`Error deleting location: ${((oe=(re=V.response)==null?void 0:re.data)==null?void 0:oe.message)||V.message}`)}}),A=V=>{const{name:re,value:oe}=V.target;b(ee=>({...ee,[re]:oe}))},O=V=>{V.preventDefault(),I.mutate(w)},P=V=>{V.preventDefault(),k.mutate({id:v.id,locationData:w})},$=()=>{S.mutate(v.id)},L=V=>{g(V),b({name:V.name,street:V.street||"",postal_code:V.postal_code||"",city:V.city||"",region:V.region||"",country:V.country||""}),o(!0)},F=V=>{g(V),m(!0)};return E?s.jsx("div",{className:"text-center py-4",children:"Loading locations..."}):T?s.jsx("div",{className:"text-center py-4 text-red-600",children:"Error loading locations"}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Locations"}),e()&&s.jsx(ke,{variant:"primary",onClick:()=>{b({name:"",street:"",postal_code:"",city:"",region:"",country:""}),r(!0)},children:"Add Location"})]}),s.jsx(qe,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{className:"table-header",children:s.jsxs("tr",{children:[s.jsx("th",{className:"table-header-cell",children:"Name"}),s.jsx("th",{className:"table-header-cell",children:"Street"}),s.jsx("th",{className:"table-header-cell",children:"Postal Code"}),s.jsx("th",{className:"table-header-cell",children:"City"}),s.jsx("th",{className:"table-header-cell",children:"Region"}),s.jsx("th",{className:"table-header-cell",children:"Country"}),e()&&s.jsx("th",{className:"table-header-cell",children:"Actions"})]})}),s.jsx("tbody",{className:"table-body",children:((W=_==null?void 0:_.locations)==null?void 0:W.length)>0?_.locations.map(V=>s.jsxs("tr",{className:"table-row",children:[s.jsx("td",{className:"table-cell",children:V.name}),s.jsx("td",{className:"table-cell",children:V.street||"-"}),s.jsx("td",{className:"table-cell",children:V.postal_code||"-"}),s.jsx("td",{className:"table-cell",children:V.city||"-"}),s.jsx("td",{className:"table-cell",children:V.region||"-"}),s.jsx("td",{className:"table-cell",children:V.country||"-"}),e()&&s.jsx("td",{className:"table-cell",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(ke,{variant:"outline",size:"sm",onClick:()=>L(V),children:"Edit"}),s.jsx(ke,{variant:"danger",size:"sm",onClick:()=>F(V),children:"Delete"})]})})]},V.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:e()?7:6,className:"table-cell text-center py-4 text-slate-500",children:"No locations found"})})})]})})}),t&&s.jsx("div",{className:"modal-backdrop",children:s.jsxs("div",{className:"modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{className:"modal-title",children:"Add Location"}),s.jsx("button",{className:"modal-close",onClick:()=>r(!1),children:""})]}),s.jsxs("form",{onSubmit:O,children:[s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(xt,{id:"name",name:"name",label:"Location Name",value:w.name,onChange:A,placeholder:"Enter location name",required:!0}),s.jsx(xt,{id:"street",name:"street",label:"Street",value:w.street,onChange:A,placeholder:"Enter street (optional)"}),s.jsx(xt,{id:"postal_code",name:"postal_code",label:"Postal Code",value:w.postal_code,onChange:A,placeholder:"Enter postal code (optional)"}),s.jsx(xt,{id:"city",name:"city",label:"City",value:w.city,onChange:A,placeholder:"Enter city (optional)"}),s.jsx(xt,{id:"region",name:"region",label:"Region/State",value:w.region,onChange:A,placeholder:"Enter region or state (optional)"}),s.jsx(xt,{id:"country",name:"country",label:"Country",value:w.country,onChange:A,placeholder:"Enter country (optional)"})]})}),s.jsxs("div",{className:"modal-footer",children:[s.jsx(ke,{type:"button",variant:"secondary",onClick:()=>r(!1),children:"Cancel"}),s.jsx(ke,{type:"submit",variant:"primary",disabled:I.isLoading,children:I.isLoading?"Adding...":"Add Location"})]})]})]})}),a&&v&&s.jsx("div",{className:"modal-backdrop",children:s.jsxs("div",{className:"modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{className:"modal-title",children:"Edit Location"}),s.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:""})]}),s.jsxs("form",{onSubmit:P,children:[s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(xt,{id:"edit-name",name:"name",label:"Location Name",value:w.name,onChange:A,placeholder:"Enter location name",required:!0}),s.jsx(xt,{id:"edit-street",name:"street",label:"Street",value:w.street,onChange:A,placeholder:"Enter street (optional)"}),s.jsx(xt,{id:"edit-postal_code",name:"postal_code",label:"Postal Code",value:w.postal_code,onChange:A,placeholder:"Enter postal code (optional)"}),s.jsx(xt,{id:"edit-city",name:"city",label:"City",value:w.city,onChange:A,placeholder:"Enter city (optional)"}),s.jsx(xt,{id:"edit-region",name:"region",label:"Region/State",value:w.region,onChange:A,placeholder:"Enter region or state (optional)"}),s.jsx(xt,{id:"edit-country",name:"country",label:"Country",value:w.country,onChange:A,placeholder:"Enter country (optional)"})]})}),s.jsxs("div",{className:"modal-footer",children:[s.jsx(ke,{type:"button",variant:"secondary",onClick:()=>o(!1),children:"Cancel"}),s.jsx(ke,{type:"submit",variant:"primary",disabled:k.isLoading,children:k.isLoading?"Saving...":"Save Changes"})]})]})]})}),d&&v&&s.jsx("div",{className:"modal-backdrop",children:s.jsxs("div",{className:"modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{className:"modal-title",children:"Delete Location"}),s.jsx("button",{className:"modal-close",onClick:()=>m(!1),children:""})]}),s.jsxs("div",{className:"modal-body",children:[s.jsxs("p",{children:['Are you sure you want to delete the location "',v.name,'"? This action cannot be undone.']}),s.jsx("p",{className:"text-sm text-red-600 mt-2",children:"Note: You cannot delete a location that is currently assigned to equipment."})]}),s.jsxs("div",{className:"modal-footer",children:[s.jsx(ke,{type:"button",variant:"secondary",onClick:()=>m(!1),children:"Cancel"}),s.jsx(ke,{type:"button",variant:"danger",onClick:$,disabled:S.isLoading,children:S.isLoading?"Deleting...":"Delete Location"})]})]})})]})};var h5={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},x3=ge.createContext&&ge.createContext(h5),fo=globalThis&&globalThis.__assign||function(){return fo=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fo.apply(this,arguments)},dU=globalThis&&globalThis.__rest||function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]]);return t};function f5(e){return e&&e.map(function(n,t){return ge.createElement(n.tag,fo({key:t},n.attr),f5(n.child))})}function bl(e){return function(n){return ge.createElement(uU,fo({attr:fo({},e.attr)},n),f5(e.child))}}function uU(e){var n=function(t){var r=e.attr,a=e.size,o=e.title,d=dU(e,["attr","size","title"]),m=a||t.size||"1em",v;return t.className&&(v=t.className),e.className&&(v=(v?v+" ":"")+e.className),ge.createElement("svg",fo({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,d,{className:v,style:fo(fo({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),o&&ge.createElement("title",null,o),e.children)};return x3!==void 0?ge.createElement(x3.Consumer,null,function(t){return n(t)}):n(h5)}function hU(e){return bl({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"}}]})(e)}function fU(e){return bl({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"}}]})(e)}function pU(e){return bl({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"}}]})(e)}function mU(e){return bl({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(e)}function xU(e){return bl({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}}]})(e)}function gU(e){return bl({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"}},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"}},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"}}]})(e)}function vU(e){return bl({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(e)}const yU=()=>{const[e,n]=M.useState([]),[t,r]=M.useState([]),[a,o]=M.useState(!0),[d,m]=M.useState(!1),[v,g]=M.useState(null),[w,b]=M.useState({location_id:"",name:"",description:"",is_active:!0,priority:1});M.useEffect(()=>{_(),E()},[]);const _=async()=>{try{const P=await ze.get("/api/default-storage-locations");n(Array.isArray(P.data)?P.data:[])}catch(P){console.error("Error fetching default storage locations:",P),n([]),ot.error("Failed to load default storage locations")}finally{o(!1)}},E=async()=>{try{const P=await ze.get("/api/locations"),$=P.data.locations||P.data,L=Array.isArray($)?$:[];r(L)}catch(P){console.error("Error fetching locations:",P),r([]),ot.error("Failed to load locations")}},T=async P=>{var $,L;if(P.preventDefault(),!w.location_id||!w.name){ot.error("Location and name are required");return}try{v?(await ze.put(`/api/default-storage-locations/${v.id}`,w),ot.success("Default storage location updated!")):(await ze.post("/api/default-storage-locations",w),ot.success("Default storage location created!")),_(),S()}catch(F){console.error("Error saving default storage location:",F);const W=((L=($=F.response)==null?void 0:$.data)==null?void 0:L.message)||"Failed to save default storage location";ot.error(W)}},I=P=>{g(P),b({location_id:P.location_id,name:P.name,description:P.description||"",is_active:P.is_active,priority:P.priority}),m(!0)},k=async P=>{var $,L;if(confirm("Are you sure you want to delete this default storage location?"))try{await ze.delete(`/api/default-storage-locations/${P}`),ot.success("Default storage location deleted!"),_()}catch(F){console.error("Error deleting default storage location:",F);const W=((L=($=F.response)==null?void 0:$.data)==null?void 0:L.message)||"Failed to delete default storage location";ot.error(W)}},S=()=>{b({location_id:"",name:"",description:"",is_active:!0,priority:1}),g(null),m(!1)},A=P=>{if(!Array.isArray(t))return"Unknown Location";const $=t.find(L=>L.id===P);return $?$.name:"Unknown Location"},O=()=>{if(!Array.isArray(t)||!Array.isArray(e))return[];const P=e.filter($=>v?$.id!==v.id:!0).map($=>$.location_id);return t.filter($=>!P.includes($.id))};return a?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Default Storage Locations"}),s.jsx("p",{className:"text-gray-600 mt-1",children:'Configure which locations are considered "main storage" for inventory calculations'})]}),s.jsxs("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[s.jsx(mU,{className:"w-4 h-4"}),"Add Storage Location"]})]}),d&&s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:v?"Edit Default Storage Location":"Add Default Storage Location"}),s.jsxs("form",{onSubmit:T,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location *"}),s.jsxs("select",{value:w.location_id,onChange:P=>b({...w,location_id:parseInt(P.target.value)}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Select a location"}),O().map(P=>s.jsx("option",{value:P.id,children:P.name},P.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name *"}),s.jsx("input",{type:"text",value:w.name,onChange:P=>b({...w,name:P.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Main Storage",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),s.jsx("input",{type:"number",value:w.priority,onChange:P=>b({...w,priority:parseInt(P.target.value)}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1",placeholder:"1"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lower numbers = higher priority"})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:w.is_active,onChange:P=>b({...w,is_active:P.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Active"})]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{value:w.description,onChange:P=>b({...w,description:P.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Optional description..."})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[s.jsx(hU,{className:"w-4 h-4"}),v?"Update":"Create"]}),s.jsxs("button",{type:"button",onClick:S,className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 flex items-center gap-2",children:[s.jsx(vU,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h3",{className:"text-lg font-semibold",children:"Configured Storage Locations"})}),e.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(pU,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"No default storage locations configured"}),s.jsx("p",{className:"text-sm",children:"Add a storage location to get started"})]}):s.jsx("div",{className:"divide-y divide-gray-200",children:e.map(P=>s.jsx("div",{className:"p-6 hover:bg-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xU,{className:`w-4 h-4 ${P.priority===1?"text-yellow-500":"text-gray-400"}`}),s.jsxs("span",{className:"text-xs text-gray-500",children:["Priority ",P.priority]})]}),s.jsx("h4",{className:"text-lg font-medium text-gray-900",children:P.name}),!P.is_active&&s.jsx("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full",children:"Inactive"})]}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Location: ",A(P.location_id)]}),P.description&&s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:P.description})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>I(P),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:"Edit",children:s.jsx(fU,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>k(P.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg",title:"Delete",children:s.jsx(gU,{className:"w-4 h-4"})})]})]})},P.id))})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"How Default Storage Locations Work"}),s.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[s.jsx("li",{children:' Only items in these locations count as "Available in Storage"'}),s.jsx("li",{children:" Items in other locations show their actual current location"}),s.jsx("li",{children:" This eliminates confusion between current location vs. available inventory"}),s.jsx("li",{children:" Priority determines the order for inventory calculations (1 = highest)"})]})]})]})},_i="https://tonlager.kinsta.app",wU=async()=>{try{console.log("[DATABASE SERVICE] Testing connection to:",`${_i}/api/database/test`);const e=await fetch(`${_i}/api/database/test`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(console.log("[DATABASE SERVICE] Test response status:",e.status),!e.ok){const t=await e.text();throw console.error("[DATABASE SERVICE] Test error response:",t),new Error(`HTTP error! status: ${e.status} - ${t}`)}const n=await e.json();return console.log("[DATABASE SERVICE] Test data:",n),n}catch(e){throw console.error("Error testing database connection:",e),e}},bU=async()=>{try{console.log("[DATABASE SERVICE] Fetching tables from:",`${_i}/api/database/tables`),console.log("[DATABASE SERVICE] Token:",localStorage.getItem("token")?"Present":"Missing");const e=await fetch(`${_i}/api/database/tables`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(console.log("[DATABASE SERVICE] Response status:",e.status),!e.ok){const t=await e.text();throw console.error("[DATABASE SERVICE] Error response:",t),new Error(`HTTP error! status: ${e.status} - ${t}`)}const n=await e.json();return console.log("[DATABASE SERVICE] Tables data:",n),n}catch(e){throw console.error("Error fetching database tables:",e),e}},NU=async e=>{try{const n=await fetch(`${_i}/api/database/tables/${e}/structure`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){throw console.error("Error fetching table structure:",n),n}},jU=async(e,n=1,t=50)=>{try{const r=await fetch(`${_i}/api/database/tables/${e}/data?page=${n}&limit=${t}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(r){throw console.error("Error fetching table data:",r),r}},CU=async e=>{try{const n=await fetch(`${_i}/api/database/query`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({query:e})});if(!n.ok){const t=await n.json();throw new Error(t.message||`HTTP error! status: ${n.status}`)}return await n.json()}catch(n){throw console.error("Error executing query:",n),n}},_U=async(e,n,t)=>{try{const r=await fetch(`${_i}/api/database/tables/${e}/rows/${n}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(r){throw console.error("Error updating table row:",r),r}},EU=async()=>{try{const e=await fetch(`${_i}/api/database/info`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("Error fetching database info:",e),e}},SU=({onClose:e})=>{var Q,me,fe,Ie,ue,Ye,we,Ve,Be,ct,Ae;const[n,t]=M.useState("tables"),[r,a]=M.useState(null),[o,d]=M.useState(1),[m,v]=M.useState(""),[g,w]=M.useState(null),[b,_]=M.useState(null),[E,T]=M.useState({}),I=pn(),{data:k}=ut({queryKey:["database-info"],queryFn:EU}),{data:S,isLoading:A,error:O}=ut({queryKey:["database-tables"],queryFn:bU,retry:1,onError:Se=>{console.error("[DATABASE MANAGER] Tables query error:",Se),Qe.error(`Failed to load tables: ${Se.message}`)}}),{data:P}=ut({queryKey:["table-structure",r],queryFn:()=>NU(r),enabled:!!r}),{data:$,isLoading:L}=ut({queryKey:["table-data",r,o],queryFn:()=>jU(r,o,50),enabled:!!r}),F=_t({mutationFn:CU,onSuccess:Se=>{w(Se),Qe.success("Query executed successfully")},onError:Se=>{Qe.error(`Query failed: ${Se.message}`)}}),W=_t({mutationFn:({tableName:Se,id:nt,data:qt})=>_U(Se,nt,qt),onSuccess:()=>{Qe.success("Row updated successfully"),_(null),T({}),I.invalidateQueries(["table-data",r])},onError:Se=>{Qe.error(`Update failed: ${Se.message}`)}}),V=()=>{if(!m.trim()){Qe.error("Please enter a SQL query");return}F.mutate(m)},re=Se=>{_(Se.id),T({...Se})},oe=()=>{W.mutate({tableName:r,id:b,data:E})},ee=()=>{_(null),T({})},he=async()=>{try{const Se=await wU();Qe.success(`Database connection successful! Database: ${Se.database}`),console.log("[DATABASE MANAGER] Connection test result:",Se)}catch(Se){Qe.error(`Database connection failed: ${Se.message}`),console.error("[DATABASE MANAGER] Connection test failed:",Se)}},ve=Se=>Se===null?"NULL":typeof Se=="boolean"?Se?"TRUE":"FALSE":typeof Se=="object"?JSON.stringify(Se):String(Se),ne=[{id:"tables",label:"Tables",icon:""},{id:"query",label:"Query",icon:""},{id:"info",label:"Database Info",icon:""}];return s.jsxs("div",{className:"fixed inset-0 bg-slate-50 z-50 flex flex-col",children:[s.jsx("div",{className:"bg-white border-b border-slate-200 px-6 py-4 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Database Manager"}),s.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Connected to: ",s.jsx("span",{className:"font-mono text-primary-600",children:"ton-lager1-cv8k6-mysql"})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-slate-600",children:"Connected"})]}),s.jsx(ke,{size:"sm",variant:"outline",onClick:he,children:"Test Connection"}),s.jsx(ke,{size:"sm",variant:"outline",onClick:e||(()=>window.history.back()),children:" Back to Settings"})]})]})}),s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsxs("div",{className:"px-6 py-6",children:[s.jsx("div",{className:"border-b border-slate-200 mb-6",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:ne.map(Se=>s.jsxs("button",{onClick:()=>t(Se.id),className:`py-3 px-4 border-b-2 font-medium text-base flex items-center space-x-3 transition-colors ${n===Se.id?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 hover:bg-slate-50"}`,children:[s.jsx("span",{className:"text-lg",children:Se.icon}),s.jsx("span",{children:Se.label})]},Se.id))})}),n==="tables"&&s.jsxs("div",{className:"flex gap-6 min-h-0",children:[s.jsx("div",{className:"w-80 flex-shrink-0",children:s.jsxs(qe,{className:"h-fit max-h-screen overflow-hidden flex flex-col",children:[s.jsx(qe.Header,{className:"flex-shrink-0",children:s.jsx("h3",{className:"text-lg font-semibold",children:"Database Tables"})}),s.jsx(qe.Body,{className:"p-0 flex-1 overflow-auto",children:A?s.jsx("div",{className:"p-4 text-center text-slate-500",children:"Loading tables..."}):O?s.jsxs("div",{className:"p-4 text-center",children:[s.jsx("div",{className:"text-red-600 mb-2",children:" Error loading tables"}),s.jsx("div",{className:"text-sm text-slate-600",children:O.message}),s.jsx(ke,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>I.invalidateQueries(["database-tables"]),children:"Retry"})]}):(Q=S==null?void 0:S.tables)!=null&&Q.length?s.jsx("div",{className:"divide-y divide-slate-100",children:S.tables.map(Se=>s.jsxs("button",{onClick:()=>{a(Se.TABLE_NAME),d(1)},className:`w-full text-left p-4 hover:bg-slate-50 transition-colors ${r===Se.TABLE_NAME?"bg-primary-50 border-r-2 border-primary-500":""}`,children:[s.jsx("div",{className:"font-medium text-slate-800",children:Se.TABLE_NAME}),s.jsxs("div",{className:"text-sm text-slate-500",children:[Se.TABLE_ROWS||0," rows"]})]},Se.TABLE_NAME))}):s.jsx("div",{className:"p-4 text-center text-slate-500",children:"No tables found in database"})})]})}),s.jsxs("div",{className:"flex-1 flex flex-col gap-6 min-w-0 overflow-auto",children:[r&&s.jsxs(qe,{className:"flex-shrink-0",children:[s.jsx(qe.Header,{children:s.jsxs("h3",{className:"text-lg font-semibold",children:["Table Structure: ",r]})}),s.jsx(qe.Body,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Column"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Type"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Null"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Key"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:(me=P==null?void 0:P.columns)==null?void 0:me.map(Se=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-4 py-2 text-sm font-medium text-slate-800",children:Se.COLUMN_NAME}),s.jsx("td",{className:"px-4 py-2 text-sm text-slate-600",children:Se.DATA_TYPE}),s.jsx("td",{className:"px-4 py-2 text-sm text-slate-600",children:Se.IS_NULLABLE}),s.jsx("td",{className:"px-4 py-2 text-sm text-slate-600",children:Se.COLUMN_KEY})]},Se.COLUMN_NAME))})]})})})]}),r&&s.jsxs(qe,{className:"flex-1 flex flex-col min-h-0",children:[s.jsx(qe.Header,{className:"flex-shrink-0",children:s.jsxs("h3",{className:"text-lg font-semibold",children:["Table Data: ",r]})}),s.jsx(qe.Body,{className:"p-0 flex-1 flex flex-col min-h-0",children:L?s.jsx("div",{className:"p-4 text-center text-slate-500",children:"Loading data..."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50 sticky top-0",children:s.jsxs("tr",{children:[((fe=$==null?void 0:$.data)==null?void 0:fe[0])&&Object.keys($.data[0]).map(Se=>s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:Se},Se)),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:(Ie=$==null?void 0:$.data)==null?void 0:Ie.map(Se=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[Object.entries(Se).map(([nt,qt])=>s.jsx("td",{className:"px-4 py-2 text-sm text-slate-600",children:b===Se.id?s.jsx(xt,{value:E[nt]||"",onChange:bt=>T({...E,[nt]:bt.target.value}),className:"text-xs"}):s.jsx("span",{className:"font-mono text-xs",children:ve(qt)})},nt)),s.jsx("td",{className:"px-4 py-2 text-sm",children:b===Se.id?s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(ke,{size:"sm",onClick:oe,children:"Save"}),s.jsx(ke,{size:"sm",variant:"outline",onClick:ee,children:"Cancel"})]}):s.jsx(ke,{size:"sm",variant:"outline",onClick:()=>re(Se),children:"Edit"})})]},Se.id))})]})}),($==null?void 0:$.pagination)&&s.jsxs("div",{className:"p-4 border-t border-slate-200 flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-slate-600",children:["Page ",$.pagination.page," of ",$.pagination.totalPages,"(",$.pagination.total," total rows)"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(ke,{size:"sm",variant:"outline",onClick:()=>d(Math.max(1,o-1)),disabled:o===1,children:"Previous"}),s.jsx(ke,{size:"sm",variant:"outline",onClick:()=>d(o+1),disabled:o>=$.pagination.totalPages,children:"Next"})]})]})]})})]})]})]}),n==="query"&&s.jsxs("div",{className:"flex flex-col gap-6 min-h-0",children:[s.jsxs(qe,{className:"flex-shrink-0",children:[s.jsxs(qe.Header,{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"SQL Query Editor"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Execute SELECT queries to view data. Dangerous operations are restricted."})]}),s.jsx(qe.Body,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"SQL Query"}),s.jsx("textarea",{value:m,onChange:Se=>v(Se.target.value),placeholder:"SELECT * FROM equipment WHERE status = 'available';",className:"w-full h-48 p-4 border border-slate-300 rounded-md font-mono text-base focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-y"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"text-sm text-slate-500",children:" Tip: Only SELECT queries are allowed for security"}),s.jsx(ke,{onClick:V,disabled:F.isPending,children:F.isPending?"Executing...":"Execute Query"})]})]})})]}),g&&s.jsxs(qe,{className:"flex-1 flex flex-col min-h-0",children:[s.jsxs(qe.Header,{className:"flex-shrink-0",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Query Results"}),s.jsxs("p",{className:"text-sm text-slate-600",children:[(ue=g.metadata)==null?void 0:ue.rowCount," rows returned"]})]}),s.jsx(qe.Body,{className:"p-0 flex-1 flex flex-col min-h-0",children:s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50 sticky top-0",children:s.jsx("tr",{children:((Ye=g.results)==null?void 0:Ye[0])&&Object.keys(g.results[0]).map(Se=>s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:Se},Se))})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:(we=g.results)==null?void 0:we.map((Se,nt)=>s.jsx("tr",{className:"hover:bg-slate-50",children:Object.entries(Se).map(([qt,bt])=>s.jsx("td",{className:"px-4 py-2 text-sm text-slate-600",children:s.jsx("span",{className:"font-mono text-xs",children:ve(bt)})},qt))},nt))})]})})})]})]}),n==="info"&&s.jsxs(qe,{className:"max-w-4xl",children:[s.jsx(qe.Header,{children:s.jsx("h3",{className:"text-lg font-semibold",children:"Database Information"})}),s.jsx(qe.Body,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-slate-800 mb-3",children:"Connection Details"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Host:"}),s.jsx("span",{className:"font-mono",children:"ton-lager1-cv8k6-mysql.ton-lager1-cv8k6.svc.cluster.local"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Port:"}),s.jsx("span",{className:"font-mono",children:"3306"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Database:"}),s.jsx("span",{className:"font-mono",children:((Ve=k==null?void 0:k.database)==null?void 0:Ve.database_name)||"substantial-gray-unicorn"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"User:"}),s.jsx("span",{className:"font-mono",children:"canid"})]})]})]}),k&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-slate-800 mb-3",children:"Server Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"MySQL Version:"}),s.jsx("span",{className:"font-mono",children:(Be=k.server)==null?void 0:Be.version})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Character Set:"}),s.jsx("span",{className:"font-mono",children:(ct=k.database)==null?void 0:ct.charset})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Collation:"}),s.jsx("span",{className:"font-mono",children:(Ae=k.database)==null?void 0:Ae.collation})]})]})]})]})})]})]})})]})},kU=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),AU=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),g3=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),v3=()=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[s.jsx("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),s.jsx("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),s.jsx("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]}),TU=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),DU=()=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[s.jsx("path",{d:"M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"}),s.jsx("path",{fillRule:"evenodd",d:"M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z",clipRule:"evenodd"})]}),IU=()=>{const{user:e}=dr(),[n,t]=M.useState("profile"),[r,a]=M.useState(""),[o,d]=M.useState(""),[m,v]=M.useState(""),[g,w]=M.useState(""),[b,_]=M.useState(""),[E,T]=M.useState(!1),I=[{id:"profile",label:"Profile",icon:s.jsx(kU,{})},{id:"security",label:"Security",icon:s.jsx(AU,{})}];(e==null?void 0:e.role)==="admin"&&(I.push({id:"equipmentTypes",label:"Equipment Types",icon:s.jsx(g3,{})}),I.push({id:"categories",label:"Categories",icon:s.jsx(g3,{})}),I.push({id:"locations",label:"Locations",icon:s.jsx(TU,{})}),I.push({id:"defaultStorage",label:"Default Storage",icon:s.jsx(DU,{})}),I.push({id:"database",label:"Database",icon:s.jsx(v3,{})}));const k=async S=>{var A,O;if(S.preventDefault(),w(""),_(""),!r){w("Current password is required");return}if(!o){w("New password is required");return}if(o!==m){w("New passwords do not match");return}if(o.length<6){w("New password must be at least 6 characters");return}try{(await ze.post(`/api/auth/users/${e.id}/reset-password-direct`,{newPassword:o})).data.verification?_("Password changed successfully and verified"):_("Password changed but verification failed - please try logging in"),a(""),d(""),v("")}catch(P){console.error("Password change error:",P),w(((O=(A=P.response)==null?void 0:A.data)==null?void 0:O.message)||"Failed to change password")}};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-8",children:"User Settings"}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsx("div",{className:"w-full md:w-64",children:s.jsx(qe,{children:s.jsx(qe.Body,{className:"p-0",children:s.jsx("nav",{children:s.jsx("ul",{className:"divide-y divide-slate-100",children:I.map(S=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>t(S.id),className:`w-full text-left px-4 py-3 flex items-center transition-colors ${n===S.id?"bg-primary-50 text-primary-700 font-medium":"text-slate-700 hover:bg-slate-50"}`,"aria-current":n===S.id?"page":void 0,children:[s.jsx("span",{className:"mr-3 text-slate-500",children:S.icon}),S.label]})},S.id))})})})})}),s.jsx("div",{className:"flex-1",children:s.jsx(qe,{children:s.jsxs(qe.Body,{children:[n==="profile"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Profile Settings"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Username"}),s.jsx("div",{className:"bg-slate-50 p-3 rounded-md text-slate-800 border border-slate-200",children:e==null?void 0:e.username})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Role"}),s.jsx("div",{className:"bg-slate-50 p-3 rounded-md text-slate-800 border border-slate-200 capitalize",children:e==null?void 0:e.role})]})]})]}),n==="security"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Security Settings"}),g&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700",children:g}),b&&s.jsx("div",{className:"mb-4 p-3 bg-green-50 border-l-4 border-green-500 text-green-700",children:b}),s.jsxs("form",{onSubmit:k,className:"space-y-4",children:[s.jsx(xi,{id:"current-password",label:"Current Password",value:r,onChange:S=>a(S.target.value),placeholder:"Enter your current password",required:!0}),s.jsx(xi,{id:"new-password",label:"New Password",value:o,onChange:S=>d(S.target.value),placeholder:"Enter your new password (min 6 characters)",required:!0}),s.jsx(xi,{id:"confirm-password",label:"Confirm New Password",value:m,onChange:S=>v(S.target.value),placeholder:"Confirm your new password",required:!0}),s.jsx("div",{children:s.jsx(ke,{type:"submit",variant:"primary",children:"Change Password"})})]})]}),n==="equipmentTypes"&&(e==null?void 0:e.role)==="admin"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Manage Equipment Types"}),s.jsx(tU,{})]}),n==="categories"&&(e==null?void 0:e.role)==="admin"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Manage Equipment Categories"}),s.jsx(aU,{})]}),n==="locations"&&(e==null?void 0:e.role)==="admin"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Manage Locations"}),s.jsx(cU,{})]}),n==="defaultStorage"&&(e==null?void 0:e.role)==="admin"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Default Storage Locations"}),s.jsx(yU,{})]}),n==="database"&&(e==null?void 0:e.role)==="admin"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Database Management"}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Database Manager"}),s.jsx("p",{className:"text-slate-600 mb-4",children:"Access the full-featured database management interface to view tables, execute queries, and manage your MySQL database directly."}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-slate-500",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{children:"Connected to ton-lager1-cv8k6-mysql"})]}),s.jsx("span",{children:""}),s.jsx("span",{children:"MySQL 9.0"}),s.jsx("span",{children:""}),s.jsx("span",{children:"Database: substantial-gray-unicorn"})]})]}),s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsxs(ke,{onClick:()=>T(!0),variant:"primary",className:"flex items-center space-x-2",children:[s.jsx(v3,{}),s.jsx("span",{children:"Open Database Manager"})]}),s.jsx("p",{className:"text-xs text-slate-500 text-center",children:"Opens in full-screen mode"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-slate-800 mb-2",children:" Browse Tables"}),s.jsx("p",{className:"text-sm text-slate-600",children:"View all database tables, their structure, and data with inline editing capabilities."})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-slate-800 mb-2",children:" Execute Queries"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Run SELECT queries to analyze data and generate custom reports."})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-slate-800 mb-2",children:" Database Info"}),s.jsx("p",{className:"text-sm text-slate-600",children:"View connection details, server information, and database statistics."})]})]})]})]})]})})})]}),E&&s.jsx(SU,{onClose:()=>T(!1)})]})},MU=({isOpen:e,onClose:n,equipmentId:t})=>{const r=pn(),[a,o]=M.useState(""),[d,m]=M.useState(null),[v,g]=M.useState(!1),[w,b]=M.useState(null);M.useEffect(()=>{e&&t&&(g(!0),hp(t).then(T=>{m(T),o(`${T.serial_number}-COPY`),g(!1)}).catch(T=>{console.error("Error fetching equipment details:",T),b("Failed to load equipment details"),g(!1)}))},[e,t]);const _=_t({mutationFn:async()=>{if(!d)return null;console.log("Original equipment data:",d);const T={type_id:d.type_id||1,brand:d.brand,model:d.model,serial_number:a,status:d.status||"available",location:d.location||"",description:d.description||""};return console.log("Duplicate data being sent:",T),CR(T)},onSuccess:T=>{console.log("Successfully duplicated equipment:",T),r.invalidateQueries(["equipment"]),n()},onError:T=>{var I,k;console.error("Error duplicating equipment:",T),(k=(I=T.response)==null?void 0:I.data)!=null&&k.message?b(T.response.data.message):b("Failed to duplicate equipment. Please check all required fields.")}}),E=T=>{if(T.preventDefault(),!a.trim()){b("Serial number is required");return}_.mutate()};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Duplicate Equipment"}),v?s.jsx("div",{className:"text-center py-4",children:"Loading..."}):w?s.jsx("div",{className:"text-red-600 mb-4",children:w}):s.jsxs("form",{onSubmit:E,children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("p",{className:"text-gray-600 mb-2",children:["You are about to duplicate: ",s.jsxs("span",{className:"font-medium",children:[d==null?void 0:d.brand," ",d==null?void 0:d.model]})]}),s.jsx("label",{htmlFor:"serialNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),s.jsx("input",{type:"text",id:"serialNumber",value:a,onChange:T=>o(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,autoFocus:!0}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Please provide a unique serial number for the duplicated equipment."})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:n,className:`px-3 py-1.5 text-sm font-medium rounded-md bg-white text-slate-600
                  hover:bg-slate-50 border border-slate-300 hover:border-slate-400
                  hover:shadow-sm transition-all`,children:"Cancel"}),s.jsx("button",{type:"submit",className:`px-3 py-1.5 text-sm font-medium rounded-md bg-white text-primary-600
                  hover:bg-primary-50 border border-primary-500 hover:border-primary-600
                  hover:shadow-sm transition-all focus:outline-none focus:ring-1 focus:ring-primary-500`,disabled:_.isLoading,children:_.isLoading?"Duplicating...":"Duplicate"})]})]})]})}):null},RU=({isOpen:e,onClose:n,equipmentId:t,selectedItems:r=[]})=>{var re,oe,ee;const a=r.length>0?r:t?[t]:[],o=pn(),[d,m]=M.useState(2),[v,g]=M.useState(""),[w,b]=M.useState([]),[_,E]=M.useState([]),[T,I]=M.useState(!1),[k,S]=M.useState(null),[A,O]=M.useState(0),[P,$]=M.useState(!1);M.useEffect(()=>{if(e&&a.length>0){I(!0),E([]);const he=a.map(ve=>hp(ve));Promise.all(he).then(ve=>{if(E(ve),ve.length===1){const ne=`${ve[0].serial_number}-{n}`;g(ne)}else g("BATCH-{n}");I(!1)}).catch(ve=>{console.error("Error fetching equipment details:",ve),S("Failed to load equipment details"),I(!1)})}},[e,a]),M.useEffect(()=>{if(v&&d>0){const he=[];for(let ve=1;ve<=Math.min(d,5);ve++)he.push(L(v,ve));d>5&&(he.push("..."),he.push(L(v,d))),b(he)}},[v,d]);const L=(he,ve)=>he.replace("{n}",ve),F=_t({mutationFn:async({equipmentData:he,serialNumber:ve})=>{if(!he)return null;const ne={type_id:he.type_id,brand:he.brand,model:he.model,serial_number:ve,status:he.status||"available",quantity:he.quantity||1,description:he.description||"",...he.category_id?{category_id:he.category_id}:{},...he.location_id?{location_id:he.location_id}:{},...he.location&&!he.location_id?{location:he.location}:{},...he.reference_image_id?{reference_image_id:he.reference_image_id}:{}},Q=new FormData;return Object.keys(ne).forEach(fe=>{ne[fe]!==null&&ne[fe]!==void 0&&Q.append(fe,ne[fe])}),(await ze.post("/api/equipment",Q,{headers:{"Content-Type":"multipart/form-data"}})).data}}),W=async()=>{var he,ve,ne,Q;if(_.length===0){S("No equipment data available");return}if(!v.includes("{n}")){S("Serial number pattern must include {n} placeholder");return}if(d<1||d>50){S("Number of copies must be between 1 and 50");return}$(!0),O(0),S("");try{const me=_.length*d;let fe=0;for(const Ie of _)for(let ue=1;ue<=d;ue++){let Ye;_.length===1?Ye=L(v,ue):Ye=L(v.replace("{n}",`${Ie.id}-{n}`),ue);try{const we=await F.mutateAsync({equipmentData:Ie,serialNumber:Ye})}catch(we){console.error(`Error creating duplicate ${ue} for equipment ID ${Ie.id}:`,we);let Ve=`Failed to create duplicate ${ue} for ${Ie.brand} ${Ie.model}`;throw(ve=(he=we.response)==null?void 0:he.data)!=null&&ve.message?Ve+=`: ${we.response.data.message}`:we.message&&(Ve+=`: ${we.message}`),new Error(Ve)}fe++,O(Math.floor(fe/me*100))}o.invalidateQueries(["equipment"]),V()}catch(me){console.error("Error in batch duplication:",me);let fe="Failed to duplicate equipment";(Q=(ne=me.response)==null?void 0:ne.data)!=null&&Q.message?fe=me.response.data.message:me.message&&(fe=me.message),S(fe)}finally{$(!1)}},V=()=>{m(2),g(""),b([]),E([]),I(!1),S(null),O(0),$(!1),n()};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Batch Duplicate Equipment"}),T?s.jsx("div",{className:"text-center py-4",children:"Loading..."}):k?s.jsx("div",{className:"text-red-600 mb-4",children:k}):s.jsxs("div",{children:[s.jsxs("div",{className:"text-gray-600 mb-4",children:[s.jsxs("p",{children:["You are about to duplicate ",_.length," item",_.length!==1?"s":"",":"]}),_.length===1?s.jsxs("p",{className:"font-medium mt-1",children:[(re=_[0])==null?void 0:re.brand," ",(oe=_[0])==null?void 0:oe.model," (SN: ",(ee=_[0])==null?void 0:ee.serial_number,")"]}):s.jsx("div",{className:"mt-2 max-h-32 overflow-y-auto border border-gray-200 rounded-md p-2",children:s.jsx("ul",{className:"text-sm",children:_.map((he,ve)=>s.jsxs("li",{className:"mb-1",children:[he.brand," ",he.model," (SN: ",he.serial_number,")"]},ve))})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"count",className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Copies"}),s.jsx("input",{type:"number",id:"count",min:"1",max:"50",value:d,onChange:he=>m(Math.min(50,Math.max(1,parseInt(he.target.value)||1))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"serialNumberPattern",className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number Pattern"}),s.jsx("input",{type:"text",id:"serialNumberPattern",value:v,onChange:he=>g(he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Use {n} for the copy number"}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Use ","{n}"," as a placeholder for the copy number."]})]}),w.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number Preview"}),s.jsx("div",{className:"bg-gray-50 p-3 rounded-md border border-gray-200",children:s.jsx("ul",{className:"text-sm text-gray-600",children:w.map((he,ve)=>s.jsx("li",{children:he},ve))})})]}),P&&s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-primary-600 h-2.5 rounded-full",style:{width:`${A}%`}})}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1 text-center",children:[A,"% Complete"]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx(ke,{variant:"outline",onClick:V,disabled:P,children:"Cancel"}),s.jsx(ke,{variant:"primary",onClick:W,disabled:P||!v.includes("{n}"),children:P?"Processing...":"Create Copies"})]})]})]})}):null},p5=({isOpen:e,onClose:n,equipmentId:t,selectedItems:r=[]})=>{const a=r.length>0?r:t?[t]:[],[o,d]=M.useState("available");M.useState(1);const[m,v]=M.useState(!1),[g,w]=M.useState(""),[b,_]=M.useState(""),E=pn(),T=["available","in-use","maintenance","unavailable","broken"],I=_t({mutationFn:async S=>{const A=S.equipmentIds.map(O=>SR(O,S.status));return Promise.all(A)},onSuccess:()=>{E.invalidateQueries(["equipment"]),_(`Status successfully updated to ${o} for ${a.length} item${a.length!==1?"s":""}`),v(!1),setTimeout(()=>{n(),_("")},2e3)},onError:S=>{var A,O;console.error("Error updating status:",S),w(((O=(A=S.response)==null?void 0:A.data)==null?void 0:O.message)||"Failed to update status"),v(!1)}}),k=S=>{if(S.preventDefault(),a.length===0){w("No equipment items selected");return}v(!0),w(""),_(""),I.mutate({equipmentIds:a,status:o})};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Update Equipment Status"}),s.jsx("div",{className:"mb-4",children:s.jsxs("p",{className:"text-gray-600",children:["You are updating the status of ",a.length," item",a.length!==1?"s":"","."]})}),g&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700",children:g}),b&&s.jsx("div",{className:"mb-4 p-3 bg-green-50 border-l-4 border-green-500 text-green-700",children:b}),s.jsxs("form",{onSubmit:k,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-slate-700 mb-1",children:"New Status"}),s.jsx("select",{id:"status",value:o,onChange:S=>d(S.target.value),className:"w-full p-2 border border-slate-300 rounded-md",required:!0,children:T.map(S=>s.jsx("option",{value:S,children:S.charAt(0).toUpperCase()+S.slice(1)},S))})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{type:"button",onClick:n,className:`px-3 py-1.5 text-sm font-medium rounded-md bg-white text-slate-600
                hover:bg-slate-50 border border-slate-300 hover:border-slate-400
                hover:shadow-sm transition-all`,disabled:m,children:"Cancel"}),s.jsx("button",{type:"submit",className:`px-3 py-1.5 text-sm font-medium rounded-md bg-white text-primary-600
                hover:bg-primary-50 border border-primary-500 hover:border-primary-600
                hover:shadow-sm transition-all`,disabled:m,children:m?"Updating...":"Update Status"})]})]})]})}):null};p5.propTypes={isOpen:ce.bool.isRequired,onClose:ce.func.isRequired,equipmentId:ce.oneOfType([ce.string,ce.number]),selectedItems:ce.array};const m5=({isOpen:e,onClose:n,equipmentId:t,selectedItems:r=[]})=>{var L;const a=r.length>0?r:t?[t]:[],[o,d]=M.useState(""),[m,v]=M.useState(""),[g,w]=M.useState(!1),[b,_]=M.useState(!1),[E,T]=M.useState(""),[I,k]=M.useState(""),S=pn(),{data:A}=ut({queryKey:["locations"],queryFn:wl,staleTime:3e5}),O=_t({mutationFn:async F=>{const W=F.equipmentIds.map(V=>kR(V,F.locationData));return Promise.all(W)},onSuccess:()=>{var W;S.invalidateQueries(["equipment"]);const F=g?m:((W=A==null?void 0:A.locations.find(V=>V.id.toString()===o))==null?void 0:W.name)||"selected location";k(`Location successfully updated to ${F} for ${a.length} item${a.length!==1?"s":""}`),_(!1),setTimeout(()=>{n(),k("")},2e3)},onError:F=>{var W,V;console.error("Error updating location:",F),T(((V=(W=F.response)==null?void 0:W.data)==null?void 0:V.message)||"Failed to update location"),_(!1)}}),P=F=>{if(F.preventDefault(),a.length===0){T("No equipment items selected");return}_(!0),T(""),k("");const W=g?{location:m}:{location_id:o};O.mutate({equipmentIds:a,locationData:W})},$=()=>{w(!g),d(""),v("")};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Update Equipment Location"}),s.jsx("div",{className:"mb-4",children:s.jsxs("p",{className:"text-gray-600",children:["You are updating the location of ",a.length," item",a.length!==1?"s":"","."]})}),E&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700",children:E}),I&&s.jsx("div",{className:"mb-4 p-3 bg-green-50 border-l-4 border-green-500 text-green-700",children:I}),s.jsxs("form",{onSubmit:P,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"flex items-center mb-3",children:s.jsx("button",{type:"button",onClick:$,className:"text-sm text-primary-600 hover:text-primary-800",children:g?"Select from existing locations":"Enter custom location"})}),g?s.jsxs("div",{children:[s.jsx("label",{htmlFor:"customLocation",className:"block text-sm font-medium text-slate-700 mb-1",children:"Custom Location"}),s.jsx("input",{type:"text",id:"customLocation",value:m,onChange:F=>v(F.target.value),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:"Enter location name",required:!0})]}):s.jsxs("div",{children:[s.jsx("label",{htmlFor:"locationId",className:"block text-sm font-medium text-slate-700 mb-1",children:"Location"}),s.jsxs("select",{id:"locationId",value:o,onChange:F=>d(F.target.value),className:"w-full p-2 border border-slate-300 rounded-md",required:!0,children:[s.jsx("option",{value:"",children:"Select a location"}),(L=A==null?void 0:A.locations)==null?void 0:L.map(F=>s.jsx("option",{value:F.id.toString(),children:F.name},F.id))]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{type:"button",onClick:n,className:`px-3 py-1.5 text-sm font-medium rounded-md bg-white text-slate-600
                hover:bg-slate-50 border border-slate-300 hover:border-slate-400
                hover:shadow-sm transition-all`,disabled:b,children:"Cancel"}),s.jsx("button",{type:"submit",className:`px-3 py-1.5 text-sm font-medium rounded-md bg-white text-primary-600
                hover:bg-primary-50 border border-primary-500 hover:border-primary-600
                hover:shadow-sm transition-all`,disabled:b||!o&&!m,children:b?"Updating...":"Update Location"})]})]})]})}):null};m5.propTypes={isOpen:ce.bool.isRequired,onClose:ce.func.isRequired,equipmentId:ce.oneOfType([ce.string,ce.number]),selectedItems:ce.array};const x5=({isOpen:e,onClose:n,selectedItems:t=[]})=>{const[r,a]=M.useState(""),[o,d]=M.useState(!1),[m,v]=M.useState(""),[g,w]=M.useState(""),b=pn(),{data:_,isLoading:E}=ut({queryKey:["equipment-types"],queryFn:ki,staleTime:3e5});M.useEffect(()=>{_!=null&&_.types&&_.types.length>0&&!r&&a(_.types[0].id.toString())},[_,r]);const T=_t({mutationFn:async k=>{const S=k.equipmentIds.map(A=>AR(A,k.typeId));return Promise.all(S)},onSuccess:()=>{var S;b.invalidateQueries(["equipment"]);const k=((S=_==null?void 0:_.types.find(A=>A.id.toString()===r))==null?void 0:S.name)||"selected type";w(`Type successfully updated to ${k} for ${t.length} item${t.length!==1?"s":""}`),d(!1),setTimeout(()=>{n(),w("")},2e3)},onError:k=>{var S,A;console.error("Error updating type:",k),v(((A=(S=k.response)==null?void 0:S.data)==null?void 0:A.message)||"Failed to update type"),d(!1)}}),I=k=>{if(k.preventDefault(),t.length===0){v("No equipment items selected");return}if(!r){v("Please select a type");return}d(!0),v(""),w(""),T.mutate({equipmentIds:t,typeId:r})};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Update Equipment Type"}),s.jsx("div",{className:"mb-4",children:s.jsxs("p",{className:"text-gray-600",children:["You are updating the type of ",t.length," item",t.length!==1?"s":"","."]})}),m&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700",children:m}),g&&s.jsx("div",{className:"mb-4 p-3 bg-green-50 border-l-4 border-green-500 text-green-700",children:g}),s.jsxs("form",{onSubmit:I,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 mb-1",children:"New Type"}),s.jsxs("select",{id:"type",value:r,onChange:k=>a(k.target.value),className:"w-full p-2 border border-slate-300 rounded-md",required:!0,children:[s.jsx("option",{value:"",children:"Select a type"}),_!=null&&_.types&&_.types.length>0?_.types.map(k=>s.jsx("option",{value:k.id,children:k.name},k.id)):s.jsx("option",{value:"",disabled:!0,children:"Loading types..."})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx(ke,{variant:"outline",onClick:n,disabled:o,children:"Cancel"}),s.jsx(ke,{variant:"primary",type:"submit",disabled:o||!r,children:o?"Updating...":"Update Type"})]})]})]})}):null};x5.propTypes={isOpen:ce.bool.isRequired,onClose:ce.func.isRequired,selectedItems:ce.array};const g5=({isOpen:e,onClose:n,selectedItems:t=[]})=>{const[r,a]=M.useState(""),[o,d]=M.useState(!1),[m,v]=M.useState(""),[g,w]=M.useState(""),b=pn(),{data:_,isLoading:E}=ut({queryKey:["categories"],queryFn:Vc,staleTime:3e5});M.useEffect(()=>{_!=null&&_.categories&&_.categories.length>0&&!r&&a(_.categories[0].id.toString())},[_,r]);const T=_t({mutationFn:async k=>{const S=k.equipmentIds.map(A=>TR(A,k.categoryId));return Promise.all(S)},onSuccess:()=>{var S;b.invalidateQueries(["equipment"]);const k=((S=_==null?void 0:_.categories.find(A=>A.id.toString()===r))==null?void 0:S.name)||"selected category";w(`Category successfully updated to ${k} for ${t.length} item${t.length!==1?"s":""}`),d(!1),setTimeout(()=>{n(),w("")},2e3)},onError:k=>{var S,A;console.error("Error updating category:",k),v(((A=(S=k.response)==null?void 0:S.data)==null?void 0:A.message)||"Failed to update category"),d(!1)}}),I=k=>{if(k.preventDefault(),t.length===0){v("No equipment items selected");return}d(!0),v(""),w(""),T.mutate({equipmentIds:t,categoryId:r||null})};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Update Equipment Category"}),s.jsx("div",{className:"mb-4",children:s.jsxs("p",{className:"text-gray-600",children:["You are updating the category of ",t.length," item",t.length!==1?"s":"","."]})}),m&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700",children:m}),g&&s.jsx("div",{className:"mb-4 p-3 bg-green-50 border-l-4 border-green-500 text-green-700",children:g}),s.jsxs("form",{onSubmit:I,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-slate-700 mb-1",children:"New Category"}),s.jsxs("select",{id:"category",value:r,onChange:k=>a(k.target.value),className:"w-full p-2 border border-slate-300 rounded-md",children:[s.jsx("option",{value:"",children:"None (Remove Category)"}),_!=null&&_.categories&&_.categories.length>0?_.categories.map(k=>s.jsx("option",{value:k.id,children:k.name},k.id)):s.jsx("option",{value:"",disabled:!0,children:"Loading categories..."})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx(ke,{variant:"outline",onClick:n,disabled:o,children:"Cancel"}),s.jsx(ke,{variant:"primary",type:"submit",disabled:o,children:o?"Updating...":"Update Category"})]})]})]})}):null};g5.propTypes={isOpen:ce.bool.isRequired,onClose:ce.func.isRequired,selectedItems:ce.array};const v5=({isOpen:e,onClose:n,selectedItems:t=[]})=>{const[r,a]=M.useState(""),[o,d]=M.useState(""),[m,v]=M.useState(!0),[g,w]=M.useState(!0),[b,_]=M.useState(!1),[E,T]=M.useState(""),[I,k]=M.useState(""),S=pn(),A=_t({mutationFn:async P=>{const $=P.equipmentIds.map(L=>DR(L,P.updateData));return Promise.all($)},onSuccess:()=>{S.invalidateQueries(["equipment"]);let P="Successfully updated ";m&&g?P+=`brand to "${r}" and model to "${o}"`:m?P+=`brand to "${r}"`:g&&(P+=`model to "${o}"`),k(`${P} for ${t.length} item${t.length!==1?"s":""}`),_(!1),setTimeout(()=>{n(),k("")},2e3)},onError:P=>{var $,L;console.error("Error updating brand/model:",P),T(((L=($=P.response)==null?void 0:$.data)==null?void 0:L.message)||"Failed to update brand/model"),_(!1)}}),O=P=>{if(P.preventDefault(),t.length===0){T("No equipment items selected");return}if(!m&&!g){T("Please select at least one field to update");return}if(m&&!r||g&&!o){T("Please fill in all selected fields");return}_(!0),T(""),k("");const $={};m&&($.brand=r),g&&($.model=o),A.mutate({equipmentIds:t,updateData:$})};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Update Brand & Model"}),s.jsx("div",{className:"mb-4",children:s.jsxs("p",{className:"text-gray-600",children:["You are updating ",t.length," item",t.length!==1?"s":"","."]})}),E&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700",children:E}),I&&s.jsx("div",{className:"mb-4 p-3 bg-green-50 border-l-4 border-green-500 text-green-700",children:I}),s.jsxs("form",{onSubmit:O,children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("input",{type:"checkbox",id:"updateBrand",checked:m,onChange:P=>v(P.target.checked),className:"mr-2"}),s.jsx("label",{htmlFor:"updateBrand",className:"text-sm font-medium text-slate-700",children:"Update Brand"})]}),s.jsx("input",{type:"text",id:"brand",value:r,onChange:P=>a(P.target.value),disabled:!m,className:`w-full p-2 border border-slate-300 rounded-md ${m?"":"bg-slate-100"}`,placeholder:"Enter new brand"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("input",{type:"checkbox",id:"updateModel",checked:g,onChange:P=>w(P.target.checked),className:"mr-2"}),s.jsx("label",{htmlFor:"updateModel",className:"text-sm font-medium text-slate-700",children:"Update Model"})]}),s.jsx("input",{type:"text",id:"model",value:o,onChange:P=>d(P.target.value),disabled:!g,className:`w-full p-2 border border-slate-300 rounded-md ${g?"":"bg-slate-100"}`,placeholder:"Enter new model"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx(ke,{variant:"outline",onClick:n,disabled:b,children:"Cancel"}),s.jsx(ke,{variant:"primary",type:"submit",disabled:b||!m&&!g||m&&!r||g&&!o,children:b?"Updating...":"Update"})]})]})]})}):null};v5.propTypes={isOpen:ce.bool.isRequired,onClose:ce.func.isRequired,selectedItems:ce.array};const R2=({onBatchDuplicate:e,onBatchStatusUpdate:n,onBatchLocationChange:t,equipmentId:r})=>{const[a,o]=M.useState(!1),d=M.useRef(null),m=us();M.useEffect(()=>{const T=I=>{d.current&&!d.current.contains(I.target)&&o(!1)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]);const v=()=>{o(!a)},g=()=>{o(!1),m(`/equipment/${r}`)},w=()=>{o(!1),m(`/equipment/${r}/edit`)},b=()=>{o(!1),e(r)},_=()=>{o(!1),n&&n(r)},E=()=>{o(!1),t&&t(r)};return s.jsxs("div",{className:"relative",ref:d,children:[s.jsx("button",{onClick:v,className:"p-1 rounded-md hover:bg-slate-100 border border-slate-200",title:"Actions","aria-label":"Actions menu",children:s.jsx(lC,{className:"w-4 h-4 text-slate-600"})}),a&&s.jsx("div",{className:"dropdown-menu",children:s.jsxs("div",{className:"py-0.5",children:[s.jsxs("button",{onClick:g,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx(ic,{className:"w-3.5 h-3.5 mr-1.5"}),"View Details"]}),s.jsxs("button",{onClick:w,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx(fa,{className:"w-3.5 h-3.5 mr-1.5"}),"Edit"]}),s.jsxs("button",{onClick:b,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx(f2,{className:"w-3.5 h-3.5 mr-1.5"}),"Duplicate"]}),s.jsxs("button",{onClick:_,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx("span",{className:"w-3.5 h-3.5 mr-1.5 flex items-center justify-center",children:""}),"Update Status"]}),s.jsxs("button",{onClick:E,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx("span",{className:"w-3.5 h-3.5 mr-1.5 flex items-center justify-center",children:""}),"Change Location"]})]})})]})};R2.propTypes={onBatchDuplicate:ce.func.isRequired,onBatchStatusUpdate:ce.func,onBatchLocationChange:ce.func,equipmentId:ce.oneOfType([ce.string,ce.number]).isRequired};const y5=({selectedItems:e,onBatchDuplicate:n,onBatchStatusUpdate:t,onBatchLocationChange:r,onBatchTypeChange:a,onBatchCategoryChange:o,onBatchBrandModelChange:d,onClearSelection:m})=>{const[v,g]=M.useState(!1),w=M.useRef(null);ut({queryKey:["equipment-types"],queryFn:ki,staleTime:3e5}),ut({queryKey:["locations"],queryFn:wl,staleTime:3e5}),ut({queryKey:["categories"],queryFn:Vc,staleTime:3e5}),M.useEffect(()=>{const A=O=>{w.current&&!w.current.contains(O.target)&&g(!1)};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[]);const b=()=>{g(!v)},_=()=>{g(!1),n()},E=()=>{g(!1),t()},T=()=>{g(!1),r()},I=()=>{g(!1),a()},k=()=>{g(!1),o()},S=()=>{g(!1),d()};return s.jsxs("div",{className:"relative",ref:w,children:[s.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 px-2 py-1 rounded-md border border-blue-100",children:[s.jsxs("span",{className:"text-xs font-medium text-blue-700",children:[e.length," item",e.length!==1?"s":""," selected"]}),s.jsx(ke,{variant:"outline",size:"sm",onClick:m,className:"text-xs py-0.5 px-2 bg-white",children:"Clear"}),s.jsxs(ke,{variant:"outline",size:"sm",onClick:b,className:"flex items-center text-xs py-0.5 px-2 bg-white",children:["Actions ",s.jsx(lC,{className:"w-3 h-3 ml-1"})]})]}),v&&s.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 bg-white rounded-md shadow-lg border border-slate-200 w-48",children:s.jsxs("div",{className:"py-0.5",children:[s.jsxs("button",{onClick:_,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx(f2,{className:"w-3.5 h-3.5 mr-1.5"}),"Duplicate"]}),s.jsxs("button",{onClick:E,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx("span",{className:"w-3.5 h-3.5 mr-1.5 flex items-center justify-center",children:""}),"Update Status"]}),s.jsxs("button",{onClick:T,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx("span",{className:"w-3.5 h-3.5 mr-1.5 flex items-center justify-center",children:""}),"Change Location"]}),s.jsxs("button",{onClick:I,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx("span",{className:"w-3.5 h-3.5 mr-1.5 flex items-center justify-center",children:""}),"Change Type"]}),s.jsxs("button",{onClick:k,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx("span",{className:"w-3.5 h-3.5 mr-1.5 flex items-center justify-center",children:""}),"Change Category"]}),s.jsxs("button",{onClick:S,className:"flex items-center w-full text-left px-3 py-1.5 text-xs text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:[s.jsx("span",{className:"w-3.5 h-3.5 mr-1.5 flex items-center justify-center",children:""}),"Update Brand/Model"]})]})})]})};y5.propTypes={selectedItems:ce.array.isRequired,onBatchDuplicate:ce.func.isRequired,onBatchStatusUpdate:ce.func.isRequired,onBatchLocationChange:ce.func.isRequired,onBatchTypeChange:ce.func,onBatchCategoryChange:ce.func,onBatchBrandModelChange:ce.func,onClearSelection:ce.func.isRequired};const w5=({equipment:e,onDuplicate:n,onSelect:t,isSelected:r})=>{const a=us();dr();const[o,d]=M.useState(!1);let m=null;if(e.reference_image_id)m=mf(e.reference_image_id,!0);else if(e.files&&e.files.length>0){const w=e.files.find(b=>b.file_type==="image");w&&(m=mf(w.id,!0))}const v=w=>{switch(w){case"available":return"badge-success";case"in-use":return"badge-info";case"maintenance":return"badge-warning";case"unavailable":return"badge-secondary";case"broken":return"badge-danger";default:return"badge-secondary"}},g=w=>{w.target.type==="checkbox"||w.target.closest("button")||w.target.closest("a")||w.target.closest(".btn-icon")||a(`/equipment/${e.id}`)};return s.jsxs("div",{className:`bg-white rounded-lg shadow-soft overflow-hidden h-full ${r?"bg-blue-50 border-2 border-blue-300":""} cursor-pointer hover:shadow-md transition-shadow`,onClick:g,children:[s.jsx("div",{className:"absolute top-2 left-2 z-10",children:s.jsx("input",{type:"checkbox",checked:r,onChange:()=>t&&t(e.id),className:"h-4 w-4 text-primary-600 border-gray-300 rounded"})}),s.jsx("div",{className:"relative h-40 bg-slate-100 rounded-t-lg overflow-hidden",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:m?s.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",children:s.jsx("img",{src:m,alt:`${e.brand} ${e.model}`,className:"w-full h-full object-contain",style:{objectFit:"contain",objectPosition:"center"}})}):s.jsx("div",{className:"flex items-center justify-center h-full bg-slate-200",children:s.jsx("span",{className:"text-slate-400 text-lg",children:"No image"})})}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsxs("span",{className:"font-mono text-xs text-slate-400",children:["#",e.id]}),s.jsx("h3",{className:"font-medium text-slate-800 capitalize",children:e.type})]}),e.category&&s.jsxs("p",{className:"text-xs text-slate-500",children:["Category: ",e.category]})]}),s.jsx("span",{className:`badge ${v(e.status)}`,children:e.status})]}),s.jsxs("h2",{className:"text-lg font-semibold mb-1",children:[e.brand," ",e.model]}),s.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["SN: ",e.serial_number]}),e.location&&s.jsxs("p",{className:"text-sm text-slate-500 mb-2",children:["Location: ",e.location]}),s.jsxs("p",{className:"text-sm text-slate-500 mb-2",children:["Quantity: ",s.jsx("span",{className:"font-medium text-slate-800",children:e.quantity||1})]}),s.jsxs("div",{className:"flex justify-between mt-auto pt-2 border-t border-slate-100",children:[s.jsx(qn,{to:`/equipment/${e.id}/edit`,className:"btn-icon text-slate-600 hover:text-slate-800 hover:bg-slate-50",title:"Edit equipment",children:s.jsx(fa,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>n(e.id),className:"btn-icon text-green-600 hover:text-green-800 hover:bg-green-50",title:"Duplicate equipment",children:s.jsx(f2,{className:"w-5 h-5"})}),s.jsx(R2,{equipmentId:e.id,onBatchDuplicate:()=>{const w=new CustomEvent("batchDuplicate",{detail:{id:e.id}});document.dispatchEvent(w)},onBatchStatusUpdate:()=>{const w=new CustomEvent("batchStatusUpdate",{detail:{id:e.id}});document.dispatchEvent(w)},onBatchLocationChange:()=>{const w=new CustomEvent("batchLocationChange",{detail:{id:e.id}});document.dispatchEvent(w)}})]})]})]})};w5.propTypes={equipment:ce.object.isRequired,onDuplicate:ce.func.isRequired,onSelect:ce.func,isSelected:ce.bool};const Sa=({field:e,label:n,currentSortField:t,currentSortOrder:r,onSort:a,className:o=""})=>{const d=t===e;return s.jsx("th",{className:`table-header-cell cursor-pointer select-none ${o}`,onClick:()=>a(e),children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{children:n}),s.jsx("div",{className:"flex flex-col h-4 justify-center",children:d?r==="asc"?s.jsx(vb,{className:"w-3 h-3 text-primary-600"}):s.jsx(qR,{className:"w-3 h-3 text-primary-600"}):s.jsx("div",{className:"w-3 h-3 opacity-60",children:s.jsx(vb,{className:"w-3 h-3 text-gray-500"})})})]})})};Sa.propTypes={field:ce.string.isRequired,label:ce.string.isRequired,currentSortField:ce.string.isRequired,currentSortOrder:ce.string.isRequired,onSort:ce.func.isRequired,className:ce.string};function Nl(e,n,t,r){function a(o){return o instanceof t?o:new t(function(d){d(o)})}return new(t||(t=Promise))(function(o,d){function m(w){try{g(r.next(w))}catch(b){d(b)}}function v(w){try{g(r.throw(w))}catch(b){d(b)}}function g(w){w.done?o(w.value):a(w.value).then(m,v)}g((r=r.apply(e,n||[])).next())})}const OU=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Mc(e,n,t){const r=LU(e),{webkitRelativePath:a}=e,o=typeof n=="string"?n:typeof a=="string"&&a.length>0?a:`./${e.name}`;return typeof r.path!="string"&&y3(r,"path",o),t!==void 0&&Object.defineProperty(r,"handle",{value:t,writable:!1,configurable:!1,enumerable:!0}),y3(r,"relativePath",o),r}function LU(e){const{name:n}=e;if(n&&n.lastIndexOf(".")!==-1&&!e.type){const r=n.split(".").pop().toLowerCase(),a=OU.get(r);a&&Object.defineProperty(e,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return e}function y3(e,n,t){Object.defineProperty(e,n,{value:t,writable:!1,configurable:!1,enumerable:!0})}const PU=[".DS_Store","Thumbs.db"];function FU(e){return Nl(this,void 0,void 0,function*(){return Df(e)&&BU(e.dataTransfer)?WU(e.dataTransfer,e.type):UU(e)?zU(e):Array.isArray(e)&&e.every(n=>"getFile"in n&&typeof n.getFile=="function")?qU(e):[]})}function BU(e){return Df(e)}function UU(e){return Df(e)&&Df(e.target)}function Df(e){return typeof e=="object"&&e!==null}function zU(e){return Qx(e.target.files).map(n=>Mc(n))}function qU(e){return Nl(this,void 0,void 0,function*(){return(yield Promise.all(e.map(t=>t.getFile()))).map(t=>Mc(t))})}function WU(e,n){return Nl(this,void 0,void 0,function*(){if(e.items){const t=Qx(e.items).filter(a=>a.kind==="file");if(n!=="drop")return t;const r=yield Promise.all(t.map(HU));return w3(b5(r))}return w3(Qx(e.files).map(t=>Mc(t)))})}function w3(e){return e.filter(n=>PU.indexOf(n.name)===-1)}function Qx(e){if(e===null)return[];const n=[];for(let t=0;t<e.length;t++){const r=e[t];n.push(r)}return n}function HU(e){if(typeof e.webkitGetAsEntry!="function")return b3(e);const n=e.webkitGetAsEntry();return n&&n.isDirectory?N5(n):b3(e,n)}function b5(e){return e.reduce((n,t)=>[...n,...Array.isArray(t)?b5(t):[t]],[])}function b3(e,n){return Nl(this,void 0,void 0,function*(){var t;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const o=yield e.getAsFileSystemHandle();if(o===null)throw new Error(`${e} is not a File`);if(o!==void 0){const d=yield o.getFile();return d.handle=o,Mc(d)}}const r=e.getAsFile();if(!r)throw new Error(`${e} is not a File`);return Mc(r,(t=n==null?void 0:n.fullPath)!==null&&t!==void 0?t:void 0)})}function VU(e){return Nl(this,void 0,void 0,function*(){return e.isDirectory?N5(e):$U(e)})}function N5(e){const n=e.createReader();return new Promise((t,r)=>{const a=[];function o(){n.readEntries(d=>Nl(this,void 0,void 0,function*(){if(d.length){const m=Promise.all(d.map(VU));a.push(m),o()}else try{const m=yield Promise.all(a);t(m)}catch(m){r(m)}}),d=>{r(d)})}o()})}function $U(e){return Nl(this,void 0,void 0,function*(){return new Promise((n,t)=>{e.file(r=>{const a=Mc(r,e.fullPath);n(a)},r=>{t(r)})})})}var v1=function(e,n){if(e&&n){var t=Array.isArray(n)?n:n.split(",");if(t.length===0)return!0;var r=e.name||"",a=(e.type||"").toLowerCase(),o=a.replace(/\/.*$/,"");return t.some(function(d){var m=d.trim().toLowerCase();return m.charAt(0)==="."?r.toLowerCase().endsWith(m):m.endsWith("/*")?o===m.replace(/\/.*$/,""):a===m})}return!0};function N3(e){return GU(e)||QU(e)||C5(e)||YU()}function YU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function GU(e){if(Array.isArray(e))return Gx(e)}function j3(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,r)}return t}function C3(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?j3(Object(t),!0).forEach(function(r){j5(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j3(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function j5(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Cu(e,n){return ZU(e)||KU(e,n)||C5(e,n)||XU()}function XU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C5(e,n){if(e){if(typeof e=="string")return Gx(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Gx(e,n)}}function Gx(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function KU(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var r=[],a=!0,o=!1,d,m;try{for(t=t.call(e);!(a=(d=t.next()).done)&&(r.push(d.value),!(n&&r.length===n));a=!0);}catch(v){o=!0,m=v}finally{try{!a&&t.return!=null&&t.return()}finally{if(o)throw m}}return r}}function ZU(e){if(Array.isArray(e))return e}var JU=typeof v1=="function"?v1:v1.default,ez="file-invalid-type",tz="file-too-large",nz="file-too-small",rz="too-many-files",sz=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=n.split(","),r=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:ez,message:"File type must be ".concat(r)}},_3=function(n){return{code:tz,message:"File is larger than ".concat(n," ").concat(n===1?"byte":"bytes")}},E3=function(n){return{code:nz,message:"File is smaller than ".concat(n," ").concat(n===1?"byte":"bytes")}},az={code:rz,message:"Too many files"};function _5(e,n){var t=e.type==="application/x-moz-file"||JU(e,n);return[t,t?null:sz(n)]}function E5(e,n,t){if(Go(e.size))if(Go(n)&&Go(t)){if(e.size>t)return[!1,_3(t)];if(e.size<n)return[!1,E3(n)]}else{if(Go(n)&&e.size<n)return[!1,E3(n)];if(Go(t)&&e.size>t)return[!1,_3(t)]}return[!0,null]}function Go(e){return e!=null}function iz(e){var n=e.files,t=e.accept,r=e.minSize,a=e.maxSize,o=e.multiple,d=e.maxFiles,m=e.validator;return!o&&n.length>1||o&&d>=1&&n.length>d?!1:n.every(function(v){var g=_5(v,t),w=Cu(g,1),b=w[0],_=E5(v,r,a),E=Cu(_,1),T=E[0],I=m?m(v):null;return b&&T&&!I})}function If(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function oh(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(n){return n==="Files"||n==="application/x-moz-file"}):!!e.target&&!!e.target.files}function S3(e){e.preventDefault()}function oz(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function lz(e){return e.indexOf("Edge/")!==-1}function cz(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return oz(e)||lz(e)}function Ea(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(r){for(var a=arguments.length,o=new Array(a>1?a-1:0),d=1;d<a;d++)o[d-1]=arguments[d];return n.some(function(m){return!If(r)&&m&&m.apply(void 0,[r].concat(o)),If(r)})}}function dz(){return"showOpenFilePicker"in window}function uz(e){if(Go(e)){var n=Object.entries(e).filter(function(t){var r=Cu(t,2),a=r[0],o=r[1],d=!0;return S5(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),d=!1),(!Array.isArray(o)||!o.every(k5))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),d=!1),d}).reduce(function(t,r){var a=Cu(r,2),o=a[0],d=a[1];return C3(C3({},t),{},j5({},o,d))},{});return[{description:"Files",accept:n}]}return e}function hz(e){if(Go(e))return Object.entries(e).reduce(function(n,t){var r=Cu(t,2),a=r[0],o=r[1];return[].concat(N3(n),[a],N3(o))},[]).filter(function(n){return S5(n)||k5(n)}).join(",")}function fz(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function pz(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function S5(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function k5(e){return/^.*\.[\w]+$/.test(e)}var mz=["children"],xz=["open"],gz=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],vz=["refKey","onChange","onClick"];function yz(e){return Nz(e)||bz(e)||A5(e)||wz()}function wz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bz(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Nz(e){if(Array.isArray(e))return Xx(e)}function y1(e,n){return _z(e)||Cz(e,n)||A5(e,n)||jz()}function jz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A5(e,n){if(e){if(typeof e=="string")return Xx(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Xx(e,n)}}function Xx(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Cz(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var r=[],a=!0,o=!1,d,m;try{for(t=t.call(e);!(a=(d=t.next()).done)&&(r.push(d.value),!(n&&r.length===n));a=!0);}catch(v){o=!0,m=v}finally{try{!a&&t.return!=null&&t.return()}finally{if(o)throw m}}return r}}function _z(e){if(Array.isArray(e))return e}function k3(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,r)}return t}function Dn(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?k3(Object(t),!0).forEach(function(r){Kx(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k3(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Kx(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Mf(e,n){if(e==null)return{};var t=Ez(e,n),r,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}function Ez(e,n){if(e==null)return{};var t={},r=Object.keys(e),a,o;for(o=0;o<r.length;o++)a=r[o],!(n.indexOf(a)>=0)&&(t[a]=e[a]);return t}var O2=M.forwardRef(function(e,n){var t=e.children,r=Mf(e,mz),a=Bu(r),o=a.open,d=Mf(a,xz);return M.useImperativeHandle(n,function(){return{open:o}},[o]),ge.createElement(M.Fragment,null,t(Dn(Dn({},d),{},{open:o})))});O2.displayName="Dropzone";var T5={disabled:!1,getFilesFromEvent:FU,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};O2.defaultProps=T5;O2.propTypes={children:ce.func,accept:ce.objectOf(ce.arrayOf(ce.string)),multiple:ce.bool,preventDropOnDocument:ce.bool,noClick:ce.bool,noKeyboard:ce.bool,noDrag:ce.bool,noDragEventsBubbling:ce.bool,minSize:ce.number,maxSize:ce.number,maxFiles:ce.number,disabled:ce.bool,getFilesFromEvent:ce.func,onFileDialogCancel:ce.func,onFileDialogOpen:ce.func,useFsAccessApi:ce.bool,autoFocus:ce.bool,onDragEnter:ce.func,onDragLeave:ce.func,onDragOver:ce.func,onDrop:ce.func,onDropAccepted:ce.func,onDropRejected:ce.func,onError:ce.func,validator:ce.func};var Zx={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Bu(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=Dn(Dn({},T5),e),t=n.accept,r=n.disabled,a=n.getFilesFromEvent,o=n.maxSize,d=n.minSize,m=n.multiple,v=n.maxFiles,g=n.onDragEnter,w=n.onDragLeave,b=n.onDragOver,_=n.onDrop,E=n.onDropAccepted,T=n.onDropRejected,I=n.onFileDialogCancel,k=n.onFileDialogOpen,S=n.useFsAccessApi,A=n.autoFocus,O=n.preventDropOnDocument,P=n.noClick,$=n.noKeyboard,L=n.noDrag,F=n.noDragEventsBubbling,W=n.onError,V=n.validator,re=M.useMemo(function(){return hz(t)},[t]),oe=M.useMemo(function(){return uz(t)},[t]),ee=M.useMemo(function(){return typeof k=="function"?k:A3},[k]),he=M.useMemo(function(){return typeof I=="function"?I:A3},[I]),ve=M.useRef(null),ne=M.useRef(null),Q=M.useReducer(Sz,Zx),me=y1(Q,2),fe=me[0],Ie=me[1],ue=fe.isFocused,Ye=fe.isFileDialogActive,we=M.useRef(typeof window<"u"&&window.isSecureContext&&S&&dz()),Ve=function(){!we.current&&Ye&&setTimeout(function(){if(ne.current){var Fe=ne.current.files;Fe.length||(Ie({type:"closeDialog"}),he())}},300)};M.useEffect(function(){return window.addEventListener("focus",Ve,!1),function(){window.removeEventListener("focus",Ve,!1)}},[ne,Ye,he,we]);var Be=M.useRef([]),ct=function(Fe){ve.current&&ve.current.contains(Fe.target)||(Fe.preventDefault(),Be.current=[])};M.useEffect(function(){return O&&(document.addEventListener("dragover",S3,!1),document.addEventListener("drop",ct,!1)),function(){O&&(document.removeEventListener("dragover",S3),document.removeEventListener("drop",ct))}},[ve,O]),M.useEffect(function(){return!r&&A&&ve.current&&ve.current.focus(),function(){}},[ve,A,r]);var Ae=M.useCallback(function(Ee){W?W(Ee):console.error(Ee)},[W]),Se=M.useCallback(function(Ee){Ee.preventDefault(),Ee.persist(),ae(Ee),Be.current=[].concat(yz(Be.current),[Ee.target]),oh(Ee)&&Promise.resolve(a(Ee)).then(function(Fe){if(!(If(Ee)&&!F)){var ht=Fe.length,Et=ht>0&&iz({files:Fe,accept:re,minSize:d,maxSize:o,multiple:m,maxFiles:v,validator:V}),en=ht>0&&!Et;Ie({isDragAccept:Et,isDragReject:en,isDragActive:!0,type:"setDraggedFiles"}),g&&g(Ee)}}).catch(function(Fe){return Ae(Fe)})},[a,g,Ae,F,re,d,o,m,v,V]),nt=M.useCallback(function(Ee){Ee.preventDefault(),Ee.persist(),ae(Ee);var Fe=oh(Ee);if(Fe&&Ee.dataTransfer)try{Ee.dataTransfer.dropEffect="copy"}catch{}return Fe&&b&&b(Ee),!1},[b,F]),qt=M.useCallback(function(Ee){Ee.preventDefault(),Ee.persist(),ae(Ee);var Fe=Be.current.filter(function(Et){return ve.current&&ve.current.contains(Et)}),ht=Fe.indexOf(Ee.target);ht!==-1&&Fe.splice(ht,1),Be.current=Fe,!(Fe.length>0)&&(Ie({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),oh(Ee)&&w&&w(Ee))},[ve,w,F]),bt=M.useCallback(function(Ee,Fe){var ht=[],Et=[];Ee.forEach(function(en){var Rt=_5(en,re),Cr=y1(Rt,2),Br=Cr[0],Ts=Cr[1],tn=E5(en,d,o),te=y1(tn,2),Je=te[0],ft=te[1],It=V?V(en):null;if(Br&&Je&&!It)ht.push(en);else{var on=[Ts,ft];It&&(on=on.concat(It)),Et.push({file:en,errors:on.filter(function(Ur){return Ur})})}}),(!m&&ht.length>1||m&&v>=1&&ht.length>v)&&(ht.forEach(function(en){Et.push({file:en,errors:[az]})}),ht.splice(0)),Ie({acceptedFiles:ht,fileRejections:Et,isDragReject:Et.length>0,type:"setFiles"}),_&&_(ht,Et,Fe),Et.length>0&&T&&T(Et,Fe),ht.length>0&&E&&E(ht,Fe)},[Ie,m,re,d,o,v,_,E,T,V]),Pt=M.useCallback(function(Ee){Ee.preventDefault(),Ee.persist(),ae(Ee),Be.current=[],oh(Ee)&&Promise.resolve(a(Ee)).then(function(Fe){If(Ee)&&!F||bt(Fe,Ee)}).catch(function(Fe){return Ae(Fe)}),Ie({type:"reset"})},[a,bt,Ae,F]),Tt=M.useCallback(function(){if(we.current){Ie({type:"openDialog"}),ee();var Ee={multiple:m,types:oe};window.showOpenFilePicker(Ee).then(function(Fe){return a(Fe)}).then(function(Fe){bt(Fe,null),Ie({type:"closeDialog"})}).catch(function(Fe){fz(Fe)?(he(Fe),Ie({type:"closeDialog"})):pz(Fe)?(we.current=!1,ne.current?(ne.current.value=null,ne.current.click()):Ae(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Ae(Fe)});return}ne.current&&(Ie({type:"openDialog"}),ee(),ne.current.value=null,ne.current.click())},[Ie,ee,he,S,bt,Ae,oe,m]),Te=M.useCallback(function(Ee){!ve.current||!ve.current.isEqualNode(Ee.target)||(Ee.key===" "||Ee.key==="Enter"||Ee.keyCode===32||Ee.keyCode===13)&&(Ee.preventDefault(),Tt())},[ve,Tt]),Ne=M.useCallback(function(){Ie({type:"focus"})},[]),Ze=M.useCallback(function(){Ie({type:"blur"})},[]),be=M.useCallback(function(){P||(cz()?setTimeout(Tt,0):Tt())},[P,Tt]),De=function(Fe){return r?null:Fe},$e=function(Fe){return $?null:De(Fe)},Ge=function(Fe){return L?null:De(Fe)},ae=function(Fe){F&&Fe.stopPropagation()},ye=M.useMemo(function(){return function(){var Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Fe=Ee.refKey,ht=Fe===void 0?"ref":Fe,Et=Ee.role,en=Ee.onKeyDown,Rt=Ee.onFocus,Cr=Ee.onBlur,Br=Ee.onClick,Ts=Ee.onDragEnter,tn=Ee.onDragOver,te=Ee.onDragLeave,Je=Ee.onDrop,ft=Mf(Ee,gz);return Dn(Dn(Kx({onKeyDown:$e(Ea(en,Te)),onFocus:$e(Ea(Rt,Ne)),onBlur:$e(Ea(Cr,Ze)),onClick:De(Ea(Br,be)),onDragEnter:Ge(Ea(Ts,Se)),onDragOver:Ge(Ea(tn,nt)),onDragLeave:Ge(Ea(te,qt)),onDrop:Ge(Ea(Je,Pt)),role:typeof Et=="string"&&Et!==""?Et:"presentation"},ht,ve),!r&&!$?{tabIndex:0}:{}),ft)}},[ve,Te,Ne,Ze,be,Se,nt,qt,Pt,$,L,r]),ie=M.useCallback(function(Ee){Ee.stopPropagation()},[]),He=M.useMemo(function(){return function(){var Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Fe=Ee.refKey,ht=Fe===void 0?"ref":Fe,Et=Ee.onChange,en=Ee.onClick,Rt=Mf(Ee,vz),Cr=Kx({accept:re,multiple:m,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:De(Ea(Et,Pt)),onClick:De(Ea(en,ie)),tabIndex:-1},ht,ne);return Dn(Dn({},Cr),Rt)}},[ne,t,m,Pt,r]);return Dn(Dn({},fe),{},{isFocused:ue&&!r,getRootProps:ye,getInputProps:He,rootRef:ve,inputRef:ne,open:De(Tt)})}function Sz(e,n){switch(n.type){case"focus":return Dn(Dn({},e),{},{isFocused:!0});case"blur":return Dn(Dn({},e),{},{isFocused:!1});case"openDialog":return Dn(Dn({},Zx),{},{isFileDialogActive:!0});case"closeDialog":return Dn(Dn({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Dn(Dn({},e),{},{isDragActive:n.isDragActive,isDragAccept:n.isDragAccept,isDragReject:n.isDragReject});case"setFiles":return Dn(Dn({},e),{},{acceptedFiles:n.acceptedFiles,fileRejections:n.fileRejections,isDragReject:n.isDragReject});case"reset":return Dn({},Zx);default:return e}}function A3(){}const kz=async(e="csv",n={})=>{try{const t={format:e};return Object.entries(n).forEach(([a,o])=>{a==="selectedIds"&&Array.isArray(o)&&o.length>0?t.selectedIds=JSON.stringify(o):t[a]=o}),console.log("Export params:",t),(await ze.get("/api/import-export/export",{params:t,responseType:"blob"})).data}catch(t){throw console.error("Error exporting equipment:",t),t}},Az=async(e,n={})=>{try{const t=new FormData;return t.append("file",e),Object.entries(n).forEach(([a,o])=>{t.append(a,o)}),(await ze.post("/api/import-export/import",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw console.error("Error importing equipment:",t),t}},Tz=(e,n)=>{const t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=n,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(t),document.body.removeChild(r)},Dz=({isOpen:e,onClose:n,filters:t={},selectedItems:r=[]})=>{const[a,o]=M.useState("export"),[d,m]=M.useState("csv"),[v,g]=M.useState(!1),[w,b]=M.useState(!1),[_,E]=M.useState(null),[T,I]=M.useState(!0),[k,S]=M.useState(null),[A,O]=M.useState(""),{user:P}=dr(),$=pn(),L=P&&(P.role==="admin"||P.role==="advanced"),{getRootProps:F,getInputProps:W,isDragActive:V}=Bu({onDrop:ee=>{ee.length>0&&(E(ee[0]),O(""))},accept:{"text/csv":[".csv"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/json":[".json"]},maxFiles:1}),re=async()=>{try{b(!0),O("");const ee=new Date().toISOString().split("T")[0],he={...t};v&&r.length>0&&(he.selectedIds=r);const ve=await kz(d,he);let ne;const Q=v&&r.length>0?`equipment_selected_${r.length}_items_${ee}`:`equipment_export_${ee}`;switch(d){case"csv":ne=`${Q}.csv`;break;case"xlsx":ne=`${Q}.xlsx`;break;case"json":ne=`${Q}.json`;break;default:ne=Q}Tz(ve,ne),b(!1)}catch(ee){console.error("Export error:",ee),O("Failed to export data. Please try again."),b(!1)}},oe=async()=>{if(!_){O("Please select a file to import");return}try{b(!0),O(""),S(null);const ee=await Az(_,{updateExisting:T});S(ee.results),$.invalidateQueries(["equipment"]),b(!1),E(null),ee.results.errors.length===0&&setTimeout(()=>{n()},3e3)}catch(ee){console.error("Import error:",ee),O("Failed to import data. Please check your file and try again."),b(!1)}};return!e||!L?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-2xl",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Import/Export Equipment"}),s.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex border-b",children:[s.jsx("button",{className:`px-4 py-2 ${a==="export"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>o("export"),children:"Export"}),s.jsx("button",{className:`px-4 py-2 ${a==="import"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>o("import"),children:"Import"})]}),s.jsx("div",{className:"p-4",children:a==="export"?s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Export Format"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("label",{className:"inline-flex items-center",children:[s.jsx("input",{type:"radio",className:"form-radio",name:"exportFormat",value:"csv",checked:d==="csv",onChange:()=>m("csv")}),s.jsx("span",{className:"ml-2",children:"CSV"})]}),s.jsxs("label",{className:"inline-flex items-center",children:[s.jsx("input",{type:"radio",className:"form-radio",name:"exportFormat",value:"xlsx",checked:d==="xlsx",onChange:()=>m("xlsx")}),s.jsx("span",{className:"ml-2",children:"Excel (XLSX)"})]}),s.jsxs("label",{className:"inline-flex items-center",children:[s.jsx("input",{type:"radio",className:"form-radio",name:"exportFormat",value:"json",checked:d==="json",onChange:()=>m("json")}),s.jsx("span",{className:"ml-2",children:"JSON"})]})]})]}),r.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Export Scope"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("label",{className:"inline-flex items-center",children:[s.jsx("input",{type:"radio",className:"form-radio",name:"exportScope",checked:!v,onChange:()=>g(!1)}),s.jsx("span",{className:"ml-2",children:"All equipment (with filters)"})]}),s.jsxs("label",{className:"inline-flex items-center",children:[s.jsx("input",{type:"radio",className:"form-radio",name:"exportScope",checked:v,onChange:()=>g(!0)}),s.jsxs("span",{className:"ml-2",children:["Selected items only (",r.length,")"]})]})]})]}),s.jsx("div",{className:"mb-4",children:s.jsx("p",{className:"text-sm text-gray-600",children:v&&r.length>0?`This will export ${r.length} selected equipment items.`:"This will export all equipment data based on your current filters."})}),A&&s.jsx("div",{className:"mb-4 p-2 bg-red-100 text-red-700 rounded",children:A}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{onClick:n,disabled:w,className:"btn btn-secondary",children:"Cancel"}),s.jsx("button",{onClick:re,disabled:w,className:`btn ${w?"bg-blue-400":"btn-primary"}`,children:w?s.jsxs("div",{className:"flex items-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exporting..."]}):"Export"})]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload File"}),s.jsxs("div",{...F(),className:`border-2 border-dashed rounded-md p-6 text-center cursor-pointer ${V?"border-blue-500 bg-blue-50":"border-gray-300"}`,children:[s.jsx("input",{...W()}),_?s.jsxs("div",{children:[s.jsxs("p",{className:"text-green-600",children:["File selected: ",_.name]}),s.jsxs("p",{className:"text-sm text-gray-500",children:[(_.size/1024).toFixed(2)," KB"]})]}):V?s.jsx("p",{className:"text-blue-500",children:"Drop the file here..."}):s.jsxs("div",{children:[s.jsx("p",{className:"mb-2",children:"Drag & drop a file here, or click to select a file"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Accepted file types: CSV, XLSX, JSON"})]})]})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("label",{className:"inline-flex items-center",children:[s.jsx("input",{type:"checkbox",className:"form-checkbox",checked:T,onChange:ee=>I(ee.target.checked)}),s.jsx("span",{className:"ml-2",children:"Update existing equipment if found"})]})}),A&&s.jsx("div",{className:"mb-4 p-2 bg-red-100 text-red-700 rounded",children:A}),k&&s.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded",children:[s.jsx("h3",{className:"font-medium text-green-800 mb-2",children:"Import Results"}),s.jsxs("ul",{className:"text-sm text-green-700",children:[s.jsxs("li",{children:["Total records processed: ",k.total]}),s.jsxs("li",{children:["New records created: ",k.created]}),s.jsxs("li",{children:["Existing records updated: ",k.updated]}),s.jsxs("li",{children:["Errors: ",k.errors.length]})]}),k.errors.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("h4",{className:"font-medium text-red-800",children:"Errors:"}),s.jsx("ul",{className:"text-sm text-red-700 mt-1 max-h-32 overflow-y-auto",children:k.errors.map((ee,he)=>s.jsxs("li",{children:[ee.record.serial_number||ee.record.id||`Row ${he+1}`,": ",ee.error]},he))})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{onClick:n,disabled:w,className:"btn btn-secondary",children:"Cancel"}),s.jsx("button",{onClick:oe,disabled:w||!_,className:`btn ${w?"bg-blue-400":"btn-primary"}`,children:w?s.jsxs("div",{className:"flex items-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Importing..."]}):"Import"})]})]})})]})})},Iz=()=>{var Ge;const e=us(),n=M.useRef(null),[t]=M.useState(20),[r,a]=M.useState({type:"",brand:"",status:"",location_id:"",search:""}),[o,d]=M.useState([]),[m,v]=M.useState(!1),[g,w]=M.useState("updated_at"),[b,_]=M.useState("desc"),[E,T]=M.useState("list"),[I,k]=M.useState(!1);M.useEffect(()=>{const ae=localStorage.getItem("equipmentViewMode");ae&&T(ae);const ye=localStorage.getItem("equipmentShowThumbnails");ye!==null&&k(ye==="true")},[]),M.useEffect(()=>{localStorage.setItem("equipmentViewMode",E)},[E]),M.useEffect(()=>{localStorage.setItem("equipmentShowThumbnails",I.toString())},[I]);const[S,A]=M.useState(!1),[O,P]=M.useState(!1),[$,L]=M.useState(!1),[F,W]=M.useState(!1),[V,re]=M.useState(!1),[oe,ee]=M.useState(!1),[he,ve]=M.useState(!1),[ne,Q]=M.useState(!1),[me,fe]=M.useState(null);M.useEffect(()=>{const ae=He=>{const{id:Ee}=He.detail;fe(Ee),P(!0)},ye=He=>{const{id:Ee}=He.detail;fe(Ee),L(!0)},ie=He=>{const{id:Ee}=He.detail;fe(Ee),W(!0)};return document.addEventListener("batchDuplicate",ae),document.addEventListener("batchStatusUpdate",ye),document.addEventListener("batchLocationChange",ie),()=>{document.removeEventListener("batchDuplicate",ae),document.removeEventListener("batchStatusUpdate",ye),document.removeEventListener("batchLocationChange",ie)}},[]);const{data:Ie,fetchNextPage:ue,hasNextPage:Ye,isFetchingNextPage:we,isLoading:Ve,isError:Be,error:ct}=s2(["equipment",r,g,b],async({pageParam:ae=1})=>{const ye={page:ae,limit:t,...r,sortBy:g,sortOrder:b};return Oa(ye)},{getNextPageParam:ae=>{if(ae.page<ae.totalPages)return ae.page+1},keepPreviousData:!0}),{data:Ae}=ut({queryKey:["equipment-types"],queryFn:ki,staleTime:3e5}),{data:Se}=ut(["locations"],wl),nt=(Ie==null?void 0:Ie.pages.flatMap(ae=>ae.equipment))||[];M.useEffect(()=>{const ae=new IntersectionObserver(ye=>{ye[0].isIntersecting&&Ye&&!we&&ue()},{threshold:.5});return n.current&&ae.observe(n.current),()=>{n.current&&ae.unobserve(n.current)}},[n,ue,Ye,we]);const qt=ae=>{fe(ae),A(!0)},bt=()=>{A(!1),fe(null)},Pt=()=>{P(!1),fe(null)},Tt=ae=>{const{name:ye,value:ie}=ae.target;a(He=>({...He,[ye]:ie}))},Te=ae=>{ae.preventDefault()},Ne=ae=>{g===ae?_(ye=>ye==="asc"?"desc":"asc"):(w(ae),_("desc"))},Ze=ae=>{d(ye=>ye.includes(ae)?ye.filter(ie=>ie!==ae):[...ye,ae])},be=()=>{if(m)d([]);else{const ae=nt.map(ye=>ye.id);d(ae)}v(!m)},De=()=>{d([]),v(!1)},$e=(ae,ye)=>{ye.target.type==="checkbox"||ye.target.closest("button")||ye.target.closest("a")||ye.target.closest(".btn-icon")||e(`/equipment/${ae}`)};return Ve?s.jsx("div",{className:"text-center py-10",children:"Loading..."}):Be?s.jsxs("div",{className:"text-center py-10 text-red-600",children:["Error: ",ct.message||"Failed to load equipment"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(MU,{isOpen:S,onClose:bt,equipmentId:me}),s.jsx(RU,{isOpen:O,onClose:Pt,equipmentId:me,selectedItems:o}),s.jsx(p5,{isOpen:$,onClose:()=>L(!1),equipmentId:me,selectedItems:o}),s.jsx(m5,{isOpen:F,onClose:()=>W(!1),equipmentId:me,selectedItems:o}),s.jsx(x5,{isOpen:V,onClose:()=>re(!1),selectedItems:o}),s.jsx(g5,{isOpen:oe,onClose:()=>ee(!1),selectedItems:o}),s.jsx(v5,{isOpen:he,onClose:()=>ve(!1),selectedItems:o}),s.jsx(Dz,{isOpen:ne,onClose:()=>Q(!1),filters:r,selectedItems:o}),s.jsx("div",{className:"card",children:s.jsxs("form",{onSubmit:Te,className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"search",className:"label",children:"Search"}),s.jsxs("div",{className:"input-group",children:[s.jsx(u2,{className:"input-icon w-4 h-4"}),s.jsx("input",{type:"text",id:"search",name:"search",value:r.search,onChange:Tt,placeholder:"Search equipment...",className:"input input-with-icon"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"type",className:"label",children:"Type"}),s.jsxs("select",{id:"type",name:"type",value:r.type,onChange:Tt,className:"input",children:[s.jsx("option",{value:"",children:"All Types"}),Ae!=null&&Ae.types&&Ae.types.length>0?Ae.types.map(ae=>s.jsx("option",{value:ae.name.toLowerCase(),children:ae.name},ae.id)):s.jsx("option",{value:"",disabled:!0,children:"Loading types..."})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"status",className:"label",children:"Status"}),s.jsxs("select",{id:"status",name:"status",value:r.status,onChange:Tt,className:"input",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"available",children:"Available"}),s.jsx("option",{value:"in-use",children:"In Use"}),s.jsx("option",{value:"maintenance",children:"Maintenance"}),s.jsx("option",{value:"unavailable",children:"Unavailable"}),s.jsx("option",{value:"broken",children:"Broken"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"location_id",className:"label",children:"Location"}),s.jsxs("select",{id:"location_id",name:"location_id",value:r.location_id,onChange:Tt,className:"input",children:[s.jsx("option",{value:"",children:"All Locations"}),(Ge=Se==null?void 0:Se.locations)==null?void 0:Ge.map(ae=>s.jsx("option",{value:ae.id.toString(),children:ae.name},ae.id))]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{type:"button",onClick:()=>{a({type:"",brand:"",status:"",location_id:"",search:""})},className:"btn btn-outline w-full",children:"Clear All Filters"})}),s.jsx("div",{className:"flex items-end",children:s.jsxs("button",{type:"submit",className:"btn btn-primary w-full",children:[s.jsx(h2,{className:"w-4 h-4"}),s.jsx("span",{children:"Apply Filters"})]})})]})}),s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"flex flex-col space-y-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mr-4",children:"Equipment List"}),s.jsxs("div",{className:"flex border border-slate-200 rounded-lg overflow-hidden mr-2",children:[s.jsx("button",{onClick:()=>T("list"),className:`px-2 py-1 text-xs font-medium transition-all ${E==="list"?"bg-white text-primary-600 border-r border-slate-200 hover:bg-primary-50":"bg-white text-slate-600 border-r border-slate-200 hover:bg-slate-50"}`,title:"List view",children:s.jsx(Wc,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>T("card"),className:`px-2 py-1 text-xs font-medium transition-all ${E==="card"?"bg-white text-primary-600 hover:bg-primary-50":"bg-white text-slate-600 hover:bg-slate-50"}`,title:"Card view",children:s.jsx(Hc,{className:"h-4 w-4"})})]}),o.length>0&&s.jsx("div",{className:"ml-2",children:s.jsx(y5,{selectedItems:o,onBatchDuplicate:()=>P(!0),onBatchStatusUpdate:()=>L(!0),onBatchLocationChange:()=>W(!0),onBatchTypeChange:()=>re(!0),onBatchCategoryChange:()=>ee(!0),onBatchBrandModelChange:()=>ve(!0),onClearSelection:De})})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>Q(!0),className:"btn btn-secondary btn-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(HR,{className:"w-4 h-4 mr-1"}),s.jsx(VR,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"Import/Export"})]})}),s.jsxs(qn,{to:"/equipment/new",className:"btn btn-primary btn-sm",children:[s.jsx(fp,{className:"w-4 h-4"}),s.jsx("span",{children:"Add New Equipment"})]})]})]})}),E==="card"&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:nt.length>0?nt.map(ae=>s.jsx(w5,{equipment:ae,onDuplicate:qt,onSelect:Ze,isSelected:o.includes(ae.id)},ae.id)):s.jsx("div",{className:"col-span-3 py-8 text-center text-gray-500",children:"No equipment found"})}),E==="list"&&s.jsx("div",{className:"table-container",children:s.jsxs("table",{className:"table-wide",children:[s.jsx("thead",{className:"table-header",children:s.jsxs("tr",{children:[s.jsx("th",{className:"table-header-cell w-12",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("input",{type:"checkbox",checked:m,onChange:be,className:"h-4 w-4 text-primary-600 border-gray-300 rounded"})})}),s.jsx(Sa,{field:"id",label:"ID",currentSortField:g,currentSortOrder:b,onSort:Ne,className:"w-16"}),s.jsx(Sa,{field:"type",label:"Type",currentSortField:g,currentSortOrder:b,onSort:Ne,className:"w-1/6"}),s.jsx(Sa,{field:"category",label:"Category",currentSortField:g,currentSortOrder:b,onSort:Ne,className:"w-1/8"}),s.jsx(Sa,{field:"brand",label:"Brand",currentSortField:g,currentSortOrder:b,onSort:Ne,className:"w-1/8"}),s.jsx(Sa,{field:"model",label:"Model",currentSortField:g,currentSortOrder:b,onSort:Ne,className:"w-1/8"}),s.jsx(Sa,{field:"serial_number",label:"Serial Number",currentSortField:g,currentSortOrder:b,onSort:Ne,className:"w-1/6"}),s.jsx(Sa,{field:"status",label:"Status",currentSortField:g,currentSortOrder:b,onSort:Ne,className:"w-20"}),s.jsx(Sa,{field:"location",label:"Location",currentSortField:g,currentSortOrder:b,onSort:Ne,className:"w-1/8"}),s.jsx(Sa,{field:"quantity",label:"Quantity",currentSortField:g,currentSortOrder:b,onSort:Ne,className:"w-16"}),s.jsx("th",{className:"table-header-cell w-20",children:"Actions"})]})}),s.jsx("tbody",{className:"table-body",children:nt.length>0?nt.map(ae=>{var ye;return s.jsxs("tr",{className:`table-row ${o.includes(ae.id)?"bg-blue-50":""} cursor-pointer hover:bg-slate-50`,onClick:ie=>$e(ae.id,ie),children:[s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("input",{type:"checkbox",checked:o.includes(ae.id),onChange:()=>Ze(ae.id),className:"h-4 w-4 text-primary-600 border-gray-300 rounded"})})}),s.jsx("td",{className:"table-cell",children:s.jsx("span",{className:"font-mono text-sm text-slate-600",children:ae.id})}),s.jsx("td",{className:"table-cell",children:ae.type}),s.jsx("td",{className:"table-cell",children:ae.category||"-"}),s.jsx("td",{className:"table-cell",children:ae.brand}),s.jsx("td",{className:"table-cell",children:ae.model}),s.jsx("td",{className:"table-cell",children:ae.serial_number}),s.jsx("td",{className:"table-cell",children:s.jsx("span",{className:`badge ${ae.status==="available"?"badge-success":ae.status==="in-use"?"badge-info":ae.status==="maintenance"?"badge-warning":ae.status==="unavailable"?"badge-secondary":ae.status==="broken"?"badge-danger":"badge-secondary"}`,children:ae.status})}),s.jsx("td",{className:"table-cell",children:((ye=ae.locationDetails)==null?void 0:ye.name)||ae.location||"-"}),s.jsx("td",{className:"table-cell",children:s.jsx("span",{className:"font-medium text-slate-800",children:ae.quantity||1})}),s.jsx("td",{className:"table-cell",children:s.jsx("div",{className:"flex items-center justify-end",children:s.jsx(R2,{equipmentId:ae.id,onBatchDuplicate:()=>{fe(ae.id),P(!0)},onBatchStatusUpdate:()=>{fe(ae.id),L(!0)},onBatchLocationChange:()=>{fe(ae.id),W(!0)}})})})]},ae.id)}):s.jsx("tr",{children:s.jsx("td",{colSpan:"9",className:"px-6 py-4 text-center text-gray-500",children:"No equipment found"})})})]})}),s.jsx("div",{ref:n,className:"py-4 text-center",children:we?s.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"}),s.jsx("span",{className:"text-slate-500",children:"Loading more..."})]}):Ye?s.jsx("span",{className:"text-sm text-slate-500",children:"Scroll to load more"}):s.jsx("span",{className:"text-sm text-slate-500",children:"No more equipment to load"})})]})]})},Mz=async({page:e=1,limit:n=20,equipmentId:t,userId:r,actionType:a,search:o,type:d,status:m,location_id:v,sortBy:g="created_at",sortOrder:w="desc"})=>{const b={page:e,limit:n};return t&&(b.equipmentId=t),r&&(b.userId=r),a&&(b.actionType=a),o&&(b.search=o),d&&(b.type=d),m&&(b.status=m),v&&(b.location_id=v),g&&(b.sortBy=g),w&&(b.sortOrder=w),(await ze.get("/api/equipment-logs",{params:b})).data},Rz=async(e,{page:n=1,limit:t=20}={})=>{const r={page:n,limit:t};return(await ze.get(`/api/equipment-logs/equipment/${e}`,{params:r})).data},D5=({equipmentId:e})=>{var w;const[n,t]=M.useState(1),[r]=M.useState(10),{data:a,isLoading:o,isError:d,error:m}=ut(["equipmentLogs",e,n,r],()=>Rz(e,{page:n,limit:r}),{keepPreviousData:!0,enabled:!!e}),v=b=>b.split("_").map(_=>_.charAt(0).toUpperCase()+_.slice(1)).join(" "),g=b=>{t(b)};return o?s.jsxs("div",{className:"text-center py-8 flex flex-col items-center",children:[s.jsxs("svg",{className:"animate-spin h-8 w-8 text-primary-500 mb-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-slate-600",children:"Loading movement history..."})]}):d?s.jsxs("div",{className:"text-center py-8 flex flex-col items-center",children:[s.jsx("div",{className:"bg-red-100 p-3 rounded-full mb-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("p",{className:"text-red-600 font-medium mb-1",children:"Error Loading Movement History"}),s.jsx("p",{className:"text-slate-500 text-sm",children:m.message||"Failed to load equipment logs"})]}):(w=a==null?void 0:a.logs)!=null&&w.length?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Date"]})}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"User"]})}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Action"]})}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Details"]})})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:a.logs.map((b,_)=>{var E,T,I;return s.jsxs("tr",{className:`hover:bg-slate-50 ${_%2===0?"bg-white":"bg-slate-50/50"}`,children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"font-medium",children:bu(new Date(b.created_at),"MMM d, yyyy")}),s.jsx("span",{className:"ml-2 text-slate-500",children:bu(new Date(b.created_at),"h:mm a")})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-8 w-8 bg-slate-200 rounded-full flex items-center justify-center text-slate-600 font-medium",children:(E=b.user)!=null&&E.username?b.user.username.charAt(0).toUpperCase():"?"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("div",{className:"text-sm font-medium text-slate-800",children:((T=b.user)==null?void 0:T.username)||"Unknown"}),s.jsx("div",{className:"text-xs text-slate-500 capitalize",children:((I=b.user)==null?void 0:I.role)||""})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`px-2.5 py-1.5 inline-flex text-xs leading-5 font-semibold rounded-full
                    ${b.action_type==="created"?"bg-green-100 text-green-800":b.action_type==="updated"?"bg-blue-100 text-blue-800":b.action_type==="deleted"?"bg-red-100 text-red-800":b.action_type==="status_change"?"bg-yellow-100 text-yellow-800":b.action_type==="location_change"?"bg-indigo-100 text-indigo-800":"bg-slate-100 text-slate-800"}`,children:[b.action_type==="created"&&s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),b.action_type==="updated"&&s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),b.action_type==="deleted"&&s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),b.action_type==="status_change"&&s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),b.action_type==="location_change"&&s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),v(b.action_type)]})}),s.jsxs("td",{className:"px-6 py-4 text-sm text-slate-600",children:[b.action_type==="status_change"&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-slate-700",children:"Status:"}),s.jsx("span",{className:"px-2 py-1 text-xs rounded bg-slate-100 text-slate-700",children:b.previous_status}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),s.jsx("span",{className:"px-2 py-1 text-xs rounded bg-indigo-100 text-indigo-800 font-medium",children:b.new_status})]}),b.action_type==="location_change"&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-slate-700",children:"Location:"}),s.jsx("span",{className:"px-2 py-1 text-xs rounded bg-slate-100 text-slate-700",children:b.previous_location||"None"}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),s.jsx("span",{className:"px-2 py-1 text-xs rounded bg-indigo-100 text-indigo-800 font-medium",children:b.new_location||"None"})]}),b.details&&s.jsx("div",{className:"mt-2 text-slate-600",children:b.details})]})]},b.id)})})]})}),a.totalPages>1&&s.jsxs("div",{className:"flex justify-between items-center mt-4 px-2",children:[s.jsxs("div",{className:"text-sm text-slate-600 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"Showing ",s.jsx("span",{className:"font-medium text-slate-800 mx-1",children:(n-1)*r+1})," to"," ",s.jsx("span",{className:"font-medium text-slate-800 mx-1",children:Math.min(n*r,a.total)})," of"," ",s.jsx("span",{className:"font-medium text-slate-800 mx-1",children:a.total})," logs"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>g(n-1),disabled:n===1,className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium rounded-md transition-colors ${n===1?"bg-slate-100 text-slate-400 cursor-not-allowed border-slate-200":"bg-white text-slate-700 hover:bg-slate-50 border-slate-300 hover:border-slate-400"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-1 ${n===1?"text-slate-300":"text-slate-500"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous"]}),s.jsxs("button",{onClick:()=>g(n+1),disabled:n===a.totalPages,className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium rounded-md transition-colors ${n===a.totalPages?"bg-slate-100 text-slate-400 cursor-not-allowed border-slate-200":"bg-white text-slate-700 hover:bg-slate-50 border-slate-300 hover:border-slate-400"}`,children:["Next",s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 ml-1 ${n===a.totalPages?"text-slate-300":"text-slate-500"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]}):s.jsxs("div",{className:"text-center py-8 flex flex-col items-center",children:[s.jsx("div",{className:"bg-slate-100 p-3 rounded-full mb-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("p",{className:"text-slate-600 font-medium",children:"No movement history found"}),s.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"This equipment has no recorded movements or status changes"})]})},I5=({isOpen:e,title:n="Confirm Action",message:t="Are you sure you want to proceed?",confirmText:r="Confirm",cancelText:a="Cancel",onConfirm:o,onCancel:d,isDestructive:m=!1})=>e?s.jsx("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-soft max-w-md w-full p-6 animate-fade-in",children:[s.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-2",children:n}),s.jsx("p",{className:"text-slate-600 mb-6",children:t}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(ke,{variant:"secondary",onClick:d,children:a}),s.jsx(ke,{variant:m?"danger":"primary",onClick:o,children:r})]})]})}):null;I5.propTypes={isOpen:ce.bool.isRequired,title:ce.string,message:ce.string,confirmText:ce.string,cancelText:ce.string,onConfirm:ce.func.isRequired,onCancel:ce.func.isRequired,isDestructive:ce.bool};const L2=({onImageSelect:e,existingImage:n=null,onImageDelete:t})=>{const[r,a]=M.useState(null),[o,d]=M.useState(null);M.useEffect(()=>{d(n?`/api/files/${n.id}?thumbnail=true`:null)},[n]),M.useEffect(()=>()=>{o&&!o.startsWith("/api/files/")&&URL.revokeObjectURL(o)},[o]);const m=M.useCallback(E=>{if(E.length>0){const T=E[0];if(T.size>10*1024*1024){alert("Image is too large. Maximum size is 10MB.");return}a(T),d(URL.createObjectURL(T)),e(T)}},[e]),v=()=>{a(null),o&&!o.startsWith("/api/files/")&&URL.revokeObjectURL(o),d(null),e(null)},g=()=>{t&&n&&(t(n.id),d(null))},{getRootProps:w,getInputProps:b,isDragActive:_}=Bu({onDrop:m,accept:{"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"]},maxFiles:1,multiple:!1});return s.jsx("div",{children:o?s.jsx("div",{className:"mt-4",children:s.jsxs("div",{className:"bg-slate-50 p-4 rounded-md border border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),s.jsx("span",{className:"text-sm font-medium",children:n?n.file_name:(r==null?void 0:r.name)||"Reference Image"})]}),s.jsx("button",{type:"button",onClick:n?g:v,className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsx("div",{className:"mt-2 flex justify-center",style:{height:"200px"},children:s.jsx("div",{className:"relative w-full h-full flex items-center justify-center overflow-hidden bg-slate-100 rounded-md",children:s.jsx("img",{src:o,alt:"Reference Image Preview",className:"rounded-md max-h-full max-w-full",style:{objectFit:"contain",objectPosition:"center"},onError:E=>{console.error("Error loading image:",E),E.target.src="/placeholder-image.png",E.target.onerror=null}})})})]})}):s.jsxs("div",{...w(),className:`border-2 border-dashed rounded-md p-6 text-center cursor-pointer ${_?"border-primary-500 bg-primary-50":"border-slate-300"}`,children:[s.jsx("input",{...b()}),_?s.jsx("p",{className:"text-primary-500",children:"Drop the image here..."}):s.jsxs("div",{children:[s.jsx("p",{className:"mb-2",children:"Drag & drop a reference image here, or click to select"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Accepted file types: JPEG, PNG (Max: 10MB)"})]})]})})};L2.propTypes={onImageSelect:ce.func.isRequired,existingImage:ce.object,onImageDelete:ce.func};const P2=({isOpen:e,onClose:n,equipmentId:t,existingImage:r=null})=>{const[a,o]=M.useState(null),[d,m]=M.useState(!1),[v,g]=M.useState(""),w=pn(),b=I=>{o(I)},_=_t({mutationFn:async I=>sC(t,{},[],[],I.referenceImageFile,I.removeReferenceImage),onSuccess:()=>{w.invalidateQueries(["equipment",t]),n()},onError:I=>{var k,S;console.error("Error updating reference image:",I),g(((S=(k=I.response)==null?void 0:k.data)==null?void 0:S.message)||"Failed to update reference image"),m(!1)}}),E=I=>{if(I.preventDefault(),!a){g("Please select an image file");return}m(!0),g(""),_.mutate({referenceImageFile:a})},T=()=>{m(!0),g(""),_.mutate({referenceImageFile:null,removeReferenceImage:!0})};return e?s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:s.jsx("div",{className:"absolute inset-0 bg-slate-500 opacity-75"})}),s.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),s.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:s.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:s.jsx("div",{className:"sm:flex sm:items-start",children:s.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[s.jsxs("h3",{className:"text-lg leading-6 font-medium text-slate-900 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Change Reference Image"]}),s.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"This image will be displayed prominently on the equipment details page and in search results."}),s.jsxs("div",{className:"mt-4",children:[v&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:s.jsx("p",{className:"text-red-700",children:v})}),s.jsxs("form",{onSubmit:E,children:[s.jsx("div",{className:"mb-4",children:s.jsx(L2,{onImageSelect:b,existingImage:r})}),s.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[s.jsx(ke,{type:"submit",variant:"primary",disabled:d||!a,className:"w-full sm:ml-3 sm:w-auto",children:d?"Saving...":"Save Changes"}),s.jsx(ke,{type:"button",variant:"secondary",onClick:n,className:"mt-3 w-full sm:mt-0 sm:w-auto",children:"Cancel"}),r&&s.jsx(ke,{type:"button",variant:"danger",onClick:T,className:"mt-3 w-full sm:mt-0 sm:mr-auto sm:w-auto",children:"Remove Image"})]})]})]})]})})})})]})}):null};P2.propTypes={isOpen:ce.bool.isRequired,onClose:ce.func.isRequired,equipmentId:ce.string.isRequired,existingImage:ce.object};const Jx=({fileType:e,fileUrl:n,fileName:t,className:r="",style:a={},showFileName:o=!0,size:d="medium",interactive:m=!0,useThumbnail:v=!0})=>{const[g,w]=M.useState(!0),[b,_]=M.useState(null),[E,T]=M.useState(!1),I=()=>{switch(d){case"small":return"h-24";case"large":return"h-48";case"medium":default:return"h-32"}},k=()=>{console.log("Image loaded successfully"),w(!1)},S=()=>{console.error("Image failed to load completely"),w(!1),_("Failed to load image")};M.useEffect(()=>{if(g&&e==="image"){const $=setTimeout(()=>{console.log("Loading timeout reached, resetting loading state"),w(!1)},5e3);return()=>clearTimeout($)}},[g,e]),M.useEffect(()=>{!n&&e==="image"&&(console.log("No file URL provided, showing error state"),w(!1),_("No image available"))},[n,e]);const A=()=>{m&&e==="image"&&T(!E)},O=()=>{switch(e){case"image":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})});case"audio":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})});case"pdf":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})});default:return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z",clipRule:"evenodd"})})}},P=()=>{if(g&&e==="image")return s.jsx("div",{className:"animate-pulse bg-slate-200 w-full h-full flex items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("svg",{className:"w-8 h-8 text-slate-400 mb-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("span",{className:"text-slate-400 text-xs",children:"Loading..."})]})});if(b)return s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:s.jsxs("div",{className:"flex flex-col items-center p-2",children:[s.jsx("svg",{className:"w-8 h-8 text-red-500 mb-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{className:"text-red-500 text-xs text-center",children:b})]})});switch(e){case"image":if(!n)return console.error("No file URL provided for image"),s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-slate-100",children:s.jsxs("div",{className:"flex flex-col items-center p-2",children:[s.jsx("svg",{className:"w-8 h-8 text-slate-400 mb-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{className:"text-slate-400 text-xs text-center",children:"No image"})]})});const $=new Date().getTime();let L=n;return L.includes("t=")||(L+=(L.includes("?")?"&":"?")+`t=${$}`),s.jsx("div",{className:`w-full h-full flex items-center justify-center overflow-hidden ${m?"cursor-pointer":""}`,onClick:A,children:s.jsx("img",{src:L,alt:t||"Image preview",className:`max-h-full max-w-full object-contain transition-transform duration-300 ${E?"scale-150":""}`,onLoad:F=>{console.log("Image loaded successfully:",L),k()},onError:F=>{console.error("Image failed to load:",L);const W=F.target;if(n.includes("thumbnail=true")){console.log("Thumbnail failed to load, trying original image");const re=`${n.split("?")[0]}?t=${new Date().getTime()}`;console.log("Trying with URL:",re),W.src=re}else{console.log("Original image failed to load, trying with new cache busting");const V=n.includes("?")?`${n.split("?")[0]}?t=${new Date().getTime()}`:`${n}?t=${new Date().getTime()}`;console.log("Trying with URL:",V),W.src=V,W.dataset.retried?(console.error("Multiple load attempts failed, showing error"),S()):W.dataset.retried="true"}}},`img-${L}`)});case"audio":return s.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-2",children:[s.jsx("div",{className:"mb-2",children:O()}),m?s.jsxs("audio",{controls:!0,className:"w-full max-w-[200px]",children:[s.jsx("source",{src:n,type:"audio/mpeg"}),"Your browser does not support the audio element."]}):s.jsx("div",{className:"text-sm text-slate-500",children:"Audio file"})]});case"pdf":return s.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[s.jsx("div",{className:"mb-2",children:O()}),m?s.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-800 text-sm underline",children:"View PDF"}):s.jsx("div",{className:"text-sm text-slate-500",children:"PDF document"})]});default:return s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:O()})}};return s.jsxs("div",{className:`bg-slate-100 rounded-md overflow-hidden ${I()} ${r}`,style:a,children:[P(),o&&t&&s.jsx("div",{className:"bg-slate-800 bg-opacity-70 text-white text-xs py-1 px-2 absolute bottom-0 left-0 right-0 truncate",children:t})]})};Jx.propTypes={fileType:ce.oneOf(["image","audio","pdf"]).isRequired,fileUrl:ce.string.isRequired,fileName:ce.string,className:ce.string,style:ce.object,showFileName:ce.bool,size:ce.oneOf(["small","medium","large"]),interactive:ce.bool,useThumbnail:ce.bool};const F2=({files:e=[],onFileDelete:n,canDelete:t=!1,showDownload:r=!0,layout:a="grid",size:o="medium"})=>{const[d,m]=M.useState(null),v=T=>{m(T)},g=()=>{m(null)},w=(T,I=!1,k=!1)=>{let S=`/api/files/${T}`;const A=[];return I&&A.push("download=true"),k&&A.push("thumbnail=true"),A.length>0&&(S+=`?${A.join("&")}`),S},b=()=>d?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",onClick:g,children:s.jsxs("div",{className:"bg-white rounded-lg overflow-hidden max-w-3xl w-full max-h-[90vh] flex flex-col",onClick:T=>T.stopPropagation(),children:[s.jsxs("div",{className:"p-4 border-b border-slate-200 flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-medium text-slate-900",children:d.file_name}),s.jsx("button",{type:"button",onClick:g,className:"text-slate-400 hover:text-slate-500",children:s.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"flex-1 overflow-auto p-4 flex items-center justify-center",children:d.file_type==="image"?s.jsx("img",{src:w(d.id),alt:d.file_name,className:"max-w-full max-h-[70vh] object-contain",onError:T=>{console.error("Error loading image in modal:",T),T.target.src=`${w(d.id)}?t=${new Date().getTime()}`}}):d.file_type==="audio"?s.jsxs("div",{className:"w-full max-w-md p-4",children:[s.jsx("div",{className:"mb-4 text-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})})}),s.jsxs("audio",{controls:!0,className:"w-full",children:[s.jsx("source",{src:w(d.id),type:"audio/mpeg"}),"Your browser does not support the audio element."]})]}):d.file_type==="pdf"?s.jsx("div",{className:"w-full h-[70vh]",children:s.jsx("iframe",{src:`${w(d.id)}#view=FitH`,title:d.file_name,className:"w-full h-full"})}):s.jsx("div",{className:"text-center p-4",children:s.jsx("p",{children:"This file type cannot be previewed."})})}),s.jsxs("div",{className:"p-4 border-t border-slate-200 flex justify-end space-x-2",children:[s.jsx("a",{href:w(d.id,!0),download:!0,className:"btn btn-secondary",children:"Download"}),t&&s.jsx("button",{type:"button",onClick:()=>{n(d.id),g()},className:"btn btn-danger",children:"Delete"})]})]})}):null,_=()=>s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.map(T=>s.jsxs("div",{className:"relative group",children:[s.jsxs("div",{className:"cursor-pointer rounded-lg overflow-hidden border border-slate-200 bg-white shadow-sm hover:shadow-md transition-shadow",onClick:()=>v(T),children:[s.jsx(Jx,{fileType:T.file_type,fileUrl:w(T.id,!1,T.file_type==="image"),fileName:T.file_name,size:o,interactive:!1,useThumbnail:T.file_type==="image"}),s.jsxs("div",{className:"p-2",children:[s.jsx("p",{className:"text-sm font-medium truncate",title:T.file_name,children:T.file_name}),s.jsx("p",{className:"text-xs text-slate-500 capitalize",children:T.file_type})]})]}),s.jsxs("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex space-x-1",children:[r&&s.jsx("a",{href:w(T.id,!0),download:!0,onClick:I=>I.stopPropagation(),className:"bg-white p-1.5 rounded-full shadow-md text-primary-600 hover:text-primary-800",title:"Download file",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})}),t&&s.jsx("button",{type:"button",onClick:I=>{I.stopPropagation(),n(T.id)},className:"bg-white p-1.5 rounded-full shadow-md text-red-600 hover:text-red-800",title:"Delete file",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]},T.id))}),E=()=>s.jsx("div",{className:"divide-y divide-slate-200 border border-slate-200 rounded-lg overflow-hidden",children:e.map(T=>s.jsxs("div",{className:"flex items-center p-3 hover:bg-slate-50 cursor-pointer",onClick:()=>v(T),children:[s.jsx("div",{className:"flex-shrink-0 mr-3 w-12 h-12 relative",children:s.jsx(Jx,{fileType:T.file_type,fileUrl:w(T.id,!1,T.file_type==="image"),fileName:T.file_name,size:"small",showFileName:!1,interactive:!1,useThumbnail:T.file_type==="image"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",title:T.file_name,children:T.file_name}),s.jsx("p",{className:"text-xs text-slate-500 capitalize",children:T.file_type})]}),s.jsxs("div",{className:"flex space-x-2 ml-2",children:[r&&s.jsx("a",{href:w(T.id,!0),download:!0,onClick:I=>I.stopPropagation(),className:"text-primary-600 hover:text-primary-800 p-1.5",title:"Download file",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})}),t&&s.jsx("button",{type:"button",onClick:I=>{I.stopPropagation(),n(T.id)},className:"text-red-600 hover:text-red-800 p-1.5",title:"Delete file",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]},T.id))});return e.length===0?s.jsx("p",{className:"text-slate-500 italic",children:"No files available"}):s.jsxs("div",{children:[a==="grid"?_():E(),b()]})};F2.propTypes={files:ce.arrayOf(ce.shape({id:ce.number.isRequired,file_type:ce.string.isRequired,file_name:ce.string.isRequired})).isRequired,onFileDelete:ce.func,canDelete:ce.bool,showDownload:ce.bool,layout:ce.oneOf(["grid","list"]),size:ce.oneOf(["small","medium","large"])};const Oz=async(e,n,t)=>{try{const r=new FormData;for(const o of n)r.append("files",o);return(await ze.post(`/api/files/upload/${e}`,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t?o=>{const d=Math.round(o.loaded*100/o.total);t(d)}:void 0})).data}catch(r){throw console.error("Error uploading files:",r),r}},B2=({equipmentId:e,isOpen:n,onClose:t,onSuccess:r})=>{const[a,o]=M.useState([]),[d,m]=M.useState(!1),[v,g]=M.useState(0),[w,b]=M.useState([]),_=50*1024*1024,E=5,T=M.useCallback((L,F)=>{o(V=>[...V,...L]);const W=F.map(V=>V.file.size>_?`${V.file.name} is too large. Maximum file size is 50MB.`:`${V.file.name} is not a supported file type.`);W.length>0&&b(V=>[...V,...W])},[]),{getRootProps:I,getInputProps:k,isDragActive:S}=Bu({onDrop:T,accept:{"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"audio/mpeg":[".mp3"],"application/pdf":[".pdf"]},maxFiles:E,maxSize:_}),A=L=>{o(F=>F.filter((W,V)=>V!==L))},O=()=>{o([]),b([])},P=L=>{switch(L){case"image/jpeg":case"image/png":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})});case"audio/mpeg":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})});case"application/pdf":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})});default:return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z",clipRule:"evenodd"})})}},$=async()=>{if(a.length===0){ot.error("Please select at least one file to upload");return}m(!0),g(0);try{const L=await Oz(e,a,F=>g(F));ot.success(`Successfully uploaded ${L.files.length} files`),o([]),b([]),r&&r(L.files),t()}catch(L){console.error("Error uploading files:",L),ot.error("Failed to upload files. Please try again.")}finally{m(!1)}};return n?s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:s.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),s.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[s.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:s.jsx("div",{className:"sm:flex sm:items-start",children:s.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[s.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Upload Documents"}),s.jsxs("div",{...I(),className:`border-2 border-dashed rounded-md p-6 text-center cursor-pointer mb-4 ${S?"border-primary-500 bg-primary-50":"border-slate-300"}`,children:[s.jsx("input",{...k()}),S?s.jsx("p",{className:"text-primary-500",children:"Drop the files here..."}):s.jsxs("div",{children:[s.jsx("p",{className:"mb-2",children:"Drag & drop files here, or click to select files"}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Accepted file types: JPEG, PNG, MP3, PDF (Max: ",E," files, ",Math.round(_/(1024*1024)),"MB each)"]})]})]}),w.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm font-medium text-red-500 mb-1",children:"Errors:"}),s.jsx("ul",{className:"text-sm text-red-500 list-disc pl-5",children:w.map((L,F)=>s.jsx("li",{children:L},F))})]}),a.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Selected Files:"}),s.jsx("button",{type:"button",onClick:O,className:"text-sm text-red-500 hover:text-red-700",children:"Clear All"})]}),s.jsx("ul",{className:"divide-y divide-slate-200 border border-slate-200 rounded-md overflow-hidden",children:a.map((L,F)=>s.jsxs("li",{className:"flex items-center justify-between p-3 hover:bg-slate-50",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:P(L.type)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium truncate max-w-xs",title:L.name,children:L.name}),s.jsxs("p",{className:"text-xs text-slate-500",children:[(L.size/1024).toFixed(1)," KB"]})]})]}),s.jsx("button",{type:"button",onClick:()=>A(F),className:"text-red-500 hover:text-red-700",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},F))})]}),d&&s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-primary-600 h-2.5 rounded-full",style:{width:`${v}%`}})}),s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Uploading: ",v,"%"]})]})]})})}),s.jsxs("div",{className:"bg-slate-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[s.jsx(ke,{variant:"primary",size:"sm",onClick:$,disabled:d||a.length===0,className:"w-full sm:w-auto sm:ml-3",children:d?"Uploading...":"Upload"}),s.jsx(ke,{variant:"outline",size:"sm",onClick:t,disabled:d,className:"mt-3 w-full sm:mt-0 sm:w-auto",children:"Cancel"})]})]})]})}):null};B2.propTypes={equipmentId:ce.number.isRequired,isOpen:ce.bool.isRequired,onClose:ce.func.isRequired,onSuccess:ce.func};const M5=({isOpen:e,onClose:n,equipment:t,availabilityData:r})=>{var oe;const a=pn(),[o,d]=M.useState(""),[m,v]=M.useState(1),[g,w]=M.useState(""),[b,_]=M.useState({}),[E,T]=M.useState(null),[I,k]=M.useState(!1),{data:S,isLoading:A,refetch:O}=ut({queryKey:["shows"],queryFn:async()=>{console.log(" Fetching shows list");const ee=await ze.get("/api/shows");return console.log(" Shows data:",ee.data),ee.data},enabled:e,staleTime:0,cacheTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0}),{data:P,isLoading:$,refetch:L}=ut({queryKey:["equipmentShowAllocations",t==null?void 0:t.id],queryFn:async()=>{console.log(" Fetching show allocations for equipment:",t==null?void 0:t.id);const ee=await ze.get(`/api/show-equipment/equipment/${t.id}/shows`);return console.log(" Show allocations:",ee.data),ee.data},enabled:!!(t!=null&&t.id)&&e,staleTime:0,cacheTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0}),F=ee=>P==null?void 0:P.some(he=>he.show_id===parseInt(ee)),W=async()=>{console.log(" Manual refresh triggered"),a.invalidateQueries(["equipmentAvailability",t==null?void 0:t.id]),a.invalidateQueries(["shows"]),a.invalidateQueries(["equipmentShowAllocations",t==null?void 0:t.id]),a.invalidateQueries(["equipment",t==null?void 0:t.id]),await Promise.all([a.refetchQueries(["equipmentAvailability",t==null?void 0:t.id]),a.refetchQueries(["shows"]),a.refetchQueries(["equipmentShowAllocations",t==null?void 0:t.id]),a.refetchQueries(["equipment",t==null?void 0:t.id])]),d(""),v(1),w(""),_({}),T(null),k(!1),ot.success("Data refreshed successfully!")};M.useEffect(()=>{e&&(console.log(" Modal opened - refreshing all data"),d(""),v(1),w(""),_({}),T(null),k(!1),a.invalidateQueries(["equipmentAvailability",t==null?void 0:t.id]),a.invalidateQueries(["shows"]),a.invalidateQueries(["equipmentShowAllocations",t==null?void 0:t.id]),a.invalidateQueries(["equipment",t==null?void 0:t.id]),setTimeout(()=>{a.refetchQueries(["equipmentAvailability",t==null?void 0:t.id]),a.refetchQueries(["shows"]),a.refetchQueries(["equipmentShowAllocations",t==null?void 0:t.id]),a.refetchQueries(["equipment",t==null?void 0:t.id])},100))},[e,a,t==null?void 0:t.id]),M.useEffect(()=>{o&&(async()=>{var he,ve;if(o&&(t!=null&&t.id))try{console.log(" Checking for existing allocation:",{showId:o,equipmentId:t.id});const ne=await ze.get(`/api/show-equipment/show/${o}/equipment/${t.id}`);ne.data?(console.log(" Found existing allocation:",ne.data),T(ne.data),v(ne.data.quantity_needed||ne.data.quantity_allocated||1),w(ne.data.notes||""),k(!0)):(console.log(" No existing allocation found"),T(null),v(1),w(""),k(!1))}catch(ne){((he=ne.response)==null?void 0:he.status)===404?console.log(" No existing allocation found - this is expected"):console.error(" Error checking for existing allocation:",(ve=ne.response)==null?void 0:ve.status,ne.message),T(null),v(1),w(""),k(!1)}})()},[o,t==null?void 0:t.id]);const V=_t({mutationFn:async ee=>I&&E?(console.log("Updating allocation:",{allocationId:E.id,quantity:ee.quantity,notes:ee.notes}),(await ze.put(`/api/show-equipment/allocation/${E.id}`,{quantityNeeded:ee.quantity,notes:ee.notes})).data):(console.log("Creating new allocation:",{showId:ee.showId,equipmentId:t.id,quantity:ee.quantity,notes:ee.notes}),(await ze.post(`/api/show-equipment/show/${ee.showId}/equipment`,{equipmentId:t.id,quantityNeeded:ee.quantity,notes:ee.notes})).data),onSuccess:()=>{const ee=I?"Equipment allocation updated successfully!":"Equipment allocated to show successfully!";ot.success(ee),a.invalidateQueries(["equipmentAvailability",t.id]),a.invalidateQueries(["equipmentShowAllocations",t.id]),a.invalidateQueries(["equipment",t.id]),a.invalidateQueries(["showEquipment"]),a.invalidateQueries(["shows"]),n()},onError:ee=>{var ve,ne;const he=I?"Failed to update equipment allocation":"Failed to allocate equipment";ot.error(((ne=(ve=ee.response)==null?void 0:ve.data)==null?void 0:ne.message)||he)}}),re=ee=>{ee.preventDefault();const he={};o||(he.show="Please select a show"),(!m||m<1)&&(he.quantity="Quantity must be at least 1");const ve=r.effectively_available||r.available_quantity,ne=I&&E?ve+(E.quantity_allocated||E.quantity_needed||0):ve;if(r&&m>ne)if(I)he.quantity=`Maximum ${ne} units allowed (${ve} effectively available + ${E.quantity_allocated||E.quantity_needed||0} currently allocated)`;else{const Q=r.total_reserved||0;Q>0&&m<=ve+Q?he.quantity=`Only ${ve} units immediately available. ${Q} units are reserved (requested but not allocated). Total potential: ${ve+Q}`:he.quantity=`Only ${ve} units available`}if(Object.keys(he).length>0){_(he);return}V.mutate({showId:o,quantity:parseInt(m),notes:g})};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:I?"Update Show Allocation":"Allocate to Show"}),I&&E&&s.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"Updating existing allocation for this equipment"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:W,disabled:A||$,className:"text-slate-400 hover:text-slate-600 transition-colors p-1 rounded hover:bg-slate-100 disabled:opacity-50",title:"Refresh data",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${A||$?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),s.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600 transition-colors",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(A||$)&&s.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),s.jsx("span",{className:"text-sm text-blue-700",children:"Refreshing data..."})]})}),s.jsx(qe,{className:"mb-6",children:s.jsxs(qe.Body,{children:[s.jsx("h3",{className:"font-medium text-slate-800 mb-2",children:"Equipment"}),s.jsxs("p",{className:"text-sm text-slate-600",children:[t.brand," ",t.model,"  ",t.serial_number]}),I&&E&&s.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Current Allocation"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-600",children:"Status:"}),s.jsx("span",{className:"ml-2 font-medium text-blue-800",children:E.status})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-600",children:"Allocated:"}),s.jsx("span",{className:"ml-2 font-medium text-blue-800",children:E.quantity_allocated})]})]})]}),r&&s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-3 text-center bg-slate-50 p-3 rounded mb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold text-slate-800",children:r.total_quantity}),s.jsx("div",{className:"text-xs text-slate-600",children:"Total"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold text-red-600",children:r.total_unavailable||0}),s.jsx("div",{className:"text-xs text-slate-600",children:"Unavailable"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold text-orange-600",children:r.total_reserved||0}),s.jsx("div",{className:"text-xs text-slate-600",children:"Reserved"})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-lg font-bold ${r.effectively_available>0?"text-green-600":"text-red-600"}`,children:r.effectively_available||r.available_quantity}),s.jsx("div",{className:"text-xs text-slate-600",children:"Available"})]})]}),r.warnings&&r.warnings.length>0&&s.jsx("div",{className:"space-y-2",children:r.warnings.map((ee,he)=>s.jsxs("div",{className:`p-2 rounded text-sm ${ee.type==="error"?"bg-red-50 text-red-700 border border-red-200":ee.type==="warning"?"bg-yellow-50 text-yellow-700 border border-yellow-200":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:[s.jsx("div",{className:"font-medium",children:ee.message}),ee.details&&s.jsxs("div",{className:"text-xs mt-1 opacity-75",children:[ee.type==="info"&&ee.details.shows>0&&`Shows: ${ee.details.shows}`,ee.type==="info"&&ee.details.inventory>0&&` Inventory: ${ee.details.inventory}`]})]},he))}),(r.show_status_breakdown||r.inventory_status_breakdown)&&s.jsxs("details",{className:"mt-3",children:[s.jsx("summary",{className:"text-xs text-slate-600 cursor-pointer hover:text-slate-800",children:"View detailed status breakdown"}),s.jsxs("div",{className:"mt-2 p-2 bg-slate-100 rounded text-xs",children:[r.show_status_breakdown&&Object.keys(r.show_status_breakdown).length>0&&s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"font-medium text-slate-700",children:"Show Allocations:"}),Object.entries(r.show_status_breakdown).map(([ee,he])=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"capitalize",children:[ee.replace("-"," "),":"]}),s.jsx("span",{children:he})]},ee))]}),r.inventory_status_breakdown&&Object.keys(r.inventory_status_breakdown).length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-700",children:"Inventory Allocations:"}),Object.entries(r.inventory_status_breakdown).map(([ee,he])=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"capitalize",children:[ee.replace("-"," "),":"]}),s.jsx("span",{children:he})]},ee))]})]})]})]})]})}),s.jsxs("form",{onSubmit:re,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"show-select",className:"block text-sm font-medium text-slate-700 mb-2",children:"Select Show *"}),A?s.jsx("div",{className:"text-sm text-slate-500",children:"Loading shows..."}):s.jsxs("select",{id:"show-select",name:"show",value:o,onChange:ee=>d(ee.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ${b.show?"border-red-300":"border-slate-300"}`,children:[s.jsx("option",{value:"",children:"Choose a show..."}),(oe=S==null?void 0:S.shows)==null?void 0:oe.map(ee=>s.jsxs("option",{value:ee.id,children:[ee.name," ",ee.date?`- ${new Date(ee.date).toLocaleDateString()}`:"",F(ee.id)?" (Already allocated)":""]},ee.id))]}),b.show&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.show})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"quantity",className:"block text-sm font-medium text-slate-700 mb-2",children:"Quantity *"}),s.jsx(xt,{id:"quantity",name:"quantity",type:"number",min:"1",max:r?I&&E?(r.effectively_available||r.available_quantity)+(E.quantity_allocated||E.quantity_needed||0):r.effectively_available||r.available_quantity:999,value:m,onChange:ee=>v(ee.target.value),className:b.quantity?"border-red-300":""}),b.quantity&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.quantity})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes"}),s.jsx("textarea",{id:"notes",name:"notes",value:g,onChange:ee=>w(ee.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Optional notes about this allocation..."})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(ke,{type:"button",variant:"outline",onClick:n,disabled:V.isLoading,children:"Cancel"}),s.jsx(ke,{type:"submit",variant:"primary",disabled:V.isLoading||!I&&r&&(r.effectively_available||r.available_quantity)===0,className:"flex items-center",children:V.isLoading?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),I?"Updating...":"Allocating..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),I?"Update Allocation":"Allocate to Show"]})})]})]})]})})}):null},Lz=async(e={})=>{try{const n=new URLSearchParams;return e.status&&n.append("status",e.status),e.search&&n.append("search",e.search),e.limit&&n.append("limit",e.limit),e.offset&&n.append("offset",e.offset),(await ze.get(`/api/shows?${n}`)).data}catch(n){throw console.error("Error fetching shows:",n),n}},R5=async e=>{try{return(await ze.get(`/api/shows/${e}`)).data}catch(n){throw console.error("Error fetching show:",n),n}},Pz=async e=>{try{return(await ze.post("/api/shows",e)).data}catch(n){throw console.error("Error creating show:",n),n}},O5=async(e,n)=>{try{return(await ze.put(`/api/shows/${e}`,n)).data}catch(t){throw console.error("Error updating show:",t),t}},L5=async e=>{try{return(await ze.delete(`/api/shows/${e}`)).data}catch(n){throw console.error("Error deleting show:",n),n}},Fz=async e=>{try{return(await ze.get(`/api/show-equipment/show/${e}`)).data}catch(n){throw console.error("Error fetching show equipment:",n),n}},Bz=async(e,n)=>{try{return(await ze.post(`/api/show-equipment/show/${e}/equipment`,n)).data}catch(t){throw console.error("Error adding equipment to show:",t),t}},P5=async(e,n)=>{try{return(await ze.put(`/api/show-equipment/allocation/${e}`,n)).data}catch(t){throw console.error("Error updating show equipment:",t),t}},Uz=async e=>{try{return(await ze.delete(`/api/show-equipment/${e}`)).data}catch(n){throw console.error("Error removing equipment from show:",n),n}},T3=(e,n)=>{const t=parseInt(e)||0,r=parseInt(n)||0;return Math.max(0,t-r)},U2=({showEquipment:e,onClose:n,showId:t})=>{var $,L,F,W,V,re;const r=pn(),[a,o]=M.useState({quantityNeeded:(e==null?void 0:e.quantity_needed)||1,quantityAllocated:(e==null?void 0:e.quantity_allocated)||0,status:(e==null?void 0:e.status)||"requested",notes:(e==null?void 0:e.notes)||""}),[d,m]=M.useState({}),[v,g]=M.useState(null),[w,b]=M.useState(!1),{data:_,isLoading:E}=ut({queryKey:["equipmentAvailability",e==null?void 0:e.equipment_id],queryFn:async()=>e!=null&&e.equipment_id?(await ze.get(`/api/show-equipment/equipment/${e.equipment_id}/availability`)).data:null,enabled:!!(e!=null&&e.equipment_id)}),T=[{value:"requested",label:"Requested",color:"bg-blue-100 text-blue-800"},{value:"allocated",label:"Allocated",color:"bg-yellow-100 text-yellow-800"},{value:"checked-out",label:"Checked Out",color:"bg-orange-100 text-orange-800"},{value:"in-use",label:"In Use",color:"bg-red-100 text-red-800"},{value:"returned",label:"Returned",color:"bg-green-100 text-green-800"}],I=async oe=>{if(oe===e.status){g(null);return}b(!0);try{const ee=await ze.post(`/api/show-equipment/allocation/${e.id}/validate-status`,{newStatus:oe,quantity:a.quantityAllocated||a.quantityNeeded});g(ee.data)}catch(ee){console.error("Validation error:",ee),g({valid:!1,conflicts:[{type:"validation_error",message:"Failed to validate status change",severity:"error"}],warnings:[]})}finally{b(!1)}},k=_t({mutationFn:async oe=>(await ze.put(`/api/show-equipment/allocation/${e.id}`,{quantityNeeded:oe.quantityNeeded,quantityAllocated:oe.quantityAllocated,notes:oe.notes,status:oe.status})).data,onSuccess:()=>{r.invalidateQueries(["showEquipment",t]),r.invalidateQueries(["show",t]),r.invalidateQueries(["equipmentAvailability"]),r.invalidateQueries(["equipmentShowAllocations",e==null?void 0:e.equipment_id]),r.invalidateQueries(["equipmentAvailability",e==null?void 0:e.equipment_id]),Qe.success("Equipment allocation updated successfully"),n()},onError:oe=>{var he,ve;const ee=(he=oe.response)==null?void 0:he.data;ee!=null&&ee.conflicts?Qe.error(`Update blocked: ${(ve=ee.conflicts[0])==null?void 0:ve.message}`):Qe.error((ee==null?void 0:ee.message)||"Failed to update equipment")}}),S=()=>{const oe={};if((!a.quantityNeeded||a.quantityNeeded<1)&&(oe.quantityNeeded="Quantity needed must be at least 1"),a.quantityAllocated<0&&(oe.quantityAllocated="Quantity allocated cannot be negative"),a.quantityAllocated>a.quantityNeeded&&(oe.quantityAllocated="Allocated quantity cannot exceed needed quantity"),_&&a.quantityNeeded){const ee=_.effectively_available||_.available_quantity||0,he=(e==null?void 0:e.quantity_needed)||(e==null?void 0:e.quantity_allocated)||0,ve=ee+he;a.quantityNeeded>ve&&(oe.quantityNeeded=`Maximum ${ve} units allowed (${ee} available + ${he} currently allocated)`)}return m(oe),Object.keys(oe).length===0},A=oe=>{oe.preventDefault(),S()&&k.mutate({quantityNeeded:parseInt(a.quantityNeeded),quantityAllocated:parseInt(a.quantityAllocated),status:a.status,notes:a.notes.trim()})},O=(oe,ee)=>{o(he=>({...he,[oe]:ee})),d[oe]&&m(he=>({...he,[oe]:""})),oe==="status"&&I(ee)},P=oe=>{const ee=T.find(he=>he.value===oe);return s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(ee==null?void 0:ee.color)||"bg-gray-100 text-gray-800"}`,children:(ee==null?void 0:ee.label)||oe})};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-slate-800 flex items-center",children:[s.jsx(fa,{className:"w-5 h-5 mr-2"}),"Edit Equipment Allocation"]}),s.jsx(ke,{variant:"outline",onClick:n,children:s.jsx(p2,{className:"w-4 h-4"})})]}),s.jsx(qe,{className:"mb-6",children:s.jsxs(qe.Body,{children:[s.jsx("h3",{className:"font-medium text-slate-800 mb-2",children:(($=e.equipment)==null?void 0:$.type)||((L=e.equipment)==null?void 0:L.name)}),s.jsxs("p",{className:"text-sm text-slate-600 mb-3",children:[(F=e.equipment)==null?void 0:F.brand," ",(W=e.equipment)==null?void 0:W.model]}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Serial:"}),s.jsx("span",{className:"ml-1 font-medium",children:((V=e.equipment)==null?void 0:V.serial_number)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Total Qty:"}),s.jsx("span",{className:"ml-1 font-medium",children:(_==null?void 0:_.total_quantity)||((re=e.equipment)==null?void 0:re.quantity)||0})]}),_&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Available:"}),s.jsx("span",{className:"ml-1 font-medium text-green-600",children:_.effectively_available||_.available_quantity||0})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Current Status:"}),s.jsx("span",{className:"ml-2",children:P(e.status)})]})]}),_&&!E&&s.jsx("div",{className:"mt-3 p-3 bg-slate-50 rounded-lg",children:s.jsxs("div",{className:"text-xs text-slate-600 space-y-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total Equipment:"}),s.jsx("span",{className:"font-medium",children:_.total_quantity})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Currently Allocated:"}),s.jsx("span",{className:"font-medium",children:_.total_allocated||0})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Available for Allocation:"}),s.jsx("span",{className:"font-medium text-green-600",children:_.effectively_available||_.available_quantity||0})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"This Allocation:"}),s.jsx("span",{className:"font-medium text-blue-600",children:(e==null?void 0:e.quantity_needed)||(e==null?void 0:e.quantity_allocated)||0})]}),(()=>{const oe=T3(a.quantityNeeded||(e==null?void 0:e.quantity_needed),a.quantityAllocated||(e==null?void 0:e.quantity_allocated));return oe>0?s.jsxs("div",{className:"flex justify-between border-t pt-1 mt-1",children:[s.jsx("span",{className:"text-red-600 font-medium",children:"Missing Items:"}),s.jsx("span",{className:"font-bold text-red-600",children:oe})]}):null})()]})}),E&&s.jsx("div",{className:"mt-3 p-3 bg-slate-50 rounded-lg",children:s.jsxs("div",{className:"text-xs text-slate-500 flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-slate-400 mr-2"}),"Loading availability data..."]})})]})}),s.jsxs("form",{onSubmit:A,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Quantity Needed *",_&&s.jsxs("span",{className:"text-xs text-slate-500 ml-2",children:["(Max: ",(_.effectively_available||_.available_quantity||0)+((e==null?void 0:e.quantity_needed)||(e==null?void 0:e.quantity_allocated)||0),")"]})]}),s.jsx(xt,{id:"quantityNeeded",name:"quantityNeeded",type:"number",min:"1",max:_?(_.effectively_available||_.available_quantity||0)+((e==null?void 0:e.quantity_needed)||(e==null?void 0:e.quantity_allocated)||0):void 0,value:a.quantityNeeded,onChange:oe=>O("quantityNeeded",oe.target.value),className:d.quantityNeeded?"border-red-300":""}),d.quantityNeeded&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.quantityNeeded})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Quantity Allocated"}),s.jsx(xt,{id:"quantityAllocated",name:"quantityAllocated",type:"number",min:"0",max:a.quantityNeeded,value:a.quantityAllocated,onChange:oe=>O("quantityAllocated",oe.target.value),className:d.quantityAllocated?"border-red-300":""}),d.quantityAllocated&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.quantityAllocated}),(()=>{const oe=T3(a.quantityNeeded,a.quantityAllocated);return oe>0?s.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-md",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 text-red-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s.jsxs("span",{className:"text-sm font-medium text-red-800",children:["Missing ",oe," item",oe!==1?"s":""," - Need to allocate ",oe," more"]})]})}):null})()]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Allocation Status"}),s.jsx("select",{value:a.status,onChange:oe=>O("status",oe.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:T.map(oe=>s.jsx("option",{value:oe.value,children:oe.label},oe.value))}),w&&s.jsx("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-2"}),"Validating status change..."]})}),v&&!w&&s.jsxs("div",{className:"mt-2 space-y-2",children:[v.conflicts&&v.conflicts.length>0&&s.jsx("div",{className:"space-y-1",children:v.conflicts.map((oe,ee)=>s.jsxs("div",{className:"p-2 bg-red-50 border border-red-200 rounded text-xs",children:[s.jsxs("div",{className:"font-medium text-red-800",children:[" ",oe.message]}),oe.conflictingAllocation&&s.jsxs("div",{className:"text-red-600 mt-1",children:["Conflicting with: ",oe.conflictingAllocation.show_name,"(",oe.conflictingAllocation.status,")"]})]},ee))}),v.warnings&&v.warnings.length>0&&s.jsx("div",{className:"space-y-1",children:v.warnings.map((oe,ee)=>s.jsx("div",{className:"p-2 bg-yellow-50 border border-yellow-200 rounded text-xs",children:s.jsxs("div",{className:"font-medium text-yellow-800",children:[" ",oe.message]})},ee))}),v.valid&&v.conflicts.length===0&&s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded text-xs",children:s.jsx("div",{className:"font-medium text-green-800",children:" Status change is allowed"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes"}),s.jsx("textarea",{value:a.notes,onChange:oe=>O("notes",oe.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"4",placeholder:"Add any notes about this equipment allocation..."})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-slate-200",children:[s.jsx(ke,{type:"button",variant:"outline",onClick:n,disabled:k.isLoading,children:"Cancel"}),s.jsxs(ke,{type:"submit",disabled:k.isLoading||w||v&&!v.valid,className:"flex items-center space-x-2",children:[s.jsx($R,{className:"w-4 h-4"}),s.jsx("span",{children:k.isLoading?"Saving...":"Save Changes"})]})]})]})]})}):null},zz=({equipment:e,locations:n,onClose:t,isOpen:r})=>{const[a,o]=M.useState({installation_type:"portable",installation_location_id:"",installation_location:"",installation_date:"",installation_notes:"",installation_quantity:1}),[d,m]=M.useState("");M.useState(!1);const[v,g]=M.useState(!1),[w,b]=M.useState(1),_=pn();M.useEffect(()=>{r&&e&&(o({installation_type:e.installation_type||"portable",installation_location_id:e.installation_location_id||"",installation_location:e.installation_location||"",installation_date:e.installation_date?e.installation_date.split("T")[0]:"",installation_notes:e.installation_notes||"",installation_quantity:e.installation_quantity||1}),b(e.installation_quantity||1))},[r,e]);const E=_t({mutationFn:async S=>(await ze.put(`/api/equipment/${e.id}/installation`,S)).data,onSuccess:()=>{_.refetchQueries(["equipment",e.id]),_.refetchQueries(["equipmentAvailability",e.id]),_.refetchQueries(["equipmentShowAllocations",e.id]),_.refetchQueries(["inventoryAllocations",e.id]),_.invalidateQueries(["equipment"]),_.invalidateQueries(["show-equipment"]),_.invalidateQueries(["equipment-availability"]),_.invalidateQueries(["storageAvailability"]),t()},onError:S=>{var A,O;m(((O=(A=S.response)==null?void 0:A.data)==null?void 0:O.message)||"Failed to update installation details")}}),T=_t({mutationFn:async S=>await ER(e.id,S),onSuccess:S=>{_.refetchQueries(["equipment",e.id]),_.refetchQueries(["equipmentAvailability",e.id]),_.refetchQueries(["equipmentShowAllocations",e.id]),_.refetchQueries(["inventoryAllocations",e.id]),_.invalidateQueries(["equipment"]),_.invalidateQueries(["show-equipment"]),_.invalidateQueries(["equipment-availability"]),_.invalidateQueries(["storageAvailability"]),g(!1),t()},onError:S=>{var A,O;m(((O=(A=S.response)==null?void 0:A.data)==null?void 0:O.message)||"Failed to return equipment from installation")}}),I=S=>{if(S.preventDefault(),m(""),a.installation_type!=="portable"){if(!a.installation_location_id&&!a.installation_location){m("Installation location is required for fixed/semi-permanent equipment");return}if(a.installation_quantity>(e.quantity||1)){m(`Installation quantity cannot exceed total equipment quantity (${e.quantity||1})`);return}}E.mutate(a)},k=(S,A)=>{o(O=>({...O,[S]:A})),S==="installation_type"&&A==="portable"&&o(O=>({...O,installation_location_id:"",installation_location:"",installation_date:"",installation_notes:"",installation_quantity:1}))};return r?s.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Installation Management"}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e==null?void 0:e.brand," ",e==null?void 0:e.model]})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsx("div",{className:"p-6",children:s.jsxs("form",{onSubmit:I,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Installation Type"}),s.jsxs("select",{value:a.installation_type,onChange:S=>k("installation_type",S.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,children:[s.jsx("option",{value:"portable",children:"Portable Equipment"}),s.jsx("option",{value:"semi-permanent",children:"Semi-Permanent Installation"}),s.jsx("option",{value:"fixed",children:"Fixed Installation"})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.installation_type==="portable"&&"Equipment can be freely moved and allocated to shows",a.installation_type==="semi-permanent"&&"Equipment is installed but can be moved with approval",a.installation_type==="fixed"&&"Equipment is permanently installed and cannot be moved"]})]}),a.installation_type!=="portable"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Installation Location"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("select",{value:a.installation_location_id,onChange:S=>k("installation_location_id",S.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[s.jsx("option",{value:"",children:"Select from existing locations"}),n.map(S=>s.jsx("option",{value:S.id,children:S.name},S.id))]}),s.jsx("div",{className:"text-center text-sm text-gray-500",children:"or"}),s.jsx("input",{type:"text",value:a.installation_location,onChange:S=>k("installation_location",S.target.value),placeholder:"Enter custom installation location",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose an existing location or enter a custom installation location"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Installation Date"}),s.jsx("input",{type:"date",value:a.installation_date,onChange:S=>k("installation_date",S.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Installation Quantity"}),s.jsx("input",{type:"number",min:"1",max:(e==null?void 0:e.quantity)||1,value:a.installation_quantity,onChange:S=>k("installation_quantity",parseInt(S.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Number of items to install (max: ",(e==null?void 0:e.quantity)||1,")"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Installation Notes"}),s.jsx("textarea",{value:a.installation_notes,onChange:S=>k("installation_notes",S.target.value),rows:3,placeholder:"Add notes about the installation...",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]})]}),d&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-sm text-red-600",children:d})}),s.jsxs("div",{className:"flex justify-between pt-4 border-t border-gray-200",children:[(e==null?void 0:e.installation_type)!=="portable"&&s.jsxs("button",{type:"button",onClick:()=>g(!0),disabled:T.isLoading,className:"px-4 py-2 text-sm font-medium text-orange-700 bg-orange-50 border border-orange-200 rounded-md hover:bg-orange-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:[s.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),"Return from Installation"]}),s.jsxs("div",{className:"flex space-x-3 ml-auto",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:E.isLoading,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:E.isLoading?"Saving...":"Save Installation Details"})]})]})]})})]}),v&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Return from Installation"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select quantity to return from installation"})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity to Return"}),s.jsx("input",{type:"number",min:"1",max:(e==null?void 0:e.installation_quantity)||1,value:w,onChange:S=>b(parseInt(S.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Currently installed: ",(e==null?void 0:e.installation_quantity)||0," items"]})]}),d&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-sm text-red-600",children:d})}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>{g(!1),m("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>{window.confirm(`Return ${w} item${w!==1?"s":""} from installation back to ${w===((e==null?void 0:e.installation_quantity)||0)?"portable status":"reduce installation quantity"}?`)&&T.mutate(w)},disabled:T.isLoading,className:"px-4 py-2 text-sm font-medium text-white bg-orange-600 border border-transparent rounded-md hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:T.isLoading?"Returning...":`Return ${w} Item${w!==1?"s":""}`})]})]})]})})]}):null},qz=({equipment:e,locations:n,onClose:t,isOpen:r})=>{var ue,Ye;const[a,o]=M.useState([]),[d,m]=M.useState(""),[v,g]=M.useState(!1),[w,b]=M.useState([]),[_,E]=M.useState("allocations"),[T,I]=M.useState(!1),k=pn(),{data:S,isLoading:A}=ut({queryKey:["equipmentAvailability",e==null?void 0:e.id],queryFn:async()=>e!=null&&e.id?(await ze.get(`/api/equipment/${e.id}/availability`)).data:null,enabled:!!(e!=null&&e.id)&&r});M.useEffect(()=>{r&&e&&O()},[r,e]);const O=async()=>{try{g(!0);const Ve=(await ze.get(`/api/equipment/${e.id}/allocations`)).data.allocations||[];b(Ve),Ve.length>0?o(Ve.map(Be=>{var ct;return{id:Be.id,location_id:Be.location_id,location_name:Be.location_name||((ct=Be.location)==null?void 0:ct.name)||"",quantity:Be.quantity_allocated,status:Be.status,notes:Be.notes||""}})):o([])}catch(we){console.error("Error fetching allocations:",we),m("Failed to load current allocations")}finally{g(!1)}},P=()=>{o([...a,{id:null,location_id:"",location_name:"",quantity:1,status:"allocated",notes:""}])},$=we=>{a.length>1&&o(a.filter((Ve,Be)=>Be!==we))},L=()=>w.reduce((we,Ve)=>we+(parseInt(Ve.quantity_allocated)||0),0),F=()=>{const we=((S==null?void 0:S.available_quantity)||0)+L(),Ve=L();return we-Ve},W=()=>S?(S.available_quantity||0)+L():(e==null?void 0:e.quantity)||1,V=(we,Ve,Be)=>{const ct=[...a];if(ct[we]={...ct[we],[Ve]:Be},Ve==="location_id"){const Ae=n.find(Se=>Se.id.toString()===Be.toString());Ae&&(ct[we].location_name=Ae.name)}o(ct)},re=_t({mutationFn:async we=>(await ze.post(`/api/equipment/${e.id}/allocations`,{allocations:we})).data,onSuccess:()=>{k.invalidateQueries(["equipment"]),k.invalidateQueries(["equipment-availability"]),k.invalidateQueries(["equipmentAvailability"]),k.invalidateQueries(["equipmentShowAllocations"]),k.invalidateQueries(["storageAvailability"]),k.invalidateQueries(["inventoryAllocations"]),t()},onError:we=>{var Ve,Be;m(((Be=(Ve=we.response)==null?void 0:Ve.data)==null?void 0:Be.message)||"Failed to save allocations")}}),oe=()=>{const we=[],Ve=W(),Be=a.reduce((Se,nt)=>Se+(parseInt(nt.quantity)||0),0);if(Be>Ve){const Se=(S==null?void 0:S.show_allocated)||0;Se>0?we.push(`Total allocated quantity (${Be}) exceeds available quantity (${Ve}). ${Se} items are allocated to shows.`):we.push(`Total allocated quantity (${Be}) exceeds available quantity (${Ve})`)}const ct=a.map(Se=>Se.location_id).filter(Se=>Se);return ct.filter((Se,nt)=>ct.indexOf(Se)!==nt).length>0&&we.push("Cannot allocate to the same location multiple times"),a.forEach((Se,nt)=>{Se.location_id||we.push(`Allocation #${nt+1}: Location must be selected`),(!Se.quantity||parseInt(Se.quantity)<=0)&&we.push(`Allocation #${nt+1}: Quantity must be greater than 0`)}),we},ee=we=>{we.preventDefault(),m("");const Ve=oe();if(Ve.length>0){m(Ve.join(". "));return}if(a.length===0){re.mutate([]);return}const Be=a.map(ct=>({location_id:parseInt(ct.location_id),quantity:parseInt(ct.quantity)||1,status:ct.status,notes:ct.notes}));re.mutate(Be)};if(!r)return null;const he=(e==null?void 0:e.quantity)||1,ve=W(),ne=a.reduce((we,Ve)=>we+(parseInt(Ve.quantity)||0),0),Q=ve-ne,fe=oe().length===0,Ie=v||A;return s.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Manage Location Allocations"}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e==null?void 0:e.brand," ",e==null?void 0:e.model," - Total: ",he," items",S&&S.show_allocated>0&&s.jsxs("span",{className:"text-blue-600 ml-2",children:["(",S.show_allocated," in shows, ",ve," available for locations)"]})]})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"mt-4 flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[s.jsxs("button",{onClick:()=>E("allocations"),className:`flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors ${_==="allocations"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[s.jsx("svg",{className:"h-4 w-4 inline mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})}),"Location Allocations"]}),s.jsxs("button",{onClick:()=>E("installation"),className:`flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors ${_==="installation"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[s.jsxs("svg",{className:"h-4 w-4 inline mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Installation Details"]})]})]}),s.jsx("div",{className:"p-6",children:Ie?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-500"})}):_==="allocations"?s.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 mb-4",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-800 mb-3",children:"Allocation Overview"}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-600 mb-1",children:[s.jsx("span",{children:"Items Distribution"}),s.jsxs("span",{children:[ne," / ",ve," allocated to locations"]})]}),s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${ne>ve?"bg-red-500":ne===0?"bg-gray-400":"bg-blue-500"}`,style:{width:`${Math.min(ne/ve*100,100)}%`}})})]}),w.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"text-xs font-medium text-slate-700 mb-2",children:"Current Distribution:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[w.map((we,Ve)=>s.jsxs("div",{className:"bg-white p-2 rounded border text-xs",children:[s.jsx("div",{className:"font-medium text-slate-800",children:we.location_name}),s.jsxs("div",{className:"text-slate-600",children:[we.quantity_allocated," items"]})]},Ve)),F()>0&&s.jsxs("div",{className:"bg-blue-50 p-2 rounded border border-blue-200 text-xs",children:[s.jsx("div",{className:"font-medium text-blue-800",children:"Default Storage"}),s.jsxs("div",{className:"text-blue-600",children:[F()," items"]})]})]})]}),s.jsx("div",{className:`p-3 rounded-lg border ${fe?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"font-medium",children:["New Allocation: ",ne," / ",ve," items"]}),S&&S.show_allocated>0&&s.jsxs("div",{className:"text-blue-600 text-xs mt-1",children:[S.show_allocated," items allocated to shows (not available for location allocation)"]}),Q>0&&s.jsxs("div",{className:"text-gray-600 mt-1",children:[Q," items will remain in default storage"]})]}),s.jsx("span",{className:`text-sm font-medium ${fe?"text-green-600":"text-red-600"}`,children:ne>ve?" Exceeds Available":ne===0?" All in Default Storage":" Valid Allocation"})]})})]}),d&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-sm text-red-600",children:d})}),a.length===0&&s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 mb-4",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-3",children:"Quick Allocation Options"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>{const we=n.slice(0,3),Ve=Math.floor(ve/we.length),Be=ve%we.length,ct=we.map((Ae,Se)=>({id:null,location_id:Ae.id,location_name:Ae.name,quantity:Ve+(Se<Be?1:0),status:"allocated",notes:""}));o(ct)},className:"p-3 text-sm bg-white border border-blue-200 rounded-md hover:bg-blue-50 transition-colors text-left",children:[s.jsx("div",{className:"font-medium text-blue-800",children:"Split Equally"}),s.jsx("div",{className:"text-blue-600 text-xs",children:"Distribute across locations"})]}),s.jsxs("button",{type:"button",onClick:()=>{n.length>0&&o([{id:null,location_id:n[0].id,location_name:n[0].name,quantity:ve,status:"allocated",notes:""}])},className:"p-3 text-sm bg-white border border-blue-200 rounded-md hover:bg-blue-50 transition-colors text-left",children:[s.jsx("div",{className:"font-medium text-blue-800",children:"Move All"}),s.jsx("div",{className:"text-blue-600 text-xs",children:"To single location"})]}),s.jsxs("button",{type:"button",onClick:P,className:"p-3 text-sm bg-white border border-blue-200 rounded-md hover:bg-blue-50 transition-colors text-left",children:[s.jsx("div",{className:"font-medium text-blue-800",children:"Custom"}),s.jsx("div",{className:"text-blue-600 text-xs",children:"Manual allocation"})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-md font-medium text-gray-800",children:["Location Allocations",a.length>0&&s.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",a.length," location",a.length!==1?"s":"",")"]})]}),s.jsxs("div",{className:"flex space-x-2",children:[a.length>0&&s.jsxs("button",{type:"button",onClick:()=>o([]),className:"px-3 py-1 text-sm bg-orange-100 text-orange-700 rounded-md hover:bg-orange-200 transition-colors flex items-center",title:"Clear all allocations and return all items to default storage",children:[s.jsx("svg",{className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),"Clear All"]}),s.jsxs("button",{type:"button",onClick:P,className:"px-3 py-1 text-sm bg-indigo-100 text-indigo-700 rounded-md hover:bg-indigo-200 transition-colors flex items-center",children:[s.jsx("svg",{className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Location"]})]})]}),a.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),s.jsx("p",{className:"text-sm",children:"No location allocations configured"}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["All ",ve," available items will remain in default storage"]})]}):a.map((we,Ve)=>{const Be=ve-a.reduce((Ae,Se,nt)=>nt!==Ve?Ae+(parseInt(Se.quantity)||0):Ae,0),ct=a.some((Ae,Se)=>Se!==Ve&&Ae.location_id===we.location_id&&we.location_id!=="");return s.jsxs("div",{className:`p-4 border rounded-lg transition-all ${ct?"border-yellow-300 bg-yellow-50":we.location_id?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Allocation #",Ve+1]}),ct&&s.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-yellow-200 text-yellow-800 rounded-full",children:"Duplicate Location"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[we.location_id&&s.jsx("div",{className:"flex space-x-1",children:[1,Math.floor(Be/2),Be].filter((Ae,Se,nt)=>Ae>0&&Ae<=ve&&nt.indexOf(Ae)===Se).map(Ae=>s.jsx("button",{type:"button",onClick:()=>V(Ve,"quantity",Ae.toString()),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",title:`Set quantity to ${Ae}`,children:Ae},Ae))}),s.jsx("button",{type:"button",onClick:()=>$(Ve),className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-100 rounded transition-colors",title:"Remove allocation",children:s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Location"}),s.jsxs("select",{value:we.location_id,onChange:Ae=>V(Ve,"location_id",Ae.target.value),className:`w-full text-sm rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500 ${ct?"border-yellow-300":"border-gray-300"}`,required:!0,children:[s.jsx("option",{value:"",children:"Select Location"}),n.map(Ae=>s.jsx("option",{value:Ae.id,children:Ae.name},Ae.id))]}),ct&&s.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"This location is already selected"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Quantity",s.jsxs("span",{className:"text-gray-500 ml-1",children:["(max: ",Be,")"]})]}),s.jsx("input",{type:"number",min:"1",max:Be,value:we.quantity,onChange:Ae=>V(Ve,"quantity",Ae.target.value),className:"w-full text-sm rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{value:we.status,onChange:Ae=>V(Ve,"status",Ae.target.value),className:"w-full text-sm rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[s.jsx("option",{value:"allocated",children:"Allocated"}),s.jsx("option",{value:"in-use",children:"In Use"}),s.jsx("option",{value:"maintenance",children:"Maintenance"}),s.jsx("option",{value:"reserved",children:"Reserved"})]})]})]}),s.jsxs("div",{className:"mt-3",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Notes (optional)"}),s.jsx("input",{type:"text",value:we.notes,onChange:Ae=>V(Ve,"notes",Ae.target.value),placeholder:"Add notes about this allocation...",className:"w-full text-sm rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]})]},Ve)})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:!fe||re.isLoading,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:re.isLoading?"Saving...":"Save Allocations"})]})]}):s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[s.jsxs("h3",{className:"text-lg font-medium text-slate-800 mb-4 flex items-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Installation Management"]}),s.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Manage permanent and semi-permanent installations for this equipment."}),(e==null?void 0:e.installation_type)==="fixed"||(e==null?void 0:e.installation_type)==="semi-permanent"?s.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${(e==null?void 0:e.installation_type)==="fixed"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:[((ue=e==null?void 0:e.installation_type)==null?void 0:ue.charAt(0).toUpperCase())+((Ye=e==null?void 0:e.installation_type)==null?void 0:Ye.slice(1).replace("-"," "))," Installation"]}),(e==null?void 0:e.installation_quantity)&&s.jsxs("span",{className:"text-sm font-medium text-orange-800 bg-orange-100 px-2 py-1 rounded",children:[e.installation_quantity," items installed"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Installation Location"}),s.jsx("p",{className:"text-lg font-medium text-slate-800 mt-1",children:(e==null?void 0:e.installation_location)||"Location not specified"})]}),(e==null?void 0:e.installation_date)&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Installation Date"}),s.jsx("p",{className:"text-sm text-slate-600 mt-1",children:new Date(e.installation_date).toLocaleDateString()})]}),(e==null?void 0:e.installation_notes)&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Installation Notes"}),s.jsx("div",{className:"text-sm text-slate-600 bg-white p-3 rounded border mt-1",children:e.installation_notes})]})]})]}):s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 mb-4",children:[s.jsx("div",{className:"flex items-center mb-3",children:s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"Portable Equipment"})}),s.jsx("p",{className:"text-sm text-slate-600",children:"This equipment is portable and not permanently installed at any location."})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-slate-200",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Close"}),s.jsx("button",{type:"button",onClick:()=>I(!0),className:"px-4 py-2 text-sm font-medium text-white bg-orange-600 border border-transparent rounded-md hover:bg-orange-700 transition-colors",children:"Manage Installation"})]})]})})})]}),s.jsx(zz,{isOpen:T,onClose:()=>I(!1),equipment:e,locations:n})]})},D3=(e,n=!1)=>`/api/files/${e}${n?"?thumbnail=true":""}`,Wz=()=>{var Cr,Br,Ts,tn;const{id:e}=Zf(),n=us(),t=pn(),{user:r}=dr(),[a,o]=M.useState(!1),[d,m]=M.useState(!1),[v,g]=M.useState(!1),[w,b]=M.useState(!1),[_,E]=M.useState(!1),[T,I]=M.useState(null),[k,S]=M.useState(!1),[A,O]=M.useState(!1),[P,$]=M.useState(null),[L,F]=M.useState(null),[W,V]=M.useState(!1),[re,oe]=M.useState(null),[ee,he]=M.useState("details"),[ve,ne]=M.useState("grid"),{data:Q,isLoading:me,isError:fe,error:Ie}=ut({queryKey:["equipment",e],queryFn:()=>hp(e),staleTime:0,cacheTime:0});M.useEffect(()=>{console.log(" Equipment ID changed, invalidating all queries for:",e),t.invalidateQueries(["equipment",e]),t.invalidateQueries(["equipmentAvailability",e]),t.invalidateQueries(["equipmentShowAllocations",e]),t.invalidateQueries(["inventoryAllocations",e])},[e,t]);const{data:ue,isLoading:Ye}=ut({queryKey:["equipmentAvailability",e],queryFn:async()=>{var Je,ft,It,on,Ur;const te=await ze.get(`/api/equipment/${e}/availability`);return console.log(" Availability data response:",te.data),console.log(" Show allocated count:",(Je=te.data)==null?void 0:Je.show_allocated),console.log(" Show status breakdown:",(ft=te.data)==null?void 0:ft.show_status_breakdown),console.log(" Installation allocated count:",(It=te.data)==null?void 0:It.installation_allocated),console.log(" Total allocated count:",(on=te.data)==null?void 0:on.total_allocated),console.log(" Available quantity:",(Ur=te.data)==null?void 0:Ur.available_quantity),te.data},enabled:!!e,staleTime:0,cacheTime:0}),{data:we,isLoading:Ve}=ut({queryKey:["equipmentShowAllocations",e],queryFn:async()=>{console.log(" Fetching show allocations for equipment ID:",e);const te=await ze.get(`/api/show-equipment/equipment/${e}/shows`);return console.log(" Show allocations response:",te.data),console.log(" Show allocations count:",te.data.length),console.log(" Show allocations details:",te.data.map(Je=>({id:Je.id,status:Je.status,quantity_needed:Je.quantity_needed,quantity_allocated:Je.quantity_allocated,show_name:Je.show_name}))),te.data},enabled:!!e,staleTime:0,cacheTime:0}),{data:Be,isLoading:ct,error:Ae}=ut({queryKey:["locations"],queryFn:async()=>{try{const te=await ze.get("/api/locations");return te.data.locations||te.data}catch(te){return console.error("Error fetching locations:",te),[]}}}),{data:Se}=ut({queryKey:["inventoryAllocations",e],queryFn:async()=>{try{console.log(` Fetching inventory allocations for equipment ${e}`);const te=await ze.get(`/api/equipment/${e}/allocations`);console.log(" Inventory allocations response:",te.data);const Je=te.data.allocations||[];return console.log(" Processed allocations:",Je),Je}catch(te){return console.error(" Error fetching inventory allocations:",te),[]}},enabled:!!e,staleTime:0,cacheTime:0}),nt=Array.isArray(Be)?Be:[],bt=(()=>{if(((Q==null?void 0:Q.installation_type)==="fixed"||(Q==null?void 0:Q.installation_type)==="semi-permanent")&&(Q!=null&&Q.installation_location||Q!=null&&Q.installation_location_id)){if(Q.installation_location_id){const te=nt.find(Je=>Je.id===Q.installation_location_id);if(te)return{location:te,displayName:te.name,source:"installation_location_id",isInstallation:!0}}if(Q.installation_location)return{location:null,displayName:Q.installation_location,source:"installation_location",isInstallation:!0}}if(Q!=null&&Q.location_id){const te=nt.find(Je=>Je.id===Q.location_id);if(te)return{location:te,displayName:te.name,source:"location_id",isInstallation:!1}}return Q!=null&&Q.location?{location:null,displayName:Q.location,source:"location",isInstallation:!1}:{location:null,displayName:"Unknown Location",source:"fallback",isInstallation:!1}})();bt.location;const Pt=_t({mutationFn:()=>_R(e),onSuccess:()=>{t.invalidateQueries(["equipment"]),n("/equipment")}}),Tt=_t({mutationFn:async te=>(await ze.delete(`/api/show-equipment/${te}`)).data,onSuccess:()=>{t.invalidateQueries(["equipmentShowAllocations",e]),t.invalidateQueries(["equipmentAvailability",e]),t.invalidateQueries(["equipment",e]),t.invalidateQueries(["inventoryAllocations",e]),Qe.success("Allocation removed successfully")},onError:te=>{var Je,ft;Qe.error(`Failed to remove allocation: ${((ft=(Je=te.response)==null?void 0:Je.data)==null?void 0:ft.message)||te.message}`)}}),Te=_t({mutationFn:async({allocationId:te,status:Je})=>(await ze.put(`/api/show-equipment/allocation/${te}`,{status:Je})).data,onSuccess:()=>{t.invalidateQueries(["equipmentShowAllocations",e]),t.invalidateQueries(["equipmentAvailability",e]),t.invalidateQueries(["equipment",e]),t.invalidateQueries(["inventoryAllocations",e]),Qe.success("Status updated successfully"),V(!1),A&&P&&setTimeout(()=>{ht(P)},100)},onError:te=>{var Je,ft;console.error("Error updating status:",te),Qe.error(`Failed to update status: ${((ft=(Je=te.response)==null?void 0:Je.data)==null?void 0:ft.message)||te.message}`)}}),Ne=()=>{n(`/equipment/${e}/edit`)},Ze=te=>{t.invalidateQueries(["equipment",e]),Qe.success(`Successfully uploaded ${te.length} file(s)`)},be=()=>{o(!0)},De=()=>{Pt.mutate(),o(!1)},$e=()=>{o(!1)},Ge=()=>{n("/equipment")},ae=te=>{I(te),E(!0)},ye=()=>{E(!1),I(null),t.invalidateQueries(["equipmentShowAllocations",e]),t.invalidateQueries(["equipmentAvailability",e]),t.invalidateQueries(["equipment",e]),t.invalidateQueries(["inventoryAllocations",e])},ie=te=>{window.confirm(`Are you sure you want to remove this allocation from "${te.show_name}"? This action cannot be undone.`)&&Tt.mutate(te.id)},He=()=>{b(!0)},Ee=te=>{window.confirm(`Return ${te.quantity_allocated} items from "${te.show_name}" back to storage?`)&&Tt.mutate(te.id)},Fe=te=>{oe(te),V(!0)},ht=te=>{let Je=null;switch(te){case"locations":const ft=[];Se&&Se.length>0&&Se.forEach(on=>{ft.push({...on,allocation_type:"location",display_type:"Location Allocation"})}),we&&we.length>0&&we.forEach(on=>{ft.push({location_name:on.show_name,venue:on.venue,show_date:on.show_date,quantity_allocated:on.quantity_allocated||on.quantity_needed||0,status:on.status,allocation_type:"show",display_type:"Show Allocation"})}),Je={title:"All Location Allocations",items:ft,totalCount:((ue==null?void 0:ue.total_allocated)||0)+((ue==null?void 0:ue.show_allocated)||0),icon:"location",color:"blue"};break;case"shows":Je={title:"Show Allocations",items:we||[],totalCount:(ue==null?void 0:ue.show_allocated)||0,icon:"show",color:"orange"};break;case"installed":let It="Installation Location";if(Q!=null&&Q.installation_location_id){const on=nt.find(Ur=>Ur.id===Q.installation_location_id);on&&(It=on.name)}else Q!=null&&Q.installation_location&&(It=Q.installation_location);Je={title:"Installation Allocations",items:Q!=null&&Q.installation_type&&(Q==null?void 0:Q.installation_type)!=="portable"?[{location_name:It,quantity_allocated:(ue==null?void 0:ue.installation_allocated)||0,status:"installed",type:Q.installation_type||"Fixed Installation",installation_notes:Q.installation_notes,installation_date:Q.installation_date}]:[],totalCount:(ue==null?void 0:ue.installation_allocated)||0,icon:"installation",color:"purple"};break;default:return}$(te),F(Je),O(!0)};if(me)return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Equipment Details"})}),s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})})]});if(fe)return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Equipment Details"})}),s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading equipment"}),s.jsx("div",{className:"mt-2 text-sm text-red-700",children:s.jsx("p",{children:(Ie==null?void 0:Ie.message)||"Failed to load equipment details"})}),s.jsx("div",{className:"mt-4",children:s.jsx(ke,{variant:"outline",size:"sm",onClick:Ge,children:"Back to Equipment List"})})]})]})})]});const Et=te=>{switch(te){case"available":return"success";case"in-use":return"primary";case"maintenance":return"warning";case"unavailable":return"secondary";case"broken":return"danger";default:return"secondary"}},en=Q.reference_image_id?parseInt(Q.reference_image_id):null,Rt=(Cr=Q.files)==null?void 0:Cr.find(te=>te.id===en);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 bg-white p-4 rounded-lg shadow-sm border border-slate-200",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-primary-100 p-2 rounded-lg mr-4",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-slate-800",children:["Equipment #",Q.id," - ",Q.brand," ",Q.model]}),s.jsxs("p",{className:"text-slate-500 text-sm",children:[Q.type," ",Q.category&&` ${Q.category}`,"  ",Q.serial_number]})]}),s.jsx("div",{className:"flex items-center space-x-2 ml-6",children:s.jsxs(ke,{variant:"outline",onClick:Ge,className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to List"]})})]})})]}),s.jsxs("div",{className:"flex space-x-3",children:[((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="advanced")&&s.jsxs(s.Fragment,{children:[s.jsxs(ke,{variant:"outline",onClick:()=>b(!0),className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Allocate to Show"]}),s.jsxs(ke,{variant:"primary",onClick:Ne,className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})]}),(r==null?void 0:r.role)==="admin"&&s.jsxs(ke,{variant:"danger",onClick:be,className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden h-full",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"flex -mb-px",children:[s.jsxs("button",{type:"button",onClick:()=>he("details"),className:`py-4 px-6 font-medium text-sm border-b-2 focus:outline-none transition-colors flex items-center ${ee==="details"?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-2 ${ee==="details"?"text-primary-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Details"]}),s.jsxs("button",{type:"button",onClick:()=>he("inventory"),className:`py-4 px-6 font-medium text-sm border-b-2 focus:outline-none transition-colors flex items-center ${ee==="inventory"?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-2 ${ee==="inventory"?"text-primary-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Location & Storage"]}),s.jsxs("button",{type:"button",onClick:()=>he("allocations"),className:`py-4 px-6 font-medium text-sm border-b-2 focus:outline-none transition-colors flex items-center ${ee==="allocations"?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-2 ${ee==="allocations"?"text-primary-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Show Allocations"]}),s.jsxs("button",{type:"button",onClick:()=>he("history"),className:`py-4 px-6 font-medium text-sm border-b-2 focus:outline-none transition-colors flex items-center ${ee==="history"?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-2 ${ee==="history"?"text-primary-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Movement History"]}),s.jsxs("button",{type:"button",onClick:()=>he("documents"),className:`py-4 px-6 font-medium text-sm border-b-2 focus:outline-none transition-colors flex items-center ${ee==="documents"?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-2 ${ee==="documents"?"text-primary-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),"Documents & Attachments"]})]})}),s.jsxs("div",{className:"p-6",children:[ee==="details"&&s.jsx("div",{children:s.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[s.jsx("div",{children:s.jsxs(qe,{className:"h-full",children:[s.jsx(qe.Header,{className:"bg-slate-50",children:s.jsxs(qe.Title,{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Equipment Information"]})}),s.jsxs(qe.Body,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-medium text-slate-500",children:"Category"}),s.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:Q.category||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-medium text-slate-500",children:"Type"}),s.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:Q.type})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-medium text-slate-500",children:"Brand"}),s.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:Q.brand})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-medium text-slate-500",children:"Model"}),s.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:Q.model})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-medium text-slate-500",children:"Serial Number"}),s.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:Q.serial_number})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-medium text-slate-500",children:"Status"}),s.jsx("div",{className:"mt-1",children:Q.status&&s.jsx(js,{variant:Et(Q.status),size:"sm",children:Q.status.charAt(0).toUpperCase()+Q.status.slice(1).replace("-"," ")})})]})]}),Q.description&&s.jsxs("div",{className:"mt-6 border-t border-slate-200 pt-4",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})}),s.jsx("h3",{className:"text-xs font-medium text-slate-700",children:"Description"})]}),s.jsx("div",{className:"bg-slate-50 p-3 rounded-lg",children:s.jsx("p",{className:"text-sm text-slate-800 whitespace-pre-line",children:Q.description})})]})]})]})}),ue&&s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm",children:[s.jsxs("div",{className:"p-4 border-b border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})}),s.jsx("span",{className:"text-lg font-medium text-slate-700",children:"Current Distribution"})]}),s.jsxs("div",{className:"text-sm text-slate-600",children:[ue.total_quantity," total items"]})]}),s.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Where your equipment is currently located"})]}),s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-5 gap-3 text-center bg-slate-50 p-4 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold text-slate-800",children:ue.total_quantity}),s.jsx("div",{className:"text-xs text-slate-600 uppercase tracking-wide",children:"Total"})]}),s.jsxs("button",{onClick:()=>ht("locations"),className:"group hover:bg-blue-50 rounded-lg p-2 transition-colors cursor-pointer",disabled:(ue.total_allocated||0)+(ue.show_allocated||0)===0,children:[s.jsx("div",{className:"text-xl font-bold text-blue-600 group-hover:text-blue-700",children:(ue.total_allocated||0)+(ue.show_allocated||0)}),s.jsx("div",{className:"text-xs text-slate-600 uppercase tracking-wide group-hover:text-blue-600",children:"Locations"})]}),s.jsxs("button",{onClick:()=>ht("shows"),className:"group hover:bg-orange-50 rounded-lg p-2 transition-colors cursor-pointer",disabled:(ue.show_allocated||0)===0,children:[s.jsx("div",{className:"text-xl font-bold text-orange-600 group-hover:text-orange-700",children:ue.show_allocated||0}),s.jsx("div",{className:"text-xs text-slate-600 uppercase tracking-wide group-hover:text-orange-600",children:"In Shows"})]}),s.jsxs("button",{onClick:()=>ht("installed"),className:"group hover:bg-purple-50 rounded-lg p-2 transition-colors cursor-pointer",disabled:(ue.installation_allocated||0)===0,children:[s.jsx("div",{className:"text-xl font-bold text-purple-600 group-hover:text-purple-700",children:ue.installation_allocated||0}),s.jsx("div",{className:"text-xs text-slate-600 uppercase tracking-wide group-hover:text-purple-600",children:"Installed"})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-xl font-bold ${ue.available_quantity>0?"text-green-600":"text-red-600"}`,children:ue.available_quantity}),s.jsx("div",{className:"text-xs text-slate-600 uppercase tracking-wide",children:"Available"})]})]}),ue.total_allocated>0||ue.show_allocated>0||ue.installation_allocated>0?s.jsx("div",{className:"space-y-3",children:Se&&Se.length>0||ue&&(ue.show_allocated>0||ue.installation_allocated>0)?s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-3",children:[s.jsx("h4",{className:"text-xs font-medium text-slate-700 mb-2 uppercase tracking-wide",children:"Detailed Breakdown"}),s.jsxs("div",{className:"space-y-2",children:[we&&we.length>0&&we.map((te,Je)=>s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),s.jsxs("span",{className:"text-slate-700",children:[te.show_name,te.venue&&s.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["@ ",te.venue]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-slate-800",children:te.quantity_allocated||te.quantity_needed||0}),s.jsxs("span",{className:"text-xs text-orange-600",children:["(",te.status||"allocated",")"]})]})]},`show-${Je}`)),ue&&ue.show_allocated>0&&(!we||we.length===0)&&s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),s.jsx("span",{className:"text-slate-700",children:"In Shows"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-slate-800",children:ue.show_allocated}),s.jsx("span",{className:"text-xs text-orange-600",children:"(shows)"})]})]}),ue&&ue.installation_allocated>0&&s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),s.jsxs("span",{className:"text-slate-700",children:["Installed",(Q==null?void 0:Q.installation_location)&&s.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["@ ",Q.installation_location]}),!(Q!=null&&Q.installation_location)&&(Q==null?void 0:Q.installation_location_id)&&(bt==null?void 0:bt.isInstallation)&&s.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["@ ",bt.displayName]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-slate-800",children:ue.installation_allocated}),s.jsxs("span",{className:"text-xs text-purple-600",children:["(",(Q==null?void 0:Q.installation_type)||"fixed",")"]})]})]}),Se&&Se.map((te,Je)=>s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),s.jsx("span",{className:"text-slate-700",children:te.location_name})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-slate-800",children:te.quantity_allocated}),s.jsx("span",{className:"text-xs text-slate-500",children:te.status&&te.status!=="allocated"&&`(${te.status})`})]})]},Je)),ue&&ue.available_quantity>0&&s.jsxs("div",{className:"flex items-center justify-between text-sm border-t border-slate-100 pt-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full mr-2"}),s.jsx("span",{className:"text-slate-700",children:"Default Storage"})]}),s.jsx("span",{className:"font-medium text-slate-800",children:ue.available_quantity})]})]})]}):null}):s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"text-sm font-medium text-gray-800",children:"All Items in Default Storage"})]}),s.jsxs("span",{className:"text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded-full",children:[ue.total_quantity," items"]})]}),s.jsxs("p",{className:"text-sm text-gray-700",children:["All ",ue.total_quantity," items are currently in the default storage location."]})]})]})})]})]})}),ee==="inventory"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"bg-orange-100 p-2 rounded-lg mr-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Location & Storage Management"})]}),((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="advanced")&&s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm mb-6",children:[s.jsxs("div",{className:"p-4 border-b border-slate-200",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"text-lg font-medium text-slate-700",children:"Location Management"})]}),s.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Manage equipment location and allocations"})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(ke,{variant:"primary",className:"flex items-center justify-center py-3",onClick:()=>S(!0),children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium",children:"Manage Locations & Installation"}),s.jsx("div",{className:"text-xs opacity-90",children:"Allocate items to locations & manage installations"})]})]}),s.jsxs(ke,{variant:"outline",className:"flex items-center justify-center py-3",onClick:He,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 0h10m-10 0a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V6a2 2 0 00-2-2"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium",children:"Allocate to Show"}),s.jsx("div",{className:"text-xs opacity-75",children:"Reserve items for shows"})]})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-blue-600 mr-2 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("div",{className:"font-medium mb-1",children:"Complete Allocation & Return System"}),s.jsxs("div",{className:"text-blue-700",children:[" ",s.jsx("strong",{children:"Location Allocation:"})," Distribute quantities across locations + return to storage",s.jsx("br",{})," ",s.jsx("strong",{children:"Installation Management:"})," Set installations + return from installation",s.jsx("br",{})," ",s.jsx("strong",{children:"Show Allocation:"})," Assign to shows + return from shows",s.jsx("br",{})," ",s.jsx("strong",{children:"Quantity Control:"})," Specify exact quantities for all operations"]})]})]})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm mb-6",children:[s.jsxs("div",{className:"p-4 border-b border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})}),s.jsx("span",{className:"text-lg font-medium text-slate-700",children:"Location Allocations"})]}),s.jsxs("div",{className:"text-sm text-slate-600",children:[(Q==null?void 0:Q.quantity)||1," total items"]})]}),s.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Current distribution across locations"})]}),s.jsx("div",{className:"p-4",children:ue?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-5 gap-3 text-center bg-slate-50 p-4 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold text-slate-800",children:ue.total_quantity}),s.jsx("div",{className:"text-xs text-slate-600 uppercase tracking-wide",children:"Total"})]}),s.jsxs("button",{onClick:()=>ht("locations"),className:"group hover:bg-blue-50 rounded-lg p-2 transition-colors cursor-pointer",disabled:(ue.total_allocated||0)+(ue.show_allocated||0)===0,children:[s.jsx("div",{className:"text-xl font-bold text-blue-600 group-hover:text-blue-700",children:(ue.total_allocated||0)+(ue.show_allocated||0)}),s.jsx("div",{className:"text-xs text-slate-600 uppercase tracking-wide group-hover:text-blue-600",children:"Locations"})]}),s.jsxs("button",{onClick:()=>ht("shows"),className:"group hover:bg-orange-50 rounded-lg p-2 transition-colors cursor-pointer",disabled:(ue.show_allocated||0)===0,children:[s.jsx("div",{className:"text-xl font-bold text-orange-600 group-hover:text-orange-700",children:ue.show_allocated||0}),s.jsx("div",{className:"text-xs text-slate-600 uppercase tracking-wide group-hover:text-orange-600",children:"In Shows"})]}),s.jsxs("button",{onClick:()=>ht("installed"),className:"group hover:bg-purple-50 rounded-lg p-2 transition-colors cursor-pointer",disabled:(ue.installation_allocated||0)===0,children:[s.jsx("div",{className:"text-xl font-bold text-purple-600 group-hover:text-purple-700",children:ue.installation_allocated||0}),s.jsx("div",{className:"text-xs text-slate-600 uppercase tracking-wide group-hover:text-purple-600",children:"Installed"})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-xl font-bold ${ue.available_quantity>0?"text-green-600":"text-red-600"}`,children:ue.available_quantity}),s.jsx("div",{className:"text-xs text-slate-600 uppercase tracking-wide",children:"Available"})]})]}),ue.total_allocated>0||ue.show_allocated>0||ue.installation_allocated>0?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})}),s.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Equipment Allocated"})]}),s.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:[(ue.total_allocated||0)+(ue.show_allocated||0)+(ue.installation_allocated||0)," allocated"]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-blue-700 mb-1",children:[s.jsx("span",{children:"Distribution"}),s.jsxs("span",{children:[(ue.total_allocated||0)+(ue.show_allocated||0)+(ue.installation_allocated||0)," / ",ue.total_quantity]})]}),s.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:s.jsx("div",{className:"h-2 bg-blue-500 rounded-full transition-all duration-300",style:{width:`${((ue.total_allocated||0)+(ue.show_allocated||0)+(ue.installation_allocated||0))/ue.total_quantity*100}%`}})})]}),s.jsx("p",{className:"text-sm text-blue-700",children:"Items are distributed across locations and shows. Use the respective management sections to modify allocations."})]}),Se&&Se.length>0||ue&&ue.show_allocated>0?s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-3",children:[s.jsx("h4",{className:"text-xs font-medium text-slate-700 mb-2 uppercase tracking-wide",children:"Current Distribution"}),s.jsxs("div",{className:"space-y-2",children:[we&&we.length>0&&we.map((te,Je)=>s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),s.jsxs("span",{className:"text-slate-700",children:[te.show_name,te.venue&&s.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["@ ",te.venue]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-slate-800",children:te.quantity_allocated||te.quantity_needed||0}),s.jsxs("span",{className:"text-xs text-orange-600",children:["(",te.status||"allocated",")"]})]})]},`show-location-${Je}`)),ue&&ue.show_allocated>0&&(!we||we.length===0)&&s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),s.jsx("span",{className:"text-slate-700",children:"In Shows"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-slate-800",children:ue.show_allocated}),s.jsx("span",{className:"text-xs text-orange-600",children:"(shows)"})]})]}),ue&&ue.installation_allocated>0&&s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),s.jsxs("span",{className:"text-slate-700",children:["Installed",(Q==null?void 0:Q.installation_location)&&s.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["@ ",Q.installation_location]}),!(Q!=null&&Q.installation_location)&&(Q==null?void 0:Q.installation_location_id)&&(bt==null?void 0:bt.isInstallation)&&s.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["@ ",bt.displayName]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-slate-800",children:ue.installation_allocated}),s.jsxs("span",{className:"text-xs text-purple-600",children:["(",(Q==null?void 0:Q.installation_type)||"fixed",")"]})]})]}),Se&&Se.map((te,Je)=>s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),s.jsx("span",{className:"text-slate-700",children:te.location_name})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-slate-800",children:te.quantity_allocated}),s.jsx("span",{className:"text-xs text-slate-500",children:te.status&&te.status!=="allocated"&&`(${te.status})`})]})]},Je)),ue&&ue.available_quantity>0&&s.jsxs("div",{className:"flex items-center justify-between text-sm border-t border-slate-100 pt-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full mr-2"}),s.jsx("span",{className:"text-slate-700",children:"Default Storage"})]}),s.jsx("span",{className:"font-medium text-slate-800",children:ue.available_quantity})]})]})]}):null]}):ue&&ue.total_allocated===0&&ue.show_allocated===0&&ue.installation_allocated===0?s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"text-sm font-medium text-gray-800",children:"All Items in Default Storage"})]}),s.jsxs("span",{className:"text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded-full",children:[ue.total_quantity," items"]})]}),s.jsx("div",{className:"mb-3",children:s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"h-2 bg-gray-400 rounded-full w-full"})})}),s.jsx("p",{className:"text-sm text-gray-700 mb-3",children:ue.show_allocated>0?s.jsxs(s.Fragment,{children:[ue.available_quantity," of ",ue.total_quantity," items are in default storage.",s.jsxs("span",{className:"text-orange-600 ml-1",children:["(",ue.show_allocated," allocated to shows)"]})]}):`All ${ue.total_quantity} items are currently in the default location.`}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-blue-600 mr-2 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("div",{className:"text-xs text-blue-800",children:[s.jsx("div",{className:"font-medium mb-1",children:"Ready for Allocation"}),s.jsx("div",{children:'Use "Manage Locations & Installation" to distribute items across different locations and manage installations.'})]})]})})]}):s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Items Allocated"})]}),s.jsxs("span",{className:"text-xs bg-blue-200 text-blue-700 px-2 py-1 rounded-full",children:[((ue==null?void 0:ue.show_allocated)||0)+((ue==null?void 0:ue.total_allocated)||0)+((ue==null?void 0:ue.installation_allocated)||0)," allocated"]})]}),s.jsx("p",{className:"text-sm text-blue-700",children:"Equipment is allocated to shows, locations, or installations. Use the respective management sections to modify allocations."})]})]}):s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mx-auto"}),s.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Loading allocation data..."})]})})]})]}),ee==="allocations"&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm",children:[s.jsxs("div",{className:"p-4 border-b border-slate-200",children:[s.jsx("h3",{className:"text-lg font-medium text-slate-800",children:"Show Allocations"}),s.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Equipment allocated to shows and events"})]}),s.jsx("div",{className:"p-6",children:we&&we.length>0?s.jsx("div",{className:"space-y-4",children:we.map(te=>{var Je,ft;return s.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-slate-800",children:te.show_name}),s.jsx("div",{className:"text-sm text-slate-600 mt-1",children:te.venue||"No venue specified"}),s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:te.show_date?new Date(te.show_date).toLocaleDateString():"No date specified"}),s.jsx("div",{className:"mt-2",children:s.jsxs("button",{onClick:()=>Fe(te),className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium transition-colors hover:opacity-80 cursor-pointer ${te.status==="allocated"?"bg-blue-100 text-blue-800 hover:bg-blue-200":te.status==="checked-out"?"bg-orange-100 text-orange-800 hover:bg-orange-200":te.status==="in-use"?"bg-green-100 text-green-800 hover:bg-green-200":te.status==="returned"?"bg-gray-100 text-gray-800 hover:bg-gray-200":te.status==="requested"?"bg-purple-100 text-purple-800 hover:bg-purple-200":"bg-slate-100 text-slate-800 hover:bg-slate-200"}`,title:"Click to update status",children:[((Je=te.status)==null?void 0:Je.charAt(0).toUpperCase())+((ft=te.status)==null?void 0:ft.slice(1).replace("-"," "))||"Unknown",s.jsx("svg",{className:"w-3 h-3 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]})})]}),s.jsxs("div",{className:"text-right ml-4",children:[s.jsx("div",{className:"text-lg font-bold text-orange-700",children:te.quantity_allocated||te.quantity_needed||0}),s.jsx("div",{className:"text-xs text-slate-600",children:"items allocated"}),te.quantity_needed&&te.quantity_needed!==te.quantity_allocated&&s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["(",te.quantity_needed," needed)"]})]})]}),s.jsxs("div",{className:"mt-4 flex items-center justify-end space-x-2",children:[s.jsxs(ke,{size:"sm",variant:"outline",onClick:()=>Ee(te),className:"text-orange-600 hover:text-orange-700",title:`Return ${te.quantity_allocated||te.quantity_needed||0} items from this show to storage`,children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),"Return (",te.quantity_allocated||te.quantity_needed||0,")"]}),s.jsxs(ke,{size:"sm",variant:"outline",onClick:()=>ae(te),className:"text-blue-600 hover:text-blue-700",children:[s.jsx(fa,{className:"w-3 h-3 mr-1"}),"Edit"]}),s.jsxs(ke,{size:"sm",variant:"outline",onClick:()=>ie(te),className:"text-red-600 hover:text-red-700",children:[s.jsx(Cc,{className:"w-3 h-3 mr-1"}),"Remove"]})]})]},te.id)})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-slate-500 mb-2",children:"No show allocations"}),s.jsx("div",{className:"text-sm text-slate-400",children:"This equipment is not currently allocated to any shows"})]})})]})}),ee==="history"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"bg-green-100 p-2 rounded-lg mr-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Movement History"})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-4",children:[s.jsxs("div",{className:"mb-4 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Equipment movement log"})]}),s.jsx(D5,{equipmentId:e})]})]}),ee==="documents"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg mr-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Documents & Attachments"}),((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="advanced")&&s.jsxs(ke,{variant:"outline",size:"sm",className:"ml-auto flex items-center",onClick:()=>g(!0),children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Documents"]})]}),Q.files&&Q.files.filter(te=>!Rt||te.id!==Rt.id).length>0?s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-4",children:[s.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsxs("span",{className:"text-sm font-medium text-slate-700",children:[Q.files.filter(te=>!Rt||te.id!==Rt.id).length,Q.files.filter(te=>!Rt||te.id!==Rt.id).length===1?" file":" files"," attached"]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${ve==="grid"?"bg-primary-100 text-primary-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,onClick:()=>ne("grid"),children:s.jsx(Hc,{className:"h-4 w-4"})}),s.jsx("button",{className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${ve==="list"?"bg-primary-100 text-primary-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,onClick:()=>ne("list"),children:s.jsx(Wc,{className:"h-4 w-4"})})]})]}),s.jsx(F2,{files:Q.files.filter(te=>!Rt||te.id!==Rt.id),layout:ve,size:"medium",showDownload:!0,canDelete:!1})]}):s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-8 text-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto mb-4 text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("p",{className:"text-slate-600 font-medium mb-2",children:"No documents attached to this equipment"}),((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="advanced")&&s.jsx("div",{className:"mt-4",children:s.jsxs(ke,{variant:"outline",size:"sm",className:"flex items-center mx-auto",onClick:()=>g(!0),children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Documents"]})})]})]})]})]})}),s.jsx("div",{className:"md:col-span-1",children:s.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden h-full",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Reference Image"]})}),s.jsx("div",{className:"p-4 flex flex-col items-center justify-center",children:Rt?s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"relative pb-4",children:[s.jsx("img",{src:D3(Rt.id,!0),alt:`${Q.brand} ${Q.model}`,className:"w-full h-auto object-contain rounded-md",onError:te=>{console.error("Error loading thumbnail, falling back to original image"),te.target.src=D3(Rt.id),te.target.onerror=null}}),((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="advanced")&&s.jsx("button",{onClick:()=>m(!0),className:"absolute top-2 right-2 bg-white rounded-full p-1 shadow-md hover:bg-gray-100 transition-colors",title:"Change reference image",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),s.jsx("div",{className:"text-sm text-gray-500 text-center",children:Rt.file_name})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto mb-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"No reference image"}),((r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="advanced")&&s.jsxs("button",{onClick:()=>m(!0),className:"mt-2 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Reference Image"]})]})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsx("div",{className:"md:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-slate-200 h-full",children:[s.jsx("div",{className:"p-4 border-b border-slate-200",children:s.jsxs("h2",{className:"text-lg font-semibold text-slate-800 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Quick Info"]})}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Category"})]}),s.jsx("p",{className:"text-sm font-medium text-slate-800",children:Q.category||"Not specified"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Type"})]}),s.jsx("p",{className:"text-sm font-medium text-slate-800",children:Q.type})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Status"})]}),s.jsx("div",{children:Q.status&&s.jsx(js,{variant:Et(Q.status),size:"md",children:Q.status.charAt(0).toUpperCase()+Q.status.slice(1).replace("-"," ")})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Quantity"})]}),s.jsxs("p",{className:"text-sm font-medium text-slate-800",children:[Q.quantity||1," item",(Q.quantity||1)!==1?"s":""]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Location"})]}),s.jsx("p",{className:"text-sm font-medium text-slate-800",children:Q.location||"Not specified"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Serial Number"})]}),s.jsx("p",{className:"text-sm font-medium text-slate-800",children:Q.serial_number})]})]})]})}),s.jsx("div",{className:"md:col-span-1",children:s.jsxs(qe,{className:"h-full",children:[s.jsx(qe.Header,{className:"bg-slate-50",children:s.jsxs(qe.Title,{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Metadata"]})}),s.jsx(qe.Body,{children:s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Created By"}),s.jsx("p",{className:"mt-1 text-sm text-slate-600",children:Q.created_by||"Unknown"})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Created At"}),s.jsx("p",{className:"mt-1 text-sm text-slate-600",children:Q.created_at?new Date(Q.created_at).toLocaleString():"Unknown"})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Last Updated"}),s.jsx("p",{className:"mt-1 text-sm text-slate-600",children:Q.updated_at?new Date(Q.updated_at).toLocaleString():"Never"})]})]}),Q.locationDetails&&s.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[s.jsxs("h4",{className:"text-sm font-medium text-slate-700 mb-3 flex items-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Location Details"]}),s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg text-sm",children:[s.jsx("p",{className:"font-medium text-slate-800",children:Q.locationDetails.name}),Q.locationDetails.street&&s.jsx("p",{className:"text-slate-600 mt-1",children:Q.locationDetails.street}),(Q.locationDetails.postal_code||Q.locationDetails.city)&&s.jsxs("p",{className:"text-slate-600",children:[Q.locationDetails.postal_code&&`${Q.locationDetails.postal_code} `,Q.locationDetails.city]}),(Q.locationDetails.region||Q.locationDetails.country)&&s.jsxs("p",{className:"text-slate-600",children:[Q.locationDetails.region&&`${Q.locationDetails.region}, `,Q.locationDetails.country]})]})]})]})})]})})]}),a&&s.jsx(I5,{isOpen:a,title:"Delete Equipment",message:"Are you sure you want to delete this equipment? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",onConfirm:De,onCancel:$e,isDestructive:!0}),s.jsx(P2,{isOpen:d,onClose:()=>m(!1),equipmentId:e,existingImage:Rt}),s.jsx(B2,{equipmentId:parseInt(e),isOpen:v,onClose:()=>g(!1),onSuccess:Ze}),s.jsx(M5,{isOpen:w,onClose:()=>b(!1),equipment:Q,availabilityData:ue}),T&&s.jsx(U2,{showEquipment:T,showId:T.show_id,onClose:ye}),s.jsx(qz,{isOpen:k,onClose:()=>S(!1),equipment:Q,locations:nt}),A&&L&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:`p-2 rounded-lg mr-3 ${L.color==="blue"?"bg-blue-100":L.color==="orange"?"bg-orange-100":L.color==="purple"?"bg-purple-100":"bg-slate-100"}`,children:[L.icon==="location"&&s.jsxs("svg",{className:`w-5 h-5 ${L.color==="blue"?"text-blue-600":L.color==="orange"?"text-orange-600":L.color==="purple"?"text-purple-600":"text-slate-600"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),L.icon==="show"&&s.jsx("svg",{className:`w-5 h-5 ${L.color==="blue"?"text-blue-600":L.color==="orange"?"text-orange-600":L.color==="purple"?"text-purple-600":"text-slate-600"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 0h10m-10 0a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V6a2 2 0 00-2-2"})}),L.icon==="installation"&&s.jsxs("svg",{className:`w-5 h-5 ${L.color==="blue"?"text-blue-600":L.color==="orange"?"text-orange-600":L.color==="purple"?"text-purple-600":"text-slate-600"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:L.title}),s.jsxs("p",{className:"text-sm text-slate-600",children:[L.totalCount," ",L.totalCount===1?"item":"items"," allocated"]})]})]}),s.jsx("button",{onClick:()=>O(!1),className:"text-slate-400 hover:text-slate-600 transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:L.items&&L.items.length>0?s.jsx("div",{className:"space-y-3",children:L.items.map((te,Je)=>{var ft,It,on,Ur;return s.jsx("div",{className:`p-4 rounded-lg border ${L.color==="blue"?"bg-blue-50 border-blue-200":L.color==="orange"?"bg-orange-50 border-orange-200":L.color==="purple"?"bg-purple-50 border-purple-200":"bg-slate-50 border-slate-200"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-slate-800",children:te.location_name||te.show_name||"Unknown Location"}),te.display_type&&s.jsx("div",{className:"text-xs text-slate-500 mt-1 font-medium",children:te.display_type}),te.venue&&s.jsx("div",{className:"text-sm text-slate-600 mt-1",children:te.venue}),te.show_date&&s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:new Date(te.show_date).toLocaleDateString()}),te.type&&s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Installation Type: ",te.type]}),te.installation_date&&s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Installed: ",new Date(te.installation_date).toLocaleDateString()]}),te.installation_notes&&s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Notes: ",te.installation_notes]}),te.status&&s.jsx("div",{className:"mt-2",children:te.allocation_type==="show"?s.jsxs("button",{onClick:()=>{const Co=we==null?void 0:we.find(Wt=>Wt.show_name===te.location_name);Co&&Fe(Co)},className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium transition-all duration-200 hover:opacity-80 hover:scale-105 cursor-pointer shadow-sm hover:shadow-md ${te.status==="allocated"?"bg-blue-100 text-blue-800 hover:bg-blue-200":te.status==="checked-out"?"bg-orange-100 text-orange-800 hover:bg-orange-200":te.status==="in-use"?"bg-green-100 text-green-800 hover:bg-green-200":te.status==="requested"?"bg-purple-100 text-purple-800 hover:bg-purple-200":te.status==="installed"?"bg-purple-100 text-purple-800":"bg-slate-100 text-slate-800 hover:bg-slate-200"}`,title:"Click to update show allocation status",children:[((ft=te.status)==null?void 0:ft.charAt(0).toUpperCase())+((It=te.status)==null?void 0:It.slice(1).replace("-"," ")),s.jsx("svg",{className:"w-3 h-3 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}):s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${te.status==="allocated"?"bg-blue-100 text-blue-800":te.status==="checked-out"?"bg-orange-100 text-orange-800":te.status==="in-use"?"bg-green-100 text-green-800":te.status==="installed"?"bg-purple-100 text-purple-800":"bg-slate-100 text-slate-800"}`,children:((on=te.status)==null?void 0:on.charAt(0).toUpperCase())+((Ur=te.status)==null?void 0:Ur.slice(1).replace("-"," "))})})]}),s.jsxs("div",{className:"text-right ml-4",children:[s.jsx("div",{className:`text-lg font-bold ${L.color==="blue"?"text-blue-700":L.color==="orange"?"text-orange-700":L.color==="purple"?"text-purple-700":"text-slate-700"}`,children:te.quantity_allocated||te.quantity_needed||0}),s.jsx("div",{className:"text-xs text-slate-600",children:"items"}),te.quantity_needed&&te.quantity_needed!==te.quantity_allocated&&s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["(",te.quantity_needed," needed)"]})]})]})},Je)})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-slate-500 mb-2",children:"No allocations found"}),s.jsxs("div",{className:"text-sm text-slate-400",children:["This equipment is not currently allocated to any ",P]})]})}),s.jsx("div",{className:"p-6 border-t border-slate-200 bg-slate-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-slate-600",children:[s.jsxs("div",{children:["Total: ",L.totalCount," ",L.totalCount===1?"item":"items"]}),((Br=L.items)==null?void 0:Br.some(te=>te.allocation_type==="show"))&&s.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex items-center",children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"Click show status badges to update"]})]}),s.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:"Close"})]})})]})}),W&&re&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Update Status"}),s.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[re.show_name," - ",re.quantity_allocated||re.quantity_needed||0," items"]})]}),s.jsx("button",{onClick:()=>V(!1),className:"text-slate-400 hover:text-slate-600 transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-sm text-slate-600 mb-4",children:["Current status: ",s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${re.status==="allocated"?"bg-blue-100 text-blue-800":re.status==="checked-out"?"bg-orange-100 text-orange-800":re.status==="in-use"?"bg-green-100 text-green-800":re.status==="requested"?"bg-purple-100 text-purple-800":"bg-slate-100 text-slate-800"}`,children:((Ts=re.status)==null?void 0:Ts.charAt(0).toUpperCase())+((tn=re.status)==null?void 0:tn.slice(1).replace("-"," "))})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:["requested","allocated","checked-out","in-use","returned"].map(te=>s.jsx("button",{onClick:()=>{Te.mutate({allocationId:re.id,status:te})},disabled:re.status===te||Te.isLoading,className:`p-3 rounded-lg border text-sm font-medium transition-colors ${re.status===te||Te.isLoading?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":te==="requested"?"border-purple-200 text-purple-700 hover:bg-purple-50":te==="allocated"?"border-blue-200 text-blue-700 hover:bg-blue-50":te==="checked-out"?"border-orange-200 text-orange-700 hover:bg-orange-50":te==="in-use"?"border-green-200 text-green-700 hover:bg-green-50":te==="returned"?"border-gray-200 text-gray-700 hover:bg-gray-50":"border-slate-200 text-slate-700 hover:bg-slate-50"}`,children:Te.isLoading?"Updating...":te.charAt(0).toUpperCase()+te.slice(1).replace("-"," ")},te))})]})}),s.jsx("div",{className:"p-6 border-t border-slate-200 bg-slate-50",children:s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:()=>V(!1),className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:"Cancel"})})})]})})]})},I3=(e,n=!1)=>`/api/files/${e}${n?"?thumbnail=true":""}`,Hz=()=>{var De,$e,Ge;const{id:e}=Zf(),n=us(),t=pn();dr();const[r,a]=M.useState({type_id:"",category_id:"",category:"",brand:"",model:"",serial_number:"",status:"available",location:"",location_id:"",description:"",reference_image_id:"",quantity:1,installation_type:"portable",installation_location:"",installation_quantity:0,installation_date:"",installation_notes:"",maintenance_schedule:"",last_maintenance_date:"",next_maintenance_date:""}),[o,d]=M.useState([]),[m,v]=M.useState([]);M.useState(0);const[g,w]=M.useState(""),[b,_]=M.useState(!1),[E,T]=M.useState(!1),[I,k]=M.useState(!1),[S,A]=M.useState(!1),[O,P]=M.useState(null),[$,L]=M.useState("details"),[F,W]=M.useState("grid"),{data:V}=ut({queryKey:["equipment-types"],queryFn:ki,staleTime:3e5}),{data:re}=ut({queryKey:["categories"],queryFn:Vc,staleTime:3e5}),{data:oe,isLoading:ee,error:he}=ut({queryKey:["locations"],queryFn:async()=>{try{const ae=await ze.get("/api/locations");return ae.data.locations||ae.data}catch(ae){return console.error("Error fetching locations:",ae),[]}},staleTime:3e5}),ve=["available","in-use","maintenance","unavailable","broken"],{data:ne}=ut({queryKey:["show-equipment",e],queryFn:async()=>{var ae;try{return(await ze.get(`/api/show-equipment/equipment/${e}/shows`)).data}catch(ye){if(((ae=ye.response)==null?void 0:ae.status)===404)return[];throw ye}},enabled:!!e,retry:!1}),{data:Q}=ut({queryKey:["equipment-availability",e],queryFn:async()=>{var ae;try{return(await ze.get(`/api/show-equipment/equipment/${e}/availability`)).data}catch(ye){if(((ae=ye.response)==null?void 0:ae.status)===404)return{available:0,allocated:0,total:0};throw ye}},enabled:!!e,retry:!1}),{data:me,isLoading:fe,isError:Ie,error:ue}=ut({queryKey:["equipment",e],queryFn:()=>hp(e),onSuccess:ae=>{a({type_id:ae.type_id?ae.type_id.toString():"",category_id:ae.category_id?ae.category_id.toString():"",category:ae.category||"",brand:ae.brand||"",model:ae.model||"",serial_number:ae.serial_number||"",status:ae.status||"available",location:ae.location||"",location_id:ae.location_id?ae.location_id.toString():"",description:ae.description||"",reference_image_id:ae.reference_image_id?ae.reference_image_id.toString():"",quantity:ae.quantity||1,installation_type:ae.installation_type||"portable",installation_location:ae.installation_location||"",installation_quantity:ae.installation_quantity||0,installation_date:ae.installation_date||"",installation_notes:ae.installation_notes||"",maintenance_schedule:ae.maintenance_schedule||"",last_maintenance_date:ae.last_maintenance_date||"",next_maintenance_date:ae.next_maintenance_date||""}),ae.locationDetails&&console.log("Location details:",ae.locationDetails)}}),Ye=Array.isArray(oe)?oe:[],we=Ye.find(ae=>ae.id===(me==null?void 0:me.location_id)||ae.name===(me==null?void 0:me.location)),Ve=_t({mutationFn:async ae=>{const ye=Object.fromEntries(Object.entries(ae.equipment).filter(([ie,He])=>He!=null));return sC(e,ye,ae.filesToUpload,ae.filesToDelete)},onSuccess:()=>{t.invalidateQueries(["equipment"]),n(`/equipment/${e}`)},onError:ae=>{var ye,ie;console.error("Error updating equipment:",ae),w(((ie=(ye=ae.response)==null?void 0:ye.data)==null?void 0:ie.message)||"Failed to update equipment")}}),Be=ae=>{const{name:ye,value:ie}=ae.target;let He={...r,[ye]:ie};if(ye==="category_id"&&ie&&(re!=null&&re.categories)){const Ee=re.categories.find(Fe=>Fe.id.toString()===ie);Ee&&(console.log("Selected category:",Ee),He={...He,category_id:ie,category:Ee.name})}if(ye==="location_id"&&ie){const Ee=Ye.find(Fe=>Fe.id.toString()===ie);Ee&&(console.log("Selected location:",Ee),He={...He,location_id:ie,location:Ee.name},Ee.name.toLowerCase()==="lager"&&(["maintenance","broken","unavailable"].includes(He.status)||(He.status="available",console.log('Setting status to "available" because location is Lager (storage)'))))}else ye==="location"&&ie&&(He={...He,location:ie,location_id:""},ie.toLowerCase()==="lager"&&(["maintenance","broken","unavailable"].includes(He.status)||(He.status="available",console.log('Setting status to "available" because custom location is Lager (storage)'))));if(ye==="installation_location_id"&&ie){const Ee=Ye.find(Fe=>Fe.id.toString()===ie);Ee&&(console.log("Selected installation location:",Ee),He={...He,installation_location_id:ie,installation_location:Ee.name})}else ye==="installation_location"&&ie&&(He={...He,installation_location:ie,installation_location_id:""});if(ye==="quantity"){const Ee=parseInt(ie)||1;He.quantity=Math.max(1,Ee),console.log(`Setting quantity to: ${He.quantity}`)}else ye==="status"&&console.log(`User manually changed status to: ${ie} - respecting user choice`);a(He)},ct=ae=>{r.reference_image_id===ae.toString()&&a({...r,reference_image_id:""}),v(ye=>[...ye,ae])},Ae=ae=>{if(ae.preventDefault(),!r.type_id||!r.brand||!r.model||!r.serial_number){w("Type, brand, model, and serial number are required");return}const ye=o.find((Fe,ht)=>r.reference_image_id==="new"),ie=ye?o.filter(Fe=>Fe!==ye):o,He=r.reference_image_id==="",Ee={...r,quantity:parseInt(r.quantity)||1,type_id:r.type_id?parseInt(r.type_id):null,category_id:r.category_id?parseInt(r.category_id):null,location_id:r.location_id?parseInt(r.location_id):null,installation_location_id:r.installation_location_id?parseInt(r.installation_location_id):null,reference_image_id:r.reference_image_id==="new"?"new":r.reference_image_id};Ve.mutate({equipment:Ee,filesToUpload:ie,filesToDelete:m,referenceImageFile:ye||null,removeReferenceImage:He})},Se=()=>{n(`/equipment/${e}`)},nt=ae=>{switch(ae){case"available":return"success";case"in-use":return"primary";case"maintenance":return"warning";case"unavailable":return"secondary";case"broken":return"danger";default:return"secondary"}},qt=ae=>{t.invalidateQueries(["equipment",e]),Qe.success(`Successfully uploaded ${ae.length} file(s)`)},bt=()=>{k(!0)},Pt=ae=>{P(ae),A(!0)},Tt=async ae=>{var ye;if(window.confirm("Are you sure you want to remove this allocation?"))try{await ze.delete(`/api/show-equipment/${ae.id}`),t.invalidateQueries(["show-equipment",e]),t.invalidateQueries(["equipment-availability",e])}catch(ie){console.error("Error removing allocation:",ie),((ye=ie.response)==null?void 0:ye.status)===404?w("Allocation not found or already removed"):w("Failed to remove allocation")}},Te=()=>{P(null),A(!1),t.invalidateQueries(["show-equipment",e]),t.invalidateQueries(["equipment-availability",e])},Ne=(ae,ye)=>{const ie=parseInt(ae)||0,He=parseInt(ye)||0;return Math.max(0,ie-He)};if(fe)return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Edit Equipment"})}),s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})})]});if(Ie)return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Edit Equipment"})}),s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading equipment"}),s.jsx("div",{className:"mt-2 text-sm text-red-700",children:s.jsx("p",{children:(ue==null?void 0:ue.message)||"Failed to load equipment details"})}),s.jsx("div",{className:"mt-4",children:s.jsx(ke,{variant:"outline",size:"sm",onClick:Se,children:"Back to Details"})})]})]})})]});const Ze=me!=null&&me.reference_image_id?parseInt(me.reference_image_id):null,be=(De=me==null?void 0:me.files)==null?void 0:De.find(ae=>ae.id===Ze);return s.jsxs("form",{onSubmit:Ae,className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 bg-white p-4 rounded-lg shadow-sm border border-slate-200",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-primary-100 p-2 rounded-lg mr-4",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Edit Equipment"}),s.jsxs("p",{className:"text-slate-500 text-sm",children:[r.brand," ",r.model,"  ",r.serial_number]})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs(ke,{type:"button",variant:"outline",onClick:Se,className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Details"]}),s.jsxs(ke,{type:"submit",variant:"primary",disabled:Ve.isLoading,className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),Ve.isLoading?"Saving...":"Save Changes"]})]})]}),g&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:s.jsx("p",{className:"text-red-700",children:g})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden h-full",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"flex -mb-px",children:[s.jsxs("button",{type:"button",onClick:()=>L("details"),className:`py-4 px-6 font-medium text-sm border-b-2 focus:outline-none transition-colors flex items-center ${$==="details"?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-2 ${$==="details"?"text-primary-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Details"]}),s.jsxs("button",{type:"button",onClick:()=>L("inventory"),className:`py-4 px-6 font-medium text-sm border-b-2 focus:outline-none transition-colors flex items-center ${$==="inventory"?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-2 ${$==="inventory"?"text-primary-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Inventory & Location"]}),s.jsxs("button",{type:"button",onClick:()=>L("allocations"),className:`py-4 px-6 font-medium text-sm border-b-2 focus:outline-none transition-colors flex items-center ${$==="allocations"?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-2 ${$==="allocations"?"text-primary-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Show Allocations"]}),s.jsxs("button",{type:"button",onClick:()=>L("history"),className:`py-4 px-6 font-medium text-sm border-b-2 focus:outline-none transition-colors flex items-center ${$==="history"?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-2 ${$==="history"?"text-primary-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Movement History"]}),s.jsxs("button",{type:"button",onClick:()=>L("documents"),className:`py-4 px-6 font-medium text-sm border-b-2 focus:outline-none transition-colors flex items-center ${$==="documents"?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 mr-2 ${$==="documents"?"text-primary-500":"text-gray-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),"Documents & Attachments"]})]})}),s.jsxs("div",{className:"p-6",children:[$==="details"&&s.jsx("div",{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6",children:s.jsx("div",{className:"md:col-span-1",children:s.jsxs(qe,{className:"h-full",children:[s.jsx(qe.Header,{className:"bg-slate-50",children:s.jsxs(qe.Title,{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Equipment Information"]})}),s.jsxs(qe.Body,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{children:s.jsx(lr,{id:"category_id",name:"category_id",label:"Category",value:r.category_id||"",onChange:Be,options:[{value:"",label:"Select Category"},...((re==null?void 0:re.categories)||[]).map(ae=>({value:ae.id.toString(),label:ae.name}))]})}),s.jsx("div",{children:s.jsx(lr,{id:"type_id",name:"type_id",label:"Type",value:r.type_id||"",onChange:Be,options:[{value:"",label:"Select Type"},...((V==null?void 0:V.types)||[]).map(ae=>({value:ae.id.toString(),label:ae.name}))],required:!0})}),s.jsx("div",{children:s.jsx(xt,{id:"brand",name:"brand",label:"Brand",value:r.brand,onChange:Be,placeholder:"Enter brand",required:!0})}),s.jsx("div",{children:s.jsx(xt,{id:"model",name:"model",label:"Model",value:r.model,onChange:Be,placeholder:"Enter model",required:!0})}),s.jsx("div",{children:s.jsx(xt,{id:"serial_number",name:"serial_number",label:"Serial Number",value:r.serial_number,onChange:Be,placeholder:"Enter serial number",required:!0})}),s.jsxs("div",{children:[s.jsx(lr,{id:"location_id",name:"location_id",label:"Location",value:r.location_id?r.location_id.toString():"",onChange:Be,options:[{value:"",label:"Select Location"},...(Ye||[]).map(ae=>{let ye=ae.name;const ie=[];return ae.city&&ie.push(ae.city),ae.region&&ie.push(ae.region),ae.country&&ie.push(ae.country),ie.length>0&&(ye+=` (${ie.join(", ")})`),{value:ae.id.toString(),label:ye}})]}),s.jsx("div",{className:"mt-2",children:s.jsx(xt,{id:"location",name:"location",label:"Custom Location (if not in list)",value:r.location||"",onChange:Be,placeholder:"Enter custom location"})})]}),s.jsx("div",{children:s.jsx(xt,{id:"quantity",name:"quantity",label:"Quantity",type:"number",min:"1",value:r.quantity||1,onChange:Be,placeholder:"Enter quantity",required:!0,helpText:"Number of items (minimum: 1)"})}),s.jsx("div",{children:s.jsx(lr,{id:"status",name:"status",label:"Status",value:r.status,onChange:Be,options:ve.map(ae=>({value:ae,label:ae.charAt(0).toUpperCase()+ae.slice(1).replace("-"," ")})),required:!0})})]}),s.jsxs("div",{className:"mt-8 border-t border-slate-200 pt-6",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})}),s.jsx("label",{htmlFor:"description",className:"text-sm font-medium text-slate-700",children:"Description"})]}),s.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:Be,rows:"4",className:"w-full rounded-md border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Enter description"})]})]})]})})})}),$==="documents"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg mr-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Documents & Attachments"}),s.jsxs(ke,{type:"button",variant:"outline",size:"sm",className:"ml-auto flex items-center",onClick:()=>T(!0),children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Documents"]})]}),me!=null&&me.files&&me.files.filter(ae=>!be||ae.id!==be.id).length>0?s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-4",children:[s.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsxs("span",{className:"text-sm font-medium text-slate-700",children:[me.files.filter(ae=>!be||ae.id!==be.id).length,me.files.filter(ae=>!be||ae.id!==be.id).length===1?" file":" files"," attached"]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{type:"button",className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${F==="grid"?"bg-primary-100 text-primary-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,onClick:()=>W("grid"),children:s.jsx(Hc,{className:"h-4 w-4"})}),s.jsx("button",{type:"button",className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${F==="list"?"bg-primary-100 text-primary-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,onClick:()=>W("list"),children:s.jsx(Wc,{className:"h-4 w-4"})})]})]}),s.jsx(F2,{files:me.files.filter(ae=>(!be||ae.id!==be.id)&&!m.includes(ae.id)),layout:F,size:"medium",showDownload:!0,canDelete:!0,onFileDelete:ct})]}):s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-8 text-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto mb-4 text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("p",{className:"text-slate-600 font-medium mb-2",children:"No documents attached to this equipment"}),s.jsx("div",{className:"mt-4",children:s.jsxs(ke,{type:"button",variant:"outline",size:"sm",className:"flex items-center mx-auto",onClick:()=>T(!0),children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Documents"]})})]})]}),$==="inventory"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"bg-orange-100 p-2 rounded-lg mr-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Inventory & Location Management"})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm mb-6",children:[s.jsx("div",{className:"p-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Storage Location (Editable)"})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{children:s.jsx(lr,{id:"location_id_inventory",name:"location_id",label:"Select Location",value:r.location_id?r.location_id.toString():"",onChange:Be,options:[{value:"",label:"Select Location"},...(Ye||[]).map(ae=>{let ye=ae.name;const ie=[];return ae.city&&ie.push(ae.city),ae.region&&ie.push(ae.region),ae.country&&ie.push(ae.country),ie.length>0&&(ye+=` (${ie.join(", ")})`),{value:ae.id.toString(),label:ye}})]})}),s.jsx("div",{children:s.jsx(xt,{id:"location_inventory",name:"location",label:"Custom Location",value:r.location||"",onChange:Be,placeholder:"Enter custom location",helpText:"Use this if location is not in the dropdown"})})]}),(we||r.location)&&s.jsxs("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg",children:[s.jsxs("h4",{className:"text-sm font-medium text-slate-700 mb-3 flex items-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Current Location Details"]}),s.jsxs("div",{className:"text-sm space-y-2",children:[s.jsx("div",{children:s.jsx("span",{className:"font-medium text-slate-800",children:(we==null?void 0:we.name)||r.location})}),we&&s.jsxs(s.Fragment,{children:[we.street&&s.jsx("div",{className:"text-slate-600",children:we.street}),(we.postal_code||we.city)&&s.jsxs("div",{className:"text-slate-600",children:[we.postal_code&&`${we.postal_code} `,we.city]}),(we.region||we.country)&&s.jsxs("div",{className:"text-slate-600",children:[we.region&&`${we.region}, `,we.country]})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-green-100 p-2 rounded-lg mr-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold text-slate-800",children:r.quantity||1}),s.jsx("div",{className:"text-xs text-slate-600",children:"Total Items"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg mr-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold text-slate-800",children:r.status==="available"?"Available":"In Use"}),s.jsx("div",{className:"text-xs text-slate-600",children:"Current Status"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-purple-100 p-2 rounded-lg mr-3",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold text-slate-800",children:(we==null?void 0:we.name)||r.location||"Not Set"}),s.jsx("div",{className:"text-xs text-slate-600",children:"Location"})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm mb-6",children:[s.jsx("div",{className:"p-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),s.jsx("span",{className:"text-lg font-medium text-slate-800",children:"Installation Information"})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{children:s.jsx(lr,{id:"installation_type",name:"installation_type",label:"Installation Type",value:r.installation_type||"portable",onChange:Be,options:[{value:"portable",label:"Portable - Can be moved freely"},{value:"semi-permanent",label:"Semi-Permanent - Can be moved with approval"},{value:"fixed",label:"Fixed - Permanently installed"}],helpText:"Determines if equipment can be allocated to shows"})}),s.jsx("div",{children:s.jsx(lr,{id:"maintenance_schedule",name:"maintenance_schedule",label:"Maintenance Schedule",value:r.maintenance_schedule||"",onChange:Be,options:[{value:"",label:"No scheduled maintenance"},{value:"Weekly",label:"Weekly"},{value:"Monthly",label:"Monthly"},{value:"Quarterly",label:"Quarterly"},{value:"Semi-Annually",label:"Semi-Annually"},{value:"Annually",label:"Annually"}],helpText:"Regular maintenance schedule for this equipment"})})]}),(r.installation_type==="fixed"||r.installation_type==="semi-permanent")&&s.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[s.jsx("div",{className:"mb-6",children:s.jsx(xt,{id:"installation_quantity",name:"installation_quantity",label:"Installation Quantity",type:"number",min:"0",max:r.quantity||1,value:r.installation_quantity||0,onChange:Be,helpText:`How many items are permanently installed (max: ${r.quantity||1})`,className:"w-32"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx(lr,{id:"installation_location_id",name:"installation_location_id",label:"Installation Location",value:r.installation_location_id?r.installation_location_id.toString():"",onChange:Be,options:[{value:"",label:"Select Installation Location"},...(Ye||[]).map(ae=>{let ye=ae.name;const ie=[];return ae.city&&ie.push(ae.city),ae.region&&ie.push(ae.region),ae.country&&ie.push(ae.country),ie.length>0&&(ye+=` (${ie.join(", ")})`),{value:ae.id.toString(),label:ye}})],helpText:"Select from predefined locations"}),s.jsx("div",{className:"mt-2",children:s.jsx(xt,{id:"installation_location",name:"installation_location",label:"Custom Installation Location (if not in list)",value:r.installation_location||"",onChange:Be,placeholder:"e.g., Main Stage - FOH Position, Booth #3",helpText:"Specific installation position or custom location"})})]}),s.jsx("div",{children:s.jsx(xt,{id:"installation_date",name:"installation_date",label:"Installation Date",type:"date",value:r.installation_date||"",onChange:Be,helpText:"When the equipment was installed"})})]})]}),r.maintenance_schedule&&s.jsx("div",{className:"mt-6 pt-6 border-t border-slate-200",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{children:s.jsx(xt,{id:"last_maintenance_date",name:"last_maintenance_date",label:"Last Maintenance Date",type:"date",value:r.last_maintenance_date||"",onChange:Be,helpText:"When maintenance was last performed"})}),s.jsx("div",{children:s.jsx(xt,{id:"next_maintenance_date",name:"next_maintenance_date",label:"Next Maintenance Date",type:"date",value:r.next_maintenance_date||"",onChange:Be,helpText:"When next maintenance is due"})})]})}),s.jsx("div",{className:"mt-6 pt-6 border-t border-slate-200",children:s.jsxs("div",{children:[s.jsx("label",{htmlFor:"installation_notes",className:"block text-sm font-medium text-slate-700 mb-1",children:"Installation Notes"}),s.jsx("textarea",{id:"installation_notes",name:"installation_notes",value:r.installation_notes||"",onChange:Be,placeholder:"Technical notes about installation, access requirements, special considerations...",rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),s.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Any important notes about the installation or maintenance"})]})})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-600 mr-2 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Location & Installation Tips"}),s.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Portable:"})," Can be allocated to shows and moved freely"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Semi-Permanent:"})," Can be moved with special approval"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Fixed:"})," Cannot be allocated to shows (permanently installed)"]}),s.jsx("li",{children:' Location "Lager" suggests status "Available" (you can override)'}),s.jsx("li",{children:" Set maintenance schedules for equipment requiring regular servicing"})]})]})]})})]}),$==="allocations"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"bg-purple-100 p-2 rounded-lg mr-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Show Allocations"}),s.jsxs(ke,{type:"button",variant:"outline",size:"sm",className:"ml-auto flex items-center",onClick:bt,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Allocate to Show"]})]}),ne&&Array.isArray(ne)&&ne.length>0?s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm",children:[s.jsx("div",{className:"p-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),s.jsxs("span",{className:"text-sm font-medium text-slate-700",children:[ne.length," show",ne.length!==1?"s":""," using this equipment"]})]})}),s.jsx("div",{className:"divide-y divide-slate-200",children:ne.map(ae=>s.jsxs("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-slate-800",children:ae.show_name}),s.jsx("p",{className:"text-sm text-slate-600",children:ae.show_date?new Date(ae.show_date).toLocaleDateString():"No date set"})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ae.status==="requested"?"bg-blue-100 text-blue-800":ae.status==="allocated"?"bg-yellow-100 text-yellow-800":ae.status==="checked-out"?"bg-orange-100 text-orange-800":ae.status==="in-use"?"bg-red-100 text-red-800":ae.status==="returned"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:ae.status})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Quantity Needed:"}),s.jsx("span",{className:"ml-2 font-medium text-slate-800",children:ae.quantity_needed})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Quantity Allocated:"}),s.jsx("span",{className:"ml-2 font-medium text-slate-800",children:ae.quantity_allocated})]})]}),(()=>{const ye=Ne(ae.quantity_needed,ae.quantity_allocated);return ye>0?s.jsx("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded-md",children:s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-red-600 font-medium",children:"Missing Items:"}),s.jsxs("span",{className:"font-bold text-red-600",children:[ye," item",ye!==1?"s":""]})]})}):null})(),s.jsxs("div",{className:"mt-3 flex items-center justify-end space-x-2",children:[s.jsxs(ke,{type:"button",size:"sm",variant:"outline",onClick:()=>Pt(ae),className:"text-blue-600 hover:text-blue-700",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-3 h-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),s.jsxs(ke,{type:"button",size:"sm",variant:"outline",onClick:()=>Tt(ae),className:"text-red-600 hover:text-red-700",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-3 h-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Remove"]})]}),ae.notes&&s.jsxs("div",{className:"mt-3 text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Notes:"}),s.jsx("p",{className:"text-slate-800 mt-1 bg-slate-50 p-2 rounded",children:ae.notes})]}),ae.venue&&s.jsxs("div",{className:"mt-2 text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Venue:"}),s.jsx("span",{className:"ml-2 text-slate-800",children:ae.venue})]})]},ae.id))})]}):s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-8 text-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto mb-4 text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),s.jsx("p",{className:"text-slate-600 font-medium mb-2",children:"No show allocations"}),s.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"This equipment is not currently allocated to any shows"}),typeof bt=="function"&&s.jsxs(ke,{type:"button",variant:"outline",onClick:bt,className:"flex items-center mx-auto",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Allocate to Show"]})]})]}),$==="history"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"bg-green-100 p-2 rounded-lg mr-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Movement History"})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-4",children:[s.jsxs("div",{className:"mb-4 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Equipment movement log"})]}),s.jsx(D5,{equipmentId:e})]})]})]})]})}),s.jsx("div",{className:"md:col-span-1",children:s.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden h-full",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Reference Image"]})}),s.jsx("div",{className:"p-4 flex flex-col items-center justify-center",children:be?s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"relative pb-4",children:[s.jsx("img",{src:I3(be.id,!0),alt:`${r.brand} ${r.model}`,className:"w-full h-auto object-contain rounded-md",onError:ae=>{console.error("Error loading thumbnail, falling back to original image"),ae.target.src=I3(be.id),ae.target.onerror=null}}),s.jsx("button",{type:"button",onClick:()=>_(!0),className:"absolute top-2 right-2 bg-white rounded-full p-1 shadow-md hover:bg-gray-100 transition-colors",title:"Change reference image",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),s.jsx("div",{className:"text-sm text-gray-500 text-center",children:be.file_name})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto mb-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"No reference image"}),s.jsxs("button",{type:"button",onClick:()=>_(!0),className:"mt-2 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Reference Image"]})]})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsx("div",{className:"md:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-slate-200 h-full",children:[s.jsx("div",{className:"p-4 border-b border-slate-200",children:s.jsxs("h2",{className:"text-lg font-semibold text-slate-800 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Quick Info Preview"]})}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Category"})]}),s.jsx("p",{className:"text-sm font-medium text-slate-800",children:r.category||"Not specified"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Type"})]}),s.jsx("p",{className:"text-sm font-medium text-slate-800",children:((Ge=($e=V==null?void 0:V.types)==null?void 0:$e.find(ae=>ae.id.toString()===r.type_id))==null?void 0:Ge.name)||"Not specified"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Status"})]}),s.jsx("div",{children:r.status&&s.jsx(js,{variant:nt(r.status),size:"md",children:r.status.charAt(0).toUpperCase()+r.status.slice(1).replace("-"," ")})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Quantity"})]}),s.jsxs("p",{className:"text-sm font-medium text-slate-800",children:[r.quantity||1," item",(r.quantity||1)!==1?"s":""]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Location"})]}),s.jsx("p",{className:"text-sm font-medium text-slate-800",children:r.location||"Not specified"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),s.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Serial Number"})]}),s.jsx("p",{className:"text-sm font-medium text-slate-800",children:r.serial_number})]})]})]})}),s.jsx("div",{className:"md:col-span-1",children:s.jsxs(qe,{className:"h-full",children:[s.jsx(qe.Header,{className:"bg-slate-50",children:s.jsxs(qe.Title,{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Metadata"]})}),s.jsx(qe.Body,{children:s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Created By"}),s.jsx("p",{className:"mt-1 text-sm text-slate-600",children:(me==null?void 0:me.created_by)||"Unknown"})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Created At"}),s.jsx("p",{className:"mt-1 text-sm text-slate-600",children:me!=null&&me.created_at?new Date(me.created_at).toLocaleString():"Unknown"})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-700",children:"Last Updated"}),s.jsx("p",{className:"mt-1 text-sm text-slate-600",children:me!=null&&me.updated_at?new Date(me.updated_at).toLocaleString():"Never"})]})]})]})})]})})]}),s.jsx(P2,{isOpen:b,onClose:()=>_(!1),equipmentId:e,existingImage:be}),s.jsx(B2,{equipmentId:parseInt(e),isOpen:E,onClose:()=>T(!1),onSuccess:qt}),s.jsx(M5,{isOpen:I,onClose:()=>k(!1),equipment:me,availabilityData:Q}),O&&s.jsx(U2,{showEquipment:O,showId:O.show_id,onClose:Te})]})},Vz=({onFileSelect:e,uploadProgress:n=0,existingFiles:t=[],onFileDelete:r,multiple:a=!1,maxFiles:o=5,maxFileSize:d=50*1024*1024})=>{const[m,v]=M.useState([]),[g,w]=M.useState({}),[b,_]=M.useState([]);M.useEffect(()=>{Object.values(g).forEach(F=>{F&&F.startsWith("blob:")&&URL.revokeObjectURL(F)});const L={};return m.forEach((F,W)=>{F.type.startsWith("image/")&&(L[`new-${W}`]=URL.createObjectURL(F))}),t.forEach(F=>{F.file_type==="image"&&(L[`existing-${F.id}`]=`/api/files/${F.id}`)}),w(L),()=>{Object.values(L).forEach(F=>{F&&F.startsWith("blob:")&&URL.revokeObjectURL(F)})}},[m,t]);const E=L=>{const F=[],W=[];return L.forEach(V=>{if(V.size>d){F.push(`${V.name} exceeds the maximum file size of ${Math.round(d/(1024*1024))}MB`);return}if(!["image/jpeg","image/png","audio/mpeg","application/pdf"].includes(V.type)){F.push(`${V.name} has an unsupported file type. Only JPEG, PNG, MP3, and PDF files are allowed.`);return}W.push(V)}),{validFiles:W,errors:F}},T=M.useCallback((L,F)=>{if(F&&F.length>0){const re=F.map(oe=>`${oe.file.name}: ${oe.errors.map(ee=>ee.message).join(", ")}`);_(re)}else _([]);const{validFiles:W,errors:V}=E(L);if(V.length>0&&_(re=>[...re,...V]),a&&m.length+W.length>o){_(oe=>[...oe,`You can only upload a maximum of ${o} files.`]);const re=o-m.length;if(re>0){const oe=W.slice(0,re);v(ee=>[...ee,...oe]),e(oe)}}else v(a?re=>[...re,...W]:W),e(W)},[e,m,a,o,d]),I=L=>{const F=[...m];F.splice(L,1),v(F),e(a?F:F.length>0?[F[0]]:[]),_([])},k=L=>{if(r){console.log(`FileUpload: Deleting file with ID ${L}`);try{r(L)}catch(F){console.error(`Error deleting file with ID ${L}:`,F)}}else console.warn(`FileUpload: No onFileDelete handler provided for file ID ${L}`)},{getRootProps:S,getInputProps:A,isDragActive:O,fileRejections:P}=Bu({onDrop:T,accept:{"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"audio/mpeg":[".mp3"],"application/pdf":[".pdf"]},maxFiles:a?o:1,multiple:a,maxSize:d}),$=L=>{switch(L){case"image/jpeg":case"image/png":case"image":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})});case"audio/mpeg":case"audio":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})});case"application/pdf":case"pdf":return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})});default:return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z",clipRule:"evenodd"})})}};return s.jsxs("div",{children:[s.jsxs("div",{...S(),className:`border-2 border-dashed rounded-md p-6 text-center cursor-pointer ${O?"border-primary-500 bg-primary-50":"border-slate-300"}`,children:[s.jsx("input",{...A()}),O?s.jsx("p",{className:"text-primary-500",children:"Drop the files here..."}):s.jsxs("div",{children:[s.jsx("p",{className:"mb-2",children:"Drag & drop files here, or click to select files"}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Accepted file types: JPEG, PNG, MP3, PDF (Max: ",o," files, ",Math.round(d/(1024*1024)),"MB each)"]})]})]}),b.length>0&&s.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"File validation errors:"}),s.jsx("ul",{className:"list-disc pl-5 text-xs text-red-700",children:b.map((L,F)=>s.jsx("li",{children:L},F))})]}),m.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-700 mb-2",children:"Files to upload:"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:m.map((L,F)=>s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 flex flex-col",children:[L.type.startsWith("image/")?s.jsx("div",{className:"h-32 bg-slate-100 rounded-md mb-2 overflow-hidden flex items-center justify-center",children:g[`new-${F}`]?s.jsx("img",{src:g[`new-${F}`],alt:L.name,className:"max-h-full max-w-full object-contain"}):s.jsx("div",{className:"animate-pulse bg-slate-200 w-full h-full"})}):s.jsx("div",{className:"h-32 bg-slate-100 rounded-md mb-2 flex items-center justify-center",children:s.jsx("div",{className:"text-4xl",children:$(L.type)})}),s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",title:L.name,children:L.name}),s.jsxs("p",{className:"text-xs text-slate-500",children:[(L.size/(1024*1024)).toFixed(2)," MB"]})]}),s.jsx("button",{type:"button",onClick:()=>I(F),className:"ml-2 text-red-600 hover:text-red-900 p-1 rounded-full hover:bg-red-50","aria-label":`Remove ${L.name}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]})]},F))})]}),t.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-700 mb-2",children:"Existing files:"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:t.map(L=>s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 flex flex-col",children:[L.file_type==="image"?s.jsx("div",{className:"h-32 bg-slate-100 rounded-md mb-2 overflow-hidden flex items-center justify-center",children:g[`existing-${L.id}`]?s.jsx("img",{src:g[`existing-${L.id}`],alt:L.file_name,className:"max-h-full max-w-full object-contain"}):s.jsx("div",{className:"animate-pulse bg-slate-200 w-full h-full"})}):L.file_type==="audio"?s.jsxs("div",{className:"h-32 bg-slate-100 rounded-md mb-2 flex flex-col items-center justify-center p-2",children:[s.jsx("div",{className:"text-4xl mb-2",children:$(L.file_type)}),s.jsxs("audio",{controls:!0,className:"w-full max-w-[200px]",children:[s.jsx("source",{src:`/api/files/${L.id}`,type:"audio/mpeg"}),"Your browser does not support the audio element."]})]}):s.jsx("div",{className:"h-32 bg-slate-100 rounded-md mb-2 flex items-center justify-center",children:s.jsx("div",{className:"text-4xl",children:$(L.file_type)})}),s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",title:L.file_name,children:L.file_name}),s.jsx("p",{className:"text-xs text-slate-500 capitalize",children:L.file_type})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("a",{href:`/api/files/${L.id}?download=true`,download:!0,className:"text-primary-600 hover:text-primary-800 p-1 rounded-full hover:bg-primary-50","aria-label":`Download ${L.file_name}`,onClick:F=>{F.stopPropagation(),console.log(`Downloading file: ${L.id}`)},children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})}),r&&s.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),console.log(`Deleting file: ${L.id}`),k(L.id)},className:"text-red-600 hover:text-red-900 p-1 rounded-full hover:bg-red-50","aria-label":`Delete ${L.file_name}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]})]},L.id))})]}),n>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-primary-600 h-2.5 rounded-full",style:{width:`${n}%`}})}),s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Uploading: ",n,"%"]})]})]})},$z=({formData:e,equipmentTypes:n,categoriesData:t,statusOptions:r,handleInputChange:a,handleFileChange:o,handleSubmit:d,handleCancel:m,isLoading:v,error:g,isEditing:w=!1,files:b=[],uploadProgress:_=0,existingFiles:E=[],handleFileDelete:T,handleSetReferenceImage:I,allocationOverride:k=null})=>{const[S,A]=M.useState(null),[O,P]=M.useState(null),{data:$}=ut(["locations"],wl,{staleTime:3e5});M.useEffect(()=>{if(E&&E.length>0&&e.reference_image_id){const W=E.find(V=>V.id.toString()===e.reference_image_id);if(W){A(W);return}}A(null)},[E,e.reference_image_id]);const L=W=>{P(W),a(W?{target:{name:"reference_image_id",value:"new"}}:{target:{name:"reference_image_id",value:""}})},F=W=>{A(null),a({target:{name:"reference_image_id",value:""}}),T&&T(W)};return s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200",children:s.jsxs("form",{onSubmit:d,children:[s.jsx("div",{className:"p-4 border-b border-slate-200",children:s.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Equipment Information"})}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(lr,{id:"category_id",name:"category_id",label:"Category",value:e.category_id||"",onChange:a,options:[{value:"",label:"Select Category"},...(t||[]).map(W=>({value:W.id.toString(),label:W.name}))]}),s.jsx(lr,{id:"type_id",name:"type_id",label:"Type",value:e.type_id||"",onChange:a,options:[{value:"",label:"Select Type"},...n.map(W=>({value:W.id.toString(),label:W.name}))],required:!0}),s.jsx(xt,{id:"brand",name:"brand",label:"Brand",value:e.brand,onChange:a,placeholder:"Enter brand",required:!0}),s.jsx(xt,{id:"model",name:"model",label:"Model",value:e.model,onChange:a,placeholder:"Enter model",required:!0}),s.jsx(BC,{id:"serial_number",name:"serial_number",label:"Serial Number",value:e.serial_number,onChange:a,placeholder:"Enter serial number (optional)",onScan:W=>{a({target:{name:"serial_number",value:W}})}}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(lr,{id:"location_id",name:"location_id",label:"Location",value:e.location_id?e.location_id.toString():"",onChange:a,options:[{value:"",label:"Select Location"},...(($==null?void 0:$.locations)||[]).map(W=>{let V=W.name;const re=[];return W.city&&re.push(W.city),W.region&&re.push(W.region),W.country&&re.push(W.country),re.length>0&&(V+=` (${re.join(", ")})`),{value:W.id.toString(),label:V}})],disabled:k==null?void 0:k.isLocationOverridden,className:k!=null&&k.isLocationOverridden?"opacity-50 cursor-not-allowed":""}),(k==null?void 0:k.isLocationOverridden)&&s.jsx("div",{className:"mt-1 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})}),"Location will be overridden by allocation settings"]})})]}),s.jsx(xt,{id:"location",name:"location",label:"Custom Location (if not in list)",value:e.location||"",onChange:a,placeholder:"Enter custom location",disabled:k==null?void 0:k.isLocationOverridden,className:k!=null&&k.isLocationOverridden?"opacity-50 cursor-not-allowed":""})]}),s.jsxs("div",{className:"relative",children:[s.jsx(lr,{id:"status",name:"status",label:"Status",value:e.status,onChange:a,options:r.map(W=>({value:W,label:W.charAt(0).toUpperCase()+W.slice(1).replace("-"," ")})),required:!0,disabled:k==null?void 0:k.isStatusOverridden,className:k!=null&&k.isStatusOverridden?"opacity-50 cursor-not-allowed":""}),(k==null?void 0:k.isStatusOverridden)&&s.jsx("div",{className:"mt-1 p-2 bg-amber-50 border border-amber-200 rounded text-xs text-amber-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})}),"Status will be set automatically based on allocation"]})})]}),s.jsxs("div",{className:"relative",children:[s.jsx(xt,{id:"quantity",name:"quantity",label:"Quantity",type:"number",min:"1",value:e.quantity||1,onChange:a,placeholder:"Enter quantity",required:!0,helpText:"Number of items (minimum: 1)",disabled:k==null?void 0:k.isQuantityOverridden,className:k!=null&&k.isQuantityOverridden?"opacity-50 cursor-not-allowed":""}),(k==null?void 0:k.isQuantityOverridden)&&s.jsx("div",{className:"mt-1 p-2 bg-green-50 border border-green-200 rounded text-xs text-green-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})}),"Quantity allocation will be managed by allocation settings"]})})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("textarea",{id:"description",name:"description",value:e.description,onChange:a,rows:"3",className:"w-full rounded-md border-slate-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Enter description"})]}),s.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg",children:[s.jsxs("h3",{className:"text-base font-semibold text-slate-800 mb-2 flex items-center",children:[s.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg mr-2",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),"Reference Image"]}),s.jsxs("p",{className:"text-sm text-slate-600 mb-3",children:["Upload a ",s.jsx("strong",{children:"single reference image"})," that best represents this equipment."]}),s.jsx(L2,{onImageSelect:L,existingImage:S,onImageDelete:F})]}),s.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-slate-50 to-gray-50 border border-slate-200 rounded-lg",children:[s.jsxs("h3",{className:"text-base font-semibold text-slate-800 mb-2 flex items-center",children:[s.jsx("div",{className:"p-1.5 bg-slate-100 rounded-lg mr-2",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),"Documents & Attachments"]}),s.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Upload additional documents and images (manuals, invoices, photos, etc.)."}),s.jsx(Vz,{onFileSelect:o,uploadProgress:_,existingFiles:E,onFileDelete:T,multiple:!0,maxFiles:5})]})]}),s.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:"text-xs text-slate-600",children:s.jsxs("span",{className:"flex items-center",children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Required fields marked with *  Use Create Equipment button above to save"]})})})})]})})};$z.propTypes={formData:ce.object.isRequired,equipmentTypes:ce.array.isRequired,categoriesData:ce.array,statusOptions:ce.array.isRequired,locationsData:ce.object,handleInputChange:ce.func.isRequired,handleFileChange:ce.func.isRequired,handleSubmit:ce.func.isRequired,handleCancel:ce.func.isRequired,isLoading:ce.bool,error:ce.string,isEditing:ce.bool,files:ce.array,uploadProgress:ce.number,existingFiles:ce.array,handleFileDelete:ce.func,handleSetReferenceImage:ce.func,allocationOverride:ce.object};const Yz=()=>{const[e,n]=M.useState({isMobile:!1,isTablet:!1,isDesktop:!1,screenWidth:0,screenHeight:0,userAgent:"",touchSupport:!1,orientation:"portrait"});return M.useEffect(()=>{const t=()=>{const a=navigator.userAgent||navigator.vendor||window.opera,o=window.innerWidth,d=window.innerHeight,m=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i,/Mobile/i],v=[/iPad/i,/Android(?=.*Tablet)|Android(?=.*Tab)/i,/Tablet/i],g=m.some(A=>A.test(a)),w=v.some(A=>A.test(a)),b=o<=768,_=o>768&&o<=1024,E="ontouchstart"in window||navigator.maxTouchPoints>0,T=o>d?"landscape":"portrait";let I=!1,k=!1,S=!1;w||_&&E?k=!0:g||b&&E?I=!0:S=!0,(/iPad/i.test(a)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&(I=!1,k=!0,S=!1),n({isMobile:I,isTablet:k,isDesktop:S,screenWidth:o,screenHeight:d,userAgent:a,touchSupport:E,orientation:T})};t();const r=()=>{t()};return window.addEventListener("resize",r),window.addEventListener("orientationchange",r),()=>{window.removeEventListener("resize",r),window.removeEventListener("orientationchange",r)}},[]),e},Qz=ge.lazy(()=>$l(()=>import("./NewEquipmentModern-4c1f6fef.js"),["assets/NewEquipmentModern-4c1f6fef.js","assets/pdf-excel-b0340315.js"])),Gz=ge.lazy(()=>$l(()=>import("./NewEquipmentMobile-901b0305.js"),["assets/NewEquipmentMobile-901b0305.js","assets/pdf-excel-b0340315.js"])),Xz=()=>{const{isMobile:e,isTablet:n,screenWidth:t,touchSupport:r}=Yz(),a=()=>s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading equipment form..."})]})});ge.useEffect(()=>{console.log(" Device Detection:",{isMobile:e,isTablet:n,screenWidth:t,touchSupport:r,userAgent:navigator.userAgent,selectedComponent:e?"Mobile":"Desktop"})},[e,n,t,r]);const d=(()=>!!(e||t<=768&&r||t<=480))();return s.jsxs("div",{className:"min-h-screen",children:[!1,s.jsx(M.Suspense,{fallback:s.jsx(a,{}),children:d?s.jsx(Gz,{}):s.jsx(Qz,{})})]})},Kz=()=>{const{isAdmin:e,getUsers:n,register:t,impersonateUser:r,user:a}=dr(),o=pn(),[d,m]=M.useState({username:"",password:"",role:"basic"}),[v,g]=M.useState(!1),[w,b]=M.useState(!1),[_,E]=M.useState(!1),[T,I]=M.useState(!1),[k,S]=M.useState(null),[A,O]=M.useState(!1),[P,$]=M.useState({}),[L,F]=M.useState({newPassword:"",confirmPassword:""}),[W,V]=M.useState({username:"",role:"basic"}),{data:re,isLoading:oe,isError:ee,error:he,refetch:ve}=ut({queryKey:["users"],queryFn:n,enabled:e()}),ne=_t({mutationFn:t,onSuccess:()=>{o.invalidateQueries(["users"]),g(!1),m({username:"",password:"",role:"basic"}),Qe.success("User created successfully")},onError:Ne=>{var Ze,be;Qe.error(((be=(Ze=Ne.response)==null?void 0:Ze.data)==null?void 0:be.message)||"Failed to create user")}}),Q=_t({mutationFn:async({userId:Ne,userData:Ze})=>(await ze.put(`/api/auth/users/${Ne}`,Ze)).data,onSuccess:()=>{o.invalidateQueries(["users"]),b(!1),S(null),Qe.success("User updated successfully")},onError:Ne=>{var Ze,be;Qe.error(((be=(Ze=Ne.response)==null?void 0:Ze.data)==null?void 0:be.message)||"Failed to update user")}}),me=_t({mutationFn:async({userId:Ne,newPassword:Ze})=>(await ze.post(`/api/auth/users/${Ne}/reset-password-direct`,{newPassword:Ze})).data,onSuccess:Ne=>{o.invalidateQueries(["users"]),E(!1),S(null),F({newPassword:"",confirmPassword:""}),Ne.verification?Qe.success(`Password reset successfully and verified for ${Ne.user.username}`):Qe.warning(`Password reset completed but verification failed for ${Ne.user.username}`)},onError:Ne=>{var Ze,be;Qe.error(((be=(Ze=Ne.response)==null?void 0:Ze.data)==null?void 0:be.message)||"Failed to reset password")}}),fe=_t({mutationFn:async Ne=>(await ze.delete(`/api/auth/users/${Ne}`)).data,onSuccess:()=>{o.invalidateQueries(["users"]),I(!1),S(null),Qe.success("User deleted successfully")},onError:Ne=>{var Ze,be;Qe.error(((be=(Ze=Ne.response)==null?void 0:Ze.data)==null?void 0:be.message)||"Failed to delete user")}}),Ie=Ne=>{const{name:Ze,value:be}=Ne.target;m(De=>({...De,[Ze]:be})),P[Ze]&&$(De=>({...De,[Ze]:""}))},ue=Ne=>{const{name:Ze,value:be}=Ne.target;V(De=>({...De,[Ze]:be})),P[Ze]&&$(De=>({...De,[Ze]:""}))},Ye=()=>{const Ne={};return d.username.trim()||(Ne.username="Username is required"),d.password.trim()?d.password.length<6&&(Ne.password="Password must be at least 6 characters"):Ne.password="Password is required",$(Ne),Object.keys(Ne).length===0},we=()=>{const Ne={};return W.username.trim()||(Ne.username="Username is required"),$(Ne),Object.keys(Ne).length===0},Ve=()=>{const Ne={};return L.newPassword.trim()?L.newPassword.length<6&&(Ne.newPassword="Password must be at least 6 characters"):Ne.newPassword="New password is required",L.newPassword!==L.confirmPassword&&(Ne.confirmPassword="Passwords do not match"),$(Ne),Object.keys(Ne).length===0},Be=Ne=>{Ne.preventDefault(),Ye()&&ne.mutate(d)},ct=Ne=>{Ne.preventDefault(),we()&&Q.mutate({userId:k.id,userData:W})},Ae=Ne=>{Ne.preventDefault(),Ve()&&me.mutate({userId:k.id,newPassword:L.newPassword})},Se=()=>{k&&fe.mutate(k.id)},nt=async()=>{if(k)try{await r(k.id),O(!1),Qe.info(`You are now impersonating ${k.username}`)}catch(Ne){Qe.error("Failed to impersonate user"),console.error("Failed to impersonate user:",Ne)}},qt=Ne=>{S(Ne),V({username:Ne.username,role:Ne.role}),$({}),b(!0)},bt=Ne=>{S(Ne),F({newPassword:"",confirmPassword:""}),$({}),E(!0)},Pt=Ne=>{S(Ne),I(!0)},Tt=Ne=>new Date(Ne).toLocaleString(),Te=Ne=>{switch(Ne){case"admin":return"bg-red-100 text-red-800";case"advanced":return"bg-blue-100 text-blue-800";case"basic":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return e()?s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-slate-200 overflow-hidden mb-6",children:[s.jsxs("div",{className:"p-4 border-b border-slate-200 flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg font-medium text-slate-800",children:"User Management"}),s.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Create User"]})]}),oe?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-600"})}):ee?s.jsxs("div",{className:"p-4 text-center",children:[s.jsx("p",{className:"text-red-500 mb-2",children:(he==null?void 0:he.message)||"Failed to load users"}),s.jsx("button",{onClick:ve,className:"px-4 py-2 bg-slate-200 rounded-md hover:bg-slate-300",children:"Retry"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 text-left",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Username"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Role"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Created At"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:re==null?void 0:re.map(Ne=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:[Ne.username,Ne.id===a.id&&s.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-800",children:"You"})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:s.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Te(Ne.role)}`,children:Ne.role})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:Tt(Ne.created_at)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>qt(Ne),className:"text-blue-600 hover:text-blue-900","aria-label":`Edit ${Ne.username}`,children:"Edit"}),s.jsx("button",{onClick:()=>bt(Ne),className:"text-green-600 hover:text-green-900","aria-label":`Reset password for ${Ne.username}`,children:"Reset Password"}),Ne.id!==a.id&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>{S(Ne),O(!0)},className:"text-primary-600 hover:text-primary-900","aria-label":`Impersonate ${Ne.username}`,children:"Impersonate"}),s.jsx("button",{onClick:()=>Pt(Ne),className:"text-red-600 hover:text-red-900","aria-label":`Delete ${Ne.username}`,children:"Delete"})]})]})})]},Ne.id))})]})}),v&&s.jsx("div",{className:"fixed inset-0 bg-slate-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-4",children:"Create New User"}),s.jsxs("form",{onSubmit:Be,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-slate-700 mb-1",children:"Username"}),s.jsx("input",{type:"text",id:"username",name:"username",value:d.username,onChange:Ie,className:`w-full px-3 py-2 border ${P.username?"border-red-500":"border-slate-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500`}),P.username&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:P.username})]}),s.jsx(xi,{id:"password",label:"Password",value:d.password,onChange:Ne=>m(Ze=>({...Ze,password:Ne.target.value})),placeholder:"Enter password (min 6 characters)",error:P.password,required:!0}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-slate-700 mb-1",children:"Role"}),s.jsxs("select",{id:"role",name:"role",value:d.role,onChange:Ie,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"basic",children:"Basic"}),s.jsx("option",{value:"advanced",children:"Advanced"}),s.jsx("option",{value:"admin",children:"Admin"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-md hover:bg-slate-300",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",disabled:ne.isLoading,children:ne.isLoading?"Creating...":"Create User"})]})]})]})}),w&&k&&s.jsx("div",{className:"fixed inset-0 bg-slate-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-4",children:"Edit User"}),s.jsxs("form",{onSubmit:ct,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"edit-username",className:"block text-sm font-medium text-slate-700 mb-1",children:"Username"}),s.jsx("input",{type:"text",id:"edit-username",name:"username",value:W.username,onChange:ue,className:`w-full px-3 py-2 border ${P.username?"border-red-500":"border-slate-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500`}),P.username&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:P.username})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"edit-role",className:"block text-sm font-medium text-slate-700 mb-1",children:"Role"}),s.jsxs("select",{id:"edit-role",name:"role",value:W.role,onChange:ue,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"basic",children:"Basic"}),s.jsx("option",{value:"advanced",children:"Advanced"}),s.jsx("option",{value:"admin",children:"Admin"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-md hover:bg-slate-300",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",disabled:Q.isLoading,children:Q.isLoading?"Updating...":"Update User"})]})]})]})}),_&&k&&s.jsx("div",{className:"fixed inset-0 bg-slate-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[s.jsxs("h3",{className:"text-lg font-medium text-slate-900 mb-4",children:["Reset Password for ",k.username]}),s.jsxs("form",{onSubmit:Ae,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(xi,{id:"new-password",label:"New Password",value:L.newPassword,onChange:Ne=>F(Ze=>({...Ze,newPassword:Ne.target.value})),placeholder:"Enter new password (min 6 characters)",error:P.newPassword,required:!0}),s.jsx(xi,{id:"confirm-password",label:"Confirm Password",value:L.confirmPassword,onChange:Ne=>F(Ze=>({...Ze,confirmPassword:Ne.target.value})),placeholder:"Confirm new password",error:P.confirmPassword,required:!0})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-md hover:bg-slate-300",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",disabled:me.isLoading,children:me.isLoading?"Resetting...":"Reset Password"})]})]})]})}),T&&k&&s.jsx("div",{className:"fixed inset-0 bg-slate-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-4",children:"Delete User"}),s.jsxs("p",{className:"text-slate-500 mb-4",children:["Are you sure you want to delete user ",s.jsx("strong",{children:k.username}),"? This action cannot be undone and will permanently remove the user from the system."]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-md hover:bg-slate-300",children:"Cancel"}),s.jsx("button",{onClick:Se,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",disabled:fe.isLoading,children:fe.isLoading?"Deleting...":"Delete User"})]})]})}),A&&k&&s.jsx("div",{className:"fixed inset-0 bg-slate-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-4",children:"Confirm Impersonation"}),s.jsxs("p",{className:"text-slate-500 mb-4",children:["You are about to impersonate ",s.jsx("strong",{children:k.username})," with role ",s.jsx("strong",{children:k.role}),". You will have the same permissions as this user until you end the impersonation."]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-md hover:bg-slate-300",children:"Cancel"}),s.jsx("button",{onClick:nt,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Impersonate"})]})]})})]}):null},Zz=()=>{const[e,n]=M.useState({userId:"",newPassword:"",testPassword:""}),[t,r]=M.useState(null),[a,o]=M.useState(!1),[d,m]=M.useState(null),v=E=>{const{name:T,value:I}=E.target;n(k=>({...k,[T]:I}))},g=async()=>{var E,T,I,k;if(!e.userId||!e.newPassword){Qe.error("Please fill in User ID and New Password");return}o(!0),r(null);try{console.log(" Testing password reset...");const S=await ze.put(`/api/auth/users/${e.userId}/password`,{newPassword:e.newPassword});console.log(" Reset response:",S.data);const O=(await ze.get("/api/auth/users")).data.users.find(P=>P.id===parseInt(e.userId));if(!O)throw new Error("User not found");r({resetSuccess:!0,resetMessage:S.data.message,user:O,timestamp:new Date().toISOString()}),Qe.success("Password reset test completed successfully")}catch(S){console.error(" Password reset test failed:",S),r({resetSuccess:!1,error:((T=(E=S.response)==null?void 0:E.data)==null?void 0:T.message)||S.message,timestamp:new Date().toISOString()}),Qe.error("Password reset test failed: "+(((k=(I=S.response)==null?void 0:I.data)==null?void 0:k.message)||S.message))}finally{o(!1)}},w=async()=>{var E,T;if(!e.testPassword){Qe.error("Please enter a password to test login");return}if(!(t!=null&&t.user)){Qe.error("Please run password reset test first");return}o(!0);try{console.log(" Testing login with new password...");const I=await ze.post("/api/auth/login",{username:t.user.username,password:e.testPassword});console.log(" Login response:",I.data),r(k=>({...k,loginSuccess:!0,loginMessage:"Login successful",loginTimestamp:new Date().toISOString()})),Qe.success("Login test successful")}catch(I){console.error(" Login test failed:",I),r(k=>{var S,A;return{...k,loginSuccess:!1,loginError:((A=(S=I.response)==null?void 0:S.data)==null?void 0:A.message)||I.message,loginTimestamp:new Date().toISOString()}}),Qe.error("Login test failed: "+(((T=(E=I.response)==null?void 0:E.data)==null?void 0:T.message)||I.message))}finally{o(!1)}},b=async()=>{var E,T,I,k;o(!0),m(null);try{console.log(" Running password hash fix...");const S=await ze.post("/api/auth/fix-passwords");console.log(" Fix response:",S.data),m({success:!0,message:S.data.message,timestamp:S.data.timestamp}),Qe.success("Password hash fix completed successfully")}catch(S){console.error(" Password fix failed:",S),m({success:!1,error:((T=(E=S.response)==null?void 0:E.data)==null?void 0:T.message)||S.message,timestamp:new Date().toISOString()}),Qe.error("Password fix failed: "+(((k=(I=S.response)==null?void 0:I.data)==null?void 0:k.message)||S.message))}finally{o(!1)}},_=async()=>{var E,T,I,k;if(!e.userId||!e.newPassword){Qe.error("Please fill in User ID and New Password");return}o(!0),r(null);try{console.log(" Testing DIRECT password reset...");const S=await ze.post(`/api/auth/users/${e.userId}/reset-password-direct`,{newPassword:e.newPassword});console.log(" Direct reset response:",S.data),r({resetSuccess:!0,resetMessage:S.data.message,user:S.data.user,verification:S.data.verification,testPassword:S.data.testPassword,timestamp:new Date().toISOString(),method:"DIRECT"}),Qe.success("Direct password reset completed successfully")}catch(S){console.error(" Direct password reset failed:",S),r({resetSuccess:!1,error:((T=(E=S.response)==null?void 0:E.data)==null?void 0:T.message)||S.message,timestamp:new Date().toISOString(),method:"DIRECT"}),Qe.error("Direct password reset failed: "+(((k=(I=S.response)==null?void 0:I.data)==null?void 0:k.message)||S.message))}finally{o(!1)}};return s.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-slate-800",children:"Password Reset Test Tool"}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"User ID to Test"}),s.jsx("input",{type:"number",name:"userId",value:e.userId,onChange:v,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter user ID (e.g., 1, 2, 3)"})]}),s.jsx(xi,{id:"newPassword",label:"New Password",value:e.newPassword,onChange:E=>n(T=>({...T,newPassword:E.target.value})),placeholder:"Enter new password (min 6 chars)"}),s.jsx(xi,{id:"testPassword",label:"Test Login Password",value:e.testPassword,onChange:E=>n(T=>({...T,testPassword:E.target.value})),placeholder:"Password to test login with"})]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-red-800 mb-2",children:" Fix Unhashed Passwords"}),s.jsx("p",{className:"text-sm text-red-700 mb-3",children:"If users can't login after password reset, their passwords might be stored as plain text. Click this button to automatically hash all plain text passwords in the database."}),s.jsx("button",{onClick:b,disabled:a,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:a?"Fixing...":"Fix Unhashed Passwords"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("button",{onClick:g,disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:a?"Testing...":"Test Password Reset"}),s.jsx("button",{onClick:_,disabled:a,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50",children:a?"Testing...":"Direct Password Reset"}),s.jsx("button",{onClick:w,disabled:a||!(t!=null&&t.user),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:a?"Testing...":"Test Login"})]}),s.jsxs("div",{className:"text-sm text-slate-600",children:[s.jsx("strong",{children:"Direct Password Reset:"})," Bypasses hooks and sets password directly (recommended for troubleshooting)"]})]})]}),d&&s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Password Fix Results"}),s.jsxs("div",{children:[s.jsx("strong",{children:"Password Hash Fix:"}),s.jsx("span",{className:`ml-2 px-2 py-1 rounded text-sm ${d.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:d.success?"SUCCESS":"FAILED"}),d.message&&s.jsx("div",{className:"text-sm text-slate-600 mt-1",children:d.message}),d.error&&s.jsx("div",{className:"text-sm text-red-600 mt-1",children:d.error}),s.jsxs("div",{className:"text-xs text-slate-500 mt-2",children:["Fix performed at: ",d.timestamp]})]})]}),t&&s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Test Results"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("strong",{children:["Password Reset (",t.method||"NORMAL","):"]}),s.jsx("span",{className:`ml-2 px-2 py-1 rounded text-sm ${t.resetSuccess?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.resetSuccess?"SUCCESS":"FAILED"}),t.resetMessage&&s.jsx("div",{className:"text-sm text-slate-600 mt-1",children:t.resetMessage}),t.error&&s.jsx("div",{className:"text-sm text-red-600 mt-1",children:t.error}),t.verification!==void 0&&s.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:["Password Verification: ",s.jsx("span",{className:t.verification?"text-green-600":"text-red-600",children:t.verification?"PASS":"FAIL"})]}),t.testPassword&&s.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['Test Password: "',t.testPassword,'"']})]}),t.user&&s.jsxs("div",{children:[s.jsx("strong",{children:"User Info:"}),s.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:["Username: ",t.user.username,", Role: ",t.user.role]})]}),t.loginTimestamp&&s.jsxs("div",{children:[s.jsx("strong",{children:"Login Test:"}),s.jsx("span",{className:`ml-2 px-2 py-1 rounded text-sm ${t.loginSuccess?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.loginSuccess?"SUCCESS":"FAILED"}),t.loginMessage&&s.jsx("div",{className:"text-sm text-slate-600 mt-1",children:t.loginMessage}),t.loginError&&s.jsx("div",{className:"text-sm text-red-600 mt-1",children:t.loginError})]}),s.jsxs("div",{className:"text-xs text-slate-500",children:["Test performed at: ",t.timestamp]})]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Instructions:"}),s.jsxs("ol",{className:"text-sm text-yellow-700 space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"If users can't login:"}),' Click "Fix Unhashed Passwords" first']}),s.jsx("li",{children:"1. Enter a User ID (check Admin Dashboard for available users)"}),s.jsx("li",{children:"2. Enter a new password (minimum 6 characters)"}),s.jsx("li",{children:'3. Click "Test Password Reset" to reset the password'}),s.jsx("li",{children:'4. Enter the same password in "Test Login Password"'}),s.jsx("li",{children:'5. Click "Test Login" to verify the new password works'})]})]})]})},Jz=()=>{const{isAdmin:e}=dr(),n=us(),[t,r]=M.useState("users");return M.useEffect(()=>{e()||n("/")},[e,n]),e()?s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx(up,{position:"top-right",autoClose:3e3}),s.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Admin Dashboard"}),s.jsx("div",{className:"border-b border-slate-200 mb-6",children:s.jsxs("nav",{className:"flex space-x-8",children:[s.jsx("button",{onClick:()=>r("users"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="users"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"User Management"}),s.jsx("button",{onClick:()=>r("test"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="test"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Password Reset Test"})]})}),s.jsxs("div",{className:"space-y-6",children:[t==="users"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-4",children:"User Management"}),s.jsx("p",{className:"text-slate-600 mb-6",children:"Manage user accounts, reset passwords, and control access permissions."}),s.jsx(Kz,{})]}),t==="test"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Password Reset Test"}),s.jsx("p",{className:"text-slate-600 mb-6",children:"Test password reset functionality to diagnose any issues."}),s.jsx(Zz,{})]})]})]}):s.jsx("div",{className:"text-center py-10",children:"Access denied. Admin privileges required."})},eq=()=>{var P,$;const[e,n]=M.useState(1),[t]=M.useState(20),[r,a]=M.useState("created_at"),[o,d]=M.useState("desc"),[m,v]=M.useState({equipmentId:"",actionType:"",search:"",type:"",status:"",location_id:""}),{data:g}=ut({queryKey:["equipment-types"],queryFn:ki,staleTime:3e5}),{data:w}=ut(["locations"],wl),{data:b,isLoading:_,isError:E,error:T}=ut(["allEquipmentLogs",e,t,m,r,o],()=>Mz({page:e,limit:t,equipmentId:m.equipmentId||void 0,actionType:m.actionType||void 0,search:m.search||void 0,type:m.type||void 0,status:m.status||void 0,location_id:m.location_id||void 0,sortBy:r,sortOrder:o}),{keepPreviousData:!0}),I=L=>{switch(L){case"created":return"badge-success";case"updated":return"badge-info";case"deleted":return"badge-danger";case"status_change":return"badge-warning";case"location_change":return"badge-primary";default:return"badge-secondary"}},k=L=>L.split("_").map(F=>F.charAt(0).toUpperCase()+F.slice(1)).join(" "),S=L=>{const{name:F,value:W}=L.target;v(V=>({...V,[F]:W})),n(1)},A=L=>{L.preventDefault()},O=L=>{n(L)};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Equipment Movement Logs"})}),s.jsx("div",{className:"card",children:s.jsxs("form",{onSubmit:A,className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"search",className:"label",children:"Search"}),s.jsxs("div",{className:"input-group",children:[s.jsx(u2,{className:"input-icon w-4 h-4"}),s.jsx("input",{type:"text",id:"search",name:"search",value:m.search,onChange:S,placeholder:"Search logs...",className:"input input-with-icon"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"type",className:"label",children:"Equipment Type"}),s.jsxs("select",{id:"type",name:"type",value:m.type,onChange:S,className:"input",children:[s.jsx("option",{value:"",children:"All Types"}),g!=null&&g.types&&g.types.length>0?g.types.map(L=>s.jsx("option",{value:L.name.toLowerCase(),children:L.name},L.id)):s.jsx("option",{value:"",disabled:!0,children:"Loading types..."})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"status",className:"label",children:"Equipment Status"}),s.jsxs("select",{id:"status",name:"status",value:m.status,onChange:S,className:"input",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"available",children:"Available"}),s.jsx("option",{value:"in-use",children:"In Use"}),s.jsx("option",{value:"maintenance",children:"Maintenance"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"location_id",className:"label",children:"Location"}),s.jsxs("select",{id:"location_id",name:"location_id",value:m.location_id,onChange:S,className:"input",children:[s.jsx("option",{value:"",children:"All Locations"}),(P=w==null?void 0:w.locations)==null?void 0:P.map(L=>s.jsx("option",{value:L.id.toString(),children:L.name},L.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"actionType",className:"label",children:"Action Type"}),s.jsxs("select",{id:"actionType",name:"actionType",value:m.actionType,onChange:S,className:"input",children:[s.jsx("option",{value:"",children:"All Actions"}),s.jsx("option",{value:"created",children:"Created"}),s.jsx("option",{value:"updated",children:"Updated"}),s.jsx("option",{value:"deleted",children:"Deleted"}),s.jsx("option",{value:"status_change",children:"Status Change"}),s.jsx("option",{value:"location_change",children:"Location Change"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("button",{type:"submit",className:"btn btn-primary w-full",children:[s.jsx(h2,{className:"w-4 h-4"}),s.jsx("span",{children:"Apply Filters"})]})})]})}),s.jsxs("div",{className:"card",children:[_?s.jsx("div",{className:"text-center py-10",children:"Loading..."}):E?s.jsxs("div",{className:"text-center py-10 text-red-600",children:["Error: ",T.message||"Failed to load equipment logs"]}):($=b==null?void 0:b.logs)!=null&&$.length?s.jsx("div",{className:"table-container",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{className:"table-header",children:s.jsxs("tr",{children:[s.jsx("th",{className:"table-header-cell",children:"Date"}),s.jsx("th",{className:"table-header-cell",children:"Equipment"}),s.jsx("th",{className:"table-header-cell",children:"User"}),s.jsx("th",{className:"table-header-cell",children:"Action"}),s.jsx("th",{className:"table-header-cell",children:"Details"})]})}),s.jsx("tbody",{className:"table-body",children:b.logs.map(L=>{var F,W;return s.jsxs("tr",{className:"table-row",children:[s.jsx("td",{className:"table-cell whitespace-nowrap",children:bu(new Date(L.created_at),"MMM d, yyyy h:mm a")}),s.jsx("td",{className:"table-cell",children:L.equipment?s.jsxs(qn,{to:`/equipment/${L.equipment.id}`,className:"text-primary-600 hover:text-primary-800",children:[L.equipment.brand," ",L.equipment.model,s.jsxs("span",{className:"text-xs text-slate-500 block",children:["SN: ",L.equipment.serial_number]})]}):s.jsx("span",{className:"text-slate-400",children:"Deleted equipment"})}),s.jsxs("td",{className:"table-cell",children:[((F=L.user)==null?void 0:F.username)||"Unknown",s.jsx("span",{className:"text-xs text-slate-500 block",children:((W=L.user)==null?void 0:W.role)||""})]}),s.jsx("td",{className:"table-cell",children:s.jsx("span",{className:`badge ${I(L.action_type)}`,children:k(L.action_type)})}),s.jsxs("td",{className:"table-cell",children:[L.action_type==="status_change"&&s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"font-medium",children:"Status:"})," ",s.jsx("span",{className:"badge badge-outline-secondary",children:L.previous_status})," ",s.jsx("span",{className:"text-slate-400",children:""})," ",s.jsx("span",{className:"badge badge-outline-primary",children:L.new_status})]}),L.action_type==="location_change"&&s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"font-medium",children:"Location:"})," ",s.jsx("span",{className:"badge badge-outline-secondary",children:L.previous_location||"None"})," ",s.jsx("span",{className:"text-slate-400",children:""})," ",s.jsx("span",{className:"badge badge-outline-primary",children:L.new_location||"None"})]}),L.details&&s.jsx("div",{className:"text-sm mt-1",children:L.details})]})]},L.id)})})]})}):s.jsx("div",{className:"text-center py-10 text-slate-500",children:m.search||m.equipmentId||m.actionType?"No logs found matching your search criteria.":"No logs found."}),(b==null?void 0:b.totalPages)>1&&s.jsxs("div",{className:"flex justify-between items-center p-4 border-t border-slate-200",children:[s.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",s.jsx("span",{className:"font-medium text-slate-800",children:(e-1)*t+1})," to"," ",s.jsx("span",{className:"font-medium text-slate-800",children:Math.min(e*t,b.total)})," of"," ",s.jsx("span",{className:"font-medium text-slate-800",children:b.total})," logs"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>O(e-1),disabled:e===1,className:`btn ${e===1?"bg-slate-50 text-slate-300 cursor-not-allowed":"btn-outline"}`,children:"Previous"}),s.jsx("button",{onClick:()=>O(e+1),disabled:e===b.totalPages,className:`btn ${e===b.totalPages?"bg-slate-50 text-slate-300 cursor-not-allowed":"btn-outline"}`,children:"Next"})]})]})]})]})},tq=()=>{const e=us(),n=pn(),{data:t,isLoading:r,error:a}=ut({queryKey:["shows"],queryFn:()=>Lz(),onError:Q=>{ot.error(`Failed to load shows: ${Q.message}`)}}),o=(t==null?void 0:t.shows)||[],{data:d,isLoading:m}=ut({queryKey:["locations"],queryFn:()=>wl(),onError:Q=>{console.error("Failed to load locations:",Q)}}),v=(d==null?void 0:d.locations)||[],g=_t({mutationFn:Pz,onSuccess:()=>{n.invalidateQueries(["shows"]),ot.success("Show created successfully"),I(!1),V({name:"",date:"",venue:"",director:"",description:""})},onError:Q=>{ot.error(`Failed to create show: ${Q.message}`)}}),w=_t({mutationFn:({id:Q,...me})=>O5(Q,me),onSuccess:()=>{n.invalidateQueries(["shows"]),ot.success("Show updated successfully"),$(!1),F(null)},onError:Q=>{ot.error(`Failed to update show: ${Q.message}`)}}),b=_t({mutationFn:L5,onSuccess:()=>{n.invalidateQueries(["shows"]),ot.success("Show deleted successfully")},onError:Q=>{ot.error(`Failed to delete show: ${Q.message}`)}}),[_,E]=M.useState("list"),[T,I]=M.useState(!1),[k,S]=M.useState(null),[A,O]=M.useState(!1),[P,$]=M.useState(!1),[L,F]=M.useState(null),[W,V]=M.useState({name:"",date:"",venue:"",director:"",description:""}),re=Q=>{switch(Q){case"planning":return"bg-blue-100 text-blue-800";case"in-progress":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},oe=()=>{W.name&&W.date&&g.mutate(W)},ee=Q=>{e(`/show/${Q.id}`)},he=Q=>{F({...Q}),$(!0)},ve=()=>{L.name&&L.date&&w.mutate(L)},ne=Q=>{window.confirm("Are you sure you want to delete this show?")&&b.mutate(Q)};return r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600",children:"Loading shows..."})]})}):a?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 mb-4",children:" Error loading shows"}),s.jsx("p",{className:"text-slate-600 mb-4",children:a.message}),s.jsx(ke,{onClick:()=>n.invalidateQueries(["shows"]),children:"Retry"})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center space-x-3",children:[s.jsx(Mx,{className:"w-8 h-8 text-primary-600"}),s.jsx("span",{children:"Production Lists"})]}),s.jsx("p",{className:"text-slate-600 mt-1",children:"Manage theater productions and their equipment allocations"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center bg-slate-100 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>E("list"),className:`p-2 rounded-md transition-colors ${_==="list"?"bg-white text-primary-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,title:"List View",children:s.jsx(Wc,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>E("card"),className:`p-2 rounded-md transition-colors ${_==="card"?"bg-white text-primary-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,title:"Card View",children:s.jsx(Hc,{className:"w-4 h-4"})})]}),s.jsxs(ke,{onClick:()=>I(!0),className:"flex items-center space-x-2",children:[s.jsx(fp,{className:"w-4 h-4"}),s.jsx("span",{children:"Create New Production"})]})]})]}),o.length===0?s.jsx(qe,{className:"text-center py-12",children:s.jsxs(qe.Body,{children:[s.jsx(Mx,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-2",children:"No productions yet"}),s.jsx("p",{className:"text-slate-600 mb-4",children:"Create your first production to start managing equipment allocations"}),s.jsx(ke,{onClick:()=>I(!0),children:"Create New Production"})]})}):_==="list"?s.jsx(qe,{children:s.jsx(qe.Body,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table-wide",children:[s.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Production"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Date"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Venue"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Director"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Status"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Equipment"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:o.map(Q=>s.jsxs("tr",{className:"hover:bg-slate-50 cursor-pointer",onClick:()=>ee(Q),children:[s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-800",children:Q.name}),Q.description&&s.jsx("div",{className:"text-sm text-slate-500 truncate max-w-xs",children:Q.description})]})}),s.jsx("td",{className:"py-3 px-4 text-slate-600",children:new Date(Q.date).toLocaleDateString()}),s.jsx("td",{className:"py-3 px-4 text-slate-600",children:Q.venue}),s.jsx("td",{className:"py-3 px-4 text-slate-600",children:Q.director}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${re(Q.status)}`,children:Q.status})}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("span",{className:"font-medium text-primary-600",children:Q.equipmentCount})}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex space-x-1",onClick:me=>me.stopPropagation(),children:[s.jsx(ke,{size:"sm",variant:"outline",onClick:()=>ee(Q),className:"p-1",title:"View",children:s.jsx(ic,{className:"w-4 h-4"})}),s.jsx(ke,{size:"sm",variant:"outline",onClick:()=>he(Q),className:"p-1",title:"Edit",children:s.jsx(fa,{className:"w-4 h-4"})}),s.jsx(ke,{size:"sm",onClick:()=>e(`/show/${Q.id}`),className:"p-1",title:"View Details",children:s.jsx(ic,{className:"w-4 h-4"})}),s.jsx(ke,{size:"sm",variant:"outline",onClick:()=>ne(Q.id),className:"p-1 text-red-600 hover:text-red-700",title:"Delete",children:s.jsx(Cc,{className:"w-4 h-4"})})]})})]},Q.id))})]})})})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(Q=>s.jsxs(qe,{className:"hover:shadow-lg transition-shadow",children:[s.jsx(qe.Header,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:Q.name}),s.jsx("p",{className:"text-sm text-slate-600",children:Q.venue})]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${re(Q.status)}`,children:Q.status})]})}),s.jsx(qe.Body,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Date:"}),s.jsx("span",{className:"font-medium",children:new Date(Q.date).toLocaleDateString()})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Director:"}),s.jsx("span",{className:"font-medium",children:Q.director})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Equipment Items:"}),s.jsx("span",{className:"font-medium text-primary-600",children:Q.equipmentCount})]})]})}),s.jsx(qe.Footer,{children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(ke,{size:"sm",variant:"outline",onClick:()=>ee(Q),className:"flex-1 flex items-center justify-center space-x-1",children:[s.jsx(ic,{className:"w-4 h-4"}),s.jsx("span",{children:"View"})]}),s.jsxs(ke,{size:"sm",variant:"outline",onClick:()=>he(Q),className:"flex-1 flex items-center justify-center space-x-1",children:[s.jsx(fa,{className:"w-4 h-4"}),s.jsx("span",{children:"Edit"})]}),s.jsxs(ke,{size:"sm",onClick:()=>e(`/show/${Q.id}`),className:"flex-1 flex items-center justify-center space-x-1",children:[s.jsx(ic,{className:"w-4 h-4"}),s.jsx("span",{children:"Details"})]}),s.jsx(ke,{size:"sm",variant:"outline",onClick:()=>ne(Q.id),className:"flex items-center justify-center px-3 text-red-600 hover:text-red-700",children:s.jsx(Cc,{className:"w-4 h-4"})})]})})]},Q.id))}),T&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Create New Production"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Production Name *"}),s.jsx(xt,{id:"newShowName",name:"newShowName",value:W.name,onChange:Q=>V({...W,name:Q.target.value}),placeholder:"Enter production name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date *"}),s.jsx(xt,{id:"newShowDate",name:"newShowDate",type:"date",value:W.date,onChange:Q=>V({...W,date:Q.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Venue"}),s.jsx(lr,{id:"newShowVenue",name:"newShowVenue",value:W.venue,onChange:Q=>V({...W,venue:Q.target.value}),options:[{value:"",label:"Select Venue"},...v.map(Q=>{let me=Q.name;const fe=[];return Q.city&&fe.push(Q.city),Q.region&&fe.push(Q.region),Q.country&&fe.push(Q.country),fe.length>0&&(me+=` (${fe.join(", ")})`),{value:Q.name,label:me}})],disabled:m})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Director"}),s.jsx(xt,{id:"newShowDirector",name:"newShowDirector",value:W.director,onChange:Q=>V({...W,director:Q.target.value}),placeholder:"Enter director name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("textarea",{value:W.description,onChange:Q=>V({...W,description:Q.target.value}),placeholder:"Enter show description",className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500",rows:"3"})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx(ke,{variant:"outline",onClick:()=>I(!1),className:"flex-1",children:"Cancel"}),s.jsx(ke,{onClick:oe,className:"flex-1",disabled:!W.name||!W.date||g.isLoading,children:g.isLoading?"Creating...":"Create Show"})]})]})}),A&&k&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:k.name}),s.jsx("p",{className:"text-slate-600 mt-1",children:k.venue})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${re(k.status)}`,children:k.status}),s.jsx(ke,{variant:"outline",onClick:()=>O(!1),className:"text-slate-500",children:""})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(qe,{children:[s.jsx(qe.Header,{children:s.jsx("h3",{className:"text-lg font-semibold",children:"Show Information"})}),s.jsx(qe.Body,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date"}),s.jsx("p",{className:"text-slate-900",children:new Date(k.date).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Director"}),s.jsx("p",{className:"text-slate-900",children:k.director||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("p",{className:"text-slate-900",children:k.description||"No description provided"})]})]})})]}),s.jsxs(qe,{children:[s.jsx(qe.Header,{children:s.jsx("h3",{className:"text-lg font-semibold",children:"Equipment Summary"})}),s.jsx(qe.Body,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-3xl font-bold text-primary-600 mb-2",children:k.equipmentCount}),s.jsx("p",{className:"text-slate-600",children:"Equipment Items Allocated"})]}),s.jsx(ke,{className:"w-full",onClick:()=>e(`/show/${k.id}`),children:"View Full Details"})]})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-slate-200",children:[s.jsx(ke,{variant:"outline",onClick:()=>O(!1),children:"Close"}),s.jsxs(ke,{onClick:()=>{O(!1),he(k)},className:"flex items-center space-x-2",children:[s.jsx(fa,{className:"w-4 h-4"}),s.jsx("span",{children:"Edit Show"})]})]})]})})}),P&&L&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Edit Show"}),s.jsx(ke,{variant:"outline",onClick:()=>$(!1),className:"text-slate-500",children:""})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(qe,{children:[s.jsx(qe.Header,{children:s.jsx("h3",{className:"text-lg font-semibold",children:"Basic Information"})}),s.jsx(qe.Body,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Production Name *"}),s.jsx(xt,{id:"editShowName",name:"editShowName",value:L.name,onChange:Q=>F({...L,name:Q.target.value}),placeholder:"Enter production name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date *"}),s.jsx(xt,{id:"editShowDate",name:"editShowDate",type:"date",value:L.date,onChange:Q=>F({...L,date:Q.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Venue"}),s.jsx(lr,{id:"editShowVenue",name:"editShowVenue",value:L.venue,onChange:Q=>F({...L,venue:Q.target.value}),options:[{value:"",label:"Select Venue"},...v.map(Q=>{let me=Q.name;const fe=[];return Q.city&&fe.push(Q.city),Q.region&&fe.push(Q.region),Q.country&&fe.push(Q.country),fe.length>0&&(me+=` (${fe.join(", ")})`),{value:Q.name,label:me}})],disabled:m})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Director"}),s.jsx(xt,{id:"editShowDirector",name:"editShowDirector",value:L.director,onChange:Q=>F({...L,director:Q.target.value}),placeholder:"Enter director name"})]})]})})]}),s.jsxs(qe,{children:[s.jsx(qe.Header,{children:s.jsx("h3",{className:"text-lg font-semibold",children:"Additional Details"})}),s.jsx(qe.Body,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),s.jsxs("select",{value:L.status,onChange:Q=>F({...L,status:Q.target.value}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[s.jsx("option",{value:"planning",children:"Planning"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"archived",children:"Archived"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("textarea",{value:L.description,onChange:Q=>F({...L,description:Q.target.value}),placeholder:"Enter show description",className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500",rows:"6"})]})]})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-slate-200",children:[s.jsx(ke,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),s.jsx(ke,{onClick:ve,disabled:!L.name||!L.date||w.isLoading,className:"flex items-center space-x-2",children:s.jsx("span",{children:w.isLoading?"Saving...":"Save Changes"})})]})]})})})]})},nq=(e,n)=>{const t=parseInt(e)||0,r=parseInt(n)||0;return Math.max(0,t-r)},rq=({equipmentId:e,onClose:n})=>{const[t,r]=M.useState(!1),{data:a,isLoading:o,isError:d}=ut({queryKey:["equipmentAvailability",e],queryFn:async()=>(await ze.get(`/api/inventory/equipment/${e}/availability`)).data,enabled:!!e});if(o)return s.jsxs("div",{className:"p-4 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-slate-600",children:"Loading availability..."})]});if(d||!a)return s.jsx("div",{className:"p-4 text-center",children:s.jsx("p",{className:"text-red-600",children:"Failed to load availability information"})});const m={type:a.type,brand:a.brand,model:a.model,status:a.equipment_status},v=a.total_quantity;parseInt(a.total_allocated)+parseInt(a.show_allocated);const g=a.available_quantity,w=[],b=()=>g<=0?"text-red-600":g<=v*.2?"text-orange-600":"text-green-600",_=E=>{const T={requested:"bg-blue-100 text-blue-800",allocated:"bg-yellow-100 text-yellow-800","checked-out":"bg-orange-100 text-orange-800","in-use":"bg-red-100 text-red-800",returned:"bg-green-100 text-green-800"};return s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${T[E]||"bg-gray-100 text-gray-800"}`,children:E})};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-slate-800 flex items-center",children:[s.jsx(Rx,{className:"w-5 h-5 mr-2"}),"Equipment Availability"]}),s.jsx(ke,{variant:"outline",onClick:n,children:"Close"})]}),s.jsx(qe,{className:"mb-4",children:s.jsxs(qe.Body,{children:[s.jsx("h3",{className:"font-medium text-slate-800 mb-2",children:m.type}),s.jsxs("p",{className:"text-sm text-slate-600 mb-3",children:[m.brand," ",m.model]}),s.jsxs("div",{className:"grid grid-cols-4 gap-3 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold text-slate-800",children:v}),s.jsx("div",{className:"text-xs text-slate-600",children:"Total"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold text-blue-600",children:a.show_allocated}),s.jsx("div",{className:"text-xs text-slate-600",children:"In Shows"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold text-orange-600",children:a.total_allocated}),s.jsx("div",{className:"text-xs text-slate-600",children:"Inventory"})]}),s.jsxs("div",{children:[s.jsx("div",{className:`text-xl font-bold ${b()}`,children:g}),s.jsx("div",{className:"text-xs text-slate-600",children:"Available"})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex justify-between text-sm text-slate-600 mb-1",children:[s.jsx("span",{children:"Availability"}),s.jsxs("span",{children:[Math.round(g/v*100),"% available"]})]}),s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${g>0?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.max(g/v*100,0)}%`}})})]})]})}),w.length>0&&s.jsx(qe,{children:s.jsxs(qe.Body,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"font-medium text-slate-800",children:["Current Allocations (",w.length,")"]}),s.jsxs(ke,{variant:"outline",size:"sm",onClick:()=>r(!t),className:"flex items-center space-x-1",children:[s.jsxs("span",{children:[t?"Hide":"Show"," Details"]}),t?s.jsx(QR,{className:"w-4 h-4"}):s.jsx(YR,{className:"w-4 h-4"})]})]}),t&&s.jsx("div",{className:"space-y-3",children:w.map(E=>s.jsxs("div",{className:"border border-slate-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-slate-800",children:E.showName}),s.jsx("p",{className:"text-sm text-slate-600",children:new Date(E.showDate).toLocaleDateString()})]}),_(E.status)]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Needed:"}),s.jsx("span",{className:"ml-2 font-medium",children:E.quantityNeeded})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Allocated:"}),s.jsx("span",{className:"ml-2 font-medium",children:E.quantityAllocated})]})]}),(()=>{const T=nq(E.quantityNeeded,E.quantityAllocated);return T>0?s.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-md",children:s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-red-600 font-medium",children:"Missing Items:"}),s.jsxs("span",{className:"font-bold text-red-600",children:[T," item",T!==1?"s":""]})]})}):null})(),E.notes&&s.jsxs("div",{className:"mt-2 text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Notes:"}),s.jsx("p",{className:"text-slate-800 mt-1",children:E.notes})]})]},E.id))})]})}),w.length===0&&s.jsx(qe,{children:s.jsxs(qe.Body,{className:"text-center py-8",children:[s.jsx("div",{className:"text-slate-300 mb-2",children:""}),s.jsx("p",{className:"text-slate-600",children:"No current allocations for this equipment"})]})})]})})},lh=({showEquipment:e,field:n,showId:t,onCancel:r})=>{const a=pn(),o=M.useRef(null),[d,m]=M.useState(n==="quantityNeeded"?e.quantity_needed:e.quantity_allocated),[v,g]=M.useState("");M.useEffect(()=>{o.current&&(o.current.focus(),o.current.select())},[]);const w=_t({mutationFn:I=>P5(e.id,I),onSuccess:()=>{a.invalidateQueries(["showEquipment",t]),ot.success(`${n==="quantityNeeded"?"Needed":"Allocated"} quantity updated`),r()},onError:I=>{ot.error(`Failed to update quantity: ${I.message}`),g(I.message)}}),b=I=>{const k=parseInt(I);if(isNaN(k)||k<0)return"Quantity must be a positive number";if(n==="quantityNeeded"&&k<1)return"Quantity needed must be at least 1";if(n==="quantityAllocated"){const S=n==="quantityNeeded"?k:e.quantity_needed;if(k>S)return`Cannot exceed ${S} (quantity needed)`}return""},_=()=>{const I=b(d);if(I){g(I);return}const k={quantityNeeded:e.quantity_needed,quantityAllocated:e.quantity_allocated,status:e.status,notes:e.notes||""};n==="quantityNeeded"?(k.quantityNeeded=parseInt(d),k.quantityAllocated>parseInt(d)&&(k.quantityAllocated=parseInt(d))):k.quantityAllocated=parseInt(d),w.mutate(k)},E=I=>{I.key==="Enter"?_():I.key==="Escape"&&r()},T=I=>{const k=I.target.value;m(k),v&&g("")};return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:o,type:"number",min:"0",value:d,onChange:T,onKeyDown:E,className:`w-20 px-2 py-1 text-sm border rounded focus:outline-none focus:ring-2 focus:ring-primary-500 ${v?"border-red-300 bg-red-50":"border-slate-300"}`,disabled:w.isLoading}),v&&s.jsx("div",{className:"absolute top-full left-0 mt-1 p-2 bg-red-100 border border-red-300 rounded text-xs text-red-700 whitespace-nowrap z-10",children:v})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:_,disabled:w.isLoading,className:"p-1 text-green-600 hover:text-green-700 hover:bg-green-50 rounded transition-colors",title:"Save",children:s.jsx(cC,{className:"w-4 h-4"})}),s.jsx("button",{onClick:r,disabled:w.isLoading,className:"p-1 text-red-600 hover:text-red-700 hover:bg-red-50 rounded transition-colors",title:"Cancel",children:s.jsx(p2,{className:"w-4 h-4"})})]})]})},M3=({showEquipment:e,showId:n,onCancel:t})=>{const r=pn(),a=M.useRef(null),[o,d]=M.useState(e.status),[m,v]=M.useState(null),[g,w]=M.useState(!1),b=[{value:"requested",label:"Requested",color:"bg-blue-100 text-blue-800"},{value:"allocated",label:"Allocated",color:"bg-yellow-100 text-yellow-800"},{value:"checked-out",label:"Checked Out",color:"bg-orange-100 text-orange-800"},{value:"in-use",label:"In Use",color:"bg-red-100 text-red-800"},{value:"returned",label:"Returned",color:"bg-green-100 text-green-800"}];M.useEffect(()=>{a.current&&a.current.focus()},[]);const _=async k=>{if(k===e.status){v(null);return}w(!0);try{const S=await ze.post(`/api/show-equipment/allocation/${e.id}/validate-status`,{newStatus:k,quantity:e.quantity_allocated});v(S.data)}catch(S){console.error("Validation error:",S),v({valid:!1,conflicts:[{type:"validation_error",message:"Failed to validate status change",severity:"error"}],warnings:[]})}finally{w(!1)}},E=_t({mutationFn:async k=>(await ze.put(`/api/show-equipment/allocation/${e.id}`,{status:k.status,notes:k.notes})).data,onSuccess:()=>{r.invalidateQueries(["showEquipment",n]),r.invalidateQueries(["equipmentAvailability"]),ot.success("Status updated successfully"),t()},onError:k=>{var A,O;const S=(A=k.response)==null?void 0:A.data;S!=null&&S.conflicts?ot.error(`Status change blocked: ${(O=S.conflicts[0])==null?void 0:O.message}`):ot.error((S==null?void 0:S.message)||"Failed to update status")}}),T=()=>{if(o===e.status){t();return}if(m&&!m.valid){ot.error("Cannot save: Status change is not allowed");return}const k={status:o,notes:e.notes||""};E.mutate(k)},I=k=>{k.key==="Enter"?T():k.key==="Escape"&&t()};return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("select",{ref:a,value:o,onChange:k=>{d(k.target.value),_(k.target.value)},onKeyDown:I,className:`px-2 py-1 text-sm border rounded focus:outline-none focus:ring-2 focus:ring-primary-500 ${m&&!m.valid?"border-red-300":"border-slate-300"}`,disabled:E.isLoading||g,children:b.map(k=>s.jsx("option",{value:k.value,children:k.label},k.value))}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:T,disabled:E.isLoading||g||m&&!m.valid,className:`p-1 rounded transition-colors ${m&&!m.valid?"text-gray-400 cursor-not-allowed":"text-green-600 hover:text-green-700 hover:bg-green-50"}`,title:m&&!m.valid?"Status change not allowed":"Save",children:s.jsx(cC,{className:"w-4 h-4"})}),s.jsx("button",{onClick:t,disabled:E.isLoading,className:"p-1 text-red-600 hover:text-red-700 hover:bg-red-50 rounded transition-colors",title:"Cancel",children:s.jsx(p2,{className:"w-4 h-4"})})]})]})},z2=async()=>{try{if(typeof window>"u")throw new Error("Export functionality only available in browser");const n=(await $l(()=>import("./pdf-excel-b0340315.js").then(d=>d.j),[])).default;await $l(()=>import("./pdf-excel-b0340315.js").then(d=>d.b),[]);const r=await $l(()=>import("./pdf-excel-b0340315.js").then(d=>d.x),[]),o=(await $l(()=>import("./pdf-excel-b0340315.js").then(d=>d.F),[])).saveAs;return{jsPDF:n,XLSX:r,saveAs:o}}catch(e){throw console.error("Failed to load export dependencies:",e),new Error("PDF/Excel export libraries are not available. Please check your internet connection and try again.")}},Hl=210,ch=297,sq=async(e,n,t={})=>{const{jsPDF:r}=await z2(),{includeImages:a=!1,includeNotes:o=!0,includeQuantities:d=!0,includeStatus:m=!0,orientation:v="portrait"}=t,g=new r({orientation:v,unit:"mm",format:"a4"}),w=[59,130,246],b=[71,85,105],_=[15,23,42];g.setFillColor(...w),g.rect(0,0,Hl,25,"F"),g.setTextColor(255,255,255),g.setFontSize(20),g.setFont("helvetica","bold"),g.text("EQUIPMENT LIST",15,16),g.setTextColor(..._),g.setFontSize(12),g.setFont("helvetica","normal");let E=35;const T=15,I=110;g.setFont("helvetica","bold"),g.text("Show:",T,E),g.setFont("helvetica","normal"),g.text(e.name||"Untitled Show",T+20,E),e.date&&(g.setFont("helvetica","bold"),g.text("Date:",I,E),g.setFont("helvetica","normal"),g.text(new Date(e.date).toLocaleDateString(),I+20,E)),E+=8,e.venue&&(g.setFont("helvetica","bold"),g.text("Venue:",T,E),g.setFont("helvetica","normal"),g.text(e.venue,T+20,E)),e.status&&(g.setFont("helvetica","bold"),g.text("Status:",I,E),g.setFont("helvetica","normal"),g.text(e.status.charAt(0).toUpperCase()+e.status.slice(1),I+20,E)),E+=8,g.setFont("helvetica","bold"),g.text("Generated:",T,E),g.setFont("helvetica","normal"),g.text(new Date().toLocaleString(),T+25,E),g.setFont("helvetica","bold"),g.text("Total Items:",I,E),g.setFont("helvetica","normal"),g.text(n.length.toString(),I+25,E),E+=15;const k=["Item","Brand + Model","Serial Number"];d&&k.push("Qty"),m&&k.push("Status"),o&&k.push("Notes");const S=n.map((P,$)=>{const L=P.equipment||P,F=L.type||L.name||P.equipment_type||"Unknown",W=L.brand||P.equipment_brand||"",V=L.model||P.equipment_model||"",re=L.serial_number||P.equipment_serial_number||"N/A";let oe="";W&&V?oe=`${W} ${V}`:W?oe=W:V?oe=V:oe="Not specified";const ee=[`${$+1}. ${F}`,oe,re];return d&&ee.push((P.quantity_allocated||0).toString()),m&&ee.push((P.status||"Unknown").charAt(0).toUpperCase()+(P.status||"unknown").slice(1)),o&&ee.push(P.notes||""),ee});g.setFillColor(...w),g.rect(15,E,Hl-30,8,"F"),g.setTextColor(255,255,255),g.setFontSize(10),g.setFont("helvetica","bold");let A=20;k.forEach((P,$)=>{g.text(P,A,E+6),A+=v==="landscape"?50:35}),E+=10,g.setTextColor(..._),g.setFontSize(9),g.setFont("helvetica","normal"),S.forEach((P,$)=>{if(E>ch-30){g.addPage(),E=20,g.setFillColor(...w),g.rect(15,E,Hl-30,8,"F"),g.setTextColor(255,255,255),g.setFontSize(10),g.setFont("helvetica","bold");let L=20;k.forEach((F,W)=>{g.text(F,L,E+6),L+=v==="landscape"?50:35}),E+=10,g.setTextColor(..._),g.setFontSize(9),g.setFont("helvetica","normal")}$%2===0&&(g.setFillColor(248,250,252),g.rect(15,E-2,Hl-30,8,"F")),A=20,P.forEach((L,F)=>{const W=String(L||"").substring(0,30);g.text(W,A,E+4),A+=v==="landscape"?50:35}),E+=8});const O=g.internal.getNumberOfPages();for(let P=1;P<=O;P++)g.setPage(P),g.setFontSize(8),g.setTextColor(...b),g.text(`Page ${P} of ${O}`,Hl-30,ch-10),g.text("Theater Equipment Catalog",15,ch-10);if(E<ch-50){E+=15,g.setDrawColor(...w),g.setLineWidth(.5),g.rect(15,E,Hl-30,25),g.setFontSize(12),g.setFont("helvetica","bold"),g.setTextColor(...w),g.text("SUMMARY",20,E+8),g.setFontSize(10),g.setFont("helvetica","normal"),g.setTextColor(..._);const P=n.reduce((F,W)=>F+(parseInt(W.quantity_allocated)||0),0),$=n.filter(F=>(parseInt(F.quantity_allocated)||0)>0).length,L=n.filter(F=>(parseInt(F.quantity_needed)||0)>(parseInt(F.quantity_allocated)||0)).length;g.text(`Total Equipment Types: ${n.length}`,20,E+16),g.text(`Items Allocated: ${$}`,20,E+22),g.text(`Total Quantity Allocated: ${P}`,110,E+16),g.text(`Missing Items: ${L}`,110,E+22)}return g},aq=async(e,n,t={})=>{const{XLSX:r}=await z2(),{includeNotes:a=!0,includeQuantities:o=!0,includeStatus:d=!0,includeDetails:m=!0}=t,v=r.utils.book_new(),g=[],w=["","","#","Type","Brand + Model","Serial Number"];o&&w.push("Qty Needed","Qty Allocated","Missing"),d&&w.push("Status"),m&&w.push("Location","Category"),a&&w.push("Notes"),g.push(w),g.push(["SHOW INFORMATION"]),g.push(["Show Name:",e.name||"Untitled Show"]),g.push(["Date:",e.date?new Date(e.date).toLocaleDateString():"Not specified"]),g.push(["Venue:",e.venue||"Not specified"]),g.push(["Status:",e.status?e.status.charAt(0).toUpperCase()+e.status.slice(1):"Unknown"]),g.push(["Generated:",new Date().toLocaleString()]),g.push(["Total Items:",n.length]),g.push([]),n.forEach((E,T)=>{const I=E.equipment||E,k=I.type||I.name||E.equipment_type||"Unknown",S=I.brand||E.equipment_brand||"",A=I.model||E.equipment_model||"",O=I.serial_number||E.equipment_serial_number||"N/A",P=I.location||E.equipment_location||"Not specified",$=I.category||E.equipment_category||"Not specified";let L="";S&&A?L=`${S} ${A}`:S?L=S:A?L=A:L="Not specified";const F=["","",T+1,k,L,O];if(o){const W=parseInt(E.quantity_needed)||0,V=parseInt(E.quantity_allocated)||0,re=Math.max(0,W-V);F.push(W,V,re)}d&&F.push((E.status||"Unknown").charAt(0).toUpperCase()+(E.status||"unknown").slice(1)),m&&F.push(P,$),a&&F.push(E.notes||""),g.push(F)});const b=r.utils.aoa_to_sheet(g),_=[{wch:5},{wch:5},{wch:5},{wch:25},{wch:25},{wch:20}];return o&&_.push({wch:12},{wch:12},{wch:10}),d&&_.push({wch:12}),m&&_.push({wch:15},{wch:15}),a&&_.push({wch:30}),b["!cols"]=_,r.utils.book_append_sheet(v,b,"Equipment List"),v},iq=(e,n)=>{e.save(n)},oq=async(e,n)=>{const{XLSX:t,saveAs:r}=await z2(),a=t.write(e,{bookType:"xlsx",type:"array"}),o=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});r(o,n)},R3=(e,n)=>{const t=(e.name||"Show").replace(/[^a-zA-Z0-9]/g,"_"),r=e.date?new Date(e.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],a=new Date().toISOString().split("T")[0];return`${t}_Equipment_List_${r}_${a}.${n==="excel"?"xlsx":n}`},lq=({isOpen:e,onClose:n,show:t,equipmentList:r=[]})=>{const[a,o]=M.useState("pdf"),[d,m]=M.useState({includeImages:!1,includeNotes:!0,includeQuantities:!0,includeStatus:!0,includeDetails:!0,orientation:"portrait"}),[v,g]=M.useState(""),[w,b]=M.useState(!1),_=(I,k)=>{m(S=>({...S,[I]:k}))},E=async()=>{if(!t||!r.length){ot.error("No data to export");return}b(!0);try{const I=v||R3(t,a);if(a==="pdf"){const k=sq(t,r,d);iq(k,I),ot.success("PDF exported successfully!")}else if(a==="excel"){const k=aq(t,r,d);oq(k,I),ot.success("Excel file exported successfully!")}n()}catch(I){console.error("Export error:",I),ot.error("Failed to export file. Please try again.")}finally{b(!1)}},T=v||R3(t,a);return s.jsxs("div",{className:`fixed inset-0 z-50 ${e?"block":"hidden"}`,children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:n}),s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg mr-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Export Equipment List"}),s.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[t==null?void 0:t.name,"  ",r.length," items"]})]})]})}),s.jsxs("div",{className:"px-6 py-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Export Format"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("button",{type:"button",onClick:()=>o("pdf"),className:`p-4 border-2 rounded-lg transition-colors ${a==="pdf"?"border-blue-500 bg-blue-50 text-blue-700":"border-slate-200 hover:border-slate-300"}`,children:[s.jsx("div",{className:"flex items-center justify-center mb-2",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),s.jsx("div",{className:"font-medium",children:"PDF"}),s.jsx("div",{className:"text-xs text-slate-500",children:"Professional format for printing"})]}),s.jsxs("button",{type:"button",onClick:()=>o("excel"),className:`p-4 border-2 rounded-lg transition-colors ${a==="excel"?"border-blue-500 bg-blue-50 text-blue-700":"border-slate-200 hover:border-slate-300"}`,children:[s.jsx("div",{className:"flex items-center justify-center mb-2",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),s.jsx("div",{className:"font-medium",children:"Excel"}),s.jsx("div",{className:"text-xs text-slate-500",children:"Editable spreadsheet format"})]})]})]}),a==="pdf"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"PDF Options"}),s.jsx("div",{className:"space-y-3",children:s.jsxs("select",{value:d.orientation,onChange:I=>_("orientation",I.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"portrait",children:"Portrait (Recommended)"}),s.jsx("option",{value:"landscape",children:"Landscape (More columns)"})]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Include in Export"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:d.includeQuantities,onChange:I=>_("includeQuantities",I.target.checked),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-slate-700",children:"Quantities (Needed/Allocated)"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:d.includeStatus,onChange:I=>_("includeStatus",I.target.checked),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-slate-700",children:"Equipment Status"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:d.includeDetails,onChange:I=>_("includeDetails",I.target.checked),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-slate-700",children:"Location & Category Details"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:d.includeNotes,onChange:I=>_("includeNotes",I.target.checked),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-slate-700",children:"Notes & Comments"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Custom Filename (Optional)"}),s.jsx("input",{type:"text",value:v,onChange:I=>g(I.target.value),placeholder:T,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Default: ",T]})]}),s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-slate-800 mb-2",children:"Export Preview"}),s.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[s.jsxs("div",{children:["Format: ",s.jsx("span",{className:"font-medium",children:a.toUpperCase()})]}),s.jsxs("div",{children:["Items: ",s.jsx("span",{className:"font-medium",children:r.length})]}),s.jsxs("div",{children:["Filename: ",s.jsx("span",{className:"font-medium",children:T})]}),a==="pdf"&&s.jsxs("div",{children:["Orientation: ",s.jsx("span",{className:"font-medium",children:d.orientation})]})]})]})]}),s.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 flex justify-between",children:[s.jsx("button",{onClick:n,disabled:w,className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),s.jsx("button",{onClick:E,disabled:w||!r.length,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:w?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exporting..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export ",a.toUpperCase()]})})]})]})})]})},O3=(e,n)=>{const t=parseInt(e)||0,r=parseInt(n)||0;return Math.max(0,t-r)},F5=()=>{const{showId:e}=Zf(),n=us(),t=pn(),[r,a]=M.useState("list"),[o,d]=M.useState(!1),[m,v]=M.useState(null),[g,w]=M.useState([]),[b,_]=M.useState(!1),[E,T]=M.useState(1),[I,k]=M.useState(""),[S,A]=M.useState(""),[O,P]=M.useState(!1),[$,L]=M.useState(null),[F,W]=M.useState(!1),[V,re]=M.useState(null),[oe,ee]=M.useState(null),[he,ve]=M.useState(null),[ne,Q]=M.useState(!1),{data:me,isLoading:fe}=ut({queryKey:["show",e],queryFn:()=>R5(e),onError:ie=>{ot.error(`Failed to load show: ${ie.message}`)}}),{data:Ie,isLoading:ue}=ut({queryKey:["showEquipment",e],queryFn:()=>Fz(e),onError:ie=>{ot.error(`Failed to load show equipment: ${ie.message}`)}}),{data:Ye}=ut({queryKey:["equipment"],queryFn:()=>Oa({status:"available"}),enabled:o}),we=(Ie==null?void 0:Ie.equipment)||[],Ve=(Ye==null?void 0:Ye.equipment)||[],Be=_t({mutationFn:ie=>Bz(e,ie),onSuccess:()=>{t.invalidateQueries(["showEquipment",e]),t.invalidateQueries(["show",e]),ot.success("Equipment added to show"),d(!1),v(null),T(1),k("")},onError:ie=>{ot.error(`Failed to add equipment: ${ie.message}`)}});_t({mutationFn:({id:ie,...He})=>P5(ie,He),onSuccess:()=>{t.invalidateQueries(["showEquipment",e]),ot.success("Equipment updated")},onError:ie=>{ot.error(`Failed to update equipment: ${ie.message}`)}});const ct=_t({mutationFn:Uz,onSuccess:()=>{t.invalidateQueries(["showEquipment",e]),t.invalidateQueries(["show",e]),ot.success("Equipment removed from show")},onError:ie=>{ot.error(`Failed to remove equipment: ${ie.message}`)}}),Ae=_t({mutationFn:async ie=>{var Fe;const He=await ze.post(`/api/show-equipment/allocation/${ie}/validate-status`,{newStatus:"checked-out",quantity:1});if(!He.data.valid)throw new Error(((Fe=He.data.conflicts[0])==null?void 0:Fe.message)||"Status change not allowed");return(await ze.put(`/api/show-equipment/allocation/${ie}`,{status:"checked-out"})).data},onSuccess:()=>{t.invalidateQueries(["showEquipment",e]),t.invalidateQueries(["equipmentAvailability"]),ot.success("Equipment checked out")},onError:ie=>{var Ee,Fe,ht,Et;const He=((Et=(ht=(Fe=(Ee=ie.response)==null?void 0:Ee.data)==null?void 0:Fe.conflicts)==null?void 0:ht[0])==null?void 0:Et.message)||ie.message;ot.error(`Failed to checkout equipment: ${He}`)}}),Se=_t({mutationFn:async ie=>{var Fe;const He=await ze.post(`/api/show-equipment/allocation/${ie}/validate-status`,{newStatus:"returned",quantity:1});if(!He.data.valid)throw new Error(((Fe=He.data.conflicts[0])==null?void 0:Fe.message)||"Status change not allowed");return(await ze.put(`/api/show-equipment/allocation/${ie}`,{status:"returned"})).data},onSuccess:()=>{t.invalidateQueries(["showEquipment",e]),t.invalidateQueries(["equipmentAvailability"]),ot.success("Equipment returned")},onError:ie=>{var Ee,Fe,ht,Et;const He=((Et=(ht=(Fe=(Ee=ie.response)==null?void 0:Ee.data)==null?void 0:Fe.conflicts)==null?void 0:ht[0])==null?void 0:Et.message)||ie.message;ot.error(`Failed to return equipment: ${He}`)}}),nt=()=>{b&&g.length>0?g.forEach(ie=>{Be.mutate({equipmentId:ie.id,quantityNeeded:ie.quantity||1,notes:ie.notes||""})}):m&&E>0&&Be.mutate({equipmentId:m.id,quantityNeeded:E,notes:I})},qt=ie=>{w(He=>He.find(Fe=>Fe.id===ie.id)?He.filter(Fe=>Fe.id!==ie.id):[...He,{...ie,quantity:1,notes:""}])},bt=(ie,He)=>{w(Ee=>Ee.map(Fe=>Fe.id===ie?{...Fe,quantity:parseInt(He)||1}:Fe))},Pt=(ie,He)=>{w(Ee=>Ee.map(Fe=>Fe.id===ie?{...Fe,notes:He}:Fe))},Tt=ie=>{window.confirm("Are you sure you want to remove this equipment from the show?")&&ct.mutate(ie)},Te=ie=>{Ae.mutate(ie)},Ne=ie=>{Se.mutate(ie)},Ze=ie=>{L(ie),P(!0)},be=ie=>{n(`/equipment/${ie}`)},De=ie=>{re(ie),W(!0)},$e=(ie,He)=>{ee(ie),ve(He)},Ge=()=>{ee(null),ve(null)},ae=ie=>{const He={requested:"bg-yellow-100 text-yellow-800",allocated:"bg-blue-100 text-blue-800","checked-out":"bg-orange-100 text-orange-800","in-use":"bg-green-100 text-green-800",returned:"bg-gray-100 text-gray-800"};return s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${He[ie]||"bg-gray-100 text-gray-800"}`,children:ie.charAt(0).toUpperCase()+ie.slice(1).replace("-"," ")})},ye=Ve.filter(ie=>{var He,Ee,Fe;return((He=ie.type)==null?void 0:He.toLowerCase().includes(S.toLowerCase()))||((Ee=ie.brand)==null?void 0:Ee.toLowerCase().includes(S.toLowerCase()))||((Fe=ie.model)==null?void 0:Fe.toLowerCase().includes(S.toLowerCase()))});return fe||ue?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600",children:"Loading equipment management..."})]})}):me?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Equipment Management"}),s.jsx("p",{className:"text-slate-600",children:"Manage equipment allocation for this show"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center bg-slate-100 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>a("list"),className:`p-2 rounded-md transition-colors ${r==="list"?"bg-white text-primary-600 shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:s.jsx(Wc,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>a("card"),className:`p-2 rounded-md transition-colors ${r==="card"?"bg-white text-primary-600 shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:s.jsx(Hc,{className:"w-4 h-4"})})]}),we.length>0&&s.jsxs(ke,{variant:"outline",onClick:()=>Q(!0),className:"flex items-center space-x-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("span",{children:"Export List"})]}),s.jsxs(ke,{onClick:()=>d(!0),className:"flex items-center space-x-2",children:[s.jsx(fp,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Equipment"})]})]})]}),we.length===0?s.jsx(qe,{className:"text-center py-12",children:s.jsxs(qe.Body,{children:[s.jsx("div",{className:"text-slate-300 mb-4",children:""}),s.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-2",children:"No equipment allocated"}),s.jsx("p",{className:"text-slate-600 mb-4",children:"Start by adding equipment to this show"}),s.jsx(ke,{onClick:()=>d(!0),children:"Add Equipment"})]})}):r==="list"?s.jsx(qe,{children:s.jsx(qe.Body,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table-wide",children:[s.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Equipment"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Quantity"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Status"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Notes"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:we.map(ie=>{var He,Ee,Fe,ht;return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>be(ie.equipment_id),className:"font-medium text-slate-800 hover:text-primary-600 hover:underline transition-colors text-left flex items-center space-x-1 group",title:"Click to view equipment details",children:[s.jsx("span",{children:((He=ie.equipment)==null?void 0:He.name)||((Ee=ie.equipment)==null?void 0:Ee.type)}),s.jsx(yb,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"})]}),s.jsxs("div",{className:"text-sm text-slate-600",children:[(Fe=ie.equipment)==null?void 0:Fe.brand," ",(ht=ie.equipment)==null?void 0:ht.model]})]})}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-slate-600",children:"Needed:"}),oe===ie.id&&he==="quantityNeeded"?s.jsx(lh,{showEquipment:ie,field:"quantityNeeded",showId:e,onCancel:Ge}):s.jsx("button",{onClick:()=>$e(ie.id,"quantityNeeded"),className:"font-medium text-slate-800 hover:text-primary-600 hover:bg-primary-50 px-1 py-0.5 rounded transition-colors",title:"Click to edit",children:ie.quantity_needed})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-slate-600",children:"Allocated:"}),oe===ie.id&&he==="quantityAllocated"?s.jsx(lh,{showEquipment:ie,field:"quantityAllocated",showId:e,onCancel:Ge}):s.jsx("button",{onClick:()=>$e(ie.id,"quantityAllocated"),className:"font-medium text-slate-800 hover:text-primary-600 hover:bg-primary-50 px-1 py-0.5 rounded transition-colors",title:"Click to edit",children:ie.quantity_allocated})]}),(()=>{const Et=O3(ie.quantity_needed,ie.quantity_allocated);return Et>0?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-red-600 font-medium",children:"Missing:"}),s.jsx("span",{className:"font-bold text-red-600 bg-red-50 px-2 py-0.5 rounded text-xs",children:Et})]}):null})()]})}),s.jsx("td",{className:"py-3 px-4",children:oe===ie.id&&he==="status"?s.jsx(M3,{showEquipment:ie,showId:e,onCancel:Ge}):s.jsx("button",{onClick:()=>$e(ie.id,"status"),className:"hover:bg-slate-50 p-1 rounded transition-colors",title:"Click to edit status",children:ae(ie.status)})}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("div",{className:"text-sm text-slate-600 max-w-xs truncate",children:ie.notes||"No notes"})}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ke,{size:"sm",variant:"outline",onClick:()=>De(ie),className:"text-slate-600 hover:text-slate-700",title:"Edit allocation",children:s.jsx(fa,{className:"w-3 h-3"})}),s.jsx(ke,{size:"sm",variant:"outline",onClick:()=>Ze(ie.equipment_id),className:"text-blue-600 hover:text-blue-700",title:"View availability",children:s.jsx(Rx,{className:"w-3 h-3"})}),ie.status==="requested"&&s.jsx(ke,{size:"sm",onClick:()=>Te(ie.id),disabled:Ae.isLoading,children:""}),(ie.status==="checked-out"||ie.status==="in-use")&&s.jsx(ke,{size:"sm",variant:"outline",onClick:()=>Ne(ie.id),disabled:Se.isLoading,children:"Return"}),s.jsx(ke,{size:"sm",variant:"outline",onClick:()=>Tt(ie.id),disabled:ct.isLoading,className:"text-red-600 hover:text-red-700",children:s.jsx(Cc,{className:"w-3 h-3"})})]})})]},ie.id)})})]})})})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:we.map(ie=>{var He,Ee,Fe,ht;return s.jsx(qe,{children:s.jsxs(qe.Body,{children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>be(ie.equipment_id),className:"font-medium text-slate-800 hover:text-primary-600 hover:underline transition-colors text-left flex items-center space-x-1 group",title:"Click to view equipment details",children:[s.jsx("span",{children:((He=ie.equipment)==null?void 0:He.name)||((Ee=ie.equipment)==null?void 0:Ee.type)}),s.jsx(yb,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"})]}),s.jsxs("p",{className:"text-sm text-slate-600",children:[(Fe=ie.equipment)==null?void 0:Fe.brand," ",(ht=ie.equipment)==null?void 0:ht.model]})]}),ae(ie.status)]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Needed:"}),oe===ie.id&&he==="quantityNeeded"?s.jsx(lh,{showEquipment:ie,field:"quantityNeeded",showId:e,onCancel:Ge}):s.jsx("button",{onClick:()=>$e(ie.id,"quantityNeeded"),className:"font-medium text-slate-800 hover:text-primary-600 hover:bg-primary-50 px-1 py-0.5 rounded transition-colors",title:"Click to edit",children:ie.quantity_needed})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Allocated:"}),oe===ie.id&&he==="quantityAllocated"?s.jsx(lh,{showEquipment:ie,field:"quantityAllocated",showId:e,onCancel:Ge}):s.jsx("button",{onClick:()=>$e(ie.id,"quantityAllocated"),className:"font-medium text-slate-800 hover:text-primary-600 hover:bg-primary-50 px-1 py-0.5 rounded transition-colors",title:"Click to edit",children:ie.quantity_allocated})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Status:"}),oe===ie.id&&he==="status"?s.jsx(M3,{showEquipment:ie,showId:e,onCancel:Ge}):s.jsx("button",{onClick:()=>$e(ie.id,"status"),className:"hover:bg-slate-50 p-1 rounded transition-colors",title:"Click to edit status",children:ae(ie.status)})]}),(()=>{const Et=O3(ie.quantity_needed,ie.quantity_allocated);return Et>0?s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-red-600 font-medium",children:"Missing:"}),s.jsxs("span",{className:"font-bold text-red-600 bg-red-50 px-2 py-1 rounded text-xs",children:[Et," item",Et!==1?"s":""]})]}):null})(),ie.notes&&s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Notes:"}),s.jsx("p",{className:"text-slate-800 mt-1",children:ie.notes})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ke,{size:"sm",variant:"outline",onClick:()=>De(ie),className:"text-slate-600 hover:text-slate-700",title:"Edit allocation",children:s.jsx(fa,{className:"w-4 h-4"})}),s.jsx(ke,{size:"sm",variant:"outline",onClick:()=>Ze(ie.equipment_id),className:"text-blue-600 hover:text-blue-700",title:"View availability",children:s.jsx(Rx,{className:"w-4 h-4"})}),ie.status==="requested"&&s.jsx(ke,{size:"sm",onClick:()=>Te(ie.id),disabled:Ae.isLoading,className:"flex-1",children:"Check Out"}),(ie.status==="checked-out"||ie.status==="in-use")&&s.jsx(ke,{size:"sm",variant:"outline",onClick:()=>Ne(ie.id),disabled:Se.isLoading,className:"flex-1",children:"Return"}),s.jsx(ke,{size:"sm",variant:"outline",onClick:()=>Tt(ie.id),disabled:ct.isLoading,className:"text-red-600 hover:text-red-700",children:s.jsx(Cc,{className:"w-4 h-4"})})]})]})},ie.id)})}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Add Equipment to Show"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-slate-600",children:"Bulk Mode"}),s.jsx("button",{onClick:()=>{_(!b),v(null),w([])},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${b?"bg-primary-600":"bg-slate-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${b?"translate-x-6":"translate-x-1"}`})})]})]}),s.jsx("div",{className:"mb-4",children:s.jsx(xt,{placeholder:"Search equipment...",value:S,onChange:ie=>A(ie.target.value)})}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[b?"Select Multiple Equipment":"Select Equipment",b&&g.length>0&&s.jsxs("span",{className:"ml-2 text-primary-600",children:["(",g.length," selected)"]})]}),s.jsx("div",{className:"max-h-60 overflow-y-auto border border-slate-200 rounded-lg",children:ye.map(ie=>{const He=b?g.some(Ee=>Ee.id===ie.id):(m==null?void 0:m.id)===ie.id;return s.jsx("div",{onClick:()=>b?qt(ie):v(ie),className:`p-3 cursor-pointer border-b border-slate-100 hover:bg-slate-50 ${He?"bg-primary-50 border-primary-200":""}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-800",children:ie.type}),s.jsxs("div",{className:"text-sm text-slate-600",children:[ie.brand," ",ie.model," - Qty: ",ie.quantity]})]}),b&&s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${He?"bg-primary-600 border-primary-600":"border-slate-300"}`,children:He&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})},ie.id)})})]}),!b&&m&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Quantity Needed"}),s.jsx(xt,{type:"number",min:"1",max:m.quantity,value:E,onChange:ie=>T(parseInt(ie.target.value)||1)})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notes (Optional)"}),s.jsx("textarea",{className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"3",value:I,onChange:ie=>k(ie.target.value),placeholder:"Add any notes about this equipment allocation..."})]})]}),b&&g.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Selected Equipment Details"}),s.jsx("div",{className:"space-y-3 max-h-40 overflow-y-auto",children:g.map(ie=>s.jsxs("div",{className:"border border-slate-200 rounded-lg p-3",children:[s.jsxs("div",{className:"font-medium text-slate-800 mb-2",children:[ie.type," - ",ie.brand," ",ie.model]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Quantity"}),s.jsx(xt,{type:"number",min:"1",max:ie.quantity,value:ie.quantity||1,onChange:He=>bt(ie.id,He.target.value),size:"sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Notes"}),s.jsx(xt,{value:ie.notes||"",onChange:He=>Pt(ie.id,He.target.value),placeholder:"Notes...",size:"sm"})]})]})]},ie.id))})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(ke,{variant:"outline",onClick:()=>{d(!1),v(null),w([]),_(!1),T(1),k(""),A("")},children:"Cancel"}),s.jsx(ke,{onClick:nt,disabled:b?g.length===0||Be.isLoading:!m||E<=0||Be.isLoading,children:Be.isLoading?"Adding...":b?`Add ${g.length} Equipment${g.length!==1?"s":""}`:"Add Equipment"})]})]})}),O&&$&&s.jsx(rq,{equipmentId:$,onClose:()=>{P(!1),L(null)}}),F&&V&&s.jsx(U2,{showEquipment:V,showId:e,onClose:()=>{W(!1),re(null)}}),ne&&s.jsx(lq,{isOpen:ne,onClose:()=>Q(!1),show:me,equipmentList:we})]}):s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 mb-4",children:" Show not found"}),s.jsx(ke,{onClick:()=>n("/show-list"),children:"Back to Show List"})]})})},cq=()=>{const{showId:e}=Zf(),n=us(),t=pn(),[r,a]=M.useState("details"),[o,d]=M.useState(!1),[m,v]=M.useState({name:"",date:"",venue:"",director:"",description:"",status:"planning"}),{data:g,isLoading:w,error:b}=ut({queryKey:["show",e],queryFn:()=>R5(e),onSuccess:A=>{v({name:A.name||"",date:A.date?A.date.split("T")[0]:"",venue:A.venue||"",director:A.director||"",description:A.description||"",status:A.status||"planning"})},onError:A=>{ot.error(`Failed to load show: ${A.message}`)}}),_=_t({mutationFn:A=>O5(e,A),onSuccess:()=>{t.invalidateQueries(["show",e]),t.invalidateQueries(["shows"]),ot.success("Show updated successfully"),d(!1)},onError:A=>{ot.error(`Failed to update show: ${A.message}`)}}),E=_t({mutationFn:()=>L5(e),onSuccess:()=>{t.invalidateQueries(["shows"]),ot.success("Show deleted successfully"),n("/show-list")},onError:A=>{ot.error(`Failed to delete show: ${A.message}`)}}),T=()=>{g&&(v({name:g.name||"",date:g.date?g.date.split("T")[0]:"",venue:g.venue||"",director:g.director||"",description:g.description||"",status:g.status||"planning"}),d(!0))},I=()=>{m.name&&m.date&&_.mutate(m)},k=()=>{window.confirm("Are you sure you want to delete this show?")&&E.mutate()},S=A=>{const O={planning:"bg-blue-100 text-blue-800","in-progress":"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",archived:"bg-gray-100 text-gray-800"};return s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${O[A]||"bg-gray-100 text-gray-800"}`,children:A.charAt(0).toUpperCase()+A.slice(1).replace("-"," ")})};return w?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600",children:"Loading show details..."})]})}):b||!g?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 mb-4",children:" Show not found"}),s.jsx("p",{className:"text-slate-600 mb-4",children:(b==null?void 0:b.message)||"Show not found"}),s.jsx(ke,{onClick:()=>n("/show-list"),children:"Back to Production Lists"})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(ke,{variant:"outline",onClick:()=>n("/show-list"),className:"flex items-center space-x-2",children:[s.jsx(oC,{className:"w-4 h-4"}),s.jsx("span",{children:"Back to Shows"})]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:g.name}),s.jsx("p",{className:"text-slate-600",children:new Date(g.date).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[S(g.status),!o&&s.jsxs(s.Fragment,{children:[s.jsxs(ke,{variant:"outline",onClick:T,className:"flex items-center space-x-2",children:[s.jsx(fa,{className:"w-4 h-4"}),s.jsx("span",{children:"Edit"})]}),s.jsxs(ke,{variant:"outline",onClick:k,disabled:E.isLoading,className:"flex items-center space-x-2 text-red-600 hover:text-red-700",children:[s.jsx(Cc,{className:"w-4 h-4"}),s.jsx("span",{children:"Delete"})]})]})]})]}),s.jsx("div",{className:"border-b border-slate-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsx("button",{onClick:()=>a("details"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="details"?"border-primary-500 text-primary-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Show Details"}),s.jsxs("button",{onClick:()=>a("equipment"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="equipment"?"border-primary-500 text-primary-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:["Equipment Management",g.equipmentCount>0&&s.jsx("span",{className:"ml-2 bg-primary-100 text-primary-600 py-0.5 px-2 rounded-full text-xs",children:g.equipmentCount})]})]})}),r==="details"&&s.jsxs(qe,{children:[s.jsx(qe.Header,{children:s.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Show Information"})}),s.jsx(qe.Body,{children:o?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Show Name *"}),s.jsx(xt,{value:m.name,onChange:A=>v({...m,name:A.target.value}),placeholder:"Enter show name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date *"}),s.jsx(xt,{type:"date",value:m.date,onChange:A=>v({...m,date:A.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Venue"}),s.jsx(xt,{value:m.venue,onChange:A=>v({...m,venue:A.target.value}),placeholder:"Enter venue"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Director"}),s.jsx(xt,{value:m.director,onChange:A=>v({...m,director:A.target.value}),placeholder:"Enter director name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),s.jsxs("select",{value:m.status,onChange:A=>v({...m,status:A.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"planning",children:"Planning"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"archived",children:"Archived"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("textarea",{value:m.description,onChange:A=>v({...m,description:A.target.value}),rows:"4",className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter show description"})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(ke,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),s.jsx(ke,{onClick:I,disabled:!m.name||!m.date||_.isLoading,children:_.isLoading?"Saving...":"Save Changes"})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Show Name"}),s.jsx("p",{className:"mt-1 text-lg text-slate-900",children:g.name})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Date"}),s.jsx("p",{className:"mt-1 text-lg text-slate-900",children:new Date(g.date).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Venue"}),s.jsx("p",{className:"mt-1 text-lg text-slate-900",children:g.venue||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Director"}),s.jsx("p",{className:"mt-1 text-lg text-slate-900",children:g.director||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Status"}),s.jsx("div",{className:"mt-1",children:S(g.status)})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Equipment Count"}),s.jsxs("p",{className:"mt-1 text-lg text-slate-900",children:[g.equipmentCount||0," items"]})]})]}),g.description&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Description"}),s.jsx("p",{className:"mt-1 text-slate-900",children:g.description})]}),g.creator&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Created By"}),s.jsx("p",{className:"mt-1 text-slate-900",children:g.creator.username})]})]})})]}),r==="equipment"&&s.jsx(F5,{})]})},dq=new DD({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}),ia=({children:e})=>{const{user:n,loading:t}=dr();return t?s.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):n?e:s.jsx(of,{to:"/login"})},L3=({children:e})=>{const{user:n,loading:t,isAdmin:r}=dr();return t?s.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):n?r()?e:s.jsx(of,{to:"/dashboard"}):s.jsx(of,{to:"/login"})},w1=({children:e})=>{const[n,t]=M.useState(!0),[r,a]=M.useState(!1);return s.jsxs("div",{className:"min-h-screen bg-slate-50",children:[s.jsx(SC,{}),s.jsx(_C,{}),s.jsx(EC,{isOpen:n,isCollapsed:r,toggleSidebar:t,toggleCollapse:a}),s.jsx("main",{className:`main-content pt-16 ${n?r?"main-content-with-sidebar-collapsed":"main-content-with-sidebar":""}`,children:s.jsx("div",{className:"container-app",children:s.jsx("div",{className:"space-y-6",children:e})})})]})},ai=({children:e})=>{const[n,t]=M.useState(!0),[r,a]=M.useState(!1);return s.jsxs("div",{className:"min-h-screen bg-slate-50",children:[s.jsx(SC,{}),s.jsx(_C,{}),s.jsx(EC,{isOpen:n,isCollapsed:r,toggleSidebar:t,toggleCollapse:a}),s.jsx("main",{className:`main-content pt-16 ${n?r?"main-content-with-sidebar-collapsed":"main-content-with-sidebar":""}`,children:s.jsx("div",{className:"container-app-wide",children:s.jsx("div",{className:"space-y-6",children:e})})})]})},uq=()=>s.jsx(fD,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:s.jsxs(iD,{children:[s.jsx(Rr,{path:"/login",element:s.jsx(EL,{})}),s.jsx(Rr,{path:"/",element:s.jsx(ia,{children:s.jsx(ai,{children:s.jsx(m3,{})})})}),s.jsx(Rr,{path:"/dashboard",element:s.jsx(ia,{children:s.jsx(ai,{children:s.jsx(m3,{})})})}),s.jsx(Rr,{path:"/simple-dashboard",element:s.jsx(ia,{children:s.jsx(w1,{children:s.jsx(BB,{})})})}),s.jsx(Rr,{path:"/equipment/new",element:s.jsx(ia,{children:s.jsx(Xz,{})})}),s.jsx(Rr,{path:"/equipment/:id/edit",element:s.jsx(ia,{children:s.jsx(ai,{children:s.jsx(Hz,{})})})}),s.jsx(Rr,{path:"/equipment/:id",element:s.jsx(ia,{children:s.jsx(ai,{children:s.jsx(Wz,{})})})}),s.jsx(Rr,{path:"/equipment",element:s.jsx(ia,{children:s.jsx(ai,{children:s.jsx(Iz,{})})})}),s.jsx(Rr,{path:"/show-list",element:s.jsx(ia,{children:s.jsx(ai,{children:s.jsx(tq,{})})})}),s.jsx(Rr,{path:"/show/:showId",element:s.jsx(ia,{children:s.jsx(ai,{children:s.jsx(cq,{})})})}),s.jsx(Rr,{path:"/show/:showId/manage-equipment",element:s.jsx(ia,{children:s.jsx(ai,{children:s.jsx(F5,{})})})}),s.jsx(Rr,{path:"/admin",element:s.jsx(L3,{children:s.jsx(w1,{children:s.jsx(Jz,{})})})}),s.jsx(Rr,{path:"/equipment-logs",element:s.jsx(L3,{children:s.jsx(ai,{children:s.jsx(eq,{})})})}),s.jsx(Rr,{path:"/settings",element:s.jsx(ia,{children:s.jsx(w1,{children:s.jsx(IU,{})})})}),s.jsx(Rr,{path:"*",element:s.jsx(of,{to:"/"})})]})}),hq=()=>s.jsx($D,{client:dq,children:s.jsx(FM,{children:s.jsxs(iC,{children:[s.jsx(up,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),s.jsx(uq,{})]})})});const fq=async()=>{try{return(await ze.get("/api/csrf-token",{withCredentials:!0})).data.csrfToken}catch(e){return console.error("Failed to fetch CSRF token:",e),null}},pq=async()=>{ze.defaults.withCredentials=!0;const e=localStorage.getItem("token");e&&(ze.defaults.headers.common.Authorization=`Bearer ${e}`),ze.interceptors.response.use(n=>n,async n=>{var r;const t=n.config;if(t&&(t.url.includes("/files/")||t.url.includes("/public-files/")))return console.log("File access error:",n),Promise.reject(n);if(((r=n.response)==null?void 0:r.status)===401&&!t._retry){t._retry=!0;try{return window.location.pathname!=="/login"&&(localStorage.removeItem("token"),delete ze.defaults.headers.common.Authorization,alert("Your session has expired. Please log in again."),window.location.href="/login"),Promise.reject(n)}catch(a){return Promise.reject(a)}}return Promise.reject(n)});{const n=await fq();n&&ze.interceptors.request.use(async t=>(t.method!=="get"&&(t.headers["CSRF-Token"]=n),t),t=>Promise.reject(t))}return ze};let eg;window.location.hostname,eg="";ze.defaults.baseURL=eg;const mq=async()=>{await pq(),b1.createRoot(document.getElementById("root")).render(s.jsx(ge.StrictMode,{children:s.jsx(hq,{})}))};mq();export{ke as B,$z as E,qn as L,pn as a,dr as b,ut as c,ze as d,_t as e,Vc as f,ki as g,wl as h,CR as i,s as j,PC as k,ot as l,M as r,us as u};
//# sourceMappingURL=index-e28efbec.js.map
